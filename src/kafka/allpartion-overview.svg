<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: allpartionsoverview Pages: 1 -->
<svg width="1161pt" height="394pt"
 viewBox="0.00 0.00 1161.00 394.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 390)">
<title>allpartionsoverview</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-390 1157,-390 1157,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_zookeeper</title>
<polygon fill="none" stroke="#000000" points="2,-71 2,-315 100,-315 100,-71 2,-71"/>
<text text-anchor="middle" x="51" y="-295" font-family="Times,serif" font-size="20.00" fill="#000000">zookeeper</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_KafkaController</title>
<polygon fill="none" stroke="#000000" points="120,-124 120,-262 896,-262 896,-124 120,-124"/>
<text text-anchor="middle" x="508" y="-242" font-family="Times,serif" font-size="20.00" fill="#000000">KafkaController</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_KafkaBroker1</title>
<polygon fill="none" stroke="#000000" points="132.5,-270 132.5,-378 1145,-378 1145,-270 132.5,-270"/>
<text text-anchor="middle" x="638.75" y="-358" font-family="Times,serif" font-size="20.00" fill="#000000">KafkaBroker1</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_KafkaBroker2</title>
<polygon fill="none" stroke="#000000" points="132.5,-8 132.5,-116 1145,-116 1145,-8 132.5,-8"/>
<text text-anchor="middle" x="638.75" y="-96" font-family="Times,serif" font-size="20.00" fill="#000000">KafkaBroker2</text>
</g>
<!-- topic -->
<g id="node1" class="node">
<title>topic</title>
<polygon fill="none" stroke="#000000" points="77.5,-277 23.5,-277 23.5,-241 77.5,-241 77.5,-277"/>
<text text-anchor="middle" x="50.5" y="-255.3" font-family="Times,serif" font-size="14.00" fill="#000000">topic</text>
</g>
<!-- zkHandlers -->
<g id="node5" class="node">
<title>zkHandlers</title>
<polygon fill="none" stroke="#000000" points="128,-147.5 128,-208.5 326,-208.5 326,-147.5 128,-147.5"/>
<text text-anchor="middle" x="227" y="-193.3" font-family="Times,serif" font-size="14.00" fill="#000000">zkHandlers</text>
<polyline fill="none" stroke="#000000" points="128,-185.5 326,-185.5 "/>
<text text-anchor="start" x="136" y="-170.3" font-family="Times,serif" font-size="14.00" fill="#000000">server启动时候，注册watch zk</text>
<text text-anchor="start" x="136" y="-155.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 路径的各种handler回调</text>
</g>
<!-- topic&#45;&gt;zkHandlers -->
<g id="edge1" class="edge">
<title>topic&#45;&gt;zkHandlers</title>
<path fill="none" stroke="#000000" d="M77.6913,-246.5213C97.4133,-237.4704 125.1152,-224.7573 151.3099,-212.736"/>
<polygon fill="#000000" stroke="#000000" points="152.8682,-215.8719 160.4969,-208.5198 149.9484,-209.5098 152.8682,-215.8719"/>
</g>
<!-- controller -->
<g id="node2" class="node">
<title>controller</title>
<polygon fill="none" stroke="#000000" points="85,-223 16,-223 16,-187 85,-187 85,-223"/>
<text text-anchor="middle" x="50.5" y="-201.3" font-family="Times,serif" font-size="14.00" fill="#000000">controller</text>
</g>
<!-- controller&#45;&gt;zkHandlers -->
<g id="edge2" class="edge">
<title>controller&#45;&gt;zkHandlers</title>
<path fill="none" stroke="#000000" d="M85.3707,-199.6657C95.0058,-198.1917 106.0007,-196.5098 117.5079,-194.7495"/>
<polygon fill="#000000" stroke="#000000" points="118.3752,-198.1576 127.7309,-193.1856 117.3166,-191.2381 118.3752,-198.1576"/>
</g>
<!-- borker1_controllerChangeHandler -->
<g id="node6" class="node">
<title>borker1_controllerChangeHandler</title>
<polygon fill="none" stroke="#000000" points="140.5,-278.5 140.5,-339.5 313.5,-339.5 313.5,-278.5 140.5,-278.5"/>
<text text-anchor="middle" x="227" y="-324.3" font-family="Times,serif" font-size="14.00" fill="#000000">controllerChangeHandler</text>
<polyline fill="none" stroke="#000000" points="140.5,-316.5 313.5,-316.5 "/>
<text text-anchor="start" x="148.5" y="-301.3" font-family="Times,serif" font-size="14.00" fill="#000000">如果controller挂了，</text>
<text text-anchor="middle" x="227" y="-286.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 就自己尝试成为controller</text>
</g>
<!-- controller&#45;&gt;borker1_controllerChangeHandler -->
<g id="edge5" class="edge">
<title>controller&#45;&gt;borker1_controllerChangeHandler</title>
<path fill="none" stroke="#000000" d="M85.1837,-220.743C90.4877,-224.0181 95.6395,-227.7785 100,-232 112.5958,-244.1944 106.7115,-254.5644 120,-266 123.6491,-269.1403 127.5567,-272.07 131.6422,-274.801"/>
<polygon fill="#000000" stroke="#000000" points="129.9071,-277.8433 140.2519,-280.1315 133.592,-271.8916 129.9071,-277.8433"/>
</g>
<!-- borker2_controllerChangeHandler -->
<g id="node7" class="node">
<title>borker2_controllerChangeHandler</title>
<polygon fill="none" stroke="#000000" points="140.5,-16.5 140.5,-77.5 313.5,-77.5 313.5,-16.5 140.5,-16.5"/>
<text text-anchor="middle" x="227" y="-62.3" font-family="Times,serif" font-size="14.00" fill="#000000">controllerChangeHandler</text>
<polyline fill="none" stroke="#000000" points="140.5,-54.5 313.5,-54.5 "/>
<text text-anchor="start" x="148.5" y="-39.3" font-family="Times,serif" font-size="14.00" fill="#000000">如果controller挂了，</text>
<text text-anchor="middle" x="227" y="-24.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 就自己尝试成为controller</text>
</g>
<!-- controller&#45;&gt;borker2_controllerChangeHandler -->
<g id="edge6" class="edge">
<title>controller&#45;&gt;borker2_controllerChangeHandler</title>
<path fill="none" stroke="#000000" d="M85.1874,-190.453C90.6795,-186.9918 95.8924,-182.8594 100,-178 117.6026,-157.1757 103.4532,-141.6728 120,-120 130.7231,-105.955 144.9445,-93.6543 159.5062,-83.3505"/>
<polygon fill="#000000" stroke="#000000" points="161.7898,-86.0305 168.0955,-77.5164 157.8567,-80.2399 161.7898,-86.0305"/>
</g>
<!-- broker -->
<g id="node3" class="node">
<title>broker</title>
<polygon fill="none" stroke="#000000" points="77.5,-169 23.5,-169 23.5,-133 77.5,-133 77.5,-169"/>
<text text-anchor="middle" x="50.5" y="-147.3" font-family="Times,serif" font-size="14.00" fill="#000000">broker</text>
</g>
<!-- broker&#45;&gt;zkHandlers -->
<g id="edge3" class="edge">
<title>broker&#45;&gt;zkHandlers</title>
<path fill="none" stroke="#000000" d="M77.6913,-155.1596C88.9265,-156.8783 102.7514,-158.9931 117.4121,-161.2358"/>
<polygon fill="#000000" stroke="#000000" points="117.2595,-164.7531 127.6737,-162.8056 118.318,-157.8336 117.2595,-164.7531"/>
</g>
<!-- partition -->
<g id="node4" class="node">
<title>partition</title>
<polygon fill="none" stroke="#000000" points="81.5,-115 19.5,-115 19.5,-79 81.5,-79 81.5,-115"/>
<text text-anchor="middle" x="50.5" y="-93.3" font-family="Times,serif" font-size="14.00" fill="#000000">partition</text>
</g>
<!-- partition&#45;&gt;zkHandlers -->
<g id="edge4" class="edge">
<title>partition&#45;&gt;zkHandlers</title>
<path fill="none" stroke="#000000" d="M81.6484,-111.2947C100.9541,-120.1546 126.6491,-131.9466 151.062,-143.1503"/>
<polygon fill="#000000" stroke="#000000" points="149.7913,-146.418 160.3397,-147.408 152.711,-140.056 149.7913,-146.418"/>
</g>
<!-- PartitionStateMachine -->
<g id="node8" class="node">
<title>PartitionStateMachine</title>
<polygon fill="none" stroke="#000000" points="362,-132.5 362,-223.5 500,-223.5 500,-132.5 362,-132.5"/>
<text text-anchor="middle" x="431" y="-208.3" font-family="Times,serif" font-size="14.00" fill="#000000">PartitionStateMachine</text>
<polyline fill="none" stroke="#000000" points="362,-200.5 500,-200.5 "/>
<text text-anchor="start" x="370" y="-185.3" font-family="Times,serif" font-size="14.00" fill="#000000">管理partion状态机</text>
<text text-anchor="start" x="370" y="-170.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 并将partition状态的</text>
<text text-anchor="start" x="370" y="-155.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 改变转换为request </text>
<text text-anchor="start" x="370" y="-140.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 发送给其他borker</text>
</g>
<!-- zkHandlers&#45;&gt;PartitionStateMachine -->
<g id="edge7" class="edge">
<title>zkHandlers&#45;&gt;PartitionStateMachine</title>
<path fill="none" stroke="#000000" d="M326.0121,-178C334.6005,-178 343.2172,-178 351.6183,-178"/>
<polygon fill="#000000" stroke="#000000" points="351.7426,-181.5001 361.7426,-178 351.7425,-174.5001 351.7426,-181.5001"/>
</g>
<!-- ControllerChannelManager -->
<g id="node9" class="node">
<title>ControllerChannelManager</title>
<polygon fill="none" stroke="#000000" points="536,-147.5 536,-208.5 720,-208.5 720,-147.5 536,-147.5"/>
<text text-anchor="middle" x="628" y="-193.3" font-family="Times,serif" font-size="14.00" fill="#000000">ControllerChannelManager</text>
<polyline fill="none" stroke="#000000" points="536,-185.5 720,-185.5 "/>
<text text-anchor="start" x="544" y="-170.3" font-family="Times,serif" font-size="14.00" fill="#000000">负责管理Controller和</text>
<text text-anchor="start" x="544" y="-155.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 其他broker之间的通信线程</text>
</g>
<!-- PartitionStateMachine&#45;&gt;ControllerChannelManager -->
<g id="edge8" class="edge">
<title>PartitionStateMachine&#45;&gt;ControllerChannelManager</title>
<path fill="none" stroke="#000000" d="M500.1778,-178C508.4651,-178 517.057,-178 525.6881,-178"/>
<polygon fill="#000000" stroke="#000000" points="525.8223,-181.5001 535.8222,-178 525.8222,-174.5001 525.8223,-181.5001"/>
</g>
<!-- RequestSendThread1 -->
<g id="node10" class="node">
<title>RequestSendThread1</title>
<polygon fill="none" stroke="#000000" points="888,-223 756,-223 756,-187 888,-187 888,-223"/>
<text text-anchor="middle" x="822" y="-201.3" font-family="Times,serif" font-size="14.00" fill="#000000">RequestSendThread1</text>
</g>
<!-- ControllerChannelManager&#45;&gt;RequestSendThread1 -->
<g id="edge9" class="edge">
<title>ControllerChannelManager&#45;&gt;RequestSendThread1</title>
<path fill="none" stroke="#000000" d="M720.1707,-190.8279C728.7197,-192.0177 737.3189,-193.2145 745.7016,-194.3812"/>
<polygon fill="#000000" stroke="#000000" points="745.4145,-197.8749 755.8016,-195.7868 746.3795,-190.9417 745.4145,-197.8749"/>
</g>
<!-- RequestSendThread2 -->
<g id="node11" class="node">
<title>RequestSendThread2</title>
<polygon fill="none" stroke="#000000" points="888,-169 756,-169 756,-133 888,-133 888,-169"/>
<text text-anchor="middle" x="822" y="-147.3" font-family="Times,serif" font-size="14.00" fill="#000000">RequestSendThread2</text>
</g>
<!-- ControllerChannelManager&#45;&gt;RequestSendThread2 -->
<g id="edge10" class="edge">
<title>ControllerChannelManager&#45;&gt;RequestSendThread2</title>
<path fill="none" stroke="#000000" d="M720.1707,-165.1721C728.7197,-163.9823 737.3189,-162.7855 745.7016,-161.6188"/>
<polygon fill="#000000" stroke="#000000" points="746.3795,-165.0583 755.8016,-160.2132 745.4145,-158.1251 746.3795,-165.0583"/>
</g>
<!-- borker1_KafkaApi -->
<g id="node12" class="node">
<title>borker1_KafkaApi</title>
<polygon fill="none" stroke="#000000" points="994,-314 924,-314 924,-278 994,-278 994,-314"/>
<text text-anchor="middle" x="959" y="-292.3" font-family="Times,serif" font-size="14.00" fill="#000000">KafkaApi</text>
</g>
<!-- RequestSendThread1&#45;&gt;borker1_KafkaApi -->
<g id="edge13" class="edge">
<title>RequestSendThread1&#45;&gt;borker1_KafkaApi</title>
<path fill="none" stroke="#000000" d="M849.3947,-223.1965C870.5823,-237.27 900.0957,-256.8738 923.1598,-272.1937"/>
<polygon fill="#000000" stroke="#000000" points="921.3863,-275.2175 931.6528,-277.835 925.2594,-269.3866 921.3863,-275.2175"/>
</g>
<!-- borker2_KafkaApi -->
<g id="node14" class="node">
<title>borker2_KafkaApi</title>
<polygon fill="none" stroke="#000000" points="994,-78 924,-78 924,-42 994,-42 994,-78"/>
<text text-anchor="middle" x="959" y="-56.3" font-family="Times,serif" font-size="14.00" fill="#000000">KafkaApi</text>
</g>
<!-- RequestSendThread2&#45;&gt;borker2_KafkaApi -->
<g id="edge14" class="edge">
<title>RequestSendThread2&#45;&gt;borker2_KafkaApi</title>
<path fill="none" stroke="#000000" d="M888.192,-133.3848C890.8861,-132.0254 893.5016,-130.566 896,-129 913.5789,-117.9814 929.3179,-100.75 940.6676,-86.264"/>
<polygon fill="#000000" stroke="#000000" points="943.5858,-88.2077 946.8237,-78.1198 938.0016,-83.9867 943.5858,-88.2077"/>
</g>
<!-- borker1_ReplicaManager -->
<g id="node13" class="node">
<title>borker1_ReplicaManager</title>
<polygon fill="none" stroke="#000000" points="1137,-314 1030,-314 1030,-278 1137,-278 1137,-314"/>
<text text-anchor="middle" x="1083.5" y="-292.3" font-family="Times,serif" font-size="14.00" fill="#000000">ReplicaManager</text>
</g>
<!-- borker1_KafkaApi&#45;&gt;borker1_ReplicaManager -->
<g id="edge11" class="edge">
<title>borker1_KafkaApi&#45;&gt;borker1_ReplicaManager</title>
<path fill="none" stroke="#000000" d="M994.0115,-296C1001.9724,-296 1010.6735,-296 1019.4229,-296"/>
<polygon fill="#000000" stroke="#000000" points="1019.6746,-299.5001 1029.6745,-296 1019.6745,-292.5001 1019.6746,-299.5001"/>
</g>
<!-- borker2_ReplicaManager -->
<g id="node15" class="node">
<title>borker2_ReplicaManager</title>
<polygon fill="none" stroke="#000000" points="1137,-78 1030,-78 1030,-42 1137,-42 1137,-78"/>
<text text-anchor="middle" x="1083.5" y="-56.3" font-family="Times,serif" font-size="14.00" fill="#000000">ReplicaManager</text>
</g>
<!-- borker2_KafkaApi&#45;&gt;borker2_ReplicaManager -->
<g id="edge12" class="edge">
<title>borker2_KafkaApi&#45;&gt;borker2_ReplicaManager</title>
<path fill="none" stroke="#000000" d="M994.0115,-60C1001.9724,-60 1010.6735,-60 1019.4229,-60"/>
<polygon fill="#000000" stroke="#000000" points="1019.6746,-63.5001 1029.6745,-60 1019.6745,-56.5001 1019.6746,-63.5001"/>
</g>
</g>
</svg>
