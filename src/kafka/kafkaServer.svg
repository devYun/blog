<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: kafkaServer Pages: 1 -->
<svg width="1596pt" height="1098pt"
 viewBox="0.00 0.00 1596.00 1097.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1093.5)">
<title>kafkaServer</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1093.5 1592,-1093.5 1592,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_channel</title>
<polygon fill="none" stroke="#000000" points="1186,-93 1186,-175 1294,-175 1294,-93 1186,-93"/>
<text text-anchor="middle" x="1240" y="-155" font-family="Times,serif" font-size="20.00" fill="#000000">channel</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_FileRecords</title>
<polygon fill="none" stroke="#000000" points="1066,-209 1066,-376 1341,-376 1341,-209 1066,-209"/>
<text text-anchor="middle" x="1203.5" y="-356" font-family="Times,serif" font-size="20.00" fill="#000000">FileRecords</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_TimeIndex</title>
<polygon fill="none" stroke="#000000" points="1349,-209 1349,-376 1461,-376 1461,-209 1349,-209"/>
<text text-anchor="middle" x="1405" y="-356" font-family="Times,serif" font-size="20.00" fill="#000000">TimeIndex</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_OffsetIndex</title>
<polygon fill="none" stroke="#000000" points="1469,-294 1469,-376 1580,-376 1580,-294 1469,-294"/>
<text text-anchor="middle" x="1524.5" y="-356" font-family="Times,serif" font-size="20.00" fill="#000000">OffsetIndex</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_Segment</title>
<polygon fill="none" stroke="#000000" points="940,-209 940,-466.5 1058,-466.5 1058,-209 940,-209"/>
<text text-anchor="middle" x="999" y="-446.5" font-family="Times,serif" font-size="20.00" fill="#000000">LogSegment</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_log</title>
<polygon fill="none" stroke="#000000" points="808,-384 808,-646.5 932,-646.5 932,-384 808,-384"/>
<text text-anchor="middle" x="870" y="-626.5" font-family="Times,serif" font-size="20.00" fill="#000000">log</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_logManager</title>
<polygon fill="none" stroke="#000000" points="230,-8 230,-188 619,-188 619,-8 230,-8"/>
<text text-anchor="middle" x="424.5" y="-168" font-family="Times,serif" font-size="20.00" fill="#000000">logManager</text>
</g>
<g id="clust11" class="cluster">
<title>cluster_Partition</title>
<polygon fill="none" stroke="#000000" points="356,-196 356,-728.5 800,-728.5 800,-196 356,-196"/>
<text text-anchor="middle" x="578" y="-708.5" font-family="Times,serif" font-size="20.00" fill="#000000">Partition</text>
</g>
<g id="clust15" class="cluster">
<title>cluster_ReplicaManager</title>
<polygon fill="none" stroke="#000000" points="8,-196 8,-908.5 348,-908.5 348,-196 8,-196"/>
<text text-anchor="middle" x="178" y="-888.5" font-family="Times,serif" font-size="20.00" fill="#000000">ReplicaManager</text>
</g>
<g id="clust18" class="cluster">
<title>cluster_KafkaApi</title>
<polygon fill="none" stroke="#000000" points="41,-916.5 41,-1081.5 341,-1081.5 341,-916.5 41,-916.5"/>
<text text-anchor="middle" x="191" y="-1061.5" font-family="Times,serif" font-size="20.00" fill="#000000">KafkaApi: kafkaServer对外接口</text>
</g>
<!-- channel_write -->
<g id="node1" class="node">
<title>channel_write</title>
<polygon fill="none" stroke="#000000" points="1286.5,-137 1193.5,-137 1193.5,-101 1286.5,-101 1286.5,-137"/>
<text text-anchor="middle" x="1240" y="-115.3" font-family="Times,serif" font-size="14.00" fill="#000000">channel_write</text>
</g>
<!-- FileRecords_append -->
<g id="node2" class="node">
<title>FileRecords_append</title>
<polygon fill="none" stroke="#000000" points="1199,-338 1143,-338 1143,-302 1199,-302 1199,-338"/>
<text text-anchor="middle" x="1171" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">append</text>
</g>
<!-- MemoryRecords_writeFullyTo -->
<g id="node4" class="node">
<title>MemoryRecords_writeFullyTo</title>
<polygon fill="none" stroke="#000000" points="1333.5,-253 1146.5,-253 1146.5,-217 1333.5,-217 1333.5,-253"/>
<text text-anchor="middle" x="1240" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#000000">MemoryRecords_writeFullyTo</text>
</g>
<!-- FileRecords_append&#45;&gt;MemoryRecords_writeFullyTo -->
<g id="edge1" class="edge">
<title>FileRecords_append&#45;&gt;MemoryRecords_writeFullyTo</title>
<path fill="none" stroke="#000000" d="M1185.6331,-301.9737C1195.3301,-290.0282 1208.2035,-274.1696 1218.9892,-260.8829"/>
<polygon fill="#000000" stroke="#000000" points="1221.8028,-262.9702 1225.388,-253.0003 1216.3681,-258.5584 1221.8028,-262.9702"/>
</g>
<!-- FileRecords_slice -->
<g id="node3" class="node">
<title>FileRecords_slice</title>
<polygon fill="none" stroke="#000000" points="1128,-253 1074,-253 1074,-217 1128,-217 1128,-253"/>
<text text-anchor="middle" x="1101" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#000000">slice</text>
</g>
<!-- MemoryRecords_writeFullyTo&#45;&gt;channel_write -->
<g id="edge2" class="edge">
<title>MemoryRecords_writeFullyTo&#45;&gt;channel_write</title>
<path fill="none" stroke="#000000" d="M1240,-216.875C1240,-198.3412 1240,-169.2787 1240,-147.6311"/>
<polygon fill="#000000" stroke="#000000" points="1243.5001,-147.3805 1240,-137.3805 1236.5001,-147.3806 1243.5001,-147.3805"/>
</g>
<!-- timeIndex_maybeAppend -->
<g id="node5" class="node">
<title>timeIndex_maybeAppend</title>
<polygon fill="none" stroke="#000000" points="1453,-338 1357,-338 1357,-302 1453,-302 1453,-338"/>
<text text-anchor="middle" x="1405" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">maybeAppend</text>
</g>
<!-- mmap -->
<g id="node6" class="node">
<title>mmap</title>
<polygon fill="none" stroke="#000000" points="1442,-253 1388,-253 1388,-217 1442,-217 1442,-253"/>
<text text-anchor="middle" x="1415" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#000000">mmap</text>
</g>
<!-- timeIndex_maybeAppend&#45;&gt;mmap -->
<g id="edge3" class="edge">
<title>timeIndex_maybeAppend&#45;&gt;mmap</title>
<path fill="none" stroke="#000000" d="M1407.1207,-301.9737C1408.4466,-290.7043 1410.1821,-275.9524 1411.6867,-263.1627"/>
<polygon fill="#000000" stroke="#000000" points="1415.1898,-263.3408 1412.8823,-253.0003 1408.2378,-262.5229 1415.1898,-263.3408"/>
</g>
<!-- offsetIndex_append -->
<g id="node7" class="node">
<title>offsetIndex_append</title>
<polygon fill="none" stroke="#000000" points="1536.5,-338 1477.5,-338 1477.5,-302 1536.5,-302 1536.5,-338"/>
<text text-anchor="middle" x="1507" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">Append</text>
</g>
<!-- offsetIndex_append&#45;&gt;mmap -->
<g id="edge4" class="edge">
<title>offsetIndex_append&#45;&gt;mmap</title>
<path fill="none" stroke="#000000" d="M1487.4892,-301.9737C1474.3159,-289.8028 1456.7461,-273.5698 1442.2034,-260.1336"/>
<polygon fill="#000000" stroke="#000000" points="1444.2029,-257.2157 1434.4827,-253.0003 1439.4526,-262.3572 1444.2029,-257.2157"/>
</g>
<!-- segment_append -->
<g id="node8" class="node">
<title>segment_append</title>
<polygon fill="none" stroke="#000000" points="994,-392 994,-428 1050,-428 1050,-392 994,-392"/>
<text text-anchor="middle" x="1022" y="-406.3" font-family="Times,serif" font-size="14.00" fill="#000000">append</text>
</g>
<!-- segment_append&#45;&gt;FileRecords_append -->
<g id="edge5" class="edge">
<title>segment_append&#45;&gt;FileRecords_append</title>
<path fill="none" stroke="#000000" d="M1050.0258,-393.0717C1073.7796,-378.7237 1108.0286,-358.0364 1134.0262,-342.3332"/>
<polygon fill="#000000" stroke="#000000" points="1136.0969,-345.1714 1142.847,-337.0052 1132.4777,-339.1796 1136.0969,-345.1714"/>
</g>
<!-- segment_append&#45;&gt;timeIndex_maybeAppend -->
<g id="edge6" class="edge">
<title>segment_append&#45;&gt;timeIndex_maybeAppend</title>
<path fill="none" stroke="#000000" d="M1050.0895,-409.3155C1118.6335,-407.286 1292.6716,-399.8662 1345,-376 1360.0627,-369.1301 1373.8119,-356.9609 1384.3373,-345.7177"/>
<polygon fill="#000000" stroke="#000000" points="1387.0369,-347.9492 1391.0855,-338.1584 1381.8149,-343.2875 1387.0369,-347.9492"/>
</g>
<!-- segment_append&#45;&gt;offsetIndex_append -->
<g id="edge7" class="edge">
<title>segment_append&#45;&gt;offsetIndex_append</title>
<path fill="none" stroke="#000000" d="M1050.2921,-409.1782C1142.2304,-406.3226 1428.7382,-395.9017 1465,-376 1476.9022,-369.4677 1486.4148,-357.9718 1493.3568,-347.0886"/>
<polygon fill="#000000" stroke="#000000" points="1496.5244,-348.6069 1498.5795,-338.2133 1490.4914,-345.0568 1496.5244,-348.6069"/>
</g>
<!-- segment_read -->
<g id="node9" class="node">
<title>segment_read</title>
<polygon fill="none" stroke="#000000" points="1026,-338 972,-338 972,-302 1026,-302 1026,-338"/>
<text text-anchor="middle" x="999" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">read</text>
</g>
<!-- segment_read&#45;&gt;FileRecords_slice -->
<g id="edge8" class="edge">
<title>segment_read&#45;&gt;FileRecords_slice</title>
<path fill="none" stroke="#000000" d="M1020.6316,-301.9737C1035.3719,-289.6901 1055.0774,-273.2688 1071.2867,-259.7611"/>
<polygon fill="#000000" stroke="#000000" points="1073.958,-262.091 1079.3996,-253.0003 1069.4767,-256.7134 1073.958,-262.091"/>
</g>
<!-- translateOffset -->
<g id="node10" class="node">
<title>translateOffset</title>
<polygon fill="none" stroke="#000000" points="1047,-253 951,-253 951,-217 1047,-217 1047,-253"/>
<text text-anchor="middle" x="999" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#000000">translateOffset</text>
</g>
<!-- segment_read&#45;&gt;translateOffset -->
<g id="edge9" class="edge">
<title>segment_read&#45;&gt;translateOffset</title>
<path fill="none" stroke="#000000" d="M999,-301.9737C999,-290.7043 999,-275.9524 999,-263.1627"/>
<polygon fill="#000000" stroke="#000000" points="1002.5001,-263.0003 999,-253.0003 995.5001,-263.0004 1002.5001,-263.0003"/>
</g>
<!-- appendAsLeader -->
<g id="node11" class="node">
<title>appendAsLeader</title>
<polygon fill="none" stroke="#000000" points="924,-608.5 816,-608.5 816,-572.5 924,-572.5 924,-608.5"/>
<text text-anchor="middle" x="870" y="-586.8" font-family="Times,serif" font-size="14.00" fill="#000000">appendAsLeader</text>
</g>
<!-- append -->
<g id="node12" class="node">
<title>append</title>
<polygon fill="none" stroke="#000000" points="911,-523.5 855,-523.5 855,-487.5 911,-487.5 911,-523.5"/>
<text text-anchor="middle" x="883" y="-501.8" font-family="Times,serif" font-size="14.00" fill="#000000">append</text>
</g>
<!-- appendAsLeader&#45;&gt;append -->
<g id="edge10" class="edge">
<title>appendAsLeader&#45;&gt;append</title>
<path fill="none" stroke="#000000" d="M872.757,-572.4737C874.4805,-561.2043 876.7367,-546.4524 878.6928,-533.6627"/>
<polygon fill="#000000" stroke="#000000" points="882.1949,-533.9146 880.247,-523.5003 875.2753,-532.8562 882.1949,-533.9146"/>
</g>
<!-- append&#45;&gt;segment_append -->
<g id="edge11" class="edge">
<title>append&#45;&gt;segment_append</title>
<path fill="none" stroke="#000000" d="M909.472,-487.3124C931.5002,-472.1779 963.036,-450.5112 987.1215,-433.9633"/>
<polygon fill="#000000" stroke="#000000" points="989.3664,-436.6675 995.6265,-428.1199 985.4024,-430.8979 989.3664,-436.6675"/>
</g>
<!-- localLog_read -->
<g id="node13" class="node">
<title>localLog_read</title>
<polygon fill="none" stroke="#000000" points="897,-428 843,-428 843,-392 897,-392 897,-428"/>
<text text-anchor="middle" x="870" y="-406.3" font-family="Times,serif" font-size="14.00" fill="#000000">read</text>
</g>
<!-- localLog_read&#45;&gt;segment_read -->
<g id="edge12" class="edge">
<title>localLog_read&#45;&gt;segment_read</title>
<path fill="none" stroke="#000000" d="M896.1051,-391.7872C915.8632,-378.0024 943.1789,-358.9449 964.7007,-343.9298"/>
<polygon fill="#000000" stroke="#000000" points="966.7351,-346.7781 972.9337,-338.1858 962.7298,-341.0372 966.7351,-346.7781"/>
</g>
<!-- logCreationOrDeletionLock -->
<g id="node14" class="node">
<title>logCreationOrDeletionLock</title>
<polygon fill="#95e1d3" stroke="#000000" points="406.5,-52 241.5,-52 237.5,-48 237.5,-16 402.5,-16 406.5,-20 406.5,-52"/>
<polyline fill="none" stroke="#000000" points="402.5,-48 237.5,-48 "/>
<polyline fill="none" stroke="#000000" points="402.5,-48 402.5,-16 "/>
<polyline fill="none" stroke="#000000" points="402.5,-48 406.5,-52 "/>
<text text-anchor="middle" x="322" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#000000">logCreationOrDeletionLock</text>
</g>
<!-- getOrCreateLog -->
<g id="node15" class="node">
<title>getOrCreateLog</title>
<polygon fill="none" stroke="#000000" points="408,-88.5 408,-149.5 552,-149.5 552,-88.5 408,-88.5"/>
<text text-anchor="middle" x="480" y="-134.3" font-family="Times,serif" font-size="14.00" fill="#000000">getOrCreateLog</text>
<polyline fill="none" stroke="#000000" points="408,-126.5 552,-126.5 "/>
<text text-anchor="start" x="416" y="-111.3" font-family="Times,serif" font-size="14.00" fill="#000000">创建存储该partition</text>
<text text-anchor="start" x="416" y="-96.3" font-family="Times,serif" font-size="14.00" fill="#000000"> log segment的文件夹</text>
</g>
<!-- getOrCreateLog&#45;&gt;logCreationOrDeletionLock -->
<g id="edge13" class="edge">
<title>getOrCreateLog&#45;&gt;logCreationOrDeletionLock</title>
<path fill="none" stroke="#000000" d="M422.9584,-88.313C403.6887,-77.9465 382.5257,-66.5613 364.5749,-56.9042"/>
<polygon fill="#000000" stroke="#000000" points="365.9725,-53.6818 355.5077,-52.0263 362.656,-59.8463 365.9725,-53.6818"/>
</g>
<!-- preferredLogDirs -->
<g id="node16" class="node">
<title>preferredLogDirs</title>
<polygon fill="none" stroke="#000000" points="535.5,-52 424.5,-52 424.5,-16 535.5,-16 535.5,-52"/>
<text text-anchor="middle" x="480" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#000000">preferredLogDirs</text>
</g>
<!-- getOrCreateLog&#45;&gt;preferredLogDirs -->
<g id="edge14" class="edge">
<title>getOrCreateLog&#45;&gt;preferredLogDirs</title>
<path fill="none" stroke="#000000" d="M480,-88.313C480,-79.7535 480,-70.4995 480,-62.0972"/>
<polygon fill="#000000" stroke="#000000" points="483.5001,-62.0263 480,-52.0263 476.5001,-62.0263 483.5001,-62.0263"/>
</g>
<!-- logDirs -->
<g id="node17" class="node">
<title>logDirs</title>
<polygon fill="none" stroke="#000000" points="610.5,-52 553.5,-52 553.5,-16 610.5,-16 610.5,-52"/>
<text text-anchor="middle" x="582" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#000000">logDirs</text>
</g>
<!-- getOrCreateLog&#45;&gt;logDirs -->
<g id="edge15" class="edge">
<title>getOrCreateLog&#45;&gt;logDirs</title>
<path fill="none" stroke="#000000" d="M516.8243,-88.313C528.5795,-78.5171 541.4261,-67.8116 552.5829,-58.5142"/>
<polygon fill="#000000" stroke="#000000" points="554.9268,-61.117 560.3684,-52.0263 550.4455,-55.7394 554.9268,-61.117"/>
</g>
<!-- finishedInitializingLog -->
<g id="node18" class="node">
<title>finishedInitializingLog</title>
<polygon fill="none" stroke="#000000" points="389.5,-137 248.5,-137 248.5,-101 389.5,-101 389.5,-137"/>
<text text-anchor="middle" x="319" y="-115.3" font-family="Times,serif" font-size="14.00" fill="#000000">finishedInitializingLog</text>
</g>
<!-- appendRecordsToLeader -->
<g id="node19" class="node">
<title>appendRecordsToLeader</title>
<polygon fill="none" stroke="#000000" points="654,-690.5 502,-690.5 502,-654.5 654,-654.5 654,-690.5"/>
<text text-anchor="middle" x="578" y="-668.8" font-family="Times,serif" font-size="14.00" fill="#000000">appendRecordsToLeader</text>
</g>
<!-- appendRecordsToLeader&#45;&gt;appendAsLeader -->
<g id="edge16" class="edge">
<title>appendRecordsToLeader&#45;&gt;appendAsLeader</title>
<path fill="none" stroke="#000000" d="M654.0598,-669.3391C711.4401,-665.9755 784.7627,-659.2981 812,-646.5 826.5774,-639.6505 839.7684,-627.6441 849.8742,-616.5007"/>
<polygon fill="#000000" stroke="#000000" points="852.7849,-618.4847 856.6632,-608.6252 847.4829,-613.9142 852.7849,-618.4847"/>
</g>
<!-- partition_readRecords -->
<g id="node20" class="node">
<title>partition_readRecords</title>
<polygon fill="none" stroke="#000000" points="599,-523.5 515,-523.5 515,-487.5 599,-487.5 599,-523.5"/>
<text text-anchor="middle" x="557" y="-501.8" font-family="Times,serif" font-size="14.00" fill="#000000">readRecords</text>
</g>
<!-- partition_readRecords&#45;&gt;localLog_read -->
<g id="edge17" class="edge">
<title>partition_readRecords&#45;&gt;localLog_read</title>
<path fill="none" stroke="#000000" d="M599.2442,-501.6327C659.9235,-495.6057 768.3748,-482.9378 804,-466.5 820.0658,-459.0871 835.2661,-446.6045 847.0207,-435.2549"/>
<polygon fill="#000000" stroke="#000000" points="849.6448,-437.5799 854.222,-428.0248 844.6852,-432.64 849.6448,-437.5799"/>
</g>
<!-- localLogWithEpochOrException -->
<g id="node21" class="node">
<title>localLogWithEpochOrException</title>
<polygon fill="none" stroke="#000000" points="655,-428 459,-428 459,-392 655,-392 655,-428"/>
<text text-anchor="middle" x="557" y="-406.3" font-family="Times,serif" font-size="14.00" fill="#000000">localLogWithEpochOrException</text>
</g>
<!-- partition_readRecords&#45;&gt;localLogWithEpochOrException -->
<g id="edge18" class="edge">
<title>partition_readRecords&#45;&gt;localLogWithEpochOrException</title>
<path fill="none" stroke="#000000" d="M557,-487.0866C557,-473.2585 557,-454.0711 557,-438.2988"/>
<polygon fill="#000000" stroke="#000000" points="560.5001,-438.0329 557,-428.033 553.5001,-438.033 560.5001,-438.0329"/>
</g>
<!-- getLocalLog -->
<g id="node23" class="node">
<title>getLocalLog</title>
<polygon fill="none" stroke="#000000" points="602,-338 516,-338 516,-302 602,-302 602,-338"/>
<text text-anchor="middle" x="559" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">getLocalLog</text>
</g>
<!-- localLogWithEpochOrException&#45;&gt;getLocalLog -->
<g id="edge20" class="edge">
<title>localLogWithEpochOrException&#45;&gt;getLocalLog</title>
<path fill="none" stroke="#000000" d="M557.4047,-391.7872C557.6812,-379.3443 558.0532,-362.6053 558.3684,-348.4211"/>
<polygon fill="#000000" stroke="#000000" points="561.8727,-348.2611 558.5959,-338.1858 554.8745,-348.1055 561.8727,-348.2611"/>
</g>
<!-- fetchOffsetSnapshot -->
<g id="node22" class="node">
<title>fetchOffsetSnapshot</title>
<polygon fill="none" stroke="#000000" points="494.5,-523.5 367.5,-523.5 367.5,-487.5 494.5,-487.5 494.5,-523.5"/>
<text text-anchor="middle" x="431" y="-501.8" font-family="Times,serif" font-size="14.00" fill="#000000">fetchOffsetSnapshot</text>
</g>
<!-- fetchOffsetSnapshot&#45;&gt;localLogWithEpochOrException -->
<g id="edge19" class="edge">
<title>fetchOffsetSnapshot&#45;&gt;localLogWithEpochOrException</title>
<path fill="none" stroke="#000000" d="M454.9962,-487.3124C474.8766,-472.2443 503.3001,-450.7011 525.0958,-434.1813"/>
<polygon fill="#000000" stroke="#000000" points="527.2377,-436.9497 533.0931,-428.1199 523.0094,-431.371 527.2377,-436.9497"/>
</g>
<!-- checkCurrentLeaderEpoch -->
<g id="node24" class="node">
<title>checkCurrentLeaderEpoch</title>
<polygon fill="none" stroke="#000000" points="791.5,-253 630.5,-253 630.5,-217 791.5,-217 791.5,-253"/>
<text text-anchor="middle" x="711" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#000000">checkCurrentLeaderEpoch</text>
</g>
<!-- getLocalLog&#45;&gt;checkCurrentLeaderEpoch -->
<g id="edge21" class="edge">
<title>getLocalLog&#45;&gt;checkCurrentLeaderEpoch</title>
<path fill="none" stroke="#000000" d="M591.2353,-301.9737C614.2089,-289.1266 645.276,-271.7536 670.0113,-257.9213"/>
<polygon fill="#000000" stroke="#000000" points="671.7915,-260.936 678.8112,-253.0003 668.3749,-254.8264 671.7915,-260.936"/>
</g>
<!-- log -->
<g id="node25" class="node">
<title>log</title>
<polygon fill="#95e1d3" stroke="#000000" points="454,-204.5 454,-265.5 612,-265.5 612,-204.5 454,-204.5"/>
<text text-anchor="middle" x="533" y="-250.3" font-family="Times,serif" font-size="14.00" fill="#000000">log</text>
<polyline fill="none" stroke="#000000" points="454,-242.5 612,-242.5 "/>
<text text-anchor="start" x="462" y="-227.3" font-family="Times,serif" font-size="14.00" fill="#000000">日志对象在parition加入</text>
<text text-anchor="middle" x="533" y="-212.3" font-family="Times,serif" font-size="14.00" fill="#000000"> allpartions的时候创建</text>
</g>
<!-- getLocalLog&#45;&gt;log -->
<g id="edge22" class="edge">
<title>getLocalLog&#45;&gt;log</title>
<path fill="none" stroke="#000000" d="M553.4861,-301.9737C551.0964,-294.1613 548.1948,-284.6752 545.3361,-275.3294"/>
<polygon fill="#000000" stroke="#000000" points="548.6678,-274.2558 542.3958,-265.717 541.974,-276.3034 548.6678,-274.2558"/>
</g>
<!-- createLogIfNotExists -->
<g id="node26" class="node">
<title>createLogIfNotExists</title>
<polygon fill="none" stroke="#000000" points="497.5,-338 364.5,-338 364.5,-302 497.5,-302 497.5,-338"/>
<text text-anchor="middle" x="431" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">createLogIfNotExists</text>
</g>
<!-- createLogIfNotExists&#45;&gt;log -->
<g id="edge23" class="edge">
<title>createLogIfNotExists&#45;&gt;log</title>
<path fill="none" stroke="#000000" d="M452.6316,-301.9737C462.9933,-293.3389 475.8085,-282.6596 488.1381,-272.3849"/>
<polygon fill="#000000" stroke="#000000" points="490.698,-274.8076 496.1396,-265.717 486.2167,-269.4301 490.698,-274.8076"/>
</g>
<!-- createLog -->
<g id="node27" class="node">
<title>createLog</title>
<polygon fill="none" stroke="#000000" points="435.5,-253 364.5,-253 364.5,-217 435.5,-217 435.5,-253"/>
<text text-anchor="middle" x="400" y="-231.3" font-family="Times,serif" font-size="14.00" fill="#000000">createLog</text>
</g>
<!-- createLogIfNotExists&#45;&gt;createLog -->
<g id="edge24" class="edge">
<title>createLogIfNotExists&#45;&gt;createLog</title>
<path fill="none" stroke="#000000" d="M424.4257,-301.9737C420.2335,-290.4789 414.7199,-275.3609 409.9921,-262.3977"/>
<polygon fill="#000000" stroke="#000000" points="413.2793,-261.1958 406.5648,-253.0003 406.703,-263.5943 413.2793,-261.1958"/>
</g>
<!-- createLog&#45;&gt;getOrCreateLog -->
<g id="edge25" class="edge">
<title>createLog&#45;&gt;getOrCreateLog</title>
<path fill="none" stroke="#000000" d="M412.5,-216.875C423.3435,-201.1519 439.4129,-177.8514 453.1525,-157.9288"/>
<polygon fill="#000000" stroke="#000000" points="456.0802,-159.8486 458.8763,-149.6294 450.3177,-155.8744 456.0802,-159.8486"/>
</g>
<!-- createLog&#45;&gt;finishedInitializingLog -->
<g id="edge26" class="edge">
<title>createLog&#45;&gt;finishedInitializingLog</title>
<path fill="none" stroke="#000000" d="M387.3438,-216.875C374.0475,-197.8335 352.9909,-167.6784 337.7619,-145.8689"/>
<polygon fill="#000000" stroke="#000000" points="340.4295,-143.5757 331.8347,-137.3805 334.6902,-147.5833 340.4295,-143.5757"/>
</g>
<!-- appendToLocalLog -->
<g id="node28" class="node">
<title>appendToLocalLog</title>
<polygon fill="none" stroke="#000000" points="57,-737 57,-798 181,-798 181,-737 57,-737"/>
<text text-anchor="middle" x="119" y="-782.8" font-family="Times,serif" font-size="14.00" fill="#000000">appendToLocalLog</text>
<polyline fill="none" stroke="#000000" points="57,-775 181,-775 "/>
<text text-anchor="start" x="65" y="-759.8" font-family="Times,serif" font-size="14.00" fill="#000000">将日志写入该</text>
<text text-anchor="start" x="65" y="-744.8" font-family="Times,serif" font-size="14.00" fill="#000000"> parition的leader中</text>
</g>
<!-- appendToLocalLog&#45;&gt;appendRecordsToLeader -->
<g id="edge32" class="edge">
<title>appendToLocalLog&#45;&gt;appendRecordsToLeader</title>
<path fill="none" stroke="#000000" d="M181.1495,-744.9067C192.2946,-741.5823 203.8969,-738.5817 215,-736.5 274.9481,-725.2604 291.6979,-737.6515 352,-728.5 405.1317,-720.4367 464.0291,-705.6455 508.3745,-693.2889"/>
<polygon fill="#000000" stroke="#000000" points="509.4992,-696.6085 518.1776,-690.531 507.6034,-689.87 509.4992,-696.6085"/>
</g>
<!-- getPartitionOrException -->
<g id="node34" class="node">
<title>getPartitionOrException</title>
<polygon fill="none" stroke="#000000" points="15.5,-475 15.5,-536 164.5,-536 164.5,-475 15.5,-475"/>
<text text-anchor="middle" x="90" y="-520.8" font-family="Times,serif" font-size="14.00" fill="#000000">getPartitionOrException</text>
<polyline fill="none" stroke="#000000" points="15.5,-513 164.5,-513 "/>
<text text-anchor="start" x="23.5" y="-497.8" font-family="Times,serif" font-size="14.00" fill="#000000">从allPartions中找到</text>
<text text-anchor="start" x="23.5" y="-482.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 对应的partion对象</text>
</g>
<!-- appendToLocalLog&#45;&gt;getPartitionOrException -->
<g id="edge33" class="edge">
<title>appendToLocalLog&#45;&gt;getPartitionOrException</title>
<path fill="none" stroke="#000000" d="M115.6166,-736.9325C110.3918,-689.7297 100.3546,-599.0489 94.5158,-546.2981"/>
<polygon fill="#000000" stroke="#000000" points="97.9857,-545.832 93.4067,-536.2778 91.0282,-546.6022 97.9857,-545.832"/>
</g>
<!-- fetchMessages -->
<g id="node29" class="node">
<title>fetchMessages</title>
<polygon fill="none" stroke="#000000" points="318.5,-870.5 221.5,-870.5 221.5,-834.5 318.5,-834.5 318.5,-870.5"/>
<text text-anchor="middle" x="270" y="-848.8" font-family="Times,serif" font-size="14.00" fill="#000000">fetchMessages</text>
</g>
<!-- readFromLog -->
<g id="node30" class="node">
<title>readFromLog</title>
<polygon fill="none" stroke="#000000" points="316,-785.5 224,-785.5 224,-749.5 316,-749.5 316,-785.5"/>
<text text-anchor="middle" x="270" y="-763.8" font-family="Times,serif" font-size="14.00" fill="#000000">readFromLog</text>
</g>
<!-- fetchMessages&#45;&gt;readFromLog -->
<g id="edge27" class="edge">
<title>fetchMessages&#45;&gt;readFromLog</title>
<path fill="none" stroke="#000000" d="M270,-834.4737C270,-823.2043 270,-808.4524 270,-795.6627"/>
<polygon fill="#000000" stroke="#000000" points="273.5001,-795.5003 270,-785.5003 266.5001,-795.5004 273.5001,-795.5003"/>
</g>
<!-- readFromLocalLog -->
<g id="node31" class="node">
<title>readFromLocalLog</title>
<polygon fill="none" stroke="#000000" points="331,-690.5 209,-690.5 209,-654.5 331,-654.5 331,-690.5"/>
<text text-anchor="middle" x="270" y="-668.8" font-family="Times,serif" font-size="14.00" fill="#000000">readFromLocalLog</text>
</g>
<!-- readFromLog&#45;&gt;readFromLocalLog -->
<g id="edge28" class="edge">
<title>readFromLog&#45;&gt;readFromLocalLog</title>
<path fill="none" stroke="#000000" d="M270,-749.183C270,-735.5149 270,-716.5833 270,-700.9508"/>
<polygon fill="#000000" stroke="#000000" points="273.5001,-700.7607 270,-690.7607 266.5001,-700.7608 273.5001,-700.7607"/>
</g>
<!-- read -->
<g id="node32" class="node">
<title>read</title>
<polygon fill="none" stroke="#000000" points="297,-608.5 243,-608.5 243,-572.5 297,-572.5 297,-608.5"/>
<text text-anchor="middle" x="270" y="-586.8" font-family="Times,serif" font-size="14.00" fill="#000000">read</text>
</g>
<!-- readFromLocalLog&#45;&gt;read -->
<g id="edge29" class="edge">
<title>readFromLocalLog&#45;&gt;read</title>
<path fill="none" stroke="#000000" d="M270,-654.3015C270,-643.8976 270,-630.6215 270,-618.8768"/>
<polygon fill="#000000" stroke="#000000" points="273.5001,-618.6476 270,-608.6476 266.5001,-618.6476 273.5001,-618.6476"/>
</g>
<!-- read&#45;&gt;partition_readRecords -->
<g id="edge30" class="edge">
<title>read&#45;&gt;partition_readRecords</title>
<path fill="none" stroke="#000000" d="M297.3272,-586.8265C341.662,-580.2853 431.5039,-564.5964 503,-536.5 508.6719,-534.2711 514.4644,-531.5205 520.0494,-528.5861"/>
<polygon fill="#000000" stroke="#000000" points="522.134,-531.4331 529.1946,-523.5339 518.749,-525.3059 522.134,-531.4331"/>
</g>
<!-- read&#45;&gt;fetchOffsetSnapshot -->
<g id="edge34" class="edge">
<title>read&#45;&gt;fetchOffsetSnapshot</title>
<path fill="none" stroke="#000000" d="M297.3115,-576.0809C322.0833,-563.0026 359.018,-543.5029 387.7924,-528.3115"/>
<polygon fill="#000000" stroke="#000000" points="389.6131,-531.3081 396.8222,-523.5442 386.3449,-525.1179 389.6131,-531.3081"/>
</g>
<!-- read&#45;&gt;getPartitionOrException -->
<g id="edge35" class="edge">
<title>read&#45;&gt;getPartitionOrException</title>
<path fill="none" stroke="#000000" d="M242.6619,-577.5903C221.7206,-567.7014 191.7937,-553.5693 163.977,-540.4336"/>
<polygon fill="#000000" stroke="#000000" points="165.1775,-537.1299 154.6405,-536.0247 162.1884,-543.4597 165.1775,-537.1299"/>
</g>
<!-- findPreferredReadReplica -->
<g id="node35" class="node">
<title>findPreferredReadReplica</title>
<polygon fill="none" stroke="#000000" points="340,-523.5 182,-523.5 182,-487.5 340,-487.5 340,-523.5"/>
<text text-anchor="middle" x="261" y="-501.8" font-family="Times,serif" font-size="14.00" fill="#000000">findPreferredReadReplica</text>
</g>
<!-- read&#45;&gt;findPreferredReadReplica -->
<g id="edge36" class="edge">
<title>read&#45;&gt;findPreferredReadReplica</title>
<path fill="none" stroke="#000000" d="M268.0913,-572.4737C266.8981,-561.2043 265.3361,-546.4524 263.9819,-533.6627"/>
<polygon fill="#000000" stroke="#000000" points="267.4395,-533.0762 262.9059,-523.5003 260.4784,-533.8133 267.4395,-533.0762"/>
</g>
<!-- appendRecords -->
<g id="node33" class="node">
<title>appendRecords</title>
<polygon fill="none" stroke="#000000" points="169,-870.5 69,-870.5 69,-834.5 169,-834.5 169,-870.5"/>
<text text-anchor="middle" x="119" y="-848.8" font-family="Times,serif" font-size="14.00" fill="#000000">appendRecords</text>
</g>
<!-- appendRecords&#45;&gt;appendToLocalLog -->
<g id="edge31" class="edge">
<title>appendRecords&#45;&gt;appendToLocalLog</title>
<path fill="none" stroke="#000000" d="M119,-834.4737C119,-826.8257 119,-817.5739 119,-808.4199"/>
<polygon fill="#000000" stroke="#000000" points="122.5001,-808.217 119,-798.217 115.5001,-808.217 122.5001,-808.217"/>
</g>
<!-- getPartitionOrError -->
<g id="node36" class="node">
<title>getPartitionOrError</title>
<polygon fill="none" stroke="#000000" points="166,-428 44,-428 44,-392 166,-392 166,-428"/>
<text text-anchor="middle" x="105" y="-406.3" font-family="Times,serif" font-size="14.00" fill="#000000">getPartitionOrError</text>
</g>
<!-- getPartitionOrException&#45;&gt;getPartitionOrError -->
<g id="edge37" class="edge">
<title>getPartitionOrException&#45;&gt;getPartitionOrError</title>
<path fill="none" stroke="#000000" d="M94.8287,-474.7575C96.6778,-462.9849 98.7761,-449.6256 100.5846,-438.1114"/>
<polygon fill="#000000" stroke="#000000" points="104.0544,-438.5762 102.1486,-428.1542 97.1392,-437.49 104.0544,-438.5762"/>
</g>
<!-- getPartition -->
<g id="node37" class="node">
<title>getPartition</title>
<polygon fill="none" stroke="#000000" points="176,-338 96,-338 96,-302 176,-302 176,-338"/>
<text text-anchor="middle" x="136" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">getPartition</text>
</g>
<!-- getPartitionOrError&#45;&gt;getPartition -->
<g id="edge38" class="edge">
<title>getPartitionOrError&#45;&gt;getPartition</title>
<path fill="none" stroke="#000000" d="M111.2733,-391.7872C115.6012,-379.2223 121.438,-362.2766 126.354,-348.0046"/>
<polygon fill="#000000" stroke="#000000" points="129.7885,-348.7805 129.736,-338.1858 123.1701,-346.5008 129.7885,-348.7805"/>
</g>
<!-- allPartitions -->
<g id="node38" class="node">
<title>allPartitions</title>
<polygon fill="#95e1d3" stroke="#000000" points="16,-204.5 16,-265.5 288,-265.5 288,-204.5 16,-204.5"/>
<text text-anchor="middle" x="152" y="-250.3" font-family="Times,serif" font-size="14.00" fill="#000000">allPartitions</text>
<polyline fill="none" stroke="#000000" points="16,-242.5 288,-242.5 "/>
<text text-anchor="start" x="24" y="-227.3" font-family="Times,serif" font-size="14.00" fill="#000000">replicaManager本地缓存的所有parition集合</text>
<text text-anchor="start" x="24" y="-212.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 由KafkaController来同步</text>
</g>
<!-- getPartition&#45;&gt;allPartitions -->
<g id="edge39" class="edge">
<title>getPartition&#45;&gt;allPartitions</title>
<path fill="none" stroke="#000000" d="M139.3932,-301.9737C140.8483,-294.2435 142.6118,-284.8747 144.353,-275.6246"/>
<polygon fill="#000000" stroke="#000000" points="147.8076,-276.1919 146.218,-265.717 140.9284,-274.8969 147.8076,-276.1919"/>
</g>
<!-- handle -->
<g id="node39" class="node">
<title>handle</title>
<polygon fill="none" stroke="#000000" points="110,-997 110,-1043 272,-1043 272,-997 110,-997"/>
<text text-anchor="middle" x="191" y="-1027.8" font-family="Times,serif" font-size="14.00" fill="#000000">handle</text>
<polyline fill="none" stroke="#000000" points="110,-1020 272,-1020 "/>
<text text-anchor="start" x="118" y="-1004.8" font-family="Times,serif" font-size="14.00" fill="#000000">KafkaServer api处理入口</text>
</g>
<!-- handleProduceRequest -->
<g id="node40" class="node">
<title>handleProduceRequest</title>
<polygon fill="none" stroke="#000000" points="189,-960.5 49,-960.5 49,-924.5 189,-924.5 189,-960.5"/>
<text text-anchor="middle" x="119" y="-938.8" font-family="Times,serif" font-size="14.00" fill="#000000">handleProduceRequest</text>
</g>
<!-- handle&#45;&gt;handleProduceRequest -->
<g id="edge40" class="edge">
<title>handle&#45;&gt;handleProduceRequest</title>
<path fill="none" stroke="#000000" d="M169.3976,-996.7474C160.9838,-987.6909 151.3137,-977.2821 142.7084,-968.0195"/>
<polygon fill="#000000" stroke="#000000" points="145.152,-965.5074 135.7814,-960.5633 140.0236,-970.2718 145.152,-965.5074"/>
</g>
<!-- handleFetchRequest -->
<g id="node41" class="node">
<title>handleFetchRequest</title>
<polygon fill="none" stroke="#000000" points="333,-960.5 207,-960.5 207,-924.5 333,-924.5 333,-960.5"/>
<text text-anchor="middle" x="270" y="-938.8" font-family="Times,serif" font-size="14.00" fill="#000000">handleFetchRequest</text>
</g>
<!-- handle&#45;&gt;handleFetchRequest -->
<g id="edge41" class="edge">
<title>handle&#45;&gt;handleFetchRequest</title>
<path fill="none" stroke="#000000" d="M214.7026,-996.7474C224.0268,-987.6003 234.757,-977.0738 244.2695,-967.742"/>
<polygon fill="#000000" stroke="#000000" points="246.8996,-970.0648 251.5871,-960.5633 241.9975,-965.0678 246.8996,-970.0648"/>
</g>
<!-- handleProduceRequest&#45;&gt;appendRecords -->
<g id="edge43" class="edge">
<title>handleProduceRequest&#45;&gt;appendRecords</title>
<path fill="none" stroke="#000000" d="M119,-924.2872C119,-911.8443 119,-895.1053 119,-880.9211"/>
<polygon fill="#000000" stroke="#000000" points="122.5001,-880.6857 119,-870.6858 115.5001,-880.6858 122.5001,-880.6857"/>
</g>
<!-- handleFetchRequest&#45;&gt;fetchMessages -->
<g id="edge42" class="edge">
<title>handleFetchRequest&#45;&gt;fetchMessages</title>
<path fill="none" stroke="#000000" d="M270,-924.2872C270,-911.8443 270,-895.1053 270,-880.9211"/>
<polygon fill="#000000" stroke="#000000" points="273.5001,-880.6857 270,-870.6858 266.5001,-880.6858 273.5001,-880.6857"/>
</g>
</g>
</svg>
