<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: log_read_write Pages: 1 -->
<svg width="1775pt" height="920pt"
 viewBox="0.00 0.00 1775.00 920.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 916)">
<title>log_read_write</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-916 1771,-916 1771,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_log</title>
<polygon fill="none" stroke="#000000" points="196,-726 196,-904 1217,-904 1217,-726 196,-726"/>
<text text-anchor="middle" x="706.5" y="-884" font-family="Times,serif" font-size="20.00" fill="#000000">log</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_channel</title>
<polygon fill="none" stroke="#000000" points="1084,-8 1084,-90 1266,-90 1266,-8 1084,-8"/>
<text text-anchor="middle" x="1175" y="-70" font-family="Times,serif" font-size="20.00" fill="#000000">nio.files.FileChannel</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_record</title>
<polygon fill="none" stroke="#000000" points="1312,-125 1312,-261 1759,-261 1759,-125 1312,-125"/>
<text text-anchor="middle" x="1535.5" y="-241" font-family="Times,serif" font-size="20.00" fill="#000000">record</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_FileRecords</title>
<polygon fill="none" stroke="#000000" points="694.5,-98 694.5,-234 1226.5,-234 1226.5,-98 694.5,-98"/>
<text text-anchor="middle" x="960.5" y="-214" font-family="Times,serif" font-size="20.00" fill="#000000">FileRecords</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_TimeIndex</title>
<polygon fill="none" stroke="#000000" points="674.5,-242 674.5,-324 786.5,-324 786.5,-242 674.5,-242"/>
<text text-anchor="middle" x="730.5" y="-304" font-family="Times,serif" font-size="20.00" fill="#000000">TimeIndex</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_OffsetIndex</title>
<polygon fill="none" stroke="#000000" points="693,-332 693,-522 1575.5,-522 1575.5,-332 693,-332"/>
<text text-anchor="middle" x="1134.25" y="-502" font-family="Times,serif" font-size="20.00" fill="#000000">OffsetIndex</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_Segment</title>
<polygon fill="none" stroke="#000000" points="525.5,-530 525.5,-718 1024,-718 1024,-530 525.5,-530"/>
<text text-anchor="middle" x="774.75" y="-698" font-family="Times,serif" font-size="20.00" fill="#000000">LogSegment</text>
</g>
<g id="clust20" class="cluster">
<title>cluster_partition</title>
<polygon fill="none" stroke="#000000" points="8,-736 8,-872 176,-872 176,-736 8,-736"/>
<text text-anchor="middle" x="92" y="-852" font-family="Times,serif" font-size="20.00" fill="#000000">partition</text>
</g>
<!-- channel_write -->
<g id="node1" class="node">
<title>channel_write</title>
<polygon fill="none" stroke="#000000" points="1202,-52 1148,-52 1148,-16 1202,-16 1202,-52"/>
<text text-anchor="middle" x="1175" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#000000">write</text>
</g>
<!-- batchIterator -->
<g id="node2" class="node">
<title>batchIterator</title>
<polygon fill="none" stroke="#000000" points="1406,-196 1320,-196 1320,-160 1406,-160 1406,-196"/>
<text text-anchor="middle" x="1363" y="-174.3" font-family="Times,serif" font-size="14.00" fill="#000000">batchIterator</text>
</g>
<!-- FileLogInputStream -->
<g id="node3" class="node">
<title>FileLogInputStream</title>
<polygon fill="none" stroke="#000000" points="1587,-169 1460,-169 1460,-133 1587,-133 1587,-169"/>
<text text-anchor="middle" x="1523.5" y="-147.3" font-family="Times,serif" font-size="14.00" fill="#000000">FileLogInputStream</text>
</g>
<!-- batchIterator&#45;&gt;FileLogInputStream -->
<g id="edge1" class="edge">
<title>batchIterator&#45;&gt;FileLogInputStream</title>
<path fill="none" stroke="#000000" d="M1406.0111,-170.7645C1419.4403,-168.5054 1434.6572,-165.9455 1449.5803,-163.4351"/>
<polygon fill="#000000" stroke="#000000" points="1450.5584,-166.8198 1459.8392,-161.7093 1449.3971,-159.9168 1450.5584,-166.8198"/>
</g>
<!-- RecordBatchIterator -->
<g id="node5" class="node">
<title>RecordBatchIterator</title>
<polygon fill="none" stroke="#000000" points="1587,-223 1460,-223 1460,-187 1587,-187 1587,-223"/>
<text text-anchor="middle" x="1523.5" y="-201.3" font-family="Times,serif" font-size="14.00" fill="#000000">RecordBatchIterator</text>
</g>
<!-- batchIterator&#45;&gt;RecordBatchIterator -->
<g id="edge3" class="edge">
<title>batchIterator&#45;&gt;RecordBatchIterator</title>
<path fill="none" stroke="#000000" d="M1406.0111,-185.2355C1419.4403,-187.4946 1434.6572,-190.0545 1449.5803,-192.5649"/>
<polygon fill="#000000" stroke="#000000" points="1449.3971,-196.0832 1459.8392,-194.2907 1450.5584,-189.1802 1449.3971,-196.0832"/>
</g>
<!-- DefaultRecordBatch -->
<g id="node4" class="node">
<title>DefaultRecordBatch</title>
<polygon fill="none" stroke="#000000" points="1751,-169 1623,-169 1623,-133 1751,-133 1751,-169"/>
<text text-anchor="middle" x="1687" y="-147.3" font-family="Times,serif" font-size="14.00" fill="#000000">DefaultRecordBatch</text>
</g>
<!-- FileLogInputStream&#45;&gt;DefaultRecordBatch -->
<g id="edge2" class="edge">
<title>FileLogInputStream&#45;&gt;DefaultRecordBatch</title>
<path fill="none" stroke="#000000" d="M1587.1815,-151C1595.624,-151 1604.3371,-151 1612.9357,-151"/>
<polygon fill="#000000" stroke="#000000" points="1612.9542,-154.5001 1622.9541,-151 1612.9541,-147.5001 1612.9542,-154.5001"/>
</g>
<!-- FileRecords_append -->
<g id="node6" class="node">
<title>FileRecords_append</title>
<polygon fill="none" stroke="#000000" points="758.5,-142 702.5,-142 702.5,-106 758.5,-106 758.5,-142"/>
<text text-anchor="middle" x="730.5" y="-120.3" font-family="Times,serif" font-size="14.00" fill="#000000">append</text>
</g>
<!-- MemoryRecords_writeFullyTo -->
<g id="node8" class="node">
<title>MemoryRecords_writeFullyTo</title>
<polygon fill="none" stroke="#000000" points="1048,-142 861,-142 861,-106 1048,-106 1048,-142"/>
<text text-anchor="middle" x="954.5" y="-120.3" font-family="Times,serif" font-size="14.00" fill="#000000">MemoryRecords_writeFullyTo</text>
</g>
<!-- FileRecords_append&#45;&gt;MemoryRecords_writeFullyTo -->
<g id="edge4" class="edge">
<title>FileRecords_append&#45;&gt;MemoryRecords_writeFullyTo</title>
<path fill="none" stroke="#000000" d="M758.8698,-124C782.2345,-124 816.8808,-124 850.5515,-124"/>
<polygon fill="#000000" stroke="#000000" points="850.9562,-127.5001 860.9562,-124 850.9562,-120.5001 850.9562,-127.5001"/>
</g>
<!-- FileRecords_slice -->
<g id="node7" class="node">
<title>FileRecords_slice</title>
<polygon fill="none" stroke="#000000" points="757.5,-196 703.5,-196 703.5,-160 757.5,-160 757.5,-196"/>
<text text-anchor="middle" x="730.5" y="-174.3" font-family="Times,serif" font-size="14.00" fill="#000000">slice</text>
</g>
<!-- new_FileRecords -->
<g id="node9" class="node">
<title>new_FileRecords</title>
<polygon fill="none" stroke="#000000" points="1010,-196 899,-196 899,-160 1010,-160 1010,-196"/>
<text text-anchor="middle" x="954.5" y="-174.3" font-family="Times,serif" font-size="14.00" fill="#000000">new_FileRecords</text>
</g>
<!-- FileRecords_slice&#45;&gt;new_FileRecords -->
<g id="edge6" class="edge">
<title>FileRecords_slice&#45;&gt;new_FileRecords</title>
<path fill="none" stroke="#000000" d="M757.5196,-178C789.7295,-178 844.6875,-178 888.3817,-178"/>
<polygon fill="#000000" stroke="#000000" points="888.6557,-181.5001 898.6557,-178 888.6556,-174.5001 888.6557,-181.5001"/>
</g>
<!-- MemoryRecords_writeFullyTo&#45;&gt;channel_write -->
<g id="edge5" class="edge">
<title>MemoryRecords_writeFullyTo&#45;&gt;channel_write</title>
<path fill="none" stroke="#000000" d="M998.8562,-105.8954C1039.7236,-89.2148 1099.6709,-64.7466 1138.0158,-49.0956"/>
<polygon fill="#000000" stroke="#000000" points="1139.8132,-52.1424 1147.749,-45.1229 1137.1679,-45.6614 1139.8132,-52.1424"/>
</g>
<!-- batchesFrom -->
<g id="node10" class="node">
<title>batchesFrom</title>
<polygon fill="none" stroke="#000000" points="1218.5,-196 1131.5,-196 1131.5,-160 1218.5,-160 1218.5,-196"/>
<text text-anchor="middle" x="1175" y="-174.3" font-family="Times,serif" font-size="14.00" fill="#000000">batchesFrom</text>
</g>
<!-- new_FileRecords&#45;&gt;batchesFrom -->
<g id="edge7" class="edge">
<title>new_FileRecords&#45;&gt;batchesFrom</title>
<path fill="none" stroke="#000000" d="M1010.1415,-178C1044.1337,-178 1087.3917,-178 1121.0668,-178"/>
<polygon fill="#000000" stroke="#000000" points="1121.1892,-181.5001 1131.1892,-178 1121.1891,-174.5001 1121.1892,-181.5001"/>
</g>
<!-- batchesFrom&#45;&gt;batchIterator -->
<g id="edge8" class="edge">
<title>batchesFrom&#45;&gt;batchIterator</title>
<path fill="none" stroke="#000000" d="M1218.6035,-178C1245.7501,-178 1280.8581,-178 1309.6586,-178"/>
<polygon fill="#000000" stroke="#000000" points="1309.9575,-181.5001 1319.9574,-178 1309.9574,-174.5001 1309.9575,-181.5001"/>
</g>
<!-- timeIndex_maybeAppend -->
<g id="node11" class="node">
<title>timeIndex_maybeAppend</title>
<polygon fill="none" stroke="#000000" points="778.5,-286 682.5,-286 682.5,-250 778.5,-250 778.5,-286"/>
<text text-anchor="middle" x="730.5" y="-264.3" font-family="Times,serif" font-size="14.00" fill="#000000">maybeAppend</text>
</g>
<!-- mmap -->
<g id="node12" class="node">
<title>mmap</title>
<polygon fill="none" stroke="#000000" points="981.5,-304 927.5,-304 927.5,-268 981.5,-268 981.5,-304"/>
<text text-anchor="middle" x="954.5" y="-282.3" font-family="Times,serif" font-size="14.00" fill="#000000">mmap</text>
</g>
<!-- timeIndex_maybeAppend&#45;&gt;mmap -->
<g id="edge9" class="edge">
<title>timeIndex_maybeAppend&#45;&gt;mmap</title>
<path fill="none" stroke="#000000" d="M778.5536,-271.8615C820.0327,-275.1946 879.1095,-279.9418 917.13,-282.9971"/>
<polygon fill="#000000" stroke="#000000" points="917.015,-286.499 927.2633,-283.8113 917.5758,-279.5215 917.015,-286.499"/>
</g>
<!-- offsetIndex_append -->
<g id="node13" class="node">
<title>offsetIndex_append</title>
<polygon fill="none" stroke="#000000" points="760,-430 701,-430 701,-394 760,-394 760,-430"/>
<text text-anchor="middle" x="730.5" y="-408.3" font-family="Times,serif" font-size="14.00" fill="#000000">Append</text>
</g>
<!-- offsetIndex_append&#45;&gt;mmap -->
<g id="edge10" class="edge">
<title>offsetIndex_append&#45;&gt;mmap</title>
<path fill="none" stroke="#000000" d="M756.2902,-393.7581C782.1218,-375.8843 823.3431,-348.4281 861,-328 879.3449,-318.0482 900.5051,-308.3998 918.0509,-300.8655"/>
<polygon fill="#000000" stroke="#000000" points="919.5447,-304.0338 927.3858,-296.9087 916.8128,-297.5888 919.5447,-304.0338"/>
</g>
<!-- offsetIndex_lookup -->
<g id="node14" class="node">
<title>offsetIndex_lookup</title>
<polygon fill="none" stroke="#000000" points="981.5,-484 927.5,-484 927.5,-448 981.5,-448 981.5,-484"/>
<text text-anchor="middle" x="954.5" y="-462.3" font-family="Times,serif" font-size="14.00" fill="#000000">lookup</text>
</g>
<!-- largestLowerBoundSlotFor -->
<g id="node15" class="node">
<title>largestLowerBoundSlotFor</title>
<polygon fill="none" stroke="#000000" points="1257,-430 1093,-430 1093,-394 1257,-394 1257,-430"/>
<text text-anchor="middle" x="1175" y="-408.3" font-family="Times,serif" font-size="14.00" fill="#000000">largestLowerBoundSlotFor</text>
</g>
<!-- offsetIndex_lookup&#45;&gt;largestLowerBoundSlotFor -->
<g id="edge11" class="edge">
<title>offsetIndex_lookup&#45;&gt;largestLowerBoundSlotFor</title>
<path fill="none" stroke="#000000" d="M981.5376,-459.3785C1008.8896,-452.6801 1052.5779,-441.9809 1091.5224,-432.4435"/>
<polygon fill="#000000" stroke="#000000" points="1092.4281,-435.8252 1101.3085,-430.0469 1090.7629,-429.0261 1092.4281,-435.8252"/>
</g>
<!-- parseEntry -->
<g id="node16" class="node">
<title>parseEntry</title>
<polygon fill="none" stroke="#000000" points="1212.5,-484 1137.5,-484 1137.5,-448 1212.5,-448 1212.5,-484"/>
<text text-anchor="middle" x="1175" y="-462.3" font-family="Times,serif" font-size="14.00" fill="#000000">parseEntry</text>
</g>
<!-- offsetIndex_lookup&#45;&gt;parseEntry -->
<g id="edge12" class="edge">
<title>offsetIndex_lookup&#45;&gt;parseEntry</title>
<path fill="none" stroke="#000000" d="M981.5376,-466C1017.812,-466 1082.819,-466 1127.388,-466"/>
<polygon fill="#000000" stroke="#000000" points="1127.4078,-469.5001 1137.4078,-466 1127.4077,-462.5001 1127.4078,-469.5001"/>
</g>
<!-- indexSlotRangeFor -->
<g id="node17" class="node">
<title>indexSlotRangeFor</title>
<polygon fill="none" stroke="#000000" points="1424,-430 1302,-430 1302,-394 1424,-394 1424,-430"/>
<text text-anchor="middle" x="1363" y="-408.3" font-family="Times,serif" font-size="14.00" fill="#000000">indexSlotRangeFor</text>
</g>
<!-- largestLowerBoundSlotFor&#45;&gt;indexSlotRangeFor -->
<g id="edge13" class="edge">
<title>largestLowerBoundSlotFor&#45;&gt;indexSlotRangeFor</title>
<path fill="none" stroke="#000000" d="M1257.186,-412C1268.6844,-412 1280.4224,-412 1291.6971,-412"/>
<polygon fill="#000000" stroke="#000000" points="1291.9009,-415.5001 1301.9009,-412 1291.9009,-408.5001 1291.9009,-415.5001"/>
</g>
<!-- binarySearch -->
<g id="node18" class="node">
<title>binarySearch</title>
<polygon fill="none" stroke="#000000" points="1567.5,-430 1479.5,-430 1479.5,-394 1567.5,-394 1567.5,-430"/>
<text text-anchor="middle" x="1523.5" y="-408.3" font-family="Times,serif" font-size="14.00" fill="#000000">binarySearch</text>
</g>
<!-- indexSlotRangeFor&#45;&gt;binarySearch -->
<g id="edge14" class="edge">
<title>indexSlotRangeFor&#45;&gt;binarySearch</title>
<path fill="none" stroke="#000000" d="M1424.136,-412C1438.9635,-412 1454.7153,-412 1469.2026,-412"/>
<polygon fill="#000000" stroke="#000000" points="1469.4968,-415.5001 1479.4968,-412 1469.4967,-408.5001 1469.4968,-415.5001"/>
</g>
<!-- searchForOffsetWithSize -->
<g id="node19" class="node">
<title>searchForOffsetWithSize</title>
<polygon fill="none" stroke="#000000" points="1032,-376 877,-376 877,-340 1032,-340 1032,-376"/>
<text text-anchor="middle" x="954.5" y="-354.3" font-family="Times,serif" font-size="14.00" fill="#000000">searchForOffsetWithSize</text>
</g>
<!-- searchForOffsetWithSize&#45;&gt;batchesFrom -->
<g id="edge15" class="edge">
<title>searchForOffsetWithSize&#45;&gt;batchesFrom</title>
<path fill="none" stroke="#000000" d="M1000.6321,-339.8765C1016.37,-332.6572 1033.6127,-323.5395 1048,-313 1091.2362,-281.3271 1131.9716,-233.7219 1155.1582,-204.3235"/>
<polygon fill="#000000" stroke="#000000" points="1158.115,-206.2231 1161.4972,-196.1826 1152.5918,-201.9225 1158.115,-206.2231"/>
</g>
<!-- LogOffsetPosition -->
<g id="node20" class="node">
<title>LogOffsetPosition</title>
<polygon fill="none" stroke="#000000" points="1233,-376 1117,-376 1117,-340 1233,-340 1233,-376"/>
<text text-anchor="middle" x="1175" y="-354.3" font-family="Times,serif" font-size="14.00" fill="#000000">LogOffsetPosition</text>
</g>
<!-- searchForOffsetWithSize&#45;&gt;LogOffsetPosition -->
<g id="edge16" class="edge">
<title>searchForOffsetWithSize&#45;&gt;LogOffsetPosition</title>
<path fill="none" stroke="#000000" d="M1032.2401,-358C1056.4338,-358 1082.9213,-358 1106.4404,-358"/>
<polygon fill="#000000" stroke="#000000" points="1106.6696,-361.5001 1116.6695,-358 1106.6695,-354.5001 1106.6696,-361.5001"/>
</g>
<!-- segment_append -->
<g id="node21" class="node">
<title>segment_append</title>
<polygon fill="none" stroke="#000000" points="533.5,-539 533.5,-575 589.5,-575 589.5,-539 533.5,-539"/>
<text text-anchor="middle" x="561.5" y="-553.3" font-family="Times,serif" font-size="14.00" fill="#000000">append</text>
</g>
<!-- segment_append&#45;&gt;FileRecords_append -->
<g id="edge17" class="edge">
<title>segment_append&#45;&gt;FileRecords_append</title>
<path fill="none" stroke="#000000" d="M562.3625,-538.6347C566.0798,-467.2587 583.022,-209.3728 636,-151 650.1916,-135.3633 672.7469,-128.5351 692.2628,-125.6531"/>
<polygon fill="#000000" stroke="#000000" points="692.9038,-129.1019 702.4245,-124.4534 692.083,-122.1501 692.9038,-129.1019"/>
</g>
<!-- segment_append&#45;&gt;timeIndex_maybeAppend -->
<g id="edge18" class="edge">
<title>segment_append&#45;&gt;timeIndex_maybeAppend</title>
<path fill="none" stroke="#000000" d="M563.2414,-538.716C568.0223,-497.1875 584.618,-394.2307 636,-328 647.6592,-312.9715 664.2164,-300.6642 680.2222,-291.1941"/>
<polygon fill="#000000" stroke="#000000" points="682.0355,-294.1897 689.0229,-286.2256 678.5941,-288.094 682.0355,-294.1897"/>
</g>
<!-- segment_append&#45;&gt;offsetIndex_append -->
<g id="edge19" class="edge">
<title>segment_append&#45;&gt;offsetIndex_append</title>
<path fill="none" stroke="#000000" d="M582.5623,-538.9288C612.6255,-513.1349 667.935,-465.68 701.7454,-436.6711"/>
<polygon fill="#000000" stroke="#000000" points="704.1281,-439.2385 709.4384,-430.0706 699.5699,-433.9259 704.1281,-439.2385"/>
</g>
<!-- segment_read -->
<g id="node22" class="node">
<title>segment_read</title>
<polygon fill="none" stroke="#000000" points="588.5,-630 534.5,-630 534.5,-594 588.5,-594 588.5,-630"/>
<text text-anchor="middle" x="561.5" y="-608.3" font-family="Times,serif" font-size="14.00" fill="#000000">read</text>
</g>
<!-- segment_read&#45;&gt;FileRecords_slice -->
<g id="edge20" class="edge">
<title>segment_read&#45;&gt;FileRecords_slice</title>
<path fill="none" stroke="#000000" d="M588.7534,-596.7553C593.1618,-593.1273 597.1937,-588.8692 600,-584 677.2019,-450.0467 554.6114,-369.4515 636,-238 649.3074,-216.5071 673.4897,-201.365 694.0597,-191.669"/>
<polygon fill="#000000" stroke="#000000" points="695.4949,-194.8612 703.2045,-187.594 692.6457,-188.4673 695.4949,-194.8612"/>
</g>
<!-- translateOffset -->
<g id="node23" class="node">
<title>translateOffset</title>
<polygon fill="none" stroke="#000000" points="636,-538.5 636,-599.5 825,-599.5 825,-538.5 636,-538.5"/>
<text text-anchor="middle" x="730.5" y="-584.3" font-family="Times,serif" font-size="14.00" fill="#000000">translateOffset</text>
<polyline fill="none" stroke="#000000" points="636,-576.5 825,-576.5 "/>
<text text-anchor="start" x="644" y="-561.3" font-family="Times,serif" font-size="14.00" fill="#000000">根据index文件，查找消息Ｎ</text>
<text text-anchor="start" x="644" y="-546.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 在segment文件中的offset</text>
</g>
<!-- segment_read&#45;&gt;translateOffset -->
<g id="edge21" class="edge">
<title>segment_read&#45;&gt;translateOffset</title>
<path fill="none" stroke="#000000" d="M588.6528,-605.0913C599.2393,-602.3977 612.0996,-599.1255 625.7062,-595.6635"/>
<polygon fill="#000000" stroke="#000000" points="626.8957,-598.9725 635.7238,-593.1146 625.1696,-592.1886 626.8957,-598.9725"/>
</g>
<!-- translateOffset&#45;&gt;offsetIndex_lookup -->
<g id="edge22" class="edge">
<title>translateOffset&#45;&gt;offsetIndex_lookup</title>
<path fill="none" stroke="#000000" d="M797.893,-538.4025C807.0085,-534.244 816.2364,-530.024 825,-526 856.4868,-511.5423 892.212,-494.978 918.1518,-482.9217"/>
<polygon fill="#000000" stroke="#000000" points="919.6478,-486.086 927.2399,-478.696 916.6965,-479.7385 919.6478,-486.086"/>
</g>
<!-- translateOffset&#45;&gt;searchForOffsetWithSize -->
<g id="edge23" class="edge">
<title>translateOffset&#45;&gt;searchForOffsetWithSize</title>
<path fill="none" stroke="#000000" d="M810.3847,-538.3365C815.6663,-534.6382 820.6171,-530.5376 825,-526 854.0722,-495.9015 836.5286,-472.945 861,-439 876.8637,-416.995 899.8346,-396.9859 919.0377,-382.3599"/>
<polygon fill="#000000" stroke="#000000" points="921.3436,-385.0069 927.28,-376.2314 917.1668,-379.3895 921.3436,-385.0069"/>
</g>
<!-- shouldRoll -->
<g id="node24" class="node">
<title>shouldRoll</title>
<polygon fill="none" stroke="#000000" points="642.5,-618.5 642.5,-679.5 818.5,-679.5 818.5,-618.5 642.5,-618.5"/>
<text text-anchor="middle" x="730.5" y="-664.3" font-family="Times,serif" font-size="14.00" fill="#000000">shouldRoll</text>
<polyline fill="none" stroke="#000000" points="642.5,-656.5 818.5,-656.5 "/>
<text text-anchor="start" x="650.5" y="-641.3" font-family="Times,serif" font-size="14.00" fill="#000000">根据segment大小时间限制</text>
<text text-anchor="start" x="650.5" y="-626.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 来判断是否要roll</text>
</g>
<!-- maxSegmentBytes -->
<g id="node25" class="node">
<title>maxSegmentBytes</title>
<polygon fill="none" stroke="#000000" points="1014,-619 895,-619 895,-583 1014,-583 1014,-619"/>
<text text-anchor="middle" x="954.5" y="-597.3" font-family="Times,serif" font-size="14.00" fill="#000000">maxSegmentBytes</text>
</g>
<!-- shouldRoll&#45;&gt;maxSegmentBytes -->
<g id="edge24" class="edge">
<title>shouldRoll&#45;&gt;maxSegmentBytes</title>
<path fill="none" stroke="#000000" d="M818.7092,-630.098C840.5934,-625.4086 863.748,-620.4468 884.6187,-615.9746"/>
<polygon fill="#000000" stroke="#000000" points="885.6206,-619.3394 894.6653,-613.8217 884.1539,-612.4948 885.6206,-619.3394"/>
</g>
<!-- timeWaitedForRoll -->
<g id="node26" class="node">
<title>timeWaitedForRoll</title>
<polygon fill="none" stroke="#000000" points="1016,-673 893,-673 893,-637 1016,-637 1016,-673"/>
<text text-anchor="middle" x="954.5" y="-651.3" font-family="Times,serif" font-size="14.00" fill="#000000">timeWaitedForRoll</text>
</g>
<!-- shouldRoll&#45;&gt;timeWaitedForRoll -->
<g id="edge25" class="edge">
<title>shouldRoll&#45;&gt;timeWaitedForRoll</title>
<path fill="none" stroke="#000000" d="M818.7092,-651.3627C839.9702,-651.9322 862.4304,-652.5339 882.8304,-653.0803"/>
<polygon fill="#000000" stroke="#000000" points="882.8878,-656.583 892.9779,-653.3521 883.0753,-649.5855 882.8878,-656.583"/>
</g>
<!-- localLog_read -->
<g id="node27" class="node">
<title>localLog_read</title>
<polygon fill="none" stroke="#000000" points="204,-789 204,-865 395,-865 395,-789 204,-789"/>
<text text-anchor="middle" x="299.5" y="-849.8" font-family="Times,serif" font-size="14.00" fill="#000000">read</text>
<polyline fill="none" stroke="#000000" points="204,-842 395,-842 "/>
<text text-anchor="start" x="212" y="-826.8" font-family="Times,serif" font-size="14.00" fill="#000000">根据startOffset,从segments</text>
<text text-anchor="start" x="212" y="-811.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 中找到segment, 从该segment</text>
<text text-anchor="start" x="212" y="-796.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 中读取消息</text>
</g>
<!-- localLog_read&#45;&gt;segment_read -->
<g id="edge36" class="edge">
<title>localLog_read&#45;&gt;segment_read</title>
<path fill="none" stroke="#000000" d="M382.5621,-788.7893C386.9257,-785.7064 391.1084,-782.4426 395,-779 416.604,-759.8881 411.9247,-746.6364 431,-725 460.8158,-691.1811 500.6546,-658.0872 528.4403,-636.5449"/>
<polygon fill="#000000" stroke="#000000" points="530.8502,-639.1073 536.652,-630.2421 526.5882,-633.5543 530.8502,-639.1073"/>
</g>
<!-- segments -->
<g id="node30" class="node">
<title>segments</title>
<polygon fill="#95e1d3" stroke="#000000" points="1209,-824 1145,-824 1141,-820 1141,-788 1205,-788 1209,-792 1209,-824"/>
<polyline fill="none" stroke="#000000" points="1205,-820 1141,-820 "/>
<polyline fill="none" stroke="#000000" points="1205,-820 1205,-788 "/>
<polyline fill="none" stroke="#000000" points="1205,-820 1209,-824 "/>
<text text-anchor="middle" x="1175" y="-802.3" font-family="Times,serif" font-size="14.00" fill="#000000">segments</text>
</g>
<!-- localLog_read&#45;&gt;segments -->
<g id="edge27" class="edge">
<title>localLog_read&#45;&gt;segments</title>
<path fill="none" stroke="#000000" d="M395.2329,-835.6556C444.8119,-839.4255 506.3593,-843 561.5,-843 561.5,-843 561.5,-843 730.5,-843 871.6811,-843 907.8424,-849.9687 1048,-833 1075.8046,-829.6337 1106.5361,-823.1748 1130.8035,-817.4183"/>
<polygon fill="#000000" stroke="#000000" points="1131.8837,-820.758 1140.7807,-815.0053 1130.2381,-813.9542 1131.8837,-820.758"/>
</g>
<!-- appendAsLeader -->
<g id="node28" class="node">
<title>appendAsLeader</title>
<polygon fill="none" stroke="#000000" points="353.5,-770 245.5,-770 245.5,-734 353.5,-734 353.5,-770"/>
<text text-anchor="middle" x="299.5" y="-748.3" font-family="Times,serif" font-size="14.00" fill="#000000">appendAsLeader</text>
</g>
<!-- append -->
<g id="node29" class="node">
<title>append</title>
<polygon fill="none" stroke="#000000" points="487,-770 431,-770 431,-734 487,-734 487,-770"/>
<text text-anchor="middle" x="459" y="-748.3" font-family="Times,serif" font-size="14.00" fill="#000000">append</text>
</g>
<!-- appendAsLeader&#45;&gt;append -->
<g id="edge26" class="edge">
<title>appendAsLeader&#45;&gt;append</title>
<path fill="none" stroke="#000000" d="M353.9447,-752C375.823,-752 400.536,-752 420.4941,-752"/>
<polygon fill="#000000" stroke="#000000" points="420.7501,-755.5001 430.7501,-752 420.7501,-748.5001 420.7501,-755.5001"/>
</g>
<!-- append&#45;&gt;segment_append -->
<g id="edge35" class="edge">
<title>append&#45;&gt;segment_append</title>
<path fill="none" stroke="#000000" d="M462.412,-733.7596C469.2409,-701.1328 487.1111,-631.8211 523,-585 523.9113,-583.8111 524.8866,-582.6502 525.9121,-581.5193"/>
<polygon fill="#000000" stroke="#000000" points="528.4411,-583.944 533.2666,-574.5119 523.6124,-578.8761 528.4411,-583.944"/>
</g>
<!-- maybeRoll -->
<g id="node31" class="node">
<title>maybeRoll</title>
<polygon fill="none" stroke="#000000" points="600,-770 523,-770 523,-734 600,-734 600,-770"/>
<text text-anchor="middle" x="561.5" y="-748.3" font-family="Times,serif" font-size="14.00" fill="#000000">maybeRoll</text>
</g>
<!-- append&#45;&gt;maybeRoll -->
<g id="edge28" class="edge">
<title>append&#45;&gt;maybeRoll</title>
<path fill="none" stroke="#000000" d="M487.0086,-752C494.9328,-752 503.7975,-752 512.5713,-752"/>
<polygon fill="#000000" stroke="#000000" points="512.7674,-755.5001 522.7674,-752 512.7674,-748.5001 512.7674,-755.5001"/>
</g>
<!-- maybeRoll&#45;&gt;shouldRoll -->
<g id="edge34" class="edge">
<title>maybeRoll&#45;&gt;shouldRoll</title>
<path fill="none" stroke="#000000" d="M591.3248,-733.8228C613.5561,-720.2735 644.6359,-701.3314 671.7872,-684.7836"/>
<polygon fill="#000000" stroke="#000000" points="673.7307,-687.6979 680.4483,-679.5049 670.0877,-681.7205 673.7307,-687.6979"/>
</g>
<!-- activeSegment -->
<g id="node32" class="node">
<title>activeSegment</title>
<polygon fill="#95e1d3" stroke="#000000" points="779,-770 686,-770 682,-766 682,-734 775,-734 779,-738 779,-770"/>
<polyline fill="none" stroke="#000000" points="775,-766 682,-766 "/>
<polyline fill="none" stroke="#000000" points="775,-766 775,-734 "/>
<polyline fill="none" stroke="#000000" points="775,-766 779,-770 "/>
<text text-anchor="middle" x="730.5" y="-748.3" font-family="Times,serif" font-size="14.00" fill="#000000">activeSegment</text>
</g>
<!-- maybeRoll&#45;&gt;activeSegment -->
<g id="edge29" class="edge">
<title>maybeRoll&#45;&gt;activeSegment</title>
<path fill="none" stroke="#000000" d="M600.272,-752C621.4092,-752 648.0092,-752 671.6501,-752"/>
<polygon fill="#000000" stroke="#000000" points="671.9237,-755.5001 681.9237,-752 671.9237,-748.5001 671.9237,-755.5001"/>
</g>
<!-- roll -->
<g id="node33" class="node">
<title>roll</title>
<polygon fill="none" stroke="#000000" points="757.5,-824 703.5,-824 703.5,-788 757.5,-788 757.5,-824"/>
<text text-anchor="middle" x="730.5" y="-802.3" font-family="Times,serif" font-size="14.00" fill="#000000">roll</text>
</g>
<!-- maybeRoll&#45;&gt;roll -->
<g id="edge30" class="edge">
<title>maybeRoll&#45;&gt;roll</title>
<path fill="none" stroke="#000000" d="M600.3757,-766.6659C611.7972,-770.8179 624.3509,-775.23 636,-779 654.8629,-785.1047 676.0708,-791.2301 693.609,-796.0997"/>
<polygon fill="#000000" stroke="#000000" points="692.8955,-799.5334 703.4658,-798.8121 694.7528,-792.7843 692.8955,-799.5334"/>
</g>
<!-- activeSegment&#45;&gt;segments -->
<g id="edge33" class="edge">
<title>activeSegment&#45;&gt;segments</title>
<path fill="none" stroke="#ff0000" d="M779.1286,-754.2489C841.6164,-757.5702 953.33,-764.9672 1048,-779 1075.8025,-783.1211 1106.65,-789.6329 1130.9807,-795.229"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1130.4476,-798.6985 1140.9813,-797.5616 1132.0377,-791.8815 1130.4476,-798.6985"/>
</g>
<!-- addSegment -->
<g id="node34" class="node">
<title>addSegment</title>
<polygon fill="none" stroke="#000000" points="996.5,-824 912.5,-824 912.5,-788 996.5,-788 996.5,-824"/>
<text text-anchor="middle" x="954.5" y="-802.3" font-family="Times,serif" font-size="14.00" fill="#000000">addSegment</text>
</g>
<!-- roll&#45;&gt;addSegment -->
<g id="edge31" class="edge">
<title>roll&#45;&gt;addSegment</title>
<path fill="none" stroke="#000000" d="M757.5196,-806C793.252,-806 856.9798,-806 902.2681,-806"/>
<polygon fill="#000000" stroke="#000000" points="902.4937,-809.5001 912.4936,-806 902.4936,-802.5001 902.4937,-809.5001"/>
</g>
<!-- addSegment&#45;&gt;segments -->
<g id="edge32" class="edge">
<title>addSegment&#45;&gt;segments</title>
<path fill="none" stroke="#000000" d="M996.7537,-806C1035.2092,-806 1091.7723,-806 1130.8185,-806"/>
<polygon fill="#000000" stroke="#000000" points="1130.8412,-809.5001 1140.8412,-806 1130.8411,-802.5001 1130.8412,-809.5001"/>
</g>
<!-- readRecords -->
<g id="node35" class="node">
<title>readRecords</title>
<polygon fill="none" stroke="#000000" points="134,-834 50,-834 50,-798 134,-798 134,-834"/>
<text text-anchor="middle" x="92" y="-812.3" font-family="Times,serif" font-size="14.00" fill="#000000">readRecords</text>
</g>
<!-- readRecords&#45;&gt;localLog_read -->
<g id="edge37" class="edge">
<title>readRecords&#45;&gt;localLog_read</title>
<path fill="none" stroke="#000000" d="M134.2408,-818.2393C151.631,-819.1612 172.6297,-820.2743 193.7393,-821.3934"/>
<polygon fill="#000000" stroke="#000000" points="193.592,-824.8904 203.7633,-821.9248 193.9626,-817.9002 193.592,-824.8904"/>
</g>
<!-- appendRecordsToLeader -->
<g id="node36" class="node">
<title>appendRecordsToLeader</title>
<polygon fill="none" stroke="#000000" points="168,-780 16,-780 16,-744 168,-744 168,-780"/>
<text text-anchor="middle" x="92" y="-758.3" font-family="Times,serif" font-size="14.00" fill="#000000">appendRecordsToLeader</text>
</g>
<!-- appendRecordsToLeader&#45;&gt;appendAsLeader -->
<g id="edge38" class="edge">
<title>appendRecordsToLeader&#45;&gt;appendAsLeader</title>
<path fill="none" stroke="#000000" d="M168.0871,-758.3332C190.1538,-757.2697 214.0216,-756.1194 235.2844,-755.0947"/>
<polygon fill="#000000" stroke="#000000" points="235.674,-758.5801 245.4939,-754.6027 235.337,-751.5882 235.674,-758.5801"/>
</g>
</g>
</svg>
