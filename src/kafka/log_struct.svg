<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: logStruct Pages: 1 -->
<svg width="1026pt" height="577pt"
 viewBox="0.00 0.00 1026.00 576.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 572.5)">
<title>logStruct</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-572.5 1022,-572.5 1022,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_ReplicaLeader</title>
<polygon fill="none" stroke="#000000" points="247,-348 247,-524 605,-524 605,-348 247,-348"/>
<text text-anchor="middle" x="426" y="-504" font-family="Times,serif" font-size="20.00" fill="#000000">broker1/Replica&#45;Leader</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_Replica2</title>
<polygon fill="none" stroke="#000000" points="325,-178 325,-340 605,-340 605,-178 325,-178"/>
<text text-anchor="middle" x="465" y="-320" font-family="Times,serif" font-size="20.00" fill="#000000">broker2/Replica&#45;follower</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_Replica3</title>
<polygon fill="none" stroke="#000000" points="325,-8 325,-170 605,-170 605,-8 325,-8"/>
<text text-anchor="middle" x="465" y="-150" font-family="Times,serif" font-size="20.00" fill="#000000">broker3/Replica&#45;follower</text>
</g>
<!-- Topic -->
<g id="node1" class="node">
<title>Topic</title>
<polygon fill="none" stroke="#000000" points="0,-163.5 0,-278.5 219,-278.5 219,-163.5 0,-163.5"/>
<text text-anchor="middle" x="109.5" y="-263.3" font-family="Times,serif" font-size="14.00" fill="#000000">Topic:每个topic有多个partition</text>
<polyline fill="none" stroke="#000000" points="0,-255.5 219,-255.5 "/>
<text text-anchor="middle" x="109.5" y="-240.3" font-family="Times,serif" font-size="14.00" fill="#000000">Partition1: 每个parition有多个副本</text>
<polyline fill="none" stroke="#000000" points="0,-232.5 219,-232.5 "/>
<text text-anchor="start" x="8" y="-217.3" font-family="Times,serif" font-size="14.00" fill="#000000">Partition2 </text>
<polyline fill="none" stroke="#000000" points="0,-209.5 219,-209.5 "/>
<text text-anchor="start" x="8" y="-194.3" font-family="Times,serif" font-size="14.00" fill="#000000">Partition3</text>
<polyline fill="none" stroke="#000000" points="0,-186.5 219,-186.5 "/>
<text text-anchor="start" x="8" y="-171.3" font-family="Times,serif" font-size="14.00" fill="#000000">...</text>
</g>
<!-- Partition -->
<g id="node2" class="node">
<title>Partition</title>
<polygon fill="none" stroke="#000000" points="255,-356 255,-486 484,-486 484,-356 255,-356"/>
<text text-anchor="start" x="263" y="-470.8" font-family="Times,serif" font-size="14.00" fill="#000000">Partition:</text>
<text text-anchor="middle" x="369.5" y="-455.8" font-family="Times,serif" font-size="14.00" fill="#000000">每个partion有多个segment日志文件</text>
<polyline fill="none" stroke="#000000" points="255,-448 484,-448 "/>
<text text-anchor="start" x="263" y="-432.8" font-family="Times,serif" font-size="14.00" fill="#000000">segment1 </text>
<polyline fill="none" stroke="#000000" points="255,-425 484,-425 "/>
<text text-anchor="start" x="263" y="-409.8" font-family="Times,serif" font-size="14.00" fill="#000000">segment2 </text>
<polyline fill="none" stroke="#000000" points="255,-402 484,-402 "/>
<text text-anchor="start" x="263" y="-386.8" font-family="Times,serif" font-size="14.00" fill="#000000">segment3 </text>
<polyline fill="none" stroke="#000000" points="255,-379 484,-379 "/>
<text text-anchor="start" x="263" y="-363.8" font-family="Times,serif" font-size="14.00" fill="#000000">... </text>
</g>
<!-- Topic&#45;&gt;Partition -->
<g id="edge7" class="edge">
<title>Topic:p&#45;&gt;Partition</title>
<path fill="none" stroke="#000000" d="M219,-244C265.1538,-244 219.3883,-307.0167 247,-344 248.059,-345.4184 249.1525,-346.8171 250.2779,-348.1961"/>
<polygon fill="#000000" stroke="#000000" points="247.8129,-350.6927 257.0521,-355.8781 253.0632,-346.0629 247.8129,-350.6927"/>
</g>
<!-- Partition2 -->
<g id="node7" class="node">
<title>Partition2</title>
<polygon fill="none" stroke="#000000" points="333,-186.5 333,-301.5 406,-301.5 406,-186.5 333,-186.5"/>
<text text-anchor="middle" x="369.5" y="-286.3" font-family="Times,serif" font-size="14.00" fill="#000000">Partition</text>
<polyline fill="none" stroke="#000000" points="333,-278.5 406,-278.5 "/>
<text text-anchor="start" x="341" y="-263.3" font-family="Times,serif" font-size="14.00" fill="#000000">segment1 </text>
<polyline fill="none" stroke="#000000" points="333,-255.5 406,-255.5 "/>
<text text-anchor="start" x="341" y="-240.3" font-family="Times,serif" font-size="14.00" fill="#000000">segment2 </text>
<polyline fill="none" stroke="#000000" points="333,-232.5 406,-232.5 "/>
<text text-anchor="start" x="341" y="-217.3" font-family="Times,serif" font-size="14.00" fill="#000000">segment3 </text>
<polyline fill="none" stroke="#000000" points="333,-209.5 406,-209.5 "/>
<text text-anchor="start" x="341" y="-194.3" font-family="Times,serif" font-size="14.00" fill="#000000">... </text>
</g>
<!-- Topic&#45;&gt;Partition2 -->
<g id="edge8" class="edge">
<title>Topic:p&#45;&gt;Partition2</title>
<path fill="none" stroke="#000000" d="M219,-244C253.7085,-244 292.9196,-244 322.615,-244"/>
<polygon fill="#000000" stroke="#000000" points="322.6988,-247.5001 332.6988,-244 322.6988,-240.5001 322.6988,-247.5001"/>
</g>
<!-- Partition3 -->
<g id="node9" class="node">
<title>Partition3</title>
<polygon fill="none" stroke="#000000" points="333,-16.5 333,-131.5 406,-131.5 406,-16.5 333,-16.5"/>
<text text-anchor="middle" x="369.5" y="-116.3" font-family="Times,serif" font-size="14.00" fill="#000000">Partition</text>
<polyline fill="none" stroke="#000000" points="333,-108.5 406,-108.5 "/>
<text text-anchor="start" x="341" y="-93.3" font-family="Times,serif" font-size="14.00" fill="#000000">segment1 </text>
<polyline fill="none" stroke="#000000" points="333,-85.5 406,-85.5 "/>
<text text-anchor="start" x="341" y="-70.3" font-family="Times,serif" font-size="14.00" fill="#000000">segment2 </text>
<polyline fill="none" stroke="#000000" points="333,-62.5 406,-62.5 "/>
<text text-anchor="start" x="341" y="-47.3" font-family="Times,serif" font-size="14.00" fill="#000000">segment3 </text>
<polyline fill="none" stroke="#000000" points="333,-39.5 406,-39.5 "/>
<text text-anchor="start" x="341" y="-24.3" font-family="Times,serif" font-size="14.00" fill="#000000">... </text>
</g>
<!-- Topic&#45;&gt;Partition3 -->
<g id="edge9" class="edge">
<title>Topic:p&#45;&gt;Partition3</title>
<path fill="none" stroke="#000000" d="M219,-244C252.5077,-244 227.1687,-201.009 247,-174 267.9482,-145.4698 298.8663,-120.3132 324.3992,-102.3683"/>
<polygon fill="#000000" stroke="#000000" points="326.5774,-105.118 332.8296,-96.5646 322.608,-99.3522 326.5774,-105.118"/>
</g>
<!-- Segement -->
<g id="node3" class="node">
<title>Segement</title>
<polygon fill="none" stroke="#000000" points="520,-378.5 520,-447.5 597,-447.5 597,-378.5 520,-378.5"/>
<text text-anchor="middle" x="558.5" y="-432.3" font-family="Times,serif" font-size="14.00" fill="#000000">Segement</text>
<polyline fill="none" stroke="#000000" points="520,-424.5 597,-424.5 "/>
<text text-anchor="start" x="528" y="-409.3" font-family="Times,serif" font-size="14.00" fill="#000000">xxxx.log</text>
<polyline fill="none" stroke="#000000" points="520,-401.5 597,-401.5 "/>
<text text-anchor="start" x="528" y="-386.3" font-family="Times,serif" font-size="14.00" fill="#000000">xxxx.index</text>
</g>
<!-- Partition&#45;&gt;Segement -->
<g id="edge10" class="edge">
<title>Partition:s&#45;&gt;Segement</title>
<path fill="none" stroke="#000000" d="M484,-413C492.2758,-413 501.0686,-413 509.6031,-413"/>
<polygon fill="#000000" stroke="#000000" points="509.8331,-416.5001 519.8331,-413 509.833,-409.5001 509.8331,-416.5001"/>
</g>
<!-- Messages -->
<g id="node4" class="node">
<title>Messages</title>
<polygon fill="none" stroke="#000000" points="788,-326.5 788,-487.5 858,-487.5 858,-326.5 788,-326.5"/>
<text text-anchor="middle" x="823" y="-472.3" font-family="Times,serif" font-size="14.00" fill="#000000">Messages</text>
<polyline fill="none" stroke="#000000" points="788,-464.5 858,-464.5 "/>
<text text-anchor="start" x="796" y="-449.3" font-family="Times,serif" font-size="14.00" fill="#000000">msg1</text>
<polyline fill="none" stroke="#000000" points="788,-441.5 858,-441.5 "/>
<text text-anchor="start" x="796" y="-426.3" font-family="Times,serif" font-size="14.00" fill="#000000">msg2</text>
<polyline fill="none" stroke="#000000" points="788,-418.5 858,-418.5 "/>
<text text-anchor="start" x="796" y="-403.3" font-family="Times,serif" font-size="14.00" fill="#000000">msg3</text>
<polyline fill="none" stroke="#000000" points="788,-395.5 858,-395.5 "/>
<text text-anchor="start" x="796" y="-380.3" font-family="Times,serif" font-size="14.00" fill="#000000">...</text>
<polyline fill="none" stroke="#000000" points="788,-372.5 858,-372.5 "/>
<text text-anchor="start" x="796" y="-357.3" font-family="Times,serif" font-size="14.00" fill="#000000">msgN</text>
<polyline fill="none" stroke="#000000" points="788,-349.5 858,-349.5 "/>
<text text-anchor="start" x="796" y="-334.3" font-family="Times,serif" font-size="14.00" fill="#000000">...</text>
</g>
<!-- Segement&#45;&gt;Messages -->
<g id="edge1" class="edge">
<title>Segement:msg&#45;&gt;Messages</title>
<path fill="none" stroke="#000000" d="M597.5,-413C613.5816,-413 616.9945,-418.437 633,-420 685.6385,-425.1402 699.3278,-424.7824 752,-420 760.4318,-419.2344 769.3583,-417.9675 777.931,-416.5171"/>
<polygon fill="#000000" stroke="#000000" points="778.557,-419.9608 787.7814,-414.7493 777.3204,-413.0709 778.557,-419.9608"/>
</g>
<!-- Index -->
<g id="node5" class="node">
<title>Index</title>
<polygon fill="none" stroke="#000000" points="633,-318 633,-410 752,-410 752,-318 633,-318"/>
<text text-anchor="middle" x="692.5" y="-394.8" font-family="Times,serif" font-size="14.00" fill="#000000">Index</text>
<polyline fill="none" stroke="#000000" points="633,-387 752,-387 "/>
<text text-anchor="start" x="641" y="-371.8" font-family="Times,serif" font-size="14.00" fill="#000000">1, 0</text>
<polyline fill="none" stroke="#000000" points="633,-364 752,-364 "/>
<text text-anchor="start" x="641" y="-348.8" font-family="Times,serif" font-size="14.00" fill="#000000">...</text>
<polyline fill="none" stroke="#000000" points="633,-341 752,-341 "/>
<text text-anchor="start" x="641" y="-325.8" font-family="Times,serif" font-size="14.00" fill="#000000">msgN, filePosition</text>
</g>
<!-- Segement&#45;&gt;Index -->
<g id="edge2" class="edge">
<title>Segement:index&#45;&gt;Index</title>
<path fill="none" stroke="#000000" d="M597.5,-390C605.8574,-390 614.4864,-389.0523 622.9786,-387.5188"/>
<polygon fill="#000000" stroke="#000000" points="623.7787,-390.9274 632.8605,-385.4711 622.3583,-384.0731 623.7787,-390.9274"/>
</g>
<!-- Message -->
<g id="node6" class="node">
<title>Message</title>
<polygon fill="none" stroke="#000000" points="894,-338 894,-568 1018,-568 1018,-338 894,-338"/>
<text text-anchor="middle" x="956" y="-552.8" font-family="Times,serif" font-size="14.00" fill="#000000">Msg</text>
<polyline fill="none" stroke="#000000" points="894,-545 1018,-545 "/>
<text text-anchor="start" x="902" y="-529.8" font-family="Times,serif" font-size="14.00" fill="#000000">8byte offset</text>
<polyline fill="none" stroke="#000000" points="894,-522 1018,-522 "/>
<text text-anchor="start" x="902" y="-506.8" font-family="Times,serif" font-size="14.00" fill="#000000">4byte messageSize </text>
<polyline fill="none" stroke="#000000" points="894,-499 1018,-499 "/>
<text text-anchor="start" x="902" y="-483.8" font-family="Times,serif" font-size="14.00" fill="#000000">4byte crc32</text>
<polyline fill="none" stroke="#000000" points="894,-476 1018,-476 "/>
<text text-anchor="start" x="902" y="-460.8" font-family="Times,serif" font-size="14.00" fill="#000000">1byte magic</text>
<polyline fill="none" stroke="#000000" points="894,-453 1018,-453 "/>
<text text-anchor="start" x="902" y="-437.8" font-family="Times,serif" font-size="14.00" fill="#000000">1byte attributes</text>
<polyline fill="none" stroke="#000000" points="894,-430 1018,-430 "/>
<text text-anchor="start" x="902" y="-414.8" font-family="Times,serif" font-size="14.00" fill="#000000">4byte keylen</text>
<polyline fill="none" stroke="#000000" points="894,-407 1018,-407 "/>
<text text-anchor="start" x="902" y="-391.8" font-family="Times,serif" font-size="14.00" fill="#000000">key paload</text>
<polyline fill="none" stroke="#000000" points="894,-384 1018,-384 "/>
<text text-anchor="start" x="902" y="-368.8" font-family="Times,serif" font-size="14.00" fill="#000000">4byte payloadLen</text>
<polyline fill="none" stroke="#000000" points="894,-361 1018,-361 "/>
<text text-anchor="start" x="902" y="-345.8" font-family="Times,serif" font-size="14.00" fill="#000000">value payload</text>
</g>
<!-- Messages&#45;&gt;Message -->
<g id="edge3" class="edge">
<title>Messages:msg&#45;&gt;Message</title>
<path fill="none" stroke="#000000" d="M858,-453C866.3155,-453 875.028,-453 883.6827,-453"/>
<polygon fill="#000000" stroke="#000000" points="883.7888,-456.5001 893.7887,-453 883.7887,-449.5001 883.7888,-456.5001"/>
</g>
<!-- Index&#45;&gt;Messages -->
<g id="edge4" class="edge">
<title>Index:msgN&#45;&gt;Messages:msgN</title>
<path fill="none" stroke="#000000" d="M752,-329C769.2262,-329 768.1781,-349.7207 778.2659,-357.8147"/>
<polygon fill="#000000" stroke="#000000" points="777.4074,-361.2164 788,-361 779.5844,-354.5635 777.4074,-361.2164"/>
</g>
<!-- Segement2 -->
<g id="node8" class="node">
<title>Segement2</title>
<polygon fill="none" stroke="#000000" points="520,-209.5 520,-278.5 597,-278.5 597,-209.5 520,-209.5"/>
<text text-anchor="middle" x="558.5" y="-263.3" font-family="Times,serif" font-size="14.00" fill="#000000">Segement</text>
<polyline fill="none" stroke="#000000" points="520,-255.5 597,-255.5 "/>
<text text-anchor="start" x="528" y="-240.3" font-family="Times,serif" font-size="14.00" fill="#000000">xxxx.log</text>
<polyline fill="none" stroke="#000000" points="520,-232.5 597,-232.5 "/>
<text text-anchor="start" x="528" y="-217.3" font-family="Times,serif" font-size="14.00" fill="#000000">xxxx.index</text>
</g>
<!-- Partition2&#45;&gt;Segement2 -->
<g id="edge5" class="edge">
<title>Partition2:s&#45;&gt;Segement2</title>
<path fill="none" stroke="#000000" d="M406.5,-244C440.9643,-244 479.8242,-244 509.6249,-244"/>
<polygon fill="#000000" stroke="#000000" points="509.7659,-247.5001 519.7659,-244 509.7658,-240.5001 509.7659,-247.5001"/>
</g>
<!-- Segement3 -->
<g id="node10" class="node">
<title>Segement3</title>
<polygon fill="none" stroke="#000000" points="520,-39.5 520,-108.5 597,-108.5 597,-39.5 520,-39.5"/>
<text text-anchor="middle" x="558.5" y="-93.3" font-family="Times,serif" font-size="14.00" fill="#000000">Segement</text>
<polyline fill="none" stroke="#000000" points="520,-85.5 597,-85.5 "/>
<text text-anchor="start" x="528" y="-70.3" font-family="Times,serif" font-size="14.00" fill="#000000">xxxx.log</text>
<polyline fill="none" stroke="#000000" points="520,-62.5 597,-62.5 "/>
<text text-anchor="start" x="528" y="-47.3" font-family="Times,serif" font-size="14.00" fill="#000000">xxxx.index</text>
</g>
<!-- Partition3&#45;&gt;Segement3 -->
<g id="edge6" class="edge">
<title>Partition3:s&#45;&gt;Segement3</title>
<path fill="none" stroke="#000000" d="M406.5,-74C440.9643,-74 479.8242,-74 509.6249,-74"/>
<polygon fill="#000000" stroke="#000000" points="509.7659,-77.5001 519.7659,-74 509.7658,-70.5001 509.7659,-77.5001"/>
</g>
</g>
</svg>
