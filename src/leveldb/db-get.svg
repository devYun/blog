<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: db_get Pages: 1 -->
<svg width="2638pt" height="1570pt"
 viewBox="0.00 0.00 2638.14 1570.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1566)">
<title>db_get</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1566 2634.1426,-1566 2634.1426,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_VersionSet</title>
<path fill="none" stroke="#000000" d="M395.1416,-1276C395.1416,-1276 767.1509,-1276 767.1509,-1276 773.1509,-1276 779.1509,-1282 779.1509,-1288 779.1509,-1288 779.1509,-1400 779.1509,-1400 779.1509,-1406 773.1509,-1412 767.1509,-1412 767.1509,-1412 395.1416,-1412 395.1416,-1412 389.1416,-1412 383.1416,-1406 383.1416,-1400 383.1416,-1400 383.1416,-1288 383.1416,-1288 383.1416,-1282 389.1416,-1276 395.1416,-1276"/>
<text text-anchor="middle" x="581.1462" y="-1392" font-family="Times,serif" font-size="20.00" fill="#000000">VersionSet</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_Table</title>
<path fill="none" stroke="#000000" d="M1623.876,-341C1623.876,-341 2610.1426,-341 2610.1426,-341 2616.1426,-341 2622.1426,-347 2622.1426,-353 2622.1426,-353 2622.1426,-878 2622.1426,-878 2622.1426,-884 2616.1426,-890 2610.1426,-890 2610.1426,-890 1623.876,-890 1623.876,-890 1617.876,-890 1611.876,-884 1611.876,-878 1611.876,-878 1611.876,-353 1611.876,-353 1611.876,-347 1617.876,-341 1623.876,-341"/>
<text text-anchor="middle" x="2117.0093" y="-870" font-family="Times,serif" font-size="20.00" fill="#000000">Table</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_Footer</title>
<path fill="none" stroke="#000000" d="M2230.0815,-349C2230.0815,-349 2311.1714,-349 2311.1714,-349 2317.1714,-349 2323.1714,-355 2323.1714,-361 2323.1714,-361 2323.1714,-431 2323.1714,-431 2323.1714,-437 2317.1714,-443 2311.1714,-443 2311.1714,-443 2230.0815,-443 2230.0815,-443 2224.0815,-443 2218.0815,-437 2218.0815,-431 2218.0815,-431 2218.0815,-361 2218.0815,-361 2218.0815,-355 2224.0815,-349 2230.0815,-349"/>
<text text-anchor="middle" x="2270.6265" y="-423" font-family="Times,serif" font-size="20.00" fill="#000000">Footer</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_SkipList</title>
<path fill="none" stroke="#000000" d="M883.875,-1276C883.875,-1276 1494.6284,-1276 1494.6284,-1276 1500.6284,-1276 1506.6284,-1282 1506.6284,-1288 1506.6284,-1288 1506.6284,-1452 1506.6284,-1452 1506.6284,-1458 1500.6284,-1464 1494.6284,-1464 1494.6284,-1464 883.875,-1464 883.875,-1464 877.875,-1464 871.875,-1458 871.875,-1452 871.875,-1452 871.875,-1288 871.875,-1288 871.875,-1282 877.875,-1276 883.875,-1276"/>
<text text-anchor="middle" x="1189.2517" y="-1444" font-family="Times,serif" font-size="20.00" fill="#000000">SkipList</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_MemTable</title>
<path fill="none" stroke="#000000" d="M390.0659,-1106C390.0659,-1106 990.2373,-1106 990.2373,-1106 996.2373,-1106 1002.2373,-1112 1002.2373,-1118 1002.2373,-1118 1002.2373,-1256 1002.2373,-1256 1002.2373,-1262 996.2373,-1268 990.2373,-1268 990.2373,-1268 390.0659,-1268 390.0659,-1268 384.0659,-1268 378.0659,-1262 378.0659,-1256 378.0659,-1256 378.0659,-1118 378.0659,-1118 378.0659,-1112 384.0659,-1106 390.0659,-1106"/>
<text text-anchor="middle" x="690.1516" y="-1248" font-family="Times,serif" font-size="20.00" fill="#000000">MemTable</text>
</g>
<g id="clust12" class="cluster">
<title>cluster_TableCache</title>
<path fill="none" stroke="#000000" d="M1308.084,-8C1308.084,-8 2161.3867,-8 2161.3867,-8 2167.3867,-8 2173.3867,-14 2173.3867,-20 2173.3867,-20 2173.3867,-321 2173.3867,-321 2173.3867,-327 2167.3867,-333 2161.3867,-333 2161.3867,-333 1308.084,-333 1308.084,-333 1302.084,-333 1296.084,-327 1296.084,-321 1296.084,-321 1296.084,-20 1296.084,-20 1296.084,-14 1302.084,-8 1308.084,-8"/>
<text text-anchor="middle" x="1734.7354" y="-313" font-family="Times,serif" font-size="20.00" fill="#000000">TableCache</text>
</g>
<g id="clust15" class="cluster">
<title>cluster_Version</title>
<path fill="none" stroke="#000000" d="M321.2656,-898C321.2656,-898 2490.4907,-898 2490.4907,-898 2496.4907,-898 2502.4907,-904 2502.4907,-910 2502.4907,-910 2502.4907,-1086 2502.4907,-1086 2502.4907,-1092 2496.4907,-1098 2490.4907,-1098 2490.4907,-1098 321.2656,-1098 321.2656,-1098 315.2656,-1098 309.2656,-1092 309.2656,-1086 309.2656,-1086 309.2656,-910 309.2656,-910 309.2656,-904 315.2656,-898 321.2656,-898"/>
<text text-anchor="middle" x="1405.8782" y="-1078" font-family="Times,serif" font-size="20.00" fill="#000000">Version</text>
</g>
<g id="clust19" class="cluster">
<title>cluster_DBImpl</title>
<path fill="none" stroke="#000000" d="M20,-1420C20,-1420 536.1074,-1420 536.1074,-1420 542.1074,-1420 548.1074,-1426 548.1074,-1432 548.1074,-1432 548.1074,-1542 548.1074,-1542 548.1074,-1548 542.1074,-1554 536.1074,-1554 536.1074,-1554 20,-1554 20,-1554 14,-1554 8,-1548 8,-1542 8,-1542 8,-1432 8,-1432 8,-1426 14,-1420 20,-1420"/>
<text text-anchor="middle" x="278.0537" y="-1534" font-family="Times,serif" font-size="20.00" fill="#000000">DBImpl</text>
</g>
<!-- VersionSet_LastSequence -->
<g id="node1" class="node">
<title>VersionSet_LastSequence</title>
<polygon fill="none" stroke="#000000" points="405.9209,-1339 405.9209,-1375 499.666,-1375 499.666,-1339 405.9209,-1339"/>
<text text-anchor="middle" x="452.7935" y="-1352.8" font-family="Times,serif" font-size="14.00" fill="#000000">LastSequence</text>
</g>
<!-- last_sequence_ -->
<g id="node2" class="node">
<title>last_sequence_</title>
<polygon fill="none" stroke="#000000" points="771.0238,-1375 670.5329,-1375 670.5329,-1339 771.0238,-1339 771.0238,-1375"/>
<text text-anchor="middle" x="720.7783" y="-1352.8" font-family="Times,serif" font-size="14.00" fill="#000000">last_sequence_</text>
</g>
<!-- VersionSet_LastSequence&#45;&gt;last_sequence_ -->
<g id="edge1" class="edge">
<title>VersionSet_LastSequence&#45;&gt;last_sequence_</title>
<path fill="none" stroke="#000000" d="M499.7795,-1357C544.3449,-1357 611.5333,-1357 660.1247,-1357"/>
<polygon fill="#000000" stroke="#000000" points="660.1966,-1360.5001 670.1965,-1357 660.1965,-1353.5001 660.1966,-1360.5001"/>
</g>
<!-- VersionSet_current -->
<g id="node3" class="node">
<title>VersionSet_current</title>
<polygon fill="none" stroke="#000000" points="514.5975,-1320 390.9894,-1320 390.9894,-1284 514.5975,-1284 514.5975,-1320"/>
<text text-anchor="middle" x="452.7935" y="-1297.8" font-family="Times,serif" font-size="14.00" fill="#000000">VersionSet_current</text>
</g>
<!-- current_ -->
<g id="node4" class="node">
<title>current_</title>
<polygon fill="none" stroke="#000000" points="751.9209,-1320 689.6357,-1320 689.6357,-1284 751.9209,-1284 751.9209,-1320"/>
<text text-anchor="middle" x="720.7783" y="-1297.8" font-family="Times,serif" font-size="14.00" fill="#000000">current_</text>
</g>
<!-- VersionSet_current&#45;&gt;current_ -->
<g id="edge2" class="edge">
<title>VersionSet_current&#45;&gt;current_</title>
<path fill="none" stroke="#000000" d="M514.6111,-1302C565.2694,-1302 635.546,-1302 679.5703,-1302"/>
<polygon fill="#000000" stroke="#000000" points="679.6287,-1305.5001 689.6286,-1302 679.6286,-1298.5001 679.6287,-1305.5001"/>
</g>
<!-- SkipList_Iterator_Seek -->
<g id="node5" class="node">
<title>SkipList_Iterator_Seek</title>
<polygon fill="none" stroke="#000000" points="879.875,-1288 879.875,-1324 1027.2959,-1324 1027.2959,-1288 879.875,-1288"/>
<text text-anchor="middle" x="953.5854" y="-1301.8" font-family="Times,serif" font-size="14.00" fill="#000000">SkipList::Iterator::Seek</text>
</g>
<!-- FindGreaterOrEqual -->
<g id="node6" class="node">
<title>FindGreaterOrEqual</title>
<polygon fill="none" stroke="#000000" points="1113.4751,-1307.2 1113.4751,-1356.8 1244.5444,-1356.8 1244.5444,-1307.2 1113.4751,-1307.2"/>
<text text-anchor="middle" x="1179.0098" y="-1341.6" font-family="Times,serif" font-size="14.00" fill="#000000">FindGreaterOrEqual</text>
<polyline fill="none" stroke="#000000" points="1113.4751,-1334.8 1244.5444,-1334.8 "/>
<text text-anchor="middle" x="1179.0098" y="-1319.6" font-family="Times,serif" font-size="14.00" fill="#000000">在skiplist中查找</text>
</g>
<!-- SkipList_Iterator_Seek&#45;&gt;FindGreaterOrEqual -->
<g id="edge3" class="edge">
<title>SkipList_Iterator_Seek&#45;&gt;FindGreaterOrEqual</title>
<path fill="none" stroke="#000000" d="M1027.3978,-1314.5134C1051.7746,-1317.3249 1078.9184,-1320.4557 1103.4258,-1323.2823"/>
<polygon fill="#000000" stroke="#000000" points="1103.0561,-1326.7628 1113.3913,-1324.4317 1103.8582,-1319.8089 1103.0561,-1326.7628"/>
</g>
<!-- GetMaxHeight -->
<g id="node7" class="node">
<title>GetMaxHeight</title>
<polygon fill="none" stroke="#000000" points="1493.9595,-1320 1394.0005,-1320 1394.0005,-1284 1493.9595,-1284 1493.9595,-1320"/>
<text text-anchor="middle" x="1443.98" y="-1297.8" font-family="Times,serif" font-size="14.00" fill="#000000">GetMaxHeight</text>
</g>
<!-- FindGreaterOrEqual&#45;&gt;GetMaxHeight -->
<g id="edge4" class="edge">
<title>FindGreaterOrEqual&#45;&gt;GetMaxHeight</title>
<path fill="none" stroke="#000000" d="M1244.8485,-1324.5457C1287.4686,-1319.7203 1342.5314,-1313.486 1383.9498,-1308.7966"/>
<polygon fill="#000000" stroke="#000000" points="1384.3593,-1312.2727 1393.9021,-1307.6698 1383.5718,-1305.3172 1384.3593,-1312.2727"/>
</g>
<!-- KeyIsAfterNode -->
<g id="node8" class="node">
<title>KeyIsAfterNode</title>
<polygon fill="none" stroke="#000000" points="1498.7773,-1374 1389.1827,-1374 1389.1827,-1338 1498.7773,-1338 1498.7773,-1374"/>
<text text-anchor="middle" x="1443.98" y="-1351.8" font-family="Times,serif" font-size="14.00" fill="#000000">KeyIsAfterNode</text>
</g>
<!-- FindGreaterOrEqual&#45;&gt;KeyIsAfterNode -->
<g id="edge5" class="edge">
<title>FindGreaterOrEqual&#45;&gt;KeyIsAfterNode</title>
<path fill="none" stroke="#000000" d="M1244.8485,-1337.9634C1285.8243,-1341.6749 1338.3011,-1346.428 1379.0964,-1350.1231"/>
<polygon fill="#000000" stroke="#000000" points="1378.9273,-1353.622 1389.2023,-1351.0384 1379.5588,-1346.6506 1378.9273,-1353.622"/>
</g>
<!-- Next -->
<g id="node9" class="node">
<title>Next</title>
<polygon fill="none" stroke="#000000" points="1470.98,-1428 1416.98,-1428 1416.98,-1392 1470.98,-1392 1470.98,-1428"/>
<text text-anchor="middle" x="1443.98" y="-1405.8" font-family="Times,serif" font-size="14.00" fill="#000000">Next</text>
</g>
<!-- FindGreaterOrEqual&#45;&gt;Next -->
<g id="edge6" class="edge">
<title>FindGreaterOrEqual&#45;&gt;Next</title>
<path fill="none" stroke="#000000" d="M1229.0483,-1356.8248C1249.4418,-1366.1372 1273.4975,-1376.1194 1296.084,-1383 1332.9361,-1394.2264 1376.4564,-1401.4827 1406.7057,-1405.6151"/>
<polygon fill="#000000" stroke="#000000" points="1406.4475,-1409.1112 1416.8191,-1406.9479 1407.3621,-1402.1712 1406.4475,-1409.1112"/>
</g>
<!-- MemTable_Get -->
<g id="node10" class="node">
<title>MemTable_Get</title>
<polygon fill="none" stroke="#000000" points="386.0659,-1182.2 386.0659,-1231.8 519.521,-1231.8 519.521,-1182.2 386.0659,-1182.2"/>
<text text-anchor="middle" x="452.7935" y="-1216.6" font-family="Times,serif" font-size="14.00" fill="#000000">Get</text>
<polyline fill="none" stroke="#000000" points="386.0659,-1209.8 519.521,-1209.8 "/>
<text text-anchor="start" x="394.0659" y="-1194.6" font-family="Times,serif" font-size="14.00" fill="#000000">从内存SkipList查找</text>
</g>
<!-- memtable_key -->
<g id="node11" class="node">
<title>memtable_key</title>
<polygon fill="none" stroke="#000000" points="648.8281,-1114.2 648.8281,-1177.8 792.7285,-1177.8 792.7285,-1114.2 648.8281,-1114.2"/>
<text text-anchor="middle" x="720.7783" y="-1162.6" font-family="Times,serif" font-size="14.00" fill="#000000">memtable_key</text>
<polyline fill="none" stroke="#000000" points="648.8281,-1155.8 792.7285,-1155.8 "/>
<text text-anchor="start" x="656.8281" y="-1140.6" font-family="Times,serif" font-size="14.00" fill="#000000">将key设为slice</text>
<text text-anchor="start" x="656.8281" y="-1121" font-family="Times,serif" font-size="14.00" fill="#000000"> Slice(start, end &#45; start)</text>
</g>
<!-- MemTable_Get&#45;&gt;memtable_key -->
<g id="edge7" class="edge">
<title>MemTable_Get&#45;&gt;memtable_key</title>
<path fill="none" stroke="#000000" d="M519.7261,-1191.7645C555.7311,-1183.5688 600.4401,-1173.392 638.5484,-1164.7176"/>
<polygon fill="#000000" stroke="#000000" points="639.6219,-1168.0628 648.5956,-1162.4306 638.0682,-1161.2374 639.6219,-1168.0628"/>
</g>
<!-- MemTableIterator_Seek -->
<g id="node12" class="node">
<title>MemTableIterator_Seek</title>
<polygon fill="none" stroke="#000000" points="796.629,-1232 644.9277,-1232 644.9277,-1196 796.629,-1196 796.629,-1232"/>
<text text-anchor="middle" x="720.7783" y="-1209.8" font-family="Times,serif" font-size="14.00" fill="#000000">MemTableIterator_Seek</text>
</g>
<!-- MemTable_Get&#45;&gt;MemTableIterator_Seek -->
<g id="edge8" class="edge">
<title>MemTable_Get&#45;&gt;MemTableIterator_Seek</title>
<path fill="none" stroke="#000000" d="M519.7261,-1208.7483C554.4443,-1209.6552 597.2553,-1210.7735 634.4377,-1211.7447"/>
<polygon fill="#000000" stroke="#000000" points="634.6763,-1215.252 644.7644,-1212.0144 634.8592,-1208.2544 634.6763,-1215.252"/>
</g>
<!-- MemTableIterator_Seek&#45;&gt;SkipList_Iterator_Seek -->
<g id="edge9" class="edge">
<title>MemTableIterator_Seek&#45;&gt;SkipList_Iterator_Seek</title>
<path fill="none" stroke="#000000" d="M759.5328,-1232.0215C785.7472,-1243.9506 821.2836,-1259.6181 853.2354,-1272 864.3573,-1276.31 876.2833,-1280.6179 887.8924,-1284.6484"/>
<polygon fill="#000000" stroke="#000000" points="886.9503,-1288.0254 897.545,-1287.9627 889.2236,-1281.4048 886.9503,-1288.0254"/>
</g>
<!-- EncodeKey -->
<g id="node13" class="node">
<title>EncodeKey</title>
<polygon fill="none" stroke="#000000" points="994.3897,-1232 912.7812,-1232 912.7812,-1196 994.3897,-1196 994.3897,-1232"/>
<text text-anchor="middle" x="953.5854" y="-1209.8" font-family="Times,serif" font-size="14.00" fill="#000000">EncodeKey</text>
</g>
<!-- MemTableIterator_Seek&#45;&gt;EncodeKey -->
<g id="edge10" class="edge">
<title>MemTableIterator_Seek&#45;&gt;EncodeKey</title>
<path fill="none" stroke="#000000" d="M796.6859,-1214C831.3773,-1214 871.5507,-1214 902.5618,-1214"/>
<polygon fill="#000000" stroke="#000000" points="902.7062,-1217.5001 912.7062,-1214 902.7061,-1210.5001 902.7062,-1217.5001"/>
</g>
<!-- footer_DecodeFrom -->
<g id="node14" class="node">
<title>footer_DecodeFrom</title>
<polygon fill="none" stroke="#000000" points="2226.0815,-357.2 2226.0815,-406.8 2315.1714,-406.8 2315.1714,-357.2 2226.0815,-357.2"/>
<text text-anchor="middle" x="2270.6265" y="-391.6" font-family="Times,serif" font-size="14.00" fill="#000000">DecodeFrom</text>
<polyline fill="none" stroke="#000000" points="2226.0815,-384.8 2315.1714,-384.8 "/>
<text text-anchor="middle" x="2270.6265" y="-369.6" font-family="Times,serif" font-size="14.00" fill="#000000">解析Footer</text>
</g>
<!-- Table_Open -->
<g id="node15" class="node">
<title>Table_Open</title>
<polygon fill="none" stroke="#000000" points="1949.0459,-349.4001 1949.0459,-418.5999 2144.8516,-418.5999 2144.8516,-349.4001 1949.0459,-349.4001"/>
<text text-anchor="middle" x="2046.9487" y="-403.3999" font-family="Times,serif" font-size="14.00" fill="#000000">Table_Open</text>
<polyline fill="none" stroke="#000000" points="1949.0459,-396.5999 2144.8516,-396.5999 "/>
<text text-anchor="start" x="1957.0459" y="-381.3999" font-family="Times,serif" font-size="14.00" fill="#000000">将Table的索引, Filter Metadata</text>
<text text-anchor="start" x="1957.0459" y="-361.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 加载到内存中</text>
</g>
<!-- Table_Open&#45;&gt;footer_DecodeFrom -->
<g id="edge11" class="edge">
<title>Table_Open&#45;&gt;footer_DecodeFrom</title>
<path fill="none" stroke="#000000" d="M2145.057,-383.1228C2169.267,-382.9063 2194.3485,-382.682 2215.6707,-382.4914"/>
<polygon fill="#000000" stroke="#000000" points="2215.8474,-385.99 2225.8157,-382.4007 2215.7847,-378.9903 2215.8474,-385.99"/>
</g>
<!-- ReadBlock_index -->
<g id="node16" class="node">
<title>ReadBlock_index</title>
<polygon fill="none" stroke="#000000" points="2201.3867,-451.2 2201.3867,-500.8 2339.8662,-500.8 2339.8662,-451.2 2201.3867,-451.2"/>
<text text-anchor="middle" x="2270.6265" y="-485.6" font-family="Times,serif" font-size="14.00" fill="#000000">ReadBlock</text>
<polyline fill="none" stroke="#000000" points="2201.3867,-478.8 2339.8662,-478.8 "/>
<text text-anchor="middle" x="2270.6265" y="-463.6" font-family="Times,serif" font-size="14.00" fill="#000000">读取Index block内容</text>
</g>
<!-- Table_Open&#45;&gt;ReadBlock_index -->
<g id="edge12" class="edge">
<title>Table_Open&#45;&gt;ReadBlock_index</title>
<path fill="none" stroke="#000000" d="M2145.0004,-415.2387C2154.7375,-419.1947 2164.3523,-423.4614 2173.3867,-428 2184.6205,-433.6436 2187.3983,-438.1235 2200.2681,-445.979"/>
<polygon fill="#000000" stroke="#000000" points="2198.7287,-449.1299 2209.1521,-451.0286 2202.1878,-443.0442 2198.7287,-449.1299"/>
</g>
<!-- file_Read -->
<g id="node17" class="node">
<title>file_Read</title>
<polygon fill="none" stroke="#000000" points="2305.2826,-555 2235.9703,-555 2235.9703,-519 2305.2826,-519 2305.2826,-555"/>
<text text-anchor="middle" x="2270.6265" y="-532.8" font-family="Times,serif" font-size="14.00" fill="#000000">file_Read</text>
</g>
<!-- Table_Open&#45;&gt;file_Read -->
<g id="edge13" class="edge">
<title>Table_Open&#45;&gt;file_Read</title>
<path fill="none" stroke="#000000" d="M2144.885,-407.6109C2155.3773,-413.0582 2165.1934,-419.7587 2173.3867,-428 2200.5382,-455.3105 2174.7441,-482.193 2201.3867,-510 2208.2104,-517.1219 2217.1329,-522.398 2226.2924,-526.2956"/>
<polygon fill="#000000" stroke="#000000" points="2225.2529,-529.6438 2235.8451,-529.8779 2227.7108,-523.0895 2225.2529,-529.6438"/>
</g>
<!-- ReadMeta -->
<g id="node18" class="node">
<title>ReadMeta</title>
<polygon fill="none" stroke="#000000" points="2307.1592,-609 2234.0937,-609 2234.0937,-573 2307.1592,-573 2307.1592,-609"/>
<text text-anchor="middle" x="2270.6265" y="-586.8" font-family="Times,serif" font-size="14.00" fill="#000000">ReadMeta</text>
</g>
<!-- Table_Open&#45;&gt;ReadMeta -->
<g id="edge14" class="edge">
<title>Table_Open&#45;&gt;ReadMeta</title>
<path fill="none" stroke="#000000" d="M2144.9941,-406.1391C2155.6675,-411.8355 2165.4988,-418.9969 2173.3867,-428 2214.0545,-474.4169 2161.5828,-516.8403 2201.3867,-564 2207.437,-571.1684 2215.6353,-576.4429 2224.2735,-580.321"/>
<polygon fill="#000000" stroke="#000000" points="2223.1501,-583.6395 2233.7387,-584.0047 2225.6889,-577.1161 2223.1501,-583.6395"/>
</g>
<!-- ReadBlock -->
<g id="node19" class="node">
<title>ReadBlock</title>
<polygon fill="none" stroke="#000000" points="2614.2464,-590 2535.8318,-590 2535.8318,-554 2614.2464,-554 2614.2464,-590"/>
<text text-anchor="middle" x="2575.0391" y="-567.8" font-family="Times,serif" font-size="14.00" fill="#000000">ReadBlock</text>
</g>
<!-- ReadMeta&#45;&gt;ReadBlock -->
<g id="edge15" class="edge">
<title>ReadMeta&#45;&gt;ReadBlock</title>
<path fill="none" stroke="#000000" d="M2307.2033,-579.2038C2327.2444,-573.3556 2352.6609,-566.9293 2375.8662,-564 2431.7007,-556.9518 2446.298,-560.9111 2502.4907,-564 2509.9685,-564.411 2517.8603,-565.0587 2525.5764,-565.8118"/>
<polygon fill="#000000" stroke="#000000" points="2525.2607,-569.2977 2535.5692,-566.8515 2525.9852,-562.3353 2525.2607,-569.2977"/>
</g>
<!-- ReadFilter -->
<g id="node20" class="node">
<title>ReadFilter</title>
<polygon fill="none" stroke="#000000" points="2475.4976,-609 2400.3041,-609 2400.3041,-573 2475.4976,-573 2475.4976,-609"/>
<text text-anchor="middle" x="2437.9009" y="-586.8" font-family="Times,serif" font-size="14.00" fill="#000000">ReadFilter</text>
</g>
<!-- ReadMeta&#45;&gt;ReadFilter -->
<g id="edge16" class="edge">
<title>ReadMeta&#45;&gt;ReadFilter</title>
<path fill="none" stroke="#000000" d="M2307.3355,-591C2331.6174,-591 2363.7019,-591 2389.9886,-591"/>
<polygon fill="#000000" stroke="#000000" points="2390.1184,-594.5001 2400.1184,-591 2390.1184,-587.5001 2390.1184,-594.5001"/>
</g>
<!-- Block_NewIterator -->
<g id="node21" class="node">
<title>Block_NewIterator</title>
<polygon fill="none" stroke="#000000" points="2499.9702,-663 2375.8315,-663 2375.8315,-627 2499.9702,-627 2499.9702,-663"/>
<text text-anchor="middle" x="2437.9009" y="-640.8" font-family="Times,serif" font-size="14.00" fill="#000000">Block_NewIterator</text>
</g>
<!-- ReadMeta&#45;&gt;Block_NewIterator -->
<g id="edge17" class="edge">
<title>ReadMeta&#45;&gt;Block_NewIterator</title>
<path fill="none" stroke="#000000" d="M2307.3355,-602.8505C2326.3524,-608.9896 2350.155,-616.6736 2372.2102,-623.7936"/>
<polygon fill="#000000" stroke="#000000" points="2371.274,-627.1691 2381.8656,-626.9105 2373.4245,-620.5076 2371.274,-627.1691"/>
</g>
<!-- ReadFilter&#45;&gt;ReadBlock -->
<g id="edge18" class="edge">
<title>ReadFilter&#45;&gt;ReadBlock</title>
<path fill="none" stroke="#000000" d="M2475.7375,-585.7579C2491.2321,-583.6112 2509.3664,-581.0987 2525.8677,-578.8125"/>
<polygon fill="#000000" stroke="#000000" points="2526.4677,-582.2629 2535.8928,-577.4236 2525.507,-575.3291 2526.4677,-582.2629"/>
</g>
<!-- IndexBlock_Iter_Seek -->
<g id="node22" class="node">
<title>IndexBlock_Iter_Seek</title>
<polygon fill="none" stroke="#000000" points="1931.4365,-804.2 1931.4365,-853.8 2162.4609,-853.8 2162.4609,-804.2 1931.4365,-804.2"/>
<text text-anchor="middle" x="2046.9487" y="-838.6" font-family="Times,serif" font-size="14.00" fill="#000000">IndexBlock_Iter_Seek</text>
<polyline fill="none" stroke="#000000" points="1931.4365,-831.8 2162.4609,-831.8 "/>
<text text-anchor="middle" x="2046.9487" y="-816.6" font-family="Times,serif" font-size="14.00" fill="#000000">从block index中找到包含key的block</text>
</g>
<!-- filter_KeyMayMatch -->
<g id="node23" class="node">
<title>filter_KeyMayMatch</title>
<polygon fill="none" stroke="#000000" points="1940.9761,-437.4001 1940.9761,-506.5999 2152.9214,-506.5999 2152.9214,-437.4001 1940.9761,-437.4001"/>
<text text-anchor="middle" x="2046.9487" y="-491.3999" font-family="Times,serif" font-size="14.00" fill="#000000">FilterBlockReader::KeyMayMatch</text>
<polyline fill="none" stroke="#000000" points="1940.9761,-484.5999 2152.9214,-484.5999 "/>
<text text-anchor="start" x="1948.9761" y="-469.3999" font-family="Times,serif" font-size="14.00" fill="#000000">先用filter快速判断</text>
<text text-anchor="start" x="1948.9761" y="-449.8" font-family="Times,serif" font-size="14.00" fill="#000000"> key是否不存在</text>
</g>
<!-- BlockReader_block -->
<g id="node24" class="node">
<title>BlockReader_block</title>
<polygon fill="none" stroke="#000000" points="1960.7935,-525.2 1960.7935,-574.8 2133.104,-574.8 2133.104,-525.2 1960.7935,-525.2"/>
<text text-anchor="middle" x="2046.9487" y="-559.6" font-family="Times,serif" font-size="14.00" fill="#000000">BlockReader</text>
<polyline fill="none" stroke="#000000" points="1960.7935,-552.8 2133.104,-552.8 "/>
<text text-anchor="middle" x="2046.9487" y="-537.6" font-family="Times,serif" font-size="14.00" fill="#000000">读取该Block返回BlockIter</text>
</g>
<!-- BlockIter_Seek -->
<g id="node25" class="node">
<title>BlockIter_Seek</title>
<polygon fill="none" stroke="#000000" points="1984.1211,-594.2 1984.1211,-643.8 2109.7764,-643.8 2109.7764,-594.2 1984.1211,-594.2"/>
<text text-anchor="middle" x="2046.9487" y="-628.6" font-family="Times,serif" font-size="14.00" fill="#000000">BlockIter::Seek</text>
<polyline fill="none" stroke="#000000" points="1984.1211,-621.8 2109.7764,-621.8 "/>
<text text-anchor="start" x="1992.1211" y="-606.6" font-family="Times,serif" font-size="14.00" fill="#000000">在Block中查找key</text>
</g>
<!-- handle_result -->
<g id="node26" class="node">
<title>handle_result</title>
<polygon fill="none" stroke="#000000" points="1981.1987,-662.4001 1981.1987,-731.5999 2112.6987,-731.5999 2112.6987,-662.4001 1981.1987,-662.4001"/>
<text text-anchor="middle" x="2046.9487" y="-716.3999" font-family="Times,serif" font-size="14.00" fill="#000000">handle_result</text>
<polyline fill="none" stroke="#000000" points="1981.1987,-709.5999 2112.6987,-709.5999 "/>
<text text-anchor="start" x="1989.1987" y="-694.3999" font-family="Times,serif" font-size="14.00" fill="#000000">查找成功</text>
<text text-anchor="start" x="1989.1987" y="-674.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 调用参数中的回调</text>
</g>
<!-- SaveValue -->
<g id="node29" class="node">
<title>SaveValue</title>
<polygon fill="none" stroke="#000000" points="2308.2164,-942 2233.0366,-942 2233.0366,-906 2308.2164,-906 2308.2164,-942"/>
<text text-anchor="middle" x="2270.6265" y="-919.8" font-family="Times,serif" font-size="14.00" fill="#000000">SaveValue</text>
</g>
<!-- handle_result&#45;&gt;SaveValue -->
<g id="edge25" class="edge">
<title>handle_result&#45;&gt;SaveValue</title>
<path fill="none" stroke="#000000" d="M2112.7472,-706.1598C2134.9832,-712.4603 2158.0371,-723.0859 2173.3867,-741 2218.3665,-793.4946 2158.3788,-839.8781 2201.3867,-894 2207.1926,-901.3062 2215.1285,-906.8692 2223.5595,-911.0935"/>
<polygon fill="#000000" stroke="#000000" points="2222.2623,-914.3465 2232.825,-915.1709 2225.0818,-907.9394 2222.2623,-914.3465"/>
</g>
<!-- Table_InternalGet -->
<g id="node27" class="node">
<title>Table_InternalGet</title>
<polygon fill="none" stroke="#000000" points="1619.876,-574.6001 1619.876,-663.3999 1892.5107,-663.3999 1892.5107,-574.6001 1619.876,-574.6001"/>
<text text-anchor="middle" x="1756.1934" y="-648.1999" font-family="Times,serif" font-size="14.00" fill="#000000">InternalGet</text>
<polyline fill="none" stroke="#000000" points="1619.876,-641.3999 1892.5107,-641.3999 "/>
<text text-anchor="start" x="1627.876" y="-626.1999" font-family="Times,serif" font-size="14.00" fill="#000000">1.根据BlockIndex找到可能包含key的 block</text>
<text text-anchor="start" x="1627.876" y="-606.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 2.根据filter做快速不存在判断</text>
<text text-anchor="start" x="1627.876" y="-587" font-family="Times,serif" font-size="14.00" fill="#000000"> 3. 读取block内容, 在block中查找key</text>
</g>
<!-- Table_InternalGet&#45;&gt;IndexBlock_Iter_Seek -->
<g id="edge19" class="edge">
<title>Table_InternalGet&#45;&gt;IndexBlock_Iter_Seek</title>
<path fill="none" stroke="#000000" d="M1788.9125,-663.7155C1820.4219,-703.6907 1871.5842,-761.0495 1928.5107,-795 1931.3127,-796.671 1934.201,-798.2636 1937.1557,-799.7812"/>
<polygon fill="#000000" stroke="#000000" points="1935.6671,-802.949 1946.1979,-804.1123 1938.6911,-796.6358 1935.6671,-802.949"/>
</g>
<!-- Table_InternalGet&#45;&gt;filter_KeyMayMatch -->
<g id="edge20" class="edge">
<title>Table_InternalGet&#45;&gt;filter_KeyMayMatch</title>
<path fill="none" stroke="#000000" d="M1824.1869,-574.4323C1855.2644,-555.0967 1893.0001,-533.0323 1928.5107,-516 1932.2933,-514.1858 1936.1716,-512.397 1940.1105,-510.6401"/>
<polygon fill="#000000" stroke="#000000" points="1941.6204,-513.8001 1949.394,-506.6013 1938.8279,-507.3812 1941.6204,-513.8001"/>
</g>
<!-- Table_InternalGet&#45;&gt;BlockReader_block -->
<g id="edge21" class="edge">
<title>Table_InternalGet&#45;&gt;BlockReader_block</title>
<path fill="none" stroke="#000000" d="M1892.6319,-586.6214C1912.2675,-581.9616 1932.1213,-577.25 1950.7534,-572.8284"/>
<polygon fill="#000000" stroke="#000000" points="1951.7509,-576.189 1960.6725,-570.4745 1950.1345,-569.3781 1951.7509,-576.189"/>
</g>
<!-- Table_InternalGet&#45;&gt;BlockIter_Seek -->
<g id="edge22" class="edge">
<title>Table_InternalGet&#45;&gt;BlockIter_Seek</title>
<path fill="none" stroke="#000000" d="M1892.6319,-619C1920.5179,-619 1948.8441,-619 1973.4857,-619"/>
<polygon fill="#000000" stroke="#000000" points="1973.8088,-622.5001 1983.8088,-619 1973.8087,-615.5001 1973.8088,-622.5001"/>
</g>
<!-- Table_InternalGet&#45;&gt;handle_result -->
<g id="edge23" class="edge">
<title>Table_InternalGet&#45;&gt;handle_result</title>
<path fill="none" stroke="#000000" d="M1892.6319,-655.6019C1919.7346,-662.8727 1947.2532,-670.255 1971.4007,-676.733"/>
<polygon fill="#000000" stroke="#000000" points="1970.6144,-680.1457 1981.1797,-679.3564 1972.4281,-673.3848 1970.6144,-680.1457"/>
</g>
<!-- IndexBlock_NewIterator -->
<g id="node28" class="node">
<title>IndexBlock_NewIterator</title>
<polygon fill="none" stroke="#000000" points="2124.8941,-786 1969.0034,-786 1969.0034,-750 2124.8941,-750 2124.8941,-786"/>
<text text-anchor="middle" x="2046.9487" y="-763.8" font-family="Times,serif" font-size="14.00" fill="#000000">IndexBlock_NewIterator</text>
</g>
<!-- Table_InternalGet&#45;&gt;IndexBlock_NewIterator -->
<g id="edge24" class="edge">
<title>Table_InternalGet&#45;&gt;IndexBlock_NewIterator</title>
<path fill="none" stroke="#000000" d="M1807.5919,-663.5495C1840.2365,-689.6875 1884.5006,-721.3408 1928.5107,-741 1938.1673,-745.3135 1948.5854,-748.9732 1959.0962,-752.0696"/>
<polygon fill="#000000" stroke="#000000" points="1958.1837,-755.4486 1968.7559,-754.7575 1960.0602,-748.7048 1958.1837,-755.4486"/>
</g>
<!-- ParseInternalKey -->
<g id="node46" class="node">
<title>ParseInternalKey</title>
<polygon fill="none" stroke="#000000" points="2494.5807,-942 2381.221,-942 2381.221,-906 2494.5807,-906 2494.5807,-942"/>
<text text-anchor="middle" x="2437.9009" y="-919.8" font-family="Times,serif" font-size="14.00" fill="#000000">ParseInternalKey</text>
</g>
<!-- SaveValue&#45;&gt;ParseInternalKey -->
<g id="edge43" class="edge">
<title>SaveValue&#45;&gt;ParseInternalKey</title>
<path fill="none" stroke="#000000" d="M2308.5836,-924C2326.9735,-924 2349.6136,-924 2370.7832,-924"/>
<polygon fill="#000000" stroke="#000000" points="2371.0324,-927.5001 2381.0323,-924 2371.0323,-920.5001 2371.0324,-927.5001"/>
</g>
<!-- Saver_assign -->
<g id="node47" class="node">
<title>Saver_assign</title>
<polygon fill="none" stroke="#000000" points="2482.7769,-996 2393.0248,-996 2393.0248,-960 2482.7769,-960 2482.7769,-996"/>
<text text-anchor="middle" x="2437.9009" y="-973.8" font-family="Times,serif" font-size="14.00" fill="#000000">Saver_assign</text>
</g>
<!-- SaveValue&#45;&gt;Saver_assign -->
<g id="edge44" class="edge">
<title>SaveValue&#45;&gt;Saver_assign</title>
<path fill="none" stroke="#000000" d="M2308.5836,-936.2534C2330.7087,-943.3959 2358.9859,-952.5245 2383.4527,-960.4229"/>
<polygon fill="#000000" stroke="#000000" points="2382.3796,-963.7543 2392.9713,-963.4957 2384.5301,-957.0928 2382.3796,-963.7543"/>
</g>
<!-- TableCache_Get -->
<g id="node30" class="node">
<title>TableCache_Get</title>
<polygon fill="none" stroke="#000000" points="1304.084,-207.6001 1304.084,-296.3999 1583.876,-296.3999 1583.876,-207.6001 1304.084,-207.6001"/>
<text text-anchor="middle" x="1443.98" y="-281.1999" font-family="Times,serif" font-size="14.00" fill="#000000">Get</text>
<polyline fill="none" stroke="#000000" points="1304.084,-274.3999 1583.876,-274.3999 "/>
<text text-anchor="start" x="1312.084" y="-259.1999" font-family="Times,serif" font-size="14.00" fill="#000000">1.先从cache中查找,如果失败FindTable</text>
<text text-anchor="start" x="1312.084" y="-239.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 2.FindTable: 找到table, 加载index和metadata</text>
<text text-anchor="start" x="1312.084" y="-220" font-family="Times,serif" font-size="14.00" fill="#000000"> 3.加入到Cache中</text>
</g>
<!-- TableCache_Get&#45;&gt;Table_InternalGet -->
<g id="edge26" class="edge">
<title>TableCache_Get&#45;&gt;Table_InternalGet</title>
<path fill="none" stroke="#000000" d="M1481.9513,-296.6345C1539.8879,-364.7377 1650.106,-494.2966 1711.7072,-566.7075"/>
<polygon fill="#000000" stroke="#000000" points="1709.0968,-569.0406 1718.2424,-574.3895 1714.4286,-564.5049 1709.0968,-569.0406"/>
</g>
<!-- FindTable -->
<g id="node33" class="node">
<title>FindTable</title>
<polygon fill="none" stroke="#000000" points="1792.262,-229 1720.1247,-229 1720.1247,-193 1792.262,-193 1792.262,-229"/>
<text text-anchor="middle" x="1756.1934" y="-206.8" font-family="Times,serif" font-size="14.00" fill="#000000">FindTable</text>
</g>
<!-- TableCache_Get&#45;&gt;FindTable -->
<g id="edge27" class="edge">
<title>TableCache_Get&#45;&gt;FindTable</title>
<path fill="none" stroke="#000000" d="M1584.1046,-233.5988C1629.4999,-227.6374 1676.717,-221.4369 1710.1836,-217.042"/>
<polygon fill="#000000" stroke="#000000" points="1710.652,-220.5107 1720.1111,-215.7383 1709.7405,-213.5702 1710.652,-220.5107"/>
</g>
<!-- cache_Release -->
<g id="node34" class="node">
<title>cache_Release</title>
<polygon fill="none" stroke="#000000" points="1805.5808,-283 1706.8059,-283 1706.8059,-247 1805.5808,-247 1805.5808,-283"/>
<text text-anchor="middle" x="1756.1934" y="-260.8" font-family="Times,serif" font-size="14.00" fill="#000000">cache_Release</text>
</g>
<!-- TableCache_Get&#45;&gt;cache_Release -->
<g id="edge28" class="edge">
<title>TableCache_Get&#45;&gt;cache_Release</title>
<path fill="none" stroke="#000000" d="M1584.1046,-257.8345C1623.7457,-259.4851 1664.776,-261.1935 1696.8261,-262.5281"/>
<polygon fill="#000000" stroke="#000000" points="1696.7663,-266.0285 1706.9032,-262.9476 1697.0575,-259.0346 1696.7663,-266.0285"/>
</g>
<!-- TableFileName -->
<g id="node31" class="node">
<title>TableFileName</title>
<polygon fill="none" stroke="#000000" points="1928.5107,-16.2 1928.5107,-65.8 2165.3867,-65.8 2165.3867,-16.2 1928.5107,-16.2"/>
<text text-anchor="middle" x="2046.9487" y="-50.6" font-family="Times,serif" font-size="14.00" fill="#000000">TableFileName</text>
<polyline fill="none" stroke="#000000" points="1928.5107,-43.8 2165.3867,-43.8 "/>
<text text-anchor="middle" x="2046.9487" y="-28.6" font-family="Times,serif" font-size="14.00" fill="#000000">命名格式为: dbname/$file_number.ldb</text>
</g>
<!-- SSTTableFileName -->
<g id="node32" class="node">
<title>SSTTableFileName</title>
<polygon fill="none" stroke="#000000" points="1930.0625,-85.2 1930.0625,-134.8 2163.835,-134.8 2163.835,-85.2 1930.0625,-85.2"/>
<text text-anchor="middle" x="2046.9487" y="-119.6" font-family="Times,serif" font-size="14.00" fill="#000000">SSTTableFileName</text>
<polyline fill="none" stroke="#000000" points="1930.0625,-112.8 2163.835,-112.8 "/>
<text text-anchor="middle" x="2046.9487" y="-97.6" font-family="Times,serif" font-size="14.00" fill="#000000">命名格式为: dbname/$file_number.sst</text>
</g>
<!-- FindTable&#45;&gt;Table_Open -->
<g id="edge29" class="edge">
<title>FindTable&#45;&gt;Table_Open</title>
<path fill="none" stroke="#000000" d="M1792.5214,-208.9354C1822.6781,-209.1886 1864.9461,-214.3658 1892.5107,-238 1928.0535,-268.4748 1895.8884,-303.4175 1928.5107,-337 1932.174,-340.7711 1936.1779,-344.247 1940.4275,-347.4502"/>
<polygon fill="#000000" stroke="#000000" points="1938.6589,-350.4822 1948.8778,-353.2796 1942.6338,-344.7202 1938.6589,-350.4822"/>
</g>
<!-- FindTable&#45;&gt;TableFileName -->
<g id="edge30" class="edge">
<title>FindTable&#45;&gt;TableFileName</title>
<path fill="none" stroke="#000000" d="M1774.6681,-192.5737C1804.5289,-163.7633 1866.3554,-108.0393 1928.5107,-76 1932.7542,-73.8126 1937.1554,-71.741 1941.6549,-69.7815"/>
<polygon fill="#000000" stroke="#000000" points="1943.1043,-72.9697 1951.0095,-65.9158 1940.4308,-66.5003 1943.1043,-72.9697"/>
</g>
<!-- FindTable&#45;&gt;SSTTableFileName -->
<g id="edge31" class="edge">
<title>FindTable&#45;&gt;SSTTableFileName</title>
<path fill="none" stroke="#000000" d="M1792.4794,-195.777C1827.1099,-181.515 1880.9101,-160.049 1928.5107,-144 1934.5637,-141.9592 1940.8159,-139.9319 1947.1385,-137.9428"/>
<polygon fill="#000000" stroke="#000000" points="1948.5976,-141.1549 1957.1136,-134.8519 1946.5257,-134.4685 1948.5976,-141.1549"/>
</g>
<!-- NewRandomAccessFile -->
<g id="node35" class="node">
<title>NewRandomAccessFile</title>
<polygon fill="none" stroke="#000000" points="2122.7527,-189 1971.1447,-189 1971.1447,-153 2122.7527,-153 2122.7527,-189"/>
<text text-anchor="middle" x="2046.9487" y="-166.8" font-family="Times,serif" font-size="14.00" fill="#000000">NewRandomAccessFile</text>
</g>
<!-- FindTable&#45;&gt;NewRandomAccessFile -->
<g id="edge32" class="edge">
<title>FindTable&#45;&gt;NewRandomAccessFile</title>
<path fill="none" stroke="#000000" d="M1792.4298,-206.0148C1834.4352,-200.2361 1905.0888,-190.5161 1961.3113,-182.7814"/>
<polygon fill="#000000" stroke="#000000" points="1961.8434,-186.2412 1971.273,-181.4109 1960.8893,-179.3065 1961.8434,-186.2412"/>
</g>
<!-- cache_Insert -->
<g id="node36" class="node">
<title>cache_Insert</title>
<polygon fill="none" stroke="#000000" points="2090.1806,-243 2003.7169,-243 2003.7169,-207 2090.1806,-207 2090.1806,-243"/>
<text text-anchor="middle" x="2046.9487" y="-220.8" font-family="Times,serif" font-size="14.00" fill="#000000">cache_Insert</text>
</g>
<!-- FindTable&#45;&gt;cache_Insert -->
<g id="edge33" class="edge">
<title>FindTable&#45;&gt;cache_Insert</title>
<path fill="none" stroke="#000000" d="M1792.4298,-212.7448C1842.9799,-215.1788 1935.0187,-219.6105 1993.4675,-222.4249"/>
<polygon fill="#000000" stroke="#000000" points="1993.4592,-225.9284 2003.616,-222.9135 1993.796,-218.9365 1993.4592,-225.9284"/>
</g>
<!-- cache_Loopup -->
<g id="node37" class="node">
<title>cache_Loopup</title>
<polygon fill="none" stroke="#000000" points="2096.3568,-297 1997.5407,-297 1997.5407,-261 2096.3568,-261 2096.3568,-297"/>
<text text-anchor="middle" x="2046.9487" y="-274.8" font-family="Times,serif" font-size="14.00" fill="#000000">cache_Loopup</text>
</g>
<!-- FindTable&#45;&gt;cache_Loopup -->
<g id="edge34" class="edge">
<title>FindTable&#45;&gt;cache_Loopup</title>
<path fill="none" stroke="#000000" d="M1792.4844,-216.4073C1820.1914,-220.9623 1859.1534,-228.2918 1892.5107,-238 1908.9941,-242.7973 1912.0976,-246.9675 1928.5107,-252 1947.4822,-257.8169 1968.5074,-263.0053 1987.5138,-267.2413"/>
<polygon fill="#000000" stroke="#000000" points="1987.0258,-270.7171 1997.5422,-269.431 1988.5191,-263.8782 1987.0258,-270.7171"/>
</g>
<!-- FileMetaData -->
<g id="node38" class="node">
<title>FileMetaData</title>
<polygon fill="#95e1d3" stroke="#000000" points="1688.1294,-907 1688.1294,-1061 1824.2573,-1061 1824.2573,-907 1688.1294,-907"/>
<text text-anchor="middle" x="1756.1934" y="-1045.8" font-family="Times,serif" font-size="14.00" fill="#000000">FileMetaData</text>
<polyline fill="none" stroke="#000000" points="1688.1294,-1039 1824.2573,-1039 "/>
<text text-anchor="start" x="1696.1294" y="-1023.8" font-family="Times,serif" font-size="14.00" fill="#000000">int refs;</text>
<polyline fill="none" stroke="#000000" points="1688.1294,-1017 1824.2573,-1017 "/>
<text text-anchor="start" x="1696.1294" y="-1001.8" font-family="Times,serif" font-size="14.00" fill="#000000">int allowed_seeks;</text>
<polyline fill="none" stroke="#000000" points="1688.1294,-995 1824.2573,-995 "/>
<text text-anchor="start" x="1696.1294" y="-979.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t number;</text>
<polyline fill="none" stroke="#000000" points="1688.1294,-973 1824.2573,-973 "/>
<text text-anchor="start" x="1696.1294" y="-957.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t file_size;</text>
<polyline fill="none" stroke="#000000" points="1688.1294,-951 1824.2573,-951 "/>
<text text-anchor="start" x="1696.1294" y="-935.8" font-family="Times,serif" font-size="14.00" fill="#000000">InternalKey smallest;</text>
<polyline fill="none" stroke="#000000" points="1688.1294,-929 1824.2573,-929 "/>
<text text-anchor="start" x="1696.1294" y="-913.8" font-family="Times,serif" font-size="14.00" fill="#000000">InternalKey largest;</text>
</g>
<!-- files_ -->
<g id="node39" class="node">
<title>files_</title>
<polygon fill="#95e1d3" stroke="#000000" points="1089.9355,-975 1089.9355,-1033 1268.084,-1033 1268.084,-975 1089.9355,-975"/>
<text text-anchor="middle" x="1179.0098" y="-1017.8" font-family="Times,serif" font-size="14.00" fill="#000000">files_</text>
<polyline fill="none" stroke="#000000" points="1089.9355,-1011 1268.084,-1011 "/>
<text text-anchor="start" x="1097.9355" y="-995.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::Vector&lt;FileMetaData*&gt;</text>
<text text-anchor="middle" x="1179.0098" y="-981.8" font-family="Times,serif" font-size="14.00" fill="#000000"> files_[config::kNumLevels];</text>
</g>
<!-- levels -->
<g id="node40" class="node">
<title>levels</title>
<polygon fill="none" stroke="#000000" points="1326.5469,-950 1326.5469,-1038 1561.4131,-1038 1561.4131,-950 1326.5469,-950"/>
<text text-anchor="middle" x="1443.98" y="-1022.8" font-family="Times,serif" font-size="14.00" fill="#000000">levels</text>
<polyline fill="none" stroke="#000000" points="1326.5469,-1016 1561.4131,-1016 "/>
<text text-anchor="start" x="1334.5469" y="-1000.8" font-family="Times,serif" font-size="14.00" fill="#000000">level0: [FileMetaData .. FileMetaData]</text>
<polyline fill="none" stroke="#000000" points="1326.5469,-994 1561.4131,-994 "/>
<text text-anchor="start" x="1334.5469" y="-978.8" font-family="Times,serif" font-size="14.00" fill="#000000">level1: [FileMetaData .. FileMetaData]</text>
<polyline fill="none" stroke="#000000" points="1326.5469,-972 1561.4131,-972 "/>
<text text-anchor="start" x="1334.5469" y="-956.8" font-family="Times,serif" font-size="14.00" fill="#000000">... levelN</text>
</g>
<!-- files_&#45;&gt;levels -->
<g id="edge35" class="edge">
<title>files_&#45;&gt;levels</title>
<path fill="none" stroke="#000000" d="M1268.3472,-1000.6284C1283.7751,-1000.0461 1300.0794,-999.4308 1316.2878,-998.8191"/>
<polygon fill="#000000" stroke="#000000" points="1316.498,-1002.3138 1326.3588,-998.439 1316.2339,-995.3188 1316.498,-1002.3138"/>
</g>
<!-- levels&#45;&gt;FileMetaData -->
<g id="edge36" class="edge">
<title>levels&#45;&gt;FileMetaData</title>
<path fill="none" stroke="#000000" d="M1561.5696,-990.2337C1600.4294,-988.989 1642.6858,-987.6356 1677.8642,-986.5088"/>
<polygon fill="#000000" stroke="#000000" points="1678.1821,-990.0005 1688.0649,-986.1821 1677.9579,-983.0041 1678.1821,-990.0005"/>
</g>
<!-- FindFile -->
<g id="node41" class="node">
<title>FindFile</title>
<polygon fill="none" stroke="#000000" points="853.2354,-906.6001 853.2354,-995.3999 1053.9355,-995.3999 1053.9355,-906.6001 853.2354,-906.6001"/>
<text text-anchor="middle" x="953.5854" y="-980.1999" font-family="Times,serif" font-size="14.00" fill="#000000">FindFile</text>
<polyline fill="none" stroke="#000000" points="853.2354,-973.3999 1053.9355,-973.3999 "/>
<text text-anchor="start" x="861.2354" y="-958.1999" font-family="Times,serif" font-size="14.00" fill="#000000">使用二分查找法</text>
<text text-anchor="start" x="861.2354" y="-938.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 查找files_中除了level_0</text>
<text text-anchor="start" x="861.2354" y="-919" font-family="Times,serif" font-size="14.00" fill="#000000"> 其他level的可能包含key的File</text>
</g>
<!-- FindFile&#45;&gt;files_ -->
<g id="edge40" class="edge">
<title>FindFile&#45;&gt;files_</title>
<path fill="none" stroke="#000000" d="M1054.1011,-974.6324C1062.6242,-976.6363 1071.2414,-978.6624 1079.7548,-980.6639"/>
<polygon fill="#000000" stroke="#000000" points="1079.1535,-984.1179 1089.6891,-982.9996 1080.7556,-977.3037 1079.1535,-984.1179"/>
</g>
<!-- State_Match -->
<g id="node45" class="node">
<title>State_Match</title>
<polygon fill="none" stroke="#000000" points="1097.9028,-906.2 1097.9028,-955.8 1260.1167,-955.8 1260.1167,-906.2 1097.9028,-906.2"/>
<text text-anchor="middle" x="1179.0098" y="-940.6" font-family="Times,serif" font-size="14.00" fill="#000000">Get::Match</text>
<polyline fill="none" stroke="#000000" points="1097.9028,-933.8 1260.1167,-933.8 "/>
<text text-anchor="middle" x="1179.0098" y="-918.6" font-family="Times,serif" font-size="14.00" fill="#000000">找到包含key文件后回调</text>
</g>
<!-- FindFile&#45;&gt;State_Match -->
<g id="edge41" class="edge">
<title>FindFile&#45;&gt;State_Match</title>
<path fill="none" stroke="#000000" d="M1054.1011,-942.0821C1065.2475,-941.0932 1076.555,-940.09 1087.5805,-939.1118"/>
<polygon fill="#000000" stroke="#000000" points="1087.9624,-942.5917 1097.614,-938.2216 1087.3438,-935.6191 1087.9624,-942.5917"/>
</g>
<!-- ForEachOverlapping -->
<g id="node42" class="node">
<title>ForEachOverlapping</title>
<polygon fill="none" stroke="#000000" points="624.3213,-934.0002 624.3213,-1061.9998 817.2354,-1061.9998 817.2354,-934.0002 624.3213,-934.0002"/>
<text text-anchor="middle" x="720.7783" y="-1046.7998" font-family="Times,serif" font-size="14.00" fill="#000000">ForEachOverlapping</text>
<polyline fill="none" stroke="#000000" points="624.3213,-1039.9998 817.2354,-1039.9998 "/>
<text text-anchor="start" x="632.3213" y="-1024.7998" font-family="Times,serif" font-size="14.00" fill="#000000">查遍历查找每个level_0</text>
<text text-anchor="start" x="632.3213" y="-1005.1999" font-family="Times,serif" font-size="14.00" fill="#000000"> 中的是否包含key</text>
<text text-anchor="start" x="632.3213" y="-985.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 因为level0中每个table之间的</text>
<text text-anchor="start" x="632.3213" y="-966" font-family="Times,serif" font-size="14.00" fill="#000000"> key范围是有覆盖的</text>
<text text-anchor="start" x="632.3213" y="-946.4001" font-family="Times,serif" font-size="14.00" fill="#000000"> 然后搜索其他level的table</text>
</g>
<!-- ForEachOverlapping&#45;&gt;files_ -->
<g id="edge38" class="edge">
<title>ForEachOverlapping&#45;&gt;files_</title>
<path fill="none" stroke="#000000" d="M817.3326,-1003.6969C829.4172,-1004.2348 841.6102,-1004.693 853.2354,-1005 942.4044,-1007.3545 964.7362,-1005.3566 1053.9355,-1005 1062.2856,-1004.9666 1070.9491,-1004.9207 1079.6435,-1004.8668"/>
<polygon fill="#000000" stroke="#000000" points="1079.8704,-1008.3655 1089.8473,-1004.8001 1079.8246,-1001.3656 1079.8704,-1008.3655"/>
</g>
<!-- ForEachOverlapping&#45;&gt;FindFile -->
<g id="edge39" class="edge">
<title>ForEachOverlapping&#45;&gt;FindFile</title>
<path fill="none" stroke="#000000" d="M817.487,-978.4761C825.9275,-976.7721 834.5103,-975.0394 843.0508,-973.3152"/>
<polygon fill="#000000" stroke="#000000" points="843.9366,-976.707 853.0462,-971.2973 842.5513,-969.8455 843.9366,-976.707"/>
</g>
<!-- Version_Get -->
<g id="node43" class="node">
<title>Version_Get</title>
<polygon fill="none" stroke="#000000" points="317.2656,-972.6001 317.2656,-1061.3999 588.3213,-1061.3999 588.3213,-972.6001 317.2656,-972.6001"/>
<text text-anchor="start" x="325.2656" y="-1046.1999" font-family="Times,serif" font-size="14.00" fill="#000000">Get</text>
<polyline fill="none" stroke="#000000" points="317.2656,-1039.3999 588.3213,-1039.3999 "/>
<text text-anchor="start" x="325.2656" y="-1024.1999" font-family="Times,serif" font-size="14.00" fill="#000000">从数据库文件中查找</text>
<text text-anchor="start" x="325.2656" y="-1004.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 使用了LRU cache，bloom filter blockIndex</text>
<text text-anchor="start" x="325.2656" y="-985" font-family="Times,serif" font-size="14.00" fill="#000000"> 等优化方法</text>
</g>
<!-- Version_Get&#45;&gt;ForEachOverlapping -->
<g id="edge37" class="edge">
<title>Version_Get&#45;&gt;ForEachOverlapping</title>
<path fill="none" stroke="#000000" d="M588.3561,-1007.3887C596.9395,-1006.7801 605.5144,-1006.1722 613.9397,-1005.5748"/>
<polygon fill="#000000" stroke="#000000" points="614.4058,-1009.0506 624.1332,-1004.8521 613.9107,-1002.0682 614.4058,-1009.0506"/>
</g>
<!-- Version_UpdateStats -->
<g id="node44" class="node">
<title>Version_UpdateStats</title>
<polygon fill="none" stroke="#000000" points="386.0796,-910 386.0796,-954 519.5073,-954 519.5073,-910 386.0796,-910"/>
<text text-anchor="middle" x="452.7935" y="-938.8" font-family="Times,serif" font-size="14.00" fill="#000000">Version_UpdateStats</text>
<polyline fill="none" stroke="#000000" points="386.0796,-932 519.5073,-932 "/>
<text text-anchor="middle" x="452.7935" y="-916.8" font-family="Times,serif" font-size="14.00" fill="#000000">UpdateStats</text>
</g>
<!-- State_Match&#45;&gt;TableCache_Get -->
<g id="edge42" class="edge">
<title>State_Match&#45;&gt;TableCache_Get</title>
<path fill="none" stroke="#000000" d="M1188.7544,-906.0288C1227.1865,-807.5447 1368.7841,-444.6933 1422.8281,-306.2028"/>
<polygon fill="#000000" stroke="#000000" points="1426.1905,-307.2141 1426.5654,-296.6259 1419.6694,-304.6693 1426.1905,-307.2141"/>
</g>
<!-- Get -->
<g id="node48" class="node">
<title>Get</title>
<polygon fill="none" stroke="#000000" points="16,-1428.4001 16,-1497.5999 281.2656,-1497.5999 281.2656,-1428.4001 16,-1428.4001"/>
<text text-anchor="middle" x="148.6328" y="-1482.3999" font-family="Times,serif" font-size="14.00" fill="#000000">Get</text>
<polyline fill="none" stroke="#000000" points="16,-1475.5999 281.2656,-1475.5999 "/>
<text text-anchor="start" x="24" y="-1460.3999" font-family="Times,serif" font-size="14.00" fill="#000000">1.先从mem中查找 2.然后从immute中查找</text>
<text text-anchor="start" x="24" y="-1440.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 3.从当前version中查找</text>
</g>
<!-- Get&#45;&gt;VersionSet_LastSequence -->
<g id="edge45" class="edge">
<title>Get&#45;&gt;VersionSet_LastSequence</title>
<path fill="none" stroke="#000000" d="M248.2264,-1428.2916C297.3074,-1411.1869 354.7015,-1391.185 396.1839,-1376.7284"/>
<polygon fill="#000000" stroke="#000000" points="397.5502,-1379.9588 405.8414,-1373.3628 395.2466,-1373.3487 397.5502,-1379.9588"/>
</g>
<!-- Get&#45;&gt;VersionSet_current -->
<g id="edge46" class="edge">
<title>Get&#45;&gt;VersionSet_current</title>
<path fill="none" stroke="#000000" d="M180.5196,-1428.1433C210.6658,-1397.4212 258.7058,-1353.9334 309.2656,-1330 331.4522,-1319.4976 357.3534,-1312.9343 380.9985,-1308.8327"/>
<polygon fill="#000000" stroke="#000000" points="381.6625,-1312.271 390.9765,-1307.2214 380.5464,-1305.3605 381.6625,-1312.271"/>
</g>
<!-- Get&#45;&gt;MemTable_Get -->
<g id="edge47" class="edge">
<title>Get&#45;&gt;MemTable_Get</title>
<path fill="none" stroke="#000000" d="M170.714,-1428.2447C198.6817,-1386.5231 250.3842,-1316.6128 309.2656,-1272 329.3864,-1256.7551 353.6523,-1244.0545 376.46,-1234.045"/>
<polygon fill="#000000" stroke="#000000" points="377.9673,-1237.2072 385.7896,-1230.0613 375.2184,-1230.7695 377.9673,-1237.2072"/>
</g>
<!-- Get&#45;&gt;Version_Get -->
<g id="edge48" class="edge">
<title>Get&#45;&gt;Version_Get</title>
<path fill="none" stroke="#000000" d="M156.4974,-1428.2959C173.6766,-1359.072 220.3215,-1201.9119 309.2656,-1102 320.8554,-1088.9811 334.929,-1077.3855 349.678,-1067.2635"/>
<polygon fill="#000000" stroke="#000000" points="352.0183,-1069.9118 358.4263,-1061.4745 348.1553,-1064.0742 352.0183,-1069.9118"/>
</g>
<!-- Get&#45;&gt;Version_UpdateStats -->
<g id="edge49" class="edge">
<title>Get&#45;&gt;Version_UpdateStats</title>
<path fill="none" stroke="#000000" d="M155.1715,-1428.071C175.0858,-1325.3788 237.995,-1027.5987 309.2656,-963 327.3631,-946.5967 352.0188,-938.1295 375.7887,-933.9556"/>
<polygon fill="#000000" stroke="#000000" points="376.5392,-937.3819 385.8998,-932.4191 375.4874,-930.4613 376.5392,-937.3819"/>
</g>
<!-- sequence_number -->
<g id="node49" class="node">
<title>sequence_number</title>
<polygon fill="none" stroke="#000000" points="511.3628,-1464 394.2241,-1464 394.2241,-1428 511.3628,-1428 511.3628,-1464"/>
<text text-anchor="middle" x="452.7935" y="-1441.8" font-family="Times,serif" font-size="14.00" fill="#000000">sequence_number</text>
</g>
<!-- Get&#45;&gt;sequence_number -->
<g id="edge50" class="edge">
<title>Get&#45;&gt;sequence_number</title>
<path fill="none" stroke="#000000" d="M281.5996,-1455.5683C316.9297,-1453.5936 353.6581,-1451.5408 383.9942,-1449.8453"/>
<polygon fill="#000000" stroke="#000000" points="384.2367,-1453.3373 394.0257,-1449.2846 383.846,-1446.3482 384.2367,-1453.3373"/>
</g>
<!-- MaybeScheduleCompaction -->
<g id="node50" class="node">
<title>MaybeScheduleCompaction</title>
<polygon fill="none" stroke="#000000" points="539.9218,-1518 365.6651,-1518 365.6651,-1482 539.9218,-1482 539.9218,-1518"/>
<text text-anchor="middle" x="452.7935" y="-1495.8" font-family="Times,serif" font-size="14.00" fill="#000000">MaybeScheduleCompaction</text>
</g>
<!-- Get&#45;&gt;MaybeScheduleCompaction -->
<g id="edge51" class="edge">
<title>Get&#45;&gt;MaybeScheduleCompaction</title>
<path fill="none" stroke="#000000" d="M281.5996,-1479.1749C306.4968,-1482.2036 332.0884,-1485.3167 355.6479,-1488.1826"/>
<polygon fill="#000000" stroke="#000000" points="355.263,-1491.6615 365.6125,-1489.3948 356.1084,-1484.7127 355.263,-1491.6615"/>
</g>
</g>
</svg>
