<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: db_put Pages: 1 -->
<svg width="2902pt" height="1395pt"
 viewBox="0.00 0.00 2901.63 1395.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1391)">
<title>db_put</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1391 2897.6328,-1391 2897.6328,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_SkipList</title>
<path fill="none" stroke="#000000" d="M1578.5264,-14C1578.5264,-14 1724.9814,-14 1724.9814,-14 1730.9814,-14 1736.9814,-20 1736.9814,-26 1736.9814,-26 1736.9814,-96 1736.9814,-96 1736.9814,-102 1730.9814,-108 1724.9814,-108 1724.9814,-108 1578.5264,-108 1578.5264,-108 1572.5264,-108 1566.5264,-102 1566.5264,-96 1566.5264,-96 1566.5264,-26 1566.5264,-26 1566.5264,-20 1572.5264,-14 1578.5264,-14"/>
<text text-anchor="middle" x="1651.7539" y="-88" font-family="Times,serif" font-size="20.00" fill="#000000">SkipList</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_MemTable</title>
<path fill="none" stroke="#000000" d="M1444.5264,-116C1444.5264,-116 1700.8506,-116 1700.8506,-116 1706.8506,-116 1712.8506,-122 1712.8506,-128 1712.8506,-128 1712.8506,-346 1712.8506,-346 1712.8506,-352 1706.8506,-358 1700.8506,-358 1700.8506,-358 1444.5264,-358 1444.5264,-358 1438.5264,-358 1432.5264,-352 1432.5264,-346 1432.5264,-346 1432.5264,-128 1432.5264,-128 1432.5264,-122 1438.5264,-116 1444.5264,-116"/>
<text text-anchor="middle" x="1572.6885" y="-338" font-family="Times,serif" font-size="20.00" fill="#000000">MemTable</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_VersionSet</title>
<path fill="none" stroke="#000000" d="M2319.751,-8C2319.751,-8 2873.6328,-8 2873.6328,-8 2879.6328,-8 2885.6328,-14 2885.6328,-20 2885.6328,-20 2885.6328,-346 2885.6328,-346 2885.6328,-352 2879.6328,-358 2873.6328,-358 2873.6328,-358 2319.751,-358 2319.751,-358 2313.751,-358 2307.751,-352 2307.751,-346 2307.751,-346 2307.751,-20 2307.751,-20 2307.751,-14 2313.751,-8 2319.751,-8"/>
<text text-anchor="middle" x="2596.6919" y="-338" font-family="Times,serif" font-size="20.00" fill="#000000">VersionSet</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_WritableFile</title>
<polygon fill="none" stroke="#000000" points="953.4072,-260 953.4072,-342 1169.7861,-342 1169.7861,-260 953.4072,-260"/>
<text text-anchor="middle" x="1061.5967" y="-322" font-family="Times,serif" font-size="20.00" fill="#000000">WritableFile</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_LogWriter</title>
<path fill="none" stroke="#000000" d="M668.2568,-244C668.2568,-244 833.7568,-244 833.7568,-244 839.7568,-244 845.7568,-250 845.7568,-256 845.7568,-256 845.7568,-346 845.7568,-346 845.7568,-352 839.7568,-358 833.7568,-358 833.7568,-358 668.2568,-358 668.2568,-358 662.2568,-358 656.2568,-352 656.2568,-346 656.2568,-346 656.2568,-256 656.2568,-256 656.2568,-250 662.2568,-244 668.2568,-244"/>
<text text-anchor="middle" x="751.0068" y="-338" font-family="Times,serif" font-size="20.00" fill="#000000">LogWriter</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_MemTableInserter</title>
<path fill="none" stroke="#000000" d="M1210.3047,-221C1210.3047,-221 1349.3047,-221 1349.3047,-221 1355.3047,-221 1361.3047,-227 1361.3047,-233 1361.3047,-233 1361.3047,-346 1361.3047,-346 1361.3047,-352 1355.3047,-358 1349.3047,-358 1349.3047,-358 1210.3047,-358 1210.3047,-358 1204.3047,-358 1198.3047,-352 1198.3047,-346 1198.3047,-346 1198.3047,-233 1198.3047,-233 1198.3047,-227 1204.3047,-221 1210.3047,-221"/>
<text text-anchor="middle" x="1279.8047" y="-338" font-family="Times,serif" font-size="20.00" fill="#000000">MemTableInserter</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_DBImpl</title>
<path fill="none" stroke="#000000" d="M20,-366C20,-366 2845.0845,-366 2845.0845,-366 2851.0845,-366 2857.0845,-372 2857.0845,-378 2857.0845,-378 2857.0845,-1367 2857.0845,-1367 2857.0845,-1373 2851.0845,-1379 2845.0845,-1379 2845.0845,-1379 20,-1379 20,-1379 14,-1379 8,-1373 8,-1367 8,-1367 8,-378 8,-378 8,-372 14,-366 20,-366"/>
<text text-anchor="middle" x="1432.5422" y="-1359" font-family="Times,serif" font-size="20.00" fill="#000000">DBImpl</text>
</g>
<g id="clust14" class="cluster">
<title>cluster_MemTable</title>
<path fill="none" stroke="#000000" d="M1210.083,-815C1210.083,-815 2634.3281,-815 2634.3281,-815 2640.3281,-815 2646.3281,-821 2646.3281,-827 2646.3281,-827 2646.3281,-897 2646.3281,-897 2646.3281,-903 2640.3281,-909 2634.3281,-909 2634.3281,-909 1210.083,-909 1210.083,-909 1204.083,-909 1198.083,-903 1198.083,-897 1198.083,-897 1198.083,-827 1198.083,-827 1198.083,-821 1204.083,-815 1210.083,-815"/>
<text text-anchor="middle" x="1922.2056" y="-889" font-family="Times,serif" font-size="20.00" fill="#000000">MemTable</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_background_work_finished</title>
<path fill="none" stroke="#000000" d="M1400.5264,-1229C1400.5264,-1229 2238.0029,-1229 2238.0029,-1229 2244.0029,-1229 2250.0029,-1235 2250.0029,-1241 2250.0029,-1241 2250.0029,-1331 2250.0029,-1331 2250.0029,-1337 2244.0029,-1343 2238.0029,-1343 2238.0029,-1343 1400.5264,-1343 1400.5264,-1343 1394.5264,-1343 1388.5264,-1337 1388.5264,-1331 1388.5264,-1331 1388.5264,-1241 1388.5264,-1241 1388.5264,-1235 1394.5264,-1229 1400.5264,-1229"/>
<text text-anchor="middle" x="1819.2646" y="-1323" font-family="Times,serif" font-size="20.00" fill="#000000">background_work_finished</text>
</g>
<g id="clust11" class="cluster">
<title>cluster_writers</title>
<path fill="none" stroke="#000000" d="M663.5688,-386C663.5688,-386 1167.083,-386 1167.083,-386 1173.083,-386 1179.083,-392 1179.083,-398 1179.083,-398 1179.083,-865 1179.083,-865 1179.083,-871 1173.083,-877 1167.083,-877 1167.083,-877 663.5688,-877 663.5688,-877 657.5688,-877 651.5688,-871 651.5688,-865 651.5688,-865 651.5688,-398 651.5688,-398 651.5688,-392 657.5688,-386 663.5688,-386"/>
<text text-anchor="middle" x="915.3259" y="-857" font-family="Times,serif" font-size="20.00" fill="#000000">writers队列</text>
</g>
<g id="clust12" class="cluster">
<title>cluster_cv</title>
<path fill="none" stroke="#000000" d="M671.5688,-611C671.5688,-611 830.4448,-611 830.4448,-611 836.4448,-611 842.4448,-617 842.4448,-623 842.4448,-623 842.4448,-821 842.4448,-821 842.4448,-827 836.4448,-833 830.4448,-833 830.4448,-833 671.5688,-833 671.5688,-833 665.5688,-833 659.5688,-827 659.5688,-821 659.5688,-821 659.5688,-623 659.5688,-623 659.5688,-617 665.5688,-611 671.5688,-611"/>
<text text-anchor="middle" x="751.0068" y="-813" font-family="Times,serif" font-size="20.00" fill="#000000">ConditionVar</text>
</g>
<g id="clust18" class="cluster">
<title>cluster_Sequnce</title>
<path fill="none" stroke="#000000" d="M674.3032,-945C674.3032,-945 827.7104,-945 827.7104,-945 833.7104,-945 839.7104,-951 839.7104,-957 839.7104,-957 839.7104,-1175 839.7104,-1175 839.7104,-1181 833.7104,-1187 827.7104,-1187 827.7104,-1187 674.3032,-1187 674.3032,-1187 668.3032,-1187 662.3032,-1181 662.3032,-1175 662.3032,-1175 662.3032,-957 662.3032,-957 662.3032,-951 668.3032,-945 674.3032,-945"/>
<text text-anchor="middle" x="751.0068" y="-1167" font-family="Times,serif" font-size="20.00" fill="#000000">Sequnce</text>
</g>
<g id="clust23" class="cluster">
<title>cluster_BgThread</title>
<path fill="none" stroke="#000000" d="M1234.8701,-917C1234.8701,-917 2837.0845,-917 2837.0845,-917 2843.0845,-917 2849.0845,-923 2849.0845,-929 2849.0845,-929 2849.0845,-1209 2849.0845,-1209 2849.0845,-1215 2843.0845,-1221 2837.0845,-1221 2837.0845,-1221 1234.8701,-1221 1234.8701,-1221 1228.8701,-1221 1222.8701,-1215 1222.8701,-1209 1222.8701,-1209 1222.8701,-929 1222.8701,-929 1222.8701,-923 1228.8701,-917 1234.8701,-917"/>
<text text-anchor="middle" x="2035.9773" y="-1201" font-family="Times,serif" font-size="20.00" fill="#000000">后台压缩线程</text>
</g>
<!-- SkipList_Insert -->
<g id="node1" class="node">
<title>SkipList_Insert</title>
<polygon fill="#f38181" stroke="#000000" points="1574.5264,-22.2 1574.5264,-71.8 1728.9814,-71.8 1728.9814,-22.2 1574.5264,-22.2"/>
<text text-anchor="middle" x="1651.7539" y="-56.6" font-family="Times,serif" font-size="14.00" fill="#000000">Insert</text>
<polyline fill="none" stroke="#000000" points="1574.5264,-49.8 1728.9814,-49.8 "/>
<text text-anchor="middle" x="1651.7539" y="-34.6" font-family="Times,serif" font-size="14.00" fill="#000000">将记录插入到skiplist中</text>
</g>
<!-- MemTable_Add -->
<g id="node2" class="node">
<title>MemTable_Add</title>
<polygon fill="none" stroke="#000000" points="1440.5264,-230 1440.5264,-266 1494.5264,-266 1494.5264,-230 1440.5264,-230"/>
<text text-anchor="middle" x="1467.0815" y="-243.8" font-family="Times,serif" font-size="14.00" fill="#000000">Add</text>
</g>
<!-- MemTable_Add&#45;&gt;SkipList_Insert -->
<g id="edge1" class="edge">
<title>MemTable_Add&#45;&gt;SkipList_Insert</title>
<path fill="none" stroke="#000000" d="M1478.5228,-229.552C1495.3818,-202.1295 1529.5683,-149.7925 1566.5264,-112 1578.3782,-99.8806 1592.5868,-88.156 1605.9743,-78.0798"/>
<polygon fill="#000000" stroke="#000000" points="1608.2057,-80.7831 1614.1754,-72.0301 1604.0503,-75.1499 1608.2057,-80.7831"/>
</g>
<!-- Arena_Allocate -->
<g id="node3" class="node">
<title>Arena_Allocate</title>
<polygon fill="none" stroke="#000000" points="1703.8757,-160 1599.6321,-160 1599.6321,-124 1703.8757,-124 1703.8757,-160"/>
<text text-anchor="middle" x="1651.7539" y="-137.8" font-family="Times,serif" font-size="14.00" fill="#000000">Arena_Allocate</text>
</g>
<!-- MemTable_Add&#45;&gt;Arena_Allocate -->
<g id="edge2" class="edge">
<title>MemTable_Add&#45;&gt;Arena_Allocate</title>
<path fill="none" stroke="#000000" d="M1485.7555,-229.9912C1504.5744,-212.2813 1535.4862,-185.5625 1566.5264,-169 1573.9082,-165.0612 1581.9602,-161.584 1590.0728,-158.5487"/>
<polygon fill="#000000" stroke="#000000" points="1591.3247,-161.8185 1599.5877,-155.1872 1588.993,-155.2182 1591.3247,-161.8185"/>
</g>
<!-- EncodeFixed64 -->
<g id="node4" class="node">
<title>EncodeFixed64</title>
<polygon fill="none" stroke="#000000" points="1703.6231,-214 1599.8847,-214 1599.8847,-178 1703.6231,-178 1703.6231,-214"/>
<text text-anchor="middle" x="1651.7539" y="-191.8" font-family="Times,serif" font-size="14.00" fill="#000000">EncodeFixed64</text>
</g>
<!-- MemTable_Add&#45;&gt;EncodeFixed64 -->
<g id="edge3" class="edge">
<title>MemTable_Add&#45;&gt;EncodeFixed64</title>
<path fill="none" stroke="#000000" d="M1494.7098,-240.3272C1519.654,-233.2865 1557.5234,-222.5975 1589.825,-213.48"/>
<polygon fill="#000000" stroke="#000000" points="1590.9773,-216.7916 1599.6505,-210.7067 1589.0757,-210.0548 1590.9773,-216.7916"/>
</g>
<!-- EncodeVarint32 -->
<g id="node5" class="node">
<title>EncodeVarint32</title>
<polygon fill="none" stroke="#000000" points="1704.9474,-268 1598.5604,-268 1598.5604,-232 1704.9474,-232 1704.9474,-268"/>
<text text-anchor="middle" x="1651.7539" y="-245.8" font-family="Times,serif" font-size="14.00" fill="#000000">EncodeVarint32</text>
</g>
<!-- MemTable_Add&#45;&gt;EncodeVarint32 -->
<g id="edge4" class="edge">
<title>MemTable_Add&#45;&gt;EncodeVarint32</title>
<path fill="none" stroke="#000000" d="M1494.7098,-248.2951C1519.2756,-248.5618 1556.3772,-248.9646 1588.351,-249.3117"/>
<polygon fill="#000000" stroke="#000000" points="1588.492,-252.8133 1598.5295,-249.4222 1588.5681,-245.8137 1588.492,-252.8133"/>
</g>
<!-- memcpy -->
<g id="node6" class="node">
<title>memcpy</title>
<polygon fill="none" stroke="#000000" points="1683.9613,-322 1619.5465,-322 1619.5465,-286 1683.9613,-286 1683.9613,-322"/>
<text text-anchor="middle" x="1651.7539" y="-299.8" font-family="Times,serif" font-size="14.00" fill="#000000">memcpy</text>
</g>
<!-- MemTable_Add&#45;&gt;memcpy -->
<g id="edge5" class="edge">
<title>MemTable_Add&#45;&gt;memcpy</title>
<path fill="none" stroke="#000000" d="M1494.7098,-256.263C1524.9541,-265.4564 1574.1996,-280.4257 1609.4836,-291.151"/>
<polygon fill="#000000" stroke="#000000" points="1608.907,-294.6338 1619.4927,-294.1935 1610.9429,-287.9364 1608.907,-294.6338"/>
</g>
<!-- PickLevelForMemTableOutput -->
<g id="node7" class="node">
<title>PickLevelForMemTableOutput</title>
<polygon fill="none" stroke="#000000" points="2877.4034,-322 2686.3222,-322 2686.3222,-286 2877.4034,-286 2877.4034,-322"/>
<text text-anchor="middle" x="2781.8628" y="-299.8" font-family="Times,serif" font-size="14.00" fill="#000000">PickLevelForMemTableOutput</text>
</g>
<!-- OverlapInLevel -->
<g id="node8" class="node">
<title>OverlapInLevel</title>
<polygon fill="none" stroke="#000000" points="2420.1833,-241 2315.9397,-241 2315.9397,-205 2420.1833,-205 2420.1833,-241"/>
<text text-anchor="middle" x="2368.0615" y="-218.8" font-family="Times,serif" font-size="14.00" fill="#000000">OverlapInLevel</text>
</g>
<!-- SomeFileOverlapsRange -->
<g id="node9" class="node">
<title>SomeFileOverlapsRange</title>
<polygon fill="none" stroke="#000000" points="2650.0791,-160 2494.1338,-160 2494.1338,-124 2650.0791,-124 2650.0791,-160"/>
<text text-anchor="middle" x="2572.1064" y="-137.8" font-family="Times,serif" font-size="14.00" fill="#000000">SomeFileOverlapsRange</text>
</g>
<!-- OverlapInLevel&#45;&gt;SomeFileOverlapsRange -->
<g id="edge6" class="edge">
<title>OverlapInLevel&#45;&gt;SomeFileOverlapsRange</title>
<path fill="none" stroke="#000000" d="M2413.5992,-204.9228C2444.2801,-192.7434 2484.9128,-176.6134 2517.3569,-163.734"/>
<polygon fill="#000000" stroke="#000000" points="2518.7049,-166.9647 2526.7079,-160.0219 2516.1221,-160.4585 2518.7049,-166.9647"/>
</g>
<!-- AfterFile -->
<g id="node10" class="node">
<title>AfterFile</title>
<polygon fill="none" stroke="#000000" points="2815.6809,-214 2748.0447,-214 2748.0447,-178 2815.6809,-178 2815.6809,-214"/>
<text text-anchor="middle" x="2781.8628" y="-191.8" font-family="Times,serif" font-size="14.00" fill="#000000">AfterFile</text>
</g>
<!-- SomeFileOverlapsRange&#45;&gt;AfterFile -->
<g id="edge7" class="edge">
<title>SomeFileOverlapsRange&#45;&gt;AfterFile</title>
<path fill="none" stroke="#000000" d="M2642.2439,-160.0563C2673.9591,-168.2211 2710.4525,-177.616 2738.1743,-184.7528"/>
<polygon fill="#000000" stroke="#000000" points="2737.4088,-188.1697 2747.9656,-187.2735 2739.154,-181.3908 2737.4088,-188.1697"/>
</g>
<!-- files_ -->
<g id="node11" class="node">
<title>files_</title>
<polygon fill="none" stroke="#000000" points="2808.8628,-52 2754.8628,-52 2754.8628,-16 2808.8628,-16 2808.8628,-52"/>
<text text-anchor="middle" x="2781.8628" y="-29.8" font-family="Times,serif" font-size="14.00" fill="#000000">files_</text>
</g>
<!-- SomeFileOverlapsRange&#45;&gt;files_ -->
<g id="edge8" class="edge">
<title>SomeFileOverlapsRange&#45;&gt;files_</title>
<path fill="none" stroke="#000000" d="M2592.9817,-123.785C2614.841,-105.5586 2650.8354,-77.8708 2686.0928,-61 2704.5456,-52.1703 2726.419,-45.7321 2744.6001,-41.3622"/>
<polygon fill="#000000" stroke="#000000" points="2745.5819,-44.7281 2754.5492,-39.0856 2744.0204,-37.9044 2745.5819,-44.7281"/>
</g>
<!-- BeforeFile -->
<g id="node12" class="node">
<title>BeforeFile</title>
<polygon fill="none" stroke="#000000" points="2819.732,-106 2743.9935,-106 2743.9935,-70 2819.732,-70 2819.732,-106"/>
<text text-anchor="middle" x="2781.8628" y="-83.8" font-family="Times,serif" font-size="14.00" fill="#000000">BeforeFile</text>
</g>
<!-- SomeFileOverlapsRange&#45;&gt;BeforeFile -->
<g id="edge9" class="edge">
<title>SomeFileOverlapsRange&#45;&gt;BeforeFile</title>
<path fill="none" stroke="#000000" d="M2642.2439,-123.9437C2672.3415,-116.1953 2706.7423,-107.3391 2733.8659,-100.3564"/>
<polygon fill="#000000" stroke="#000000" points="2735.0692,-103.6608 2743.8808,-97.7781 2733.324,-96.8819 2735.0692,-103.6608"/>
</g>
<!-- FindFile -->
<g id="node13" class="node">
<title>FindFile</title>
<polygon fill="none" stroke="#000000" points="2813.8195,-160 2749.9061,-160 2749.9061,-124 2813.8195,-124 2813.8195,-160"/>
<text text-anchor="middle" x="2781.8628" y="-137.8" font-family="Times,serif" font-size="14.00" fill="#000000">FindFile</text>
</g>
<!-- SomeFileOverlapsRange&#45;&gt;FindFile -->
<g id="edge10" class="edge">
<title>SomeFileOverlapsRange&#45;&gt;FindFile</title>
<path fill="none" stroke="#000000" d="M2650.212,-142C2680.6168,-142 2714.2389,-142 2739.8946,-142"/>
<polygon fill="#000000" stroke="#000000" points="2740.016,-145.5001 2750.016,-142 2740.016,-138.5001 2740.016,-145.5001"/>
</g>
<!-- NewFileNumber -->
<g id="node14" class="node">
<title>NewFileNumber</title>
<polygon fill="none" stroke="#000000" points="2836.9527,-268 2726.7729,-268 2726.7729,-232 2836.9527,-232 2836.9527,-268"/>
<text text-anchor="middle" x="2781.8628" y="-245.8" font-family="Times,serif" font-size="14.00" fill="#000000">NewFileNumber</text>
</g>
<!-- WritableFile_Append -->
<g id="node15" class="node">
<title>WritableFile_Append</title>
<polygon fill="none" stroke="#000000" points="961.4072,-269 961.4072,-305 1161.7861,-305 1161.7861,-269 961.4072,-269"/>
<text text-anchor="start" x="969.4072" y="-285.8" font-family="Times,serif" font-size="14.00" fill="#000000">Append| 将record追加到文件中</text>
</g>
<!-- AddRecord -->
<g id="node16" class="node">
<title>AddRecord</title>
<polygon fill="#f38181" stroke="#000000" points="664.2568,-252.4001 664.2568,-321.5999 837.7568,-321.5999 837.7568,-252.4001 664.2568,-252.4001"/>
<text text-anchor="middle" x="751.0068" y="-306.3999" font-family="Times,serif" font-size="14.00" fill="#000000">AddRecord</text>
<polyline fill="none" stroke="#000000" points="664.2568,-299.5999 837.7568,-299.5999 "/>
<text text-anchor="start" x="672.2568" y="-284.3999" font-family="Times,serif" font-size="14.00" fill="#000000">先将内容写入日志中</text>
<text text-anchor="start" x="672.2568" y="-264.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 挂掉后，能从日志中恢复</text>
</g>
<!-- AddRecord&#45;&gt;WritableFile_Append -->
<g id="edge11" class="edge">
<title>AddRecord&#45;&gt;WritableFile_Append</title>
<path fill="none" stroke="#000000" d="M837.9364,-287C872.9584,-287 913.7762,-287 950.8835,-287"/>
<polygon fill="#000000" stroke="#000000" points="951.2434,-290.5001 961.2433,-287 951.2433,-283.5001 951.2434,-290.5001"/>
</g>
<!-- MemTableInserter_Put -->
<g id="node17" class="node">
<title>MemTableInserter_Put</title>
<polygon fill="none" stroke="#000000" points="1252.3047,-285 1252.3047,-321 1306.3047,-321 1306.3047,-285 1252.3047,-285"/>
<text text-anchor="middle" x="1279.1426" y="-298.8" font-family="Times,serif" font-size="14.00" fill="#000000">Put</text>
</g>
<!-- MemTableInserter_Put&#45;&gt;MemTable_Add -->
<g id="edge12" class="edge">
<title>MemTableInserter_Put&#45;&gt;MemTable_Add</title>
<path fill="none" stroke="#000000" d="M1306.6737,-295.0025C1339.3857,-285.4438 1394.2627,-269.4083 1430.681,-258.7665"/>
<polygon fill="#000000" stroke="#000000" points="1431.8128,-262.0823 1440.4297,-255.9179 1429.8493,-255.3632 1431.8128,-262.0823"/>
</g>
<!-- MemTableInserter_Delete -->
<g id="node18" class="node">
<title>MemTableInserter_Delete</title>
<polygon fill="none" stroke="#000000" points="1252.3047,-230 1252.3047,-266 1306.3047,-266 1306.3047,-230 1252.3047,-230"/>
<text text-anchor="middle" x="1279.0703" y="-243.8" font-family="Times,serif" font-size="14.00" fill="#000000">Delete</text>
</g>
<!-- MemTableInserter_Delete&#45;&gt;MemTable_Add -->
<g id="edge13" class="edge">
<title>MemTableInserter_Delete&#45;&gt;MemTable_Add</title>
<path fill="none" stroke="#000000" d="M1306.6737,-248C1339.2459,-248 1393.7941,-248 1430.2131,-248"/>
<polygon fill="#000000" stroke="#000000" points="1430.4297,-251.5001 1440.4297,-248 1430.4296,-244.5001 1430.4297,-251.5001"/>
</g>
<!-- background_work_finished_signal_ -->
<g id="node19" class="node">
<title>background_work_finished_signal_</title>
<polygon fill="#95e1d3" stroke="#000000" points="2025.3613,-1257 2025.3613,-1293 2242.0029,-1293 2242.0029,-1257 2025.3613,-1257"/>
<text text-anchor="middle" x="2133.6821" y="-1270.8" font-family="Times,serif" font-size="14.00" fill="#000000">background_work_finished_signal_</text>
</g>
<!-- background_work_finished_signal__Wait -->
<g id="node20" class="node">
<title>background_work_finished_signal__Wait</title>
<polygon fill="none" stroke="#000000" points="1396.5264,-1257.2 1396.5264,-1306.8 1538.5264,-1306.8 1538.5264,-1257.2 1396.5264,-1257.2"/>
<text text-anchor="middle" x="1467.5264" y="-1291.6" font-family="Times,serif" font-size="14.00" fill="#000000">Wait</text>
<polyline fill="none" stroke="#000000" points="1396.5264,-1284.8 1538.5264,-1284.8 "/>
<text text-anchor="middle" x="1467.5264" y="-1269.6" font-family="Times,serif" font-size="14.00" fill="#000000">等待后台线程处理完</text>
</g>
<!-- background_work_finished_signal__Wait&#45;&gt;background_work_finished_signal_ -->
<g id="edge14" class="edge">
<title>background_work_finished_signal__Wait&#45;&gt;background_work_finished_signal_</title>
<path fill="none" stroke="#000000" d="M1538.6726,-1297.3255C1548.0027,-1298.843 1557.4666,-1300.1385 1566.5264,-1301 1753.6091,-1318.79 1802.1805,-1317.7261 1989.3613,-1301 2005.111,-1299.5926 2021.7135,-1297.3378 2037.8279,-1294.7294"/>
<polygon fill="#000000" stroke="#000000" points="2038.5006,-1298.1656 2047.7864,-1293.0641 2037.346,-1291.2615 2038.5006,-1298.1656"/>
</g>
<!-- background_work_finished_signal__SignalAll -->
<g id="node21" class="node">
<title>background_work_finished_signal__SignalAll</title>
<polygon fill="none" stroke="#000000" points="1813.1714,-1237.2 1813.1714,-1286.8 1941.1714,-1286.8 1941.1714,-1237.2 1813.1714,-1237.2"/>
<text text-anchor="middle" x="1877.1714" y="-1271.6" font-family="Times,serif" font-size="14.00" fill="#000000">SignalAll</text>
<polyline fill="none" stroke="#000000" points="1813.1714,-1264.8 1941.1714,-1264.8 "/>
<text text-anchor="middle" x="1877.1714" y="-1249.6" font-family="Times,serif" font-size="14.00" fill="#000000">通知已压缩处理完</text>
</g>
<!-- background_work_finished_signal__SignalAll&#45;&gt;background_work_finished_signal_ -->
<g id="edge15" class="edge">
<title>background_work_finished_signal__SignalAll&#45;&gt;background_work_finished_signal_</title>
<path fill="none" stroke="#000000" d="M1941.2382,-1265.2469C1963.7051,-1266.3855 1989.7126,-1267.7036 2015.2022,-1268.9954"/>
<polygon fill="#000000" stroke="#000000" points="2015.1516,-1272.4973 2025.316,-1269.508 2015.506,-1265.5062 2015.1516,-1272.4973"/>
</g>
<!-- cv_wait -->
<g id="node22" class="node">
<title>cv_wait</title>
<polygon fill="none" stroke="#000000" points="667.5688,-727.4001 667.5688,-796.5999 834.4448,-796.5999 834.4448,-727.4001 667.5688,-727.4001"/>
<text text-anchor="middle" x="751.0068" y="-781.3999" font-family="Times,serif" font-size="14.00" fill="#000000">Wait</text>
<polyline fill="none" stroke="#000000" points="667.5688,-774.5999 834.4448,-774.5999 "/>
<text text-anchor="start" x="675.5688" y="-759.3999" font-family="Times,serif" font-size="14.00" fill="#000000">如果自己不再writers队列</text>
<text text-anchor="start" x="675.5688" y="-739.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 最开头的话就等待</text>
</g>
<!-- cv_Signal -->
<g id="node23" class="node">
<title>cv_Signal</title>
<polygon fill="none" stroke="#000000" points="669.3188,-619.6001 669.3188,-708.3999 832.6948,-708.3999 832.6948,-619.6001 669.3188,-619.6001"/>
<text text-anchor="middle" x="751.0068" y="-693.1999" font-family="Times,serif" font-size="14.00" fill="#000000">Signal</text>
<polyline fill="none" stroke="#000000" points="669.3188,-686.3999 832.6948,-686.3999 "/>
<text text-anchor="start" x="677.3188" y="-671.1999" font-family="Times,serif" font-size="14.00" fill="#000000">自己写完了，</text>
<text text-anchor="start" x="677.3188" y="-651.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 通知writers_队列中其他</text>
<text text-anchor="start" x="677.3188" y="-632" font-family="Times,serif" font-size="14.00" fill="#000000"> writer开始写</text>
</g>
<!-- Writer -->
<g id="node24" class="node">
<title>Writer</title>
<polygon fill="none" stroke="#000000" points="678.2568,-531.4001 678.2568,-600.5999 823.7568,-600.5999 823.7568,-531.4001 678.2568,-531.4001"/>
<text text-anchor="middle" x="751.0068" y="-585.3999" font-family="Times,serif" font-size="14.00" fill="#000000">Writer</text>
<polyline fill="none" stroke="#000000" points="678.2568,-578.5999 823.7568,-578.5999 "/>
<text text-anchor="start" x="686.2568" y="-563.3999" font-family="Times,serif" font-size="14.00" fill="#000000">先创建一个Writer，</text>
<text text-anchor="start" x="686.2568" y="-543.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 并将自己放入队列中</text>
</g>
<!-- writers_ -->
<g id="node25" class="node">
<title>writers_</title>
<polygon fill="#95e1d3" stroke="#000000" points="952.1104,-394.2 952.1104,-471.8 1171.083,-471.8 1171.083,-394.2 952.1104,-394.2"/>
<text text-anchor="middle" x="1061.5967" y="-456.6" font-family="Times,serif" font-size="14.00" fill="#000000">writers_</text>
<polyline fill="none" stroke="#000000" points="952.1104,-449.8 1171.083,-449.8 "/>
<text text-anchor="start" x="960.1104" y="-434.6" font-family="Times,serif" font-size="14.00" fill="#000000">writers队列</text>
<text text-anchor="start" x="960.1104" y="-415" font-family="Times,serif" font-size="14.00" fill="#000000"> std::deque&lt;Writer*&gt; </text>
<text text-anchor="start" x="960.1104" y="-401" font-family="Times,serif" font-size="14.00" fill="#000000"> writers_ GUARDED_BY(mutex_);</text>
</g>
<!-- writers_push_back -->
<g id="node26" class="node">
<title>writers_push_back</title>
<polygon fill="none" stroke="#000000" points="665.6309,-463.2 665.6309,-512.8 836.3828,-512.8 836.3828,-463.2 665.6309,-463.2"/>
<text text-anchor="middle" x="751.0068" y="-497.6" font-family="Times,serif" font-size="14.00" fill="#000000">push_back</text>
<polyline fill="none" stroke="#000000" points="665.6309,-490.8 836.3828,-490.8 "/>
<text text-anchor="start" x="673.6309" y="-475.6" font-family="Times,serif" font-size="14.00" fill="#000000">将writers放入writers_队列</text>
</g>
<!-- writers_push_back&#45;&gt;writers_ -->
<g id="edge16" class="edge">
<title>writers_push_back&#45;&gt;writers_</title>
<path fill="none" stroke="#000000" d="M836.6991,-472.8254C869.1387,-467.0809 906.6875,-460.4317 941.7005,-454.2315"/>
<polygon fill="#000000" stroke="#000000" points="942.7512,-457.6 951.9876,-452.4098 941.5305,-450.7072 942.7512,-457.6"/>
</g>
<!-- writers_pop_front -->
<g id="node27" class="node">
<title>writers_pop_front</title>
<polygon fill="none" stroke="#000000" points="681.5688,-394.2 681.5688,-443.8 820.4448,-443.8 820.4448,-394.2 681.5688,-394.2"/>
<text text-anchor="middle" x="751.0068" y="-428.6" font-family="Times,serif" font-size="14.00" fill="#000000">pop_front</text>
<polyline fill="none" stroke="#000000" points="681.5688,-421.8 820.4448,-421.8 "/>
<text text-anchor="start" x="689.5688" y="-406.6" font-family="Times,serif" font-size="14.00" fill="#000000">从writers队列中取出</text>
</g>
<!-- writers_pop_front&#45;&gt;writers_ -->
<g id="edge17" class="edge">
<title>writers_pop_front&#45;&gt;writers_</title>
<path fill="none" stroke="#000000" d="M820.7093,-422.1419C856.3986,-423.7506 900.859,-425.7547 941.8324,-427.6016"/>
<polygon fill="#000000" stroke="#000000" points="941.742,-431.1009 951.8895,-428.0549 942.0573,-424.108 941.742,-431.1009"/>
</g>
<!-- imm_ -->
<g id="node28" class="node">
<title>imm_</title>
<polygon fill="#95e1d3" stroke="#000000" points="2505.8848,-823.2 2505.8848,-872.8 2638.3281,-872.8 2638.3281,-823.2 2505.8848,-823.2"/>
<text text-anchor="middle" x="2572.1064" y="-857.6" font-family="Times,serif" font-size="14.00" fill="#000000">imm_</text>
<polyline fill="none" stroke="#000000" points="2505.8848,-850.8 2638.3281,-850.8 "/>
<text text-anchor="start" x="2513.8848" y="-835.6" font-family="Times,serif" font-size="14.00" fill="#000000">不可变的MemTable</text>
</g>
<!-- mem_ -->
<g id="node29" class="node">
<title>mem_</title>
<polygon fill="#95e1d3" stroke="#000000" points="1206.083,-823.2 1206.083,-872.8 1352.5264,-872.8 1352.5264,-823.2 1206.083,-823.2"/>
<text text-anchor="middle" x="1279.3047" y="-857.6" font-family="Times,serif" font-size="14.00" fill="#000000">mem_</text>
<polyline fill="none" stroke="#000000" points="1206.083,-850.8 1352.5264,-850.8 "/>
<text text-anchor="middle" x="1279.3047" y="-835.6" font-family="Times,serif" font-size="14.00" fill="#000000">当前可变的MemTable</text>
</g>
<!-- DBImpl_Write -->
<g id="node30" class="node">
<title>DBImpl_Write</title>
<polygon fill="none" stroke="#000000" points="157.4209,-707.8002 157.4209,-816.1998 549.9033,-816.1998 549.9033,-707.8002 157.4209,-707.8002"/>
<text text-anchor="middle" x="353.6621" y="-800.9998" font-family="Times,serif" font-size="14.00" fill="#000000">Write</text>
<polyline fill="none" stroke="#000000" points="157.4209,-794.1998 549.9033,-794.1998 "/>
<text text-anchor="start" x="165.4209" y="-778.9998" font-family="Times,serif" font-size="14.00" fill="#000000">1. 先将自己加入到writers队列</text>
<text text-anchor="start" x="165.4209" y="-759.3999" font-family="Times,serif" font-size="14.00" fill="#000000"> 2. 通过MakeRoomForWrite保证mem_有足够空间写入key,value</text>
<text text-anchor="start" x="165.4209" y="-739.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 3. 先写入WAL日志</text>
<text text-anchor="start" x="165.4209" y="-720.2001" font-family="Times,serif" font-size="14.00" fill="#000000"> 4. 写入memTable中</text>
</g>
<!-- DBImpl_Write&#45;&gt;AddRecord -->
<g id="edge22" class="edge">
<title>DBImpl_Write&#45;&gt;AddRecord</title>
<path fill="none" stroke="#000000" d="M541.2705,-707.5132C544.3104,-704.5088 547.1955,-701.3407 549.9033,-698 644.4735,-581.3256 497.9593,-483.7468 585.9033,-362 602.7238,-338.7143 628.5275,-322.5 654.7741,-311.2744"/>
<polygon fill="#000000" stroke="#000000" points="656.1103,-314.5094 664.0624,-307.5084 653.48,-308.0224 656.1103,-314.5094"/>
</g>
<!-- DBImpl_Write&#45;&gt;cv_wait -->
<g id="edge23" class="edge">
<title>DBImpl_Write&#45;&gt;cv_wait</title>
<path fill="none" stroke="#000000" d="M550.0063,-762C587.4087,-762 624.921,-762 657.2399,-762"/>
<polygon fill="#000000" stroke="#000000" points="657.5439,-765.5001 667.5439,-762 657.5439,-758.5001 657.5439,-765.5001"/>
</g>
<!-- DBImpl_Write&#45;&gt;cv_Signal -->
<g id="edge24" class="edge">
<title>DBImpl_Write&#45;&gt;cv_Signal</title>
<path fill="none" stroke="#000000" d="M550.0063,-713.5742C588.1021,-704.1784 626.3121,-694.7544 659.0322,-686.6844"/>
<polygon fill="#000000" stroke="#000000" points="660.1334,-690.0177 669.0043,-684.2249 658.4571,-683.2214 660.1334,-690.0177"/>
</g>
<!-- DBImpl_Write&#45;&gt;Writer -->
<g id="edge25" class="edge">
<title>DBImpl_Write&#45;&gt;Writer</title>
<path fill="none" stroke="#000000" d="M538.4086,-707.767C542.4064,-704.6893 546.2484,-701.4369 549.9033,-698 581.5888,-668.2043 553.1681,-635.6384 585.9033,-607 608.4718,-587.256 639.1083,-576.7239 667.8634,-571.2025"/>
<polygon fill="#000000" stroke="#000000" points="668.6865,-574.612 677.9396,-569.4516 667.488,-567.7154 668.6865,-574.612"/>
</g>
<!-- DBImpl_Write&#45;&gt;writers_ -->
<g id="edge26" class="edge">
<title>DBImpl_Write&#45;&gt;writers_</title>
<path fill="none" stroke="#000000" d="M541.2351,-707.4845C544.2857,-704.4887 547.1826,-701.3301 549.9033,-698 594.2009,-643.781 533.6439,-431.5933 585.9033,-385 613.2889,-360.5836 879.8855,-379.1785 916.1104,-385 926.2595,-386.631 936.6602,-388.8636 947.0051,-391.4789"/>
<polygon fill="#000000" stroke="#000000" points="946.3337,-394.9216 956.8963,-394.0965 948.1245,-388.1546 946.3337,-394.9216"/>
</g>
<!-- DBImpl_Write&#45;&gt;writers_push_back -->
<g id="edge27" class="edge">
<title>DBImpl_Write&#45;&gt;writers_push_back</title>
<path fill="none" stroke="#000000" d="M540.4497,-707.5137C543.7613,-704.5102 546.9206,-701.342 549.9033,-698 603.0672,-638.4322 529.4842,-578.4942 585.9033,-522 604.2511,-503.6278 629.7122,-493.9064 655.1523,-489.0462"/>
<polygon fill="#000000" stroke="#000000" points="655.9779,-492.457 665.2655,-487.3589 654.8258,-485.5524 655.9779,-492.457"/>
</g>
<!-- DBImpl_Write&#45;&gt;writers_pop_front -->
<g id="edge28" class="edge">
<title>DBImpl_Write&#45;&gt;writers_pop_front</title>
<path fill="none" stroke="#000000" d="M540.7035,-707.7339C543.9392,-704.6646 547.0141,-701.4232 549.9033,-698 620.6064,-614.2308 510.8476,-533.8926 585.9033,-454 607.6231,-430.8806 640.4998,-421.0559 671.2127,-417.4162"/>
<polygon fill="#000000" stroke="#000000" points="671.9138,-420.8644 681.5261,-416.4087 671.2332,-413.8976 671.9138,-420.8644"/>
</g>
<!-- MakeRoomForWrite -->
<g id="node35" class="node">
<title>MakeRoomForWrite</title>
<polygon fill="#f38181" stroke="#000000" points="585.9033,-1195.2003 585.9033,-1342.7997 916.1104,-1342.7997 916.1104,-1195.2003 585.9033,-1195.2003"/>
<text text-anchor="middle" x="751.0068" y="-1327.5997" font-family="Times,serif" font-size="14.00" fill="#000000">MakeRoomForWrite</text>
<polyline fill="none" stroke="#000000" points="585.9033,-1320.7997 916.1104,-1320.7997 "/>
<text text-anchor="start" x="593.9033" y="-1305.5997" font-family="Times,serif" font-size="14.00" fill="#000000">1. 如果level0文件各处超过配置则等待后台压缩线程</text>
<text text-anchor="start" x="593.9033" y="-1285.9998" font-family="Times,serif" font-size="14.00" fill="#000000"> 2. 如果imm_不为null, 也等待后台压缩线程</text>
<text text-anchor="start" x="593.9033" y="-1266.3999" font-family="Times,serif" font-size="14.00" fill="#000000"> 3. 如果mem_内存超过阈值则新建一个mem_</text>
<text text-anchor="start" x="593.9033" y="-1246.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 4. 并将之间的imm设置为之前的mem_, </text>
<text text-anchor="start" x="593.9033" y="-1227.2001" font-family="Times,serif" font-size="14.00" fill="#000000">在后面的CompatMemTable中会将它落盘</text>
<text text-anchor="start" x="593.9033" y="-1207.6002" font-family="Times,serif" font-size="14.00" fill="#000000"> 5. 触发压缩操作</text>
</g>
<!-- DBImpl_Write&#45;&gt;MakeRoomForWrite -->
<g id="edge29" class="edge">
<title>DBImpl_Write&#45;&gt;MakeRoomForWrite</title>
<path fill="none" stroke="#000000" d="M541.3089,-816.4558C544.3373,-819.4695 547.2096,-822.6479 549.9033,-826 649.9185,-950.4601 498.4556,-1053.4497 583.092,-1186.432"/>
<polygon fill="#000000" stroke="#000000" points="580.245,-1188.4708 588.7231,-1194.8248 586.0578,-1184.5706 580.245,-1188.4708"/>
</g>
<!-- BuildBatchGroup -->
<g id="node36" class="node">
<title>BuildBatchGroup</title>
<polygon fill="none" stroke="#000000" points="808.5527,-1151 693.461,-1151 693.461,-1115 808.5527,-1115 808.5527,-1151"/>
<text text-anchor="middle" x="751.0068" y="-1128.8" font-family="Times,serif" font-size="14.00" fill="#000000">BuildBatchGroup</text>
</g>
<!-- DBImpl_Write&#45;&gt;BuildBatchGroup -->
<g id="edge30" class="edge">
<title>DBImpl_Write&#45;&gt;BuildBatchGroup</title>
<path fill="none" stroke="#000000" d="M541.1747,-816.5652C544.2434,-819.5461 547.1604,-822.6881 549.9033,-826 629.9339,-922.6309 498.7148,-1015.7748 585.9033,-1106 610.5047,-1131.4582 649.1086,-1138.7943 682.8037,-1139.494"/>
<polygon fill="#000000" stroke="#000000" points="683.0765,-1142.9943 693.0822,-1139.5108 683.088,-1135.9944 683.0765,-1142.9943"/>
</g>
<!-- SetSequence -->
<g id="node37" class="node">
<title>SetSequence</title>
<polygon fill="none" stroke="#000000" points="794.5393,-1097 707.4743,-1097 707.4743,-1061 794.5393,-1061 794.5393,-1097"/>
<text text-anchor="middle" x="751.0068" y="-1074.8" font-family="Times,serif" font-size="14.00" fill="#000000">SetSequence</text>
</g>
<!-- DBImpl_Write&#45;&gt;SetSequence -->
<g id="edge31" class="edge">
<title>DBImpl_Write&#45;&gt;SetSequence</title>
<path fill="none" stroke="#000000" d="M540.6503,-816.3112C543.9019,-819.3671 546.9945,-822.5935 549.9033,-826 615.9511,-903.3484 514.1317,-979.9311 585.9033,-1052 614.3503,-1080.5648 660.4846,-1086.0919 696.7643,-1085.1656"/>
<polygon fill="#000000" stroke="#000000" points="697.3526,-1088.6437 707.1935,-1084.7186 697.0528,-1081.6501 697.3526,-1088.6437"/>
</g>
<!-- Versions_LastSequence -->
<g id="node38" class="node">
<title>Versions_LastSequence</title>
<polygon fill="none" stroke="#000000" points="825.4727,-1043 676.541,-1043 676.541,-1007 825.4727,-1007 825.4727,-1043"/>
<text text-anchor="middle" x="751.0068" y="-1020.8" font-family="Times,serif" font-size="14.00" fill="#000000">Versions_LastSequence</text>
</g>
<!-- DBImpl_Write&#45;&gt;Versions_LastSequence -->
<g id="edge32" class="edge">
<title>DBImpl_Write&#45;&gt;Versions_LastSequence</title>
<path fill="none" stroke="#000000" d="M540.4291,-816.5048C543.7468,-819.5027 546.913,-822.6648 549.9033,-826 602.0408,-884.1502 529.4701,-944.0089 585.9033,-998 607.1171,-1018.2957 637.3192,-1026.7734 666.1042,-1029.6014"/>
<polygon fill="#000000" stroke="#000000" points="665.9712,-1033.1014 676.2096,-1030.3763 666.5064,-1026.1219 665.9712,-1033.1014"/>
</g>
<!-- Version_SetLastSequence -->
<g id="node39" class="node">
<title>Version_SetLastSequence</title>
<polygon fill="none" stroke="#000000" points="831.9146,-989 670.0991,-989 670.0991,-953 831.9146,-953 831.9146,-989"/>
<text text-anchor="middle" x="751.0068" y="-966.8" font-family="Times,serif" font-size="14.00" fill="#000000">Version_SetLastSequence</text>
</g>
<!-- DBImpl_Write&#45;&gt;Version_SetLastSequence -->
<g id="edge33" class="edge">
<title>DBImpl_Write&#45;&gt;Version_SetLastSequence</title>
<path fill="none" stroke="#000000" d="M539.6692,-816.4825C543.2397,-819.4865 546.6598,-822.656 549.9033,-826 589.5608,-866.8868 542.6798,-911.9032 585.9033,-949 606.2366,-966.4512 633.4814,-974.1514 659.9702,-976.8732"/>
<polygon fill="#000000" stroke="#000000" points="659.8217,-980.3724 670.0694,-977.6826 660.381,-973.3948 659.8217,-980.3724"/>
</g>
<!-- WriteBatchInternal_InsertInto -->
<g id="node40" class="node">
<title>WriteBatchInternal_InsertInto</title>
<polygon fill="none" stroke="#000000" points="658.1523,-885.2 658.1523,-934.8 843.8613,-934.8 843.8613,-885.2 658.1523,-885.2"/>
<text text-anchor="middle" x="751.0068" y="-919.6" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchInternal::InsertInto</text>
<polyline fill="none" stroke="#000000" points="658.1523,-912.8 843.8613,-912.8 "/>
<text text-anchor="middle" x="751.0068" y="-897.6" font-family="Times,serif" font-size="14.00" fill="#000000">将内容插入memtable</text>
</g>
<!-- DBImpl_Write&#45;&gt;WriteBatchInternal_InsertInto -->
<g id="edge34" class="edge">
<title>DBImpl_Write&#45;&gt;WriteBatchInternal_InsertInto</title>
<path fill="none" stroke="#000000" d="M522.8275,-816.2088C532.0109,-819.4509 541.0845,-822.7262 549.9033,-826 595.5206,-842.9344 646.0558,-864.0527 685.056,-880.8778"/>
<polygon fill="#000000" stroke="#000000" points="684.1453,-884.2974 694.7128,-885.0577 686.926,-877.8733 684.1453,-884.2974"/>
</g>
<!-- DBImpl_Put -->
<g id="node31" class="node">
<title>DBImpl_Put</title>
<polygon fill="none" stroke="#000000" points="112.277,-816 25.1439,-816 25.1439,-780 112.277,-780 112.277,-816"/>
<text text-anchor="middle" x="68.7104" y="-793.8" font-family="Times,serif" font-size="14.00" fill="#000000">DBImpl_Put</text>
</g>
<!-- DBImpl_Put&#45;&gt;DBImpl_Write -->
<g id="edge18" class="edge">
<title>DBImpl_Put&#45;&gt;DBImpl_Write</title>
<path fill="none" stroke="#000000" d="M112.2987,-792.4932C122.7967,-791.1669 134.7081,-789.662 147.4796,-788.0485"/>
<polygon fill="#000000" stroke="#000000" points="147.9221,-791.5205 157.4045,-786.7946 147.0446,-784.5757 147.9221,-791.5205"/>
</g>
<!-- WriteBatch_Put -->
<g id="node32" class="node">
<title>WriteBatch_Put</title>
<polygon fill="none" stroke="#000000" points="406.3092,-871 301.015,-871 301.015,-835 406.3092,-835 406.3092,-871"/>
<text text-anchor="middle" x="353.6621" y="-848.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatch_Put</text>
</g>
<!-- DBImpl_Put&#45;&gt;WriteBatch_Put -->
<g id="edge19" class="edge">
<title>DBImpl_Put&#45;&gt;WriteBatch_Put</title>
<path fill="none" stroke="#000000" d="M112.5295,-813.445C126.7151,-818.0088 142.6098,-822.6688 157.4209,-826 201.465,-835.9061 251.9386,-842.7523 290.6673,-847.072"/>
<polygon fill="#000000" stroke="#000000" points="290.4355,-850.5674 300.7555,-848.1699 291.1929,-843.6085 290.4355,-850.5674"/>
</g>
<!-- DBImpl_Delete -->
<g id="node33" class="node">
<title>DBImpl_Delete</title>
<polygon fill="none" stroke="#000000" points="121.6322,-744 15.7887,-744 15.7887,-708 121.6322,-708 121.6322,-744"/>
<text text-anchor="middle" x="68.7104" y="-721.8" font-family="Times,serif" font-size="14.00" fill="#000000">DBImpl_Delete</text>
</g>
<!-- DBImpl_Delete&#45;&gt;DBImpl_Write -->
<g id="edge20" class="edge">
<title>DBImpl_Delete&#45;&gt;DBImpl_Write</title>
<path fill="none" stroke="#000000" d="M121.6399,-732.687C129.6182,-733.6949 138.2264,-734.7825 147.268,-735.9247"/>
<polygon fill="#000000" stroke="#000000" points="146.8798,-739.4034 157.2397,-737.1845 147.7573,-732.4586 146.8798,-739.4034"/>
</g>
<!-- WriteBatch_Delete -->
<g id="node34" class="node">
<title>WriteBatch_Delete</title>
<polygon fill="none" stroke="#000000" points="415.1651,-689 292.1592,-689 292.1592,-653 415.1651,-653 415.1651,-689"/>
<text text-anchor="middle" x="353.6621" y="-666.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatch_Delete</text>
</g>
<!-- DBImpl_Delete&#45;&gt;WriteBatch_Delete -->
<g id="edge21" class="edge">
<title>DBImpl_Delete&#45;&gt;WriteBatch_Delete</title>
<path fill="none" stroke="#000000" d="M120.8471,-707.9327C132.7627,-704.2553 145.446,-700.6933 157.4209,-698 198.0574,-688.8603 244.1669,-682.3254 281.4755,-677.9762"/>
<polygon fill="#000000" stroke="#000000" points="282.2129,-681.415 291.7532,-676.8072 281.4217,-674.4599 282.2129,-681.415"/>
</g>
<!-- MakeRoomForWrite&#45;&gt;background_work_finished_signal__Wait -->
<g id="edge35" class="edge">
<title>MakeRoomForWrite&#45;&gt;background_work_finished_signal__Wait</title>
<path fill="none" stroke="#000000" d="M916.2906,-1271.9988C1063.5251,-1274.6701 1272.7406,-1278.466 1386.4036,-1280.5282"/>
<polygon fill="#000000" stroke="#000000" points="1386.3677,-1284.028 1396.4296,-1280.7101 1386.4947,-1277.0291 1386.3677,-1284.028"/>
</g>
<!-- MakeRoomForWrite&#45;&gt;imm_ -->
<g id="edge36" class="edge">
<title>MakeRoomForWrite&#45;&gt;imm_</title>
<path fill="none" stroke="#000000" d="M912.6554,-1194.9345C913.8338,-1193.6441 914.986,-1192.3327 916.1104,-1191 954.493,-1145.504 907.1654,-1101.0264 952.1104,-1062 1028.9421,-995.2858 1108.7497,-1105.5331 1179.083,-1032 1212.6952,-996.8586 1162.8516,-847.5178 1198.083,-814 1284.9043,-731.4015 1347.6913,-804 1467.5264,-804 1467.5264,-804 1467.5264,-804 2133.6821,-804 2261.1668,-804 2408.4657,-822.6463 2495.756,-835.662"/>
<polygon fill="#000000" stroke="#000000" points="2495.4277,-839.1519 2505.8374,-837.18 2496.47,-832.23 2495.4277,-839.1519"/>
</g>
<!-- MakeRoomForWrite&#45;&gt;mem_ -->
<g id="edge37" class="edge">
<title>MakeRoomForWrite&#45;&gt;mem_</title>
<path fill="none" stroke="#000000" d="M916.2102,-1212.3728C928.2791,-1209.2329 940.3338,-1206.3903 952.1104,-1204 1001.7323,-1193.928 1143.7494,-1220.2673 1179.083,-1184 1226.7814,-1135.0412 1156.9985,-931.6275 1198.083,-877 1198.2939,-876.7195 1198.5078,-876.4418 1198.7246,-876.1667"/>
<polygon fill="#000000" stroke="#000000" points="1201.3048,-878.5335 1205.7513,-868.9169 1196.2783,-873.6617 1201.3048,-878.5335"/>
</g>
<!-- SleepForMicroseconds -->
<g id="node41" class="node">
<title>SleepForMicroseconds</title>
<polygon fill="none" stroke="#000000" points="989.0518,-953.4001 989.0518,-1022.5999 1134.1416,-1022.5999 1134.1416,-953.4001 989.0518,-953.4001"/>
<text text-anchor="middle" x="1061.5967" y="-1007.3999" font-family="Times,serif" font-size="14.00" fill="#000000">SleepForMicroseconds</text>
<polyline fill="none" stroke="#000000" points="989.0518,-1000.5999 1134.1416,-1000.5999 "/>
<text text-anchor="start" x="997.0518" y="-985.3999" font-family="Times,serif" font-size="14.00" fill="#000000">Sleep等待后台</text>
<text text-anchor="start" x="997.0518" y="-965.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 线程压缩完毕</text>
</g>
<!-- MakeRoomForWrite&#45;&gt;SleepForMicroseconds -->
<g id="edge38" class="edge">
<title>MakeRoomForWrite&#45;&gt;SleepForMicroseconds</title>
<path fill="none" stroke="#000000" d="M912.7375,-1195.0023C913.8898,-1193.6903 915.0146,-1192.3563 916.1104,-1191 960.2831,-1136.3245 907.3784,-1091.219 952.1104,-1037 959.7204,-1027.776 969.425,-1020.2247 979.9016,-1014.0597"/>
<polygon fill="#000000" stroke="#000000" points="981.735,-1017.047 988.8546,-1009.2009 978.396,-1010.8947 981.735,-1017.047"/>
</g>
<!-- MaybeScheduleCompaction -->
<g id="node43" class="node">
<title>MaybeScheduleCompaction</title>
<polygon fill="none" stroke="#000000" points="974.2827,-1213.2 974.2827,-1262.8 1148.9106,-1262.8 1148.9106,-1213.2 974.2827,-1213.2"/>
<text text-anchor="middle" x="1061.5967" y="-1247.6" font-family="Times,serif" font-size="14.00" fill="#000000">MaybeScheduleCompaction</text>
<polyline fill="none" stroke="#000000" points="974.2827,-1240.8 1148.9106,-1240.8 "/>
<text text-anchor="start" x="982.2827" y="-1225.6" font-family="Times,serif" font-size="14.00" fill="#000000">可能触发压缩操作</text>
</g>
<!-- MakeRoomForWrite&#45;&gt;MaybeScheduleCompaction -->
<g id="edge39" class="edge">
<title>MakeRoomForWrite&#45;&gt;MaybeScheduleCompaction</title>
<path fill="none" stroke="#000000" d="M916.3048,-1252.5016C932.7047,-1250.8647 948.9551,-1249.2428 964.3205,-1247.7091"/>
<polygon fill="#000000" stroke="#000000" points="964.6797,-1251.1908 974.2827,-1246.7148 963.9845,-1244.2254 964.6797,-1251.1908"/>
</g>
<!-- ApproximateMemoryUsage -->
<g id="node44" class="node">
<title>ApproximateMemoryUsage</title>
<polygon fill="none" stroke="#000000" points="975.062,-1071.2 975.062,-1120.8 1148.1313,-1120.8 1148.1313,-1071.2 975.062,-1071.2"/>
<text text-anchor="middle" x="1061.5967" y="-1105.6" font-family="Times,serif" font-size="14.00" fill="#000000">ApproximateMemoryUsage</text>
<polyline fill="none" stroke="#000000" points="975.062,-1098.8 1148.1313,-1098.8 "/>
<text text-anchor="start" x="983.062" y="-1083.6" font-family="Times,serif" font-size="14.00" fill="#000000">评估当前mem_使用内存</text>
</g>
<!-- MakeRoomForWrite&#45;&gt;ApproximateMemoryUsage -->
<g id="edge40" class="edge">
<title>MakeRoomForWrite&#45;&gt;ApproximateMemoryUsage</title>
<path fill="none" stroke="#000000" d="M911.4582,-1195.1054C913.0364,-1193.7571 914.588,-1192.3887 916.1104,-1191 939.3683,-1169.7849 927.4231,-1149.5333 952.1104,-1130 956.4027,-1126.6038 961.0363,-1123.5448 965.8883,-1120.79"/>
<polygon fill="#000000" stroke="#000000" points="967.5651,-1123.8631 974.8311,-1116.1524 964.3425,-1117.649 967.5651,-1123.8631"/>
</g>
<!-- has_imm_ -->
<g id="node45" class="node">
<title>has_imm_</title>
<polygon fill="none" stroke="#000000" points="1098.9285,-1175 1024.2649,-1175 1024.2649,-1139 1098.9285,-1139 1098.9285,-1175"/>
<text text-anchor="middle" x="1061.5967" y="-1152.8" font-family="Times,serif" font-size="14.00" fill="#000000">has_imm_</text>
</g>
<!-- MakeRoomForWrite&#45;&gt;has_imm_ -->
<g id="edge41" class="edge">
<title>MakeRoomForWrite&#45;&gt;has_imm_</title>
<path fill="none" stroke="#000000" d="M916.2565,-1201.8316C928.342,-1197.3598 940.3857,-1193.0354 952.1104,-1189 972.3614,-1182.0299 995.0419,-1175.238 1014.4851,-1169.7176"/>
<polygon fill="#000000" stroke="#000000" points="1015.6469,-1173.0267 1024.3275,-1166.9524 1013.7536,-1166.2876 1015.6469,-1173.0267"/>
</g>
<!-- WriteBatch_Iterate -->
<g id="node46" class="node">
<title>WriteBatch_Iterate</title>
<polygon fill="none" stroke="#000000" points="972.4404,-885.2 972.4404,-934.8 1150.7529,-934.8 1150.7529,-885.2 972.4404,-885.2"/>
<text text-anchor="middle" x="1061.5967" y="-919.6" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatch_Iterate</text>
<polyline fill="none" stroke="#000000" points="972.4404,-912.8 1150.7529,-912.8 "/>
<text text-anchor="middle" x="1061.5967" y="-897.6" font-family="Times,serif" font-size="14.00" fill="#000000">根据KeyTypeput或者delete;</text>
</g>
<!-- WriteBatchInternal_InsertInto&#45;&gt;WriteBatch_Iterate -->
<g id="edge42" class="edge">
<title>WriteBatchInternal_InsertInto&#45;&gt;WriteBatch_Iterate</title>
<path fill="none" stroke="#000000" d="M844.194,-910C881.428,-910 924.365,-910 962.1955,-910"/>
<polygon fill="#000000" stroke="#000000" points="962.2072,-913.5001 972.2072,-910 962.2072,-906.5001 962.2072,-913.5001"/>
</g>
<!-- shutting_down_ -->
<g id="node42" class="node">
<title>shutting_down_</title>
<polygon fill="#95e1d3" stroke="#000000" points="2518.9927,-1067 2518.9927,-1103 2625.2202,-1103 2625.2202,-1067 2518.9927,-1067"/>
<text text-anchor="middle" x="2572.1064" y="-1080.8" font-family="Times,serif" font-size="14.00" fill="#000000">shutting_down_</text>
</g>
<!-- background_compaction_scheduled_ -->
<g id="node47" class="node">
<title>background_compaction_scheduled_</title>
<polygon fill="none" stroke="#000000" points="1989.5516,-1057 1764.7912,-1057 1764.7912,-1021 1989.5516,-1021 1989.5516,-1057"/>
<text text-anchor="middle" x="1877.1714" y="-1034.8" font-family="Times,serif" font-size="14.00" fill="#000000">background_compaction_scheduled_</text>
</g>
<!-- MaybeScheduleCompaction&#45;&gt;background_compaction_scheduled_ -->
<g id="edge46" class="edge">
<title>MaybeScheduleCompaction&#45;&gt;background_compaction_scheduled_</title>
<path fill="none" stroke="#000000" d="M1149.147,-1219.8454C1160.2768,-1214.5743 1170.6886,-1207.7737 1179.083,-1199 1200.4806,-1176.6355 1174.3898,-1151.9163 1198.083,-1132 1290.2471,-1054.5277 1618.5438,-1097.6492 1736.9814,-1076 1760.0611,-1071.7813 1784.9184,-1065.7298 1807.1994,-1059.7393"/>
<polygon fill="#000000" stroke="#000000" points="1808.1818,-1063.0993 1816.9076,-1057.09 1806.3389,-1056.3462 1808.1818,-1063.0993"/>
</g>
<!-- Env_Schedule -->
<g id="node48" class="node">
<title>Env_Schedule</title>
<polygon fill="none" stroke="#000000" points="1327.6739,-1177 1230.9355,-1177 1230.9355,-1141 1327.6739,-1141 1327.6739,-1177"/>
<text text-anchor="middle" x="1279.3047" y="-1154.8" font-family="Times,serif" font-size="14.00" fill="#000000">Env_Schedule</text>
</g>
<!-- MaybeScheduleCompaction&#45;&gt;Env_Schedule -->
<g id="edge47" class="edge">
<title>MaybeScheduleCompaction&#45;&gt;Env_Schedule</title>
<path fill="none" stroke="#000000" d="M1149.1699,-1213.7311C1159.5611,-1209.4678 1169.7711,-1204.5748 1179.083,-1199 1189.0634,-1193.025 1187.9393,-1186.6933 1198.083,-1181 1205.1476,-1177.0349 1212.9626,-1173.7554 1220.8715,-1171.0504"/>
<polygon fill="#000000" stroke="#000000" points="1222.0241,-1174.3571 1230.5211,-1168.0284 1219.9321,-1167.6771 1222.0241,-1174.3571"/>
</g>
<!-- WriteBatch_Iterate&#45;&gt;MemTableInserter_Put -->
<g id="edge44" class="edge">
<title>WriteBatch_Iterate&#45;&gt;MemTableInserter_Put</title>
<path fill="none" stroke="#000000" d="M1150.7971,-901.3936C1161.6884,-896.7669 1171.5943,-890.2098 1179.083,-881 1215.4885,-836.2279 1170.9468,-412.9267 1198.083,-362 1207.9027,-343.5713 1226.3217,-329.4691 1243.1398,-319.6803"/>
<polygon fill="#000000" stroke="#000000" points="1245.1662,-322.5609 1252.2537,-314.6857 1241.8021,-316.4223 1245.1662,-322.5609"/>
</g>
<!-- WriteBatch_Iterate&#45;&gt;MemTableInserter_Delete -->
<g id="edge45" class="edge">
<title>WriteBatch_Iterate&#45;&gt;MemTableInserter_Delete</title>
<path fill="none" stroke="#000000" d="M1150.8407,-901.429C1161.7257,-896.7972 1171.6183,-890.2292 1179.083,-881 1221.3777,-828.7081 1158.1829,-330.1411 1198.083,-276 1208.2452,-262.2107 1225.6356,-255.1584 1241.7237,-251.5737"/>
<polygon fill="#000000" stroke="#000000" points="1242.8156,-254.9317 1252.0188,-249.6827 1241.551,-248.0469 1242.8156,-254.9317"/>
</g>
<!-- WriteBatch_Iterate&#45;&gt;mem_ -->
<g id="edge43" class="edge">
<title>WriteBatch_Iterate&#45;&gt;mem_</title>
<path fill="none" stroke="#000000" d="M1150.9517,-888.6987C1160.4754,-886.2036 1169.9972,-883.6131 1179.083,-881 1184.6657,-879.3944 1190.4031,-877.6802 1196.1713,-875.909"/>
<polygon fill="#000000" stroke="#000000" points="1197.3789,-879.1988 1205.8858,-872.8834 1195.2974,-872.5154 1197.3789,-879.1988"/>
</g>
<!-- BGWork -->
<g id="node49" class="node">
<title>BGWork</title>
<polygon fill="none" stroke="#000000" points="1500.7367,-1177 1434.3161,-1177 1434.3161,-1141 1500.7367,-1141 1500.7367,-1177"/>
<text text-anchor="middle" x="1467.5264" y="-1154.8" font-family="Times,serif" font-size="14.00" fill="#000000">BGWork</text>
</g>
<!-- Env_Schedule&#45;&gt;BGWork -->
<g id="edge48" class="edge">
<title>Env_Schedule&#45;&gt;BGWork</title>
<path fill="none" stroke="#000000" d="M1327.7764,-1159C1357.5585,-1159 1395.3863,-1159 1424.1731,-1159"/>
<polygon fill="#000000" stroke="#000000" points="1424.3381,-1162.5001 1434.3381,-1159 1424.338,-1155.5001 1424.3381,-1162.5001"/>
</g>
<!-- BackgroundCall -->
<g id="node50" class="node">
<title>BackgroundCall</title>
<polygon fill="none" stroke="#000000" points="1705.513,-1177 1597.9948,-1177 1597.9948,-1141 1705.513,-1141 1705.513,-1177"/>
<text text-anchor="middle" x="1651.7539" y="-1154.8" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundCall</text>
</g>
<!-- BGWork&#45;&gt;BackgroundCall -->
<g id="edge49" class="edge">
<title>BGWork&#45;&gt;BackgroundCall</title>
<path fill="none" stroke="#000000" d="M1500.8886,-1159C1525.0046,-1159 1558.3416,-1159 1587.546,-1159"/>
<polygon fill="#000000" stroke="#000000" points="1587.6817,-1162.5001 1597.6817,-1159 1587.6817,-1155.5001 1587.6817,-1162.5001"/>
</g>
<!-- BackgroundCall&#45;&gt;background_work_finished_signal__SignalAll -->
<g id="edge50" class="edge">
<title>BackgroundCall&#45;&gt;background_work_finished_signal__SignalAll</title>
<path fill="none" stroke="#000000" d="M1674.7475,-1177.2777C1696.7553,-1193.9577 1731.4704,-1218.199 1764.9814,-1233 1777.0064,-1238.3111 1790.202,-1242.8003 1803.1872,-1246.5412"/>
<polygon fill="#000000" stroke="#000000" points="1802.4829,-1249.9774 1813.0533,-1249.2572 1804.3409,-1243.2285 1802.4829,-1249.9774"/>
</g>
<!-- BackgroundCall&#45;&gt;shutting_down_ -->
<g id="edge51" class="edge">
<title>BackgroundCall&#45;&gt;shutting_down_</title>
<path fill="none" stroke="#000000" d="M1705.9851,-1171.8301C1838.6253,-1200.68 2188.2826,-1261.3746 2458.1201,-1171 2493.7104,-1159.08 2527.0736,-1131.1778 2548.395,-1110.3675"/>
<polygon fill="#000000" stroke="#000000" points="2551.0982,-1112.6137 2555.6872,-1103.0642 2546.1447,-1107.6677 2551.0982,-1112.6137"/>
</g>
<!-- BackgroundCall&#45;&gt;background_compaction_scheduled_ -->
<g id="edge52" class="edge">
<title>BackgroundCall&#45;&gt;background_compaction_scheduled_</title>
<path fill="none" stroke="#000000" d="M1705.9605,-1148.118C1716.4889,-1145.1439 1727.2643,-1141.4724 1736.9814,-1137 1778.7852,-1117.7594 1821.3493,-1085.9017 1848.4344,-1063.7529"/>
<polygon fill="#000000" stroke="#000000" points="1850.8575,-1066.2906 1856.3252,-1057.2156 1846.3917,-1060.9002 1850.8575,-1066.2906"/>
</g>
<!-- BackgroundCompaction -->
<g id="node51" class="node">
<title>BackgroundCompaction</title>
<polygon fill="none" stroke="#000000" points="1953.5338,-1111 1800.809,-1111 1800.809,-1075 1953.5338,-1075 1953.5338,-1111"/>
<text text-anchor="middle" x="1877.1714" y="-1088.8" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundCompaction</text>
</g>
<!-- BackgroundCall&#45;&gt;BackgroundCompaction -->
<g id="edge53" class="edge">
<title>BackgroundCall&#45;&gt;BackgroundCompaction</title>
<path fill="none" stroke="#000000" d="M1705.5155,-1145.5712C1715.9785,-1142.8312 1726.8431,-1139.8974 1736.9814,-1137 1761.7721,-1129.9151 1788.8403,-1121.5658 1812.5232,-1114.055"/>
<polygon fill="#000000" stroke="#000000" points="1813.6381,-1117.3732 1822.1045,-1111.0038 1811.514,-1110.7033 1813.6381,-1117.3732"/>
</g>
<!-- CompactMemTable -->
<g id="node52" class="node">
<title>CompactMemTable</title>
<polygon fill="none" stroke="#000000" points="2286.3667,-925.4001 2286.3667,-994.5999 2449.7563,-994.5999 2449.7563,-925.4001 2286.3667,-925.4001"/>
<text text-anchor="middle" x="2368.0615" y="-979.3999" font-family="Times,serif" font-size="14.00" fill="#000000">CompactMemTable</text>
<polyline fill="none" stroke="#000000" points="2286.3667,-972.5999 2449.7563,-972.5999 "/>
<text text-anchor="start" x="2294.3667" y="-957.3999" font-family="Times,serif" font-size="14.00" fill="#000000">将imm_写入level0文件</text>
<text text-anchor="start" x="2294.3667" y="-937.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 然后将imm_置为nullptr;</text>
</g>
<!-- BackgroundCompaction&#45;&gt;CompactMemTable -->
<g id="edge54" class="edge">
<title>BackgroundCompaction&#45;&gt;CompactMemTable</title>
<path fill="none" stroke="#000000" d="M1953.8122,-1079.3327C1965.7696,-1076.8089 1977.9415,-1074.0097 1989.3613,-1071 2005.6699,-1066.7018 2009.2566,-1064.0081 2025.3613,-1059 2109.9075,-1032.7089 2206.9054,-1004.9063 2276.0779,-985.4804"/>
<polygon fill="#000000" stroke="#000000" points="2277.3936,-988.7465 2286.077,-982.6762 2275.5034,-982.0065 2277.3936,-988.7465"/>
</g>
<!-- CompactRange -->
<g id="node53" class="node">
<title>CompactRange</title>
<polygon fill="none" stroke="#000000" points="2184.9931,-961 2082.3711,-961 2082.3711,-925 2184.9931,-925 2184.9931,-961"/>
<text text-anchor="middle" x="2133.6821" y="-938.8" font-family="Times,serif" font-size="14.00" fill="#000000">CompactRange</text>
</g>
<!-- BackgroundCompaction&#45;&gt;CompactRange -->
<g id="edge55" class="edge">
<title>BackgroundCompaction&#45;&gt;CompactRange</title>
<path fill="none" stroke="#000000" d="M1953.6183,-1088.2088C1966.5121,-1084.6667 1979.041,-1079.2286 1989.3613,-1071 2020.1642,-1046.4402 1997.3817,-1017.7333 2025.3613,-990 2038.5671,-976.9104 2056.0131,-967.1962 2073.0368,-960.1088"/>
<polygon fill="#000000" stroke="#000000" points="2074.3842,-963.34 2082.4214,-956.4368 2071.8335,-956.8213 2074.3842,-963.34"/>
</g>
<!-- DoCompactionWork -->
<g id="node54" class="node">
<title>DoCompactionWork</title>
<polygon fill="none" stroke="#000000" points="2067.5288,-1068.2 2067.5288,-1117.8 2199.8354,-1117.8 2199.8354,-1068.2 2067.5288,-1068.2"/>
<text text-anchor="middle" x="2133.6821" y="-1102.6" font-family="Times,serif" font-size="14.00" fill="#000000">DoCompactionWork</text>
<polyline fill="none" stroke="#000000" points="2067.5288,-1095.8 2199.8354,-1095.8 "/>
<text text-anchor="middle" x="2133.6821" y="-1080.6" font-family="Times,serif" font-size="14.00" fill="#000000">做归并排序</text>
</g>
<!-- BackgroundCompaction&#45;&gt;DoCompactionWork -->
<g id="edge56" class="edge">
<title>BackgroundCompaction&#45;&gt;DoCompactionWork</title>
<path fill="none" stroke="#000000" d="M1953.7856,-1093C1986.4222,-1093 2024.4144,-1093 2057.0526,-1093"/>
<polygon fill="#000000" stroke="#000000" points="2057.4478,-1096.5001 2067.4477,-1093 2057.4477,-1089.5001 2057.4478,-1096.5001"/>
</g>
<!-- PickCompaction -->
<g id="node55" class="node">
<title>PickCompaction</title>
<polygon fill="none" stroke="#000000" points="2055.3027,-999.2 2055.3027,-1048.8 2212.0615,-1048.8 2212.0615,-999.2 2055.3027,-999.2"/>
<text text-anchor="middle" x="2133.6821" y="-1033.6" font-family="Times,serif" font-size="14.00" fill="#000000">PickCompaction</text>
<polyline fill="none" stroke="#000000" points="2055.3027,-1026.8 2212.0615,-1026.8 "/>
<text text-anchor="middle" x="2133.6821" y="-1011.6" font-family="Times,serif" font-size="14.00" fill="#000000">选择需要compact的files</text>
</g>
<!-- BackgroundCompaction&#45;&gt;PickCompaction -->
<g id="edge57" class="edge">
<title>BackgroundCompaction&#45;&gt;PickCompaction</title>
<path fill="none" stroke="#000000" d="M1953.7939,-1079.2628C1965.7537,-1076.7482 1977.9312,-1073.9702 1989.3613,-1071 2010.2775,-1065.5648 2032.6039,-1058.7884 2053.2903,-1052.088"/>
<polygon fill="#000000" stroke="#000000" points="2054.5678,-1055.3526 2062.9832,-1048.9159 2052.3906,-1048.6998 2054.5678,-1055.3526"/>
</g>
<!-- CompactMemTable&#45;&gt;imm_ -->
<g id="edge58" class="edge">
<title>CompactMemTable&#45;&gt;imm_</title>
<path fill="none" stroke="#000000" d="M2449.8272,-925.2879C2452.6411,-923.8722 2455.4129,-922.441 2458.1201,-921 2481.898,-908.3433 2507.235,-892.3855 2527.9678,-878.6202"/>
<polygon fill="#000000" stroke="#000000" points="2530.1917,-881.3433 2536.5534,-872.871 2526.2969,-875.5269 2530.1917,-881.3433"/>
</g>
<!-- CompactMemTable&#45;&gt;shutting_down_ -->
<g id="edge59" class="edge">
<title>CompactMemTable&#45;&gt;shutting_down_</title>
<path fill="none" stroke="#000000" d="M2424.6284,-994.6535C2459.4083,-1015.96 2503.0472,-1042.6936 2533.8029,-1061.5348"/>
<polygon fill="#000000" stroke="#000000" points="2532.1578,-1064.6315 2542.5132,-1066.8709 2535.8144,-1058.6626 2532.1578,-1064.6315"/>
</g>
<!-- WriteLevel0Table -->
<g id="node56" class="node">
<title>WriteLevel0Table</title>
<polygon fill="#f38181" stroke="#000000" points="2512.8848,-925.2 2512.8848,-974.8 2631.3281,-974.8 2631.3281,-925.2 2512.8848,-925.2"/>
<text text-anchor="middle" x="2572.1064" y="-959.6" font-family="Times,serif" font-size="14.00" fill="#000000">WriteLevel0Table</text>
<polyline fill="none" stroke="#000000" points="2512.8848,-952.8 2631.3281,-952.8 "/>
<text text-anchor="start" x="2520.8848" y="-937.6" font-family="Times,serif" font-size="14.00" fill="#000000">将MemTable落盘</text>
</g>
<!-- CompactMemTable&#45;&gt;WriteLevel0Table -->
<g id="edge60" class="edge">
<title>CompactMemTable&#45;&gt;WriteLevel0Table</title>
<path fill="none" stroke="#000000" d="M2449.8787,-955.9902C2467.3238,-955.1353 2485.59,-954.2401 2502.5251,-953.4101"/>
<polygon fill="#000000" stroke="#000000" points="2503.0617,-956.8881 2512.8784,-952.9027 2502.719,-949.8965 2503.0617,-956.8881"/>
</g>
<!-- CompactRange&#45;&gt;OverlapInLevel -->
<g id="edge69" class="edge">
<title>CompactRange&#45;&gt;OverlapInLevel</title>
<path fill="none" stroke="#000000" d="M2185.0192,-945.7289C2207.8605,-944.1334 2233.3089,-938.0206 2250.0029,-921 2345.5572,-823.5765 2364.1699,-369.9486 2367.4252,-251.4041"/>
<polygon fill="#000000" stroke="#000000" points="2370.9267,-251.3899 2367.6871,-241.3025 2363.929,-251.2085 2370.9267,-251.3899"/>
</g>
<!-- DoCompactionWork&#45;&gt;CompactMemTable -->
<g id="edge61" class="edge">
<title>DoCompactionWork&#45;&gt;CompactMemTable</title>
<path fill="none" stroke="#000000" d="M2199.989,-1082.2426C2216.8893,-1077.9678 2234.6143,-1072.0752 2250.0029,-1064 2279.991,-1048.2637 2308.6236,-1023.3758 2330.1797,-1001.8919"/>
<polygon fill="#000000" stroke="#000000" points="2332.6861,-1004.3349 2337.2105,-994.7547 2327.6993,-999.4225 2332.6861,-1004.3349"/>
</g>
<!-- OpenCompactionOutputFile -->
<g id="node58" class="node">
<title>OpenCompactionOutputFile</title>
<polygon fill="none" stroke="#000000" points="2455.9898,-1049 2280.1333,-1049 2280.1333,-1013 2455.9898,-1013 2455.9898,-1049"/>
<text text-anchor="middle" x="2368.0615" y="-1026.8" font-family="Times,serif" font-size="14.00" fill="#000000">OpenCompactionOutputFile</text>
</g>
<!-- DoCompactionWork&#45;&gt;OpenCompactionOutputFile -->
<g id="edge62" class="edge">
<title>DoCompactionWork&#45;&gt;OpenCompactionOutputFile</title>
<path fill="none" stroke="#000000" d="M2199.8932,-1076.8366C2216.2923,-1072.7386 2233.8051,-1068.2821 2250.0029,-1064 2264.6024,-1060.1405 2280.1787,-1055.8852 2295.0686,-1051.7501"/>
<polygon fill="#000000" stroke="#000000" points="2296.044,-1055.1117 2304.7372,-1049.0555 2294.1646,-1048.3687 2296.044,-1055.1117"/>
</g>
<!-- FinishCompactionOutputFile -->
<g id="node59" class="node">
<title>FinishCompactionOutputFile</title>
<polygon fill="none" stroke="#000000" points="2458.1787,-1103 2277.9443,-1103 2277.9443,-1067 2458.1787,-1067 2458.1787,-1103"/>
<text text-anchor="middle" x="2368.0615" y="-1080.8" font-family="Times,serif" font-size="14.00" fill="#000000">FinishCompactionOutputFile</text>
</g>
<!-- DoCompactionWork&#45;&gt;FinishCompactionOutputFile -->
<g id="edge63" class="edge">
<title>DoCompactionWork&#45;&gt;FinishCompactionOutputFile</title>
<path fill="none" stroke="#000000" d="M2199.9061,-1090.7396C2221.0135,-1090.0191 2244.8605,-1089.2052 2267.8207,-1088.4215"/>
<polygon fill="#000000" stroke="#000000" points="2268.0691,-1091.9151 2277.9439,-1088.076 2267.8303,-1084.9192 2268.0691,-1091.9151"/>
</g>
<!-- BlockBuilder_Add -->
<g id="node60" class="node">
<title>BlockBuilder_Add</title>
<polygon fill="none" stroke="#000000" points="2429.1073,-1157 2307.0158,-1157 2307.0158,-1121 2429.1073,-1121 2429.1073,-1157"/>
<text text-anchor="middle" x="2368.0615" y="-1134.8" font-family="Times,serif" font-size="14.00" fill="#000000">BlockBuilder_Add</text>
</g>
<!-- DoCompactionWork&#45;&gt;BlockBuilder_Add -->
<g id="edge64" class="edge">
<title>DoCompactionWork&#45;&gt;BlockBuilder_Add</title>
<path fill="none" stroke="#000000" d="M2199.9061,-1105.9973C2230.199,-1111.9427 2266.1346,-1118.9955 2296.9935,-1125.052"/>
<polygon fill="#000000" stroke="#000000" points="2296.3338,-1128.4892 2306.8207,-1126.9807 2297.682,-1121.6202 2296.3338,-1128.4892"/>
</g>
<!-- WriteLevel0Table&#45;&gt;PickLevelForMemTableOutput -->
<g id="edge65" class="edge">
<title>WriteLevel0Table&#45;&gt;PickLevelForMemTableOutput</title>
<path fill="none" stroke="#000000" d="M2631.3693,-929.3334C2638.4513,-924.8491 2644.9716,-919.4581 2650.0928,-913 2723.7657,-820.0934 2767.8893,-439.7215 2779.0469,-332.3451"/>
<polygon fill="#000000" stroke="#000000" points="2782.5415,-332.5756 2780.0796,-322.2708 2775.578,-331.8617 2782.5415,-332.5756"/>
</g>
<!-- WriteLevel0Table&#45;&gt;NewFileNumber -->
<g id="edge66" class="edge">
<title>WriteLevel0Table&#45;&gt;NewFileNumber</title>
<path fill="none" stroke="#000000" d="M2631.5727,-930.5342C2638.8141,-925.8531 2645.325,-920.0875 2650.0928,-913 2729.1065,-795.5438 2597.4919,-387.4038 2686.0928,-277 2693.9844,-267.1664 2705.161,-260.7453 2717.1079,-256.5903"/>
<polygon fill="#000000" stroke="#000000" points="2718.2095,-259.9144 2726.8062,-253.7219 2716.2242,-253.2019 2718.2095,-259.9144"/>
</g>
<!-- BuildTable -->
<g id="node57" class="node">
<title>BuildTable</title>
<polygon fill="none" stroke="#000000" points="2722.6411,-925.2 2722.6411,-974.8 2841.0845,-974.8 2841.0845,-925.2 2722.6411,-925.2"/>
<text text-anchor="middle" x="2781.8628" y="-959.6" font-family="Times,serif" font-size="14.00" fill="#000000">BuildTable</text>
<polyline fill="none" stroke="#000000" points="2722.6411,-952.8 2841.0845,-952.8 "/>
<text text-anchor="middle" x="2781.8628" y="-937.6" font-family="Times,serif" font-size="14.00" fill="#000000">将MemTable落盘</text>
</g>
<!-- WriteLevel0Table&#45;&gt;BuildTable -->
<g id="edge67" class="edge">
<title>WriteLevel0Table&#45;&gt;BuildTable</title>
<path fill="none" stroke="#000000" d="M2631.3731,-950C2656.5064,-950 2685.9799,-950 2712.1499,-950"/>
<polygon fill="#000000" stroke="#000000" points="2712.3791,-953.5001 2722.379,-950 2712.379,-946.5001 2712.3791,-953.5001"/>
</g>
<!-- AddFile -->
<g id="node61" class="node">
<title>AddFile</title>
<polygon fill="none" stroke="#000000" points="2812.7525,-1029 2750.973,-1029 2750.973,-993 2812.7525,-993 2812.7525,-1029"/>
<text text-anchor="middle" x="2781.8628" y="-1006.8" font-family="Times,serif" font-size="14.00" fill="#000000">AddFile</text>
</g>
<!-- WriteLevel0Table&#45;&gt;AddFile -->
<g id="edge68" class="edge">
<title>WriteLevel0Table&#45;&gt;AddFile</title>
<path fill="none" stroke="#000000" d="M2631.5117,-967.9041C2649.0707,-973.1463 2668.342,-978.8508 2686.0928,-984 2704.1224,-989.2301 2724.1027,-994.8853 2741.1285,-999.6622"/>
<polygon fill="#000000" stroke="#000000" points="2740.2012,-1003.0371 2750.7746,-1002.3633 2742.0888,-996.2964 2740.2012,-1003.0371"/>
</g>
</g>
</svg>
