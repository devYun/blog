<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: MaybeScheduleFlushOrCompaction Pages: 1 -->
<svg width="1199pt" height="568pt"
 viewBox="0.00 0.00 1199.00 567.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 563.5)">
<title>MaybeScheduleFlushOrCompaction</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-563.5 1195,-563.5 1195,4 -4,4"/>
<!-- MaybeScheduleFlushOrCompaction -->
<g id="node1" class="node">
<title>MaybeScheduleFlushOrCompaction</title>
<polygon fill="none" stroke="#000000" points="0,-362.5 0,-423.5 215,-423.5 215,-362.5 0,-362.5"/>
<text text-anchor="middle" x="107.5" y="-408.3" font-family="Times,serif" font-size="14.00" fill="#000000">MaybeScheduleFlushOrCompaction</text>
<polyline fill="none" stroke="#000000" points="0,-400.5 215,-400.5 "/>
<text text-anchor="start" x="8" y="-385.3" font-family="Times,serif" font-size="14.00" fill="#000000">调度刷新和压缩线程</text>
<text text-anchor="start" x="8" y="-370.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 最大线程数为GetBGJobLimits</text>
</g>
<!-- GetBGJobLimits -->
<g id="node2" class="node">
<title>GetBGJobLimits</title>
<polygon fill="none" stroke="#000000" points="379,-511 269,-511 269,-475 379,-475 379,-511"/>
<text text-anchor="middle" x="324" y="-489.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetBGJobLimits</text>
</g>
<!-- MaybeScheduleFlushOrCompaction&#45;&gt;GetBGJobLimits -->
<g id="edge1" class="edge">
<title>MaybeScheduleFlushOrCompaction&#45;&gt;GetBGJobLimits</title>
<path fill="none" stroke="#666666" d="M164.0285,-423.675C190.1576,-437.3544 221.8071,-453.2276 251,-466 254.8996,-467.7061 258.9448,-469.4012 263.0407,-471.0621"/>
<polygon fill="#666666" stroke="#666666" points="262.059,-474.4377 272.6452,-474.8646 264.6358,-467.9292 262.059,-474.4377"/>
</g>
<!-- GetBackgroundThreads -->
<g id="node3" class="node">
<title>GetBackgroundThreads</title>
<polygon fill="none" stroke="#000000" points="397,-457 251,-457 251,-421 397,-421 397,-457"/>
<text text-anchor="middle" x="324" y="-435.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetBackgroundThreads</text>
</g>
<!-- MaybeScheduleFlushOrCompaction&#45;&gt;GetBackgroundThreads -->
<g id="edge2" class="edge">
<title>MaybeScheduleFlushOrCompaction&#45;&gt;GetBackgroundThreads</title>
<path fill="none" stroke="#666666" d="M215.1157,-415.8652C223.8113,-417.7128 232.5123,-419.5615 240.9943,-421.3637"/>
<polygon fill="#666666" stroke="#666666" points="240.3283,-424.8002 250.8374,-423.4551 241.7832,-417.9531 240.3283,-424.8002"/>
</g>
<!-- Schedule -->
<g id="node4" class="node">
<title>Schedule</title>
<polygon fill="none" stroke="#000000" points="266,-318 266,-364 382,-364 382,-318 266,-318"/>
<text text-anchor="middle" x="324" y="-348.8" font-family="Times,serif" font-size="14.00" fill="#000000">Schedule</text>
<polyline fill="none" stroke="#000000" points="266,-341 382,-341 "/>
<text text-anchor="middle" x="324" y="-325.8" font-family="Times,serif" font-size="14.00" fill="#000000">后台线程池调度</text>
</g>
<!-- MaybeScheduleFlushOrCompaction&#45;&gt;Schedule -->
<g id="edge3" class="edge">
<title>MaybeScheduleFlushOrCompaction&#45;&gt;Schedule</title>
<path fill="none" stroke="#666666" d="M215.1157,-367.1523C229.0694,-363.8009 243.0371,-360.446 256.0915,-357.3106"/>
<polygon fill="#666666" stroke="#666666" points="256.9747,-360.6981 265.8808,-354.9594 255.3399,-353.8916 256.9747,-360.6981"/>
</g>
<!-- BGThread -->
<g id="node5" class="node">
<title>BGThread</title>
<polygon fill="none" stroke="#000000" points="433,-318 433,-364 535,-364 535,-318 433,-318"/>
<text text-anchor="middle" x="484" y="-348.8" font-family="Times,serif" font-size="14.00" fill="#000000">BGThread</text>
<polyline fill="none" stroke="#000000" points="433,-341 535,-341 "/>
<text text-anchor="middle" x="484" y="-325.8" font-family="Times,serif" font-size="14.00" fill="#000000">后台工作线程</text>
</g>
<!-- Schedule&#45;&gt;BGThread -->
<g id="edge4" class="edge">
<title>Schedule&#45;&gt;BGThread</title>
<path fill="none" stroke="#b3b3b3" stroke-dasharray="5,2" d="M382.2163,-341C395.4598,-341 409.5656,-341 422.9244,-341"/>
<polygon fill="#b3b3b3" stroke="#b3b3b3" points="422.9678,-344.5001 432.9678,-341 422.9677,-337.5001 422.9678,-344.5001"/>
</g>
<!-- BGWorkFlush -->
<g id="node6" class="node">
<title>BGWorkFlush</title>
<polygon fill="none" stroke="#000000" points="686.5,-311 589.5,-311 589.5,-275 686.5,-275 686.5,-311"/>
<text text-anchor="middle" x="638" y="-289.3" font-family="Times,serif" font-size="14.00" fill="#000000">BGWorkFlush</text>
</g>
<!-- BGThread&#45;&gt;BGWorkFlush -->
<g id="edge5" class="edge">
<title>BGThread&#45;&gt;BGWorkFlush</title>
<path fill="none" stroke="#7f7f7f" stroke-dasharray="5,2" d="M535.2798,-325.0167C549.427,-320.6072 564.883,-315.7897 579.4102,-311.2618"/>
<polygon fill="#7f7f7f" stroke="#7f7f7f" points="580.7861,-314.499 589.2916,-308.1818 578.7031,-307.8161 580.7861,-314.499"/>
</g>
<!-- BGWorkCompaction -->
<g id="node7" class="node">
<title>BGWorkCompaction</title>
<polygon fill="none" stroke="#000000" points="705,-365 571,-365 571,-329 705,-329 705,-365"/>
<text text-anchor="middle" x="638" y="-343.3" font-family="Times,serif" font-size="14.00" fill="#000000">BGWorkCompaction</text>
</g>
<!-- BGThread&#45;&gt;BGWorkCompaction -->
<g id="edge6" class="edge">
<title>BGThread&#45;&gt;BGWorkCompaction</title>
<path fill="none" stroke="#7f7f7f" stroke-dasharray="5,2" d="M535.2798,-342.9979C543.4553,-343.3164 552.0679,-343.652 560.6857,-343.9878"/>
<polygon fill="#7f7f7f" stroke="#7f7f7f" points="560.6502,-347.4889 570.7789,-344.381 560.9228,-340.4942 560.6502,-347.4889"/>
</g>
<!-- BackgroundCallFlush -->
<g id="node8" class="node">
<title>BackgroundCallFlush</title>
<polygon fill="none" stroke="#000000" points="894.5,-265 759.5,-265 759.5,-229 894.5,-229 894.5,-265"/>
<text text-anchor="middle" x="827" y="-243.3" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundCallFlush</text>
</g>
<!-- BGWorkFlush&#45;&gt;BackgroundCallFlush -->
<g id="edge7" class="edge">
<title>BGWorkFlush&#45;&gt;BackgroundCallFlush</title>
<path fill="none" stroke="#666666" d="M686.6722,-281.1539C705.7451,-276.5118 728.1042,-271.0699 749.2986,-265.9115"/>
<polygon fill="#666666" stroke="#666666" points="750.3743,-269.2519 759.263,-263.4863 748.7189,-262.4504 750.3743,-269.2519"/>
</g>
<!-- BackgroundCallCompaction -->
<g id="node18" class="node">
<title>BackgroundCallCompaction</title>
<polygon fill="none" stroke="#000000" points="913,-411 741,-411 741,-375 913,-375 913,-411"/>
<text text-anchor="middle" x="827" y="-389.3" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundCallCompaction</text>
</g>
<!-- BGWorkCompaction&#45;&gt;BackgroundCallCompaction -->
<g id="edge17" class="edge">
<title>BGWorkCompaction&#45;&gt;BackgroundCallCompaction</title>
<path fill="none" stroke="#666666" d="M705.1665,-363.3474C717.3897,-366.3224 730.2805,-369.4598 742.9196,-372.536"/>
<polygon fill="#666666" stroke="#666666" points="742.4403,-376.0214 752.9844,-374.9856 744.0958,-369.22 742.4403,-376.0214"/>
</g>
<!-- BackgroundCallFlush&#45;&gt;MaybeScheduleFlushOrCompaction -->
<g id="edge8" class="edge">
<title>BackgroundCallFlush&#45;&gt;MaybeScheduleFlushOrCompaction</title>
<path fill="none" stroke="#666666" d="M759.2348,-244.4558C649.3403,-242.4485 426.8371,-247.2534 251,-308 217.7841,-319.4751 183.8101,-339.1741 157.2622,-356.7202"/>
<polygon fill="#666666" stroke="#666666" points="155.2633,-353.8465 148.9141,-362.3282 159.1667,-359.6572 155.2633,-353.8465"/>
</g>
<!-- BackgroundFlush -->
<g id="node9" class="node">
<title>BackgroundFlush</title>
<polygon fill="none" stroke="#000000" points="1013.5,-216.5 1013.5,-277.5 1126.5,-277.5 1126.5,-216.5 1013.5,-216.5"/>
<text text-anchor="middle" x="1070" y="-262.3" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundFlush</text>
<polyline fill="none" stroke="#000000" points="1013.5,-254.5 1126.5,-254.5 "/>
<text text-anchor="start" x="1021.5" y="-239.3" font-family="Times,serif" font-size="14.00" fill="#000000">将memTable</text>
<text text-anchor="start" x="1021.5" y="-224.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 刷到磁盘上</text>
</g>
<!-- BackgroundCallFlush&#45;&gt;BackgroundFlush -->
<g id="edge9" class="edge">
<title>BackgroundCallFlush&#45;&gt;BackgroundFlush</title>
<path fill="none" stroke="#666666" d="M894.689,-247C928.5422,-247 969.3798,-247 1003.1205,-247"/>
<polygon fill="#666666" stroke="#666666" points="1003.3484,-250.5001 1013.3483,-247 1003.3483,-243.5001 1003.3484,-250.5001"/>
</g>
<!-- bg_cv__SignalAll -->
<g id="node10" class="node">
<title>bg_cv__SignalAll</title>
<polygon fill="none" stroke="#000000" points="1127.5,-440 1012.5,-440 1012.5,-404 1127.5,-404 1127.5,-440"/>
<text text-anchor="middle" x="1070" y="-418.3" font-family="Times,serif" font-size="14.00" fill="#000000">bg_cv__SignalAll</text>
</g>
<!-- BackgroundCallFlush&#45;&gt;bg_cv__SignalAll -->
<g id="edge10" class="edge">
<title>BackgroundCallFlush&#45;&gt;bg_cv__SignalAll</title>
<path fill="none" stroke="#666666" d="M839.5727,-265.0381C864.7381,-300.6395 921.2586,-377.9736 949,-395 964.9421,-404.7846 984.0049,-411.0374 1002.2323,-415.0289"/>
<polygon fill="#666666" stroke="#666666" points="1001.7568,-418.5028 1012.2476,-417.0218 1003.123,-411.6374 1001.7568,-418.5028"/>
</g>
<!-- SleepForMicroseconds -->
<g id="node11" class="node">
<title>SleepForMicroseconds</title>
<polygon fill="none" stroke="#000000" points="1141,-198 999,-198 999,-162 1141,-162 1141,-198"/>
<text text-anchor="middle" x="1070" y="-176.3" font-family="Times,serif" font-size="14.00" fill="#000000">SleepForMicroseconds</text>
</g>
<!-- BackgroundCallFlush&#45;&gt;SleepForMicroseconds -->
<g id="edge11" class="edge">
<title>BackgroundCallFlush&#45;&gt;SleepForMicroseconds</title>
<path fill="none" stroke="#666666" d="M878.3082,-228.9479C899.9776,-221.6452 925.5725,-213.438 949,-207 961.7346,-203.5005 975.316,-200.1274 988.6066,-197.0212"/>
<polygon fill="#666666" stroke="#666666" points="989.7339,-200.3533 998.6945,-194.7002 988.1643,-193.5316 989.7339,-200.3533"/>
</g>
<!-- ReleaseFileNumberFromPendingOutputs -->
<g id="node12" class="node">
<title>ReleaseFileNumberFromPendingOutputs</title>
<polygon fill="none" stroke="#000000" points="1191,-386 949,-386 949,-350 1191,-350 1191,-386"/>
<text text-anchor="middle" x="1070" y="-364.3" font-family="Times,serif" font-size="14.00" fill="#000000">ReleaseFileNumberFromPendingOutputs</text>
</g>
<!-- BackgroundCallFlush&#45;&gt;ReleaseFileNumberFromPendingOutputs -->
<g id="edge12" class="edge">
<title>BackgroundCallFlush&#45;&gt;ReleaseFileNumberFromPendingOutputs</title>
<path fill="none" stroke="#666666" d="M845.1175,-265.1701C867.5435,-286.5945 907.836,-321.7205 949,-341 953.2821,-343.0055 957.7203,-344.8657 962.2563,-346.5907"/>
<polygon fill="#666666" stroke="#666666" points="961.0911,-349.891 971.6858,-349.9448 963.4371,-343.2958 961.0911,-349.891"/>
</g>
<!-- FindObsoleteFiles -->
<g id="node13" class="node">
<title>FindObsoleteFiles</title>
<polygon fill="none" stroke="#000000" points="1128,-332 1012,-332 1012,-296 1128,-296 1128,-332"/>
<text text-anchor="middle" x="1070" y="-310.3" font-family="Times,serif" font-size="14.00" fill="#000000">FindObsoleteFiles</text>
</g>
<!-- BackgroundCallFlush&#45;&gt;FindObsoleteFiles -->
<g id="edge13" class="edge">
<title>BackgroundCallFlush&#45;&gt;FindObsoleteFiles</title>
<path fill="none" stroke="#666666" d="M878.3082,-265.0521C899.9776,-272.3548 925.5725,-280.562 949,-287 966.0022,-291.6723 984.5137,-296.1192 1001.8275,-300.0064"/>
<polygon fill="#666666" stroke="#666666" points="1001.3425,-303.4837 1011.8627,-302.228 1002.8556,-296.6492 1001.3425,-303.4837"/>
</g>
<!-- FlushBufferToLog -->
<g id="node14" class="node">
<title>FlushBufferToLog</title>
<polygon fill="none" stroke="#000000" points="1129.5,-144 1010.5,-144 1010.5,-108 1129.5,-108 1129.5,-144"/>
<text text-anchor="middle" x="1070" y="-122.3" font-family="Times,serif" font-size="14.00" fill="#000000">FlushBufferToLog</text>
</g>
<!-- BackgroundCallFlush&#45;&gt;FlushBufferToLog -->
<g id="edge14" class="edge">
<title>BackgroundCallFlush&#45;&gt;FlushBufferToLog</title>
<path fill="none" stroke="#666666" d="M845.1175,-228.8299C867.5435,-207.4055 907.836,-172.2795 949,-153 964.9679,-145.5213 983.1071,-140.0641 1000.3927,-136.1006"/>
<polygon fill="#666666" stroke="#666666" points="1001.4095,-139.4619 1010.4487,-133.9355 999.936,-132.6188 1001.4095,-139.4619"/>
</g>
<!-- atomic_flush_install_cv__SignalAll -->
<g id="node15" class="node">
<title>atomic_flush_install_cv__SignalAll</title>
<polygon fill="none" stroke="#000000" points="1176,-90 964,-90 964,-54 1176,-54 1176,-90"/>
<text text-anchor="middle" x="1070" y="-68.3" font-family="Times,serif" font-size="14.00" fill="#000000">atomic_flush_install_cv__SignalAll</text>
</g>
<!-- BackgroundCallFlush&#45;&gt;atomic_flush_install_cv__SignalAll -->
<g id="edge15" class="edge">
<title>BackgroundCallFlush&#45;&gt;atomic_flush_install_cv__SignalAll</title>
<path fill="none" stroke="#666666" d="M836.5331,-228.91C854.2101,-197.2447 895.22,-132.0077 949,-99 951.6656,-97.364 954.4185,-95.8267 957.2401,-94.3822"/>
<polygon fill="#666666" stroke="#666666" points="958.8814,-97.4786 966.4625,-90.0774 955.9207,-91.1356 958.8814,-97.4786"/>
</g>
<!-- PurgeObsoleteFiles -->
<g id="node16" class="node">
<title>PurgeObsoleteFiles</title>
<polygon fill="none" stroke="#000000" points="1131,-36 1009,-36 1009,0 1131,0 1131,-36"/>
<text text-anchor="middle" x="1070" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#000000">PurgeObsoleteFiles</text>
</g>
<!-- BackgroundCallFlush&#45;&gt;PurgeObsoleteFiles -->
<g id="edge16" class="edge">
<title>BackgroundCallFlush&#45;&gt;PurgeObsoleteFiles</title>
<path fill="none" stroke="#666666" d="M832.5084,-228.7988C845.6197,-188.7406 882.6456,-92.7231 949,-45 963.4608,-34.5996 981.2171,-28.1018 998.6271,-24.0705"/>
<polygon fill="#666666" stroke="#666666" points="999.723,-27.4182 1008.8103,-21.971 998.3095,-20.5624 999.723,-27.4182"/>
</g>
<!-- BackgroundCompaction -->
<g id="node17" class="node">
<title>BackgroundCompaction</title>
<polygon fill="none" stroke="#000000" points="995.5,-513 995.5,-559 1144.5,-559 1144.5,-513 995.5,-513"/>
<text text-anchor="middle" x="1070" y="-543.8" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundCompaction</text>
<polyline fill="none" stroke="#000000" points="995.5,-536 1144.5,-536 "/>
<text text-anchor="start" x="1003.5" y="-520.8" font-family="Times,serif" font-size="14.00" fill="#000000">压缩</text>
</g>
<!-- BackgroundCallCompaction&#45;&gt;MaybeScheduleFlushOrCompaction -->
<g id="edge18" class="edge">
<title>BackgroundCallCompaction&#45;&gt;MaybeScheduleFlushOrCompaction</title>
<path fill="none" stroke="#666666" d="M740.8627,-393C612.4078,-393 370.2866,-393 225.472,-393"/>
<polygon fill="#666666" stroke="#666666" points="225.2165,-389.5001 215.2164,-393 225.2164,-396.5001 225.2165,-389.5001"/>
</g>
<!-- BackgroundCallCompaction&#45;&gt;bg_cv__SignalAll -->
<g id="edge19" class="edge">
<title>BackgroundCallCompaction&#45;&gt;bg_cv__SignalAll</title>
<path fill="none" stroke="#666666" d="M913.0147,-403.2651C942.3196,-406.7624 974.6436,-410.62 1002.3051,-413.9212"/>
<polygon fill="#666666" stroke="#666666" points="1001.9267,-417.4008 1012.271,-415.1105 1002.7562,-410.4501 1001.9267,-417.4008"/>
</g>
<!-- BackgroundCallCompaction&#45;&gt;ReleaseFileNumberFromPendingOutputs -->
<g id="edge20" class="edge">
<title>BackgroundCallCompaction&#45;&gt;ReleaseFileNumberFromPendingOutputs</title>
<path fill="none" stroke="#666666" d="M913.0147,-384.1508C921.3558,-383.2926 929.9416,-382.4093 938.5948,-381.5191"/>
<polygon fill="#666666" stroke="#666666" points="939.184,-384.977 948.7732,-380.4719 938.4675,-378.0138 939.184,-384.977"/>
</g>
<!-- BackgroundCallCompaction&#45;&gt;FindObsoleteFiles -->
<g id="edge21" class="edge">
<title>BackgroundCallCompaction&#45;&gt;FindObsoleteFiles</title>
<path fill="none" stroke="#666666" d="M864.5079,-374.8931C888.2972,-363.9438 919.9585,-350.3421 949,-341 965.8711,-335.5729 984.407,-330.8437 1001.7916,-326.925"/>
<polygon fill="#666666" stroke="#666666" points="1002.8559,-330.2748 1011.873,-324.7122 1001.3551,-323.4375 1002.8559,-330.2748"/>
</g>
<!-- BackgroundCallCompaction&#45;&gt;BackgroundCompaction -->
<g id="edge22" class="edge">
<title>BackgroundCallCompaction&#45;&gt;BackgroundCompaction</title>
<path fill="none" stroke="#666666" d="M842.0279,-411.047C863.3379,-435.4794 904.7009,-478.8001 949,-503 960.3444,-509.1972 972.9344,-514.2949 985.5823,-518.4696"/>
<polygon fill="#666666" stroke="#666666" points="984.6571,-521.8473 995.2458,-521.4851 986.7423,-515.1651 984.6571,-521.8473"/>
</g>
<!-- WaitForIngestFile -->
<g id="node19" class="node">
<title>WaitForIngestFile</title>
<polygon fill="none" stroke="#000000" points="1128,-494 1012,-494 1012,-458 1128,-458 1128,-494"/>
<text text-anchor="middle" x="1070" y="-472.3" font-family="Times,serif" font-size="14.00" fill="#000000">WaitForIngestFile</text>
</g>
<!-- BackgroundCallCompaction&#45;&gt;WaitForIngestFile -->
<g id="edge23" class="edge">
<title>BackgroundCallCompaction&#45;&gt;WaitForIngestFile</title>
<path fill="none" stroke="#666666" d="M861.1789,-411.0499C885.2113,-423.1496 918.4112,-438.6954 949,-449 965.7951,-454.6579 984.304,-459.4693 1001.6867,-463.3936"/>
<polygon fill="#666666" stroke="#666666" points="1001.2526,-466.8814 1011.7698,-465.6013 1002.7498,-460.0434 1001.2526,-466.8814"/>
</g>
</g>
</svg>
