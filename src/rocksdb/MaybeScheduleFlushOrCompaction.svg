<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: MaybeScheduleFlushOrCompaction Pages: 1 -->
<svg width="1583pt" height="200pt"
 viewBox="0.00 0.00 1583.00 199.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 195.5)">
<title>MaybeScheduleFlushOrCompaction</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-195.5 1579,-195.5 1579,4 -4,4"/>
<!-- MaybeScheduleFlushOrCompaction -->
<g id="node1" class="node">
<title>MaybeScheduleFlushOrCompaction</title>
<polygon fill="none" stroke="#000000" points="0,-89 0,-150 215,-150 215,-89 0,-89"/>
<text text-anchor="middle" x="107.5" y="-134.8" font-family="Times,serif" font-size="14.00" fill="#000000">MaybeScheduleFlushOrCompaction</text>
<polyline fill="none" stroke="#000000" points="0,-127 215,-127 "/>
<text text-anchor="start" x="8" y="-111.8" font-family="Times,serif" font-size="14.00" fill="#000000">调度刷新和压缩线程</text>
<text text-anchor="start" x="8" y="-96.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 最大线程数为GetBGJobLimits</text>
</g>
<!-- GetBGJobLimits -->
<g id="node2" class="node">
<title>GetBGJobLimits</title>
<polygon fill="none" stroke="#000000" points="379,-191.5 269,-191.5 269,-155.5 379,-155.5 379,-191.5"/>
<text text-anchor="middle" x="324" y="-169.8" font-family="Times,serif" font-size="14.00" fill="#000000">GetBGJobLimits</text>
</g>
<!-- MaybeScheduleFlushOrCompaction&#45;&gt;GetBGJobLimits -->
<g id="edge1" class="edge">
<title>MaybeScheduleFlushOrCompaction&#45;&gt;GetBGJobLimits</title>
<path fill="none" stroke="#666666" d="M215.1157,-146.3418C230.0602,-150.0693 245.0207,-153.8008 258.8581,-157.2521"/>
<polygon fill="#666666" stroke="#666666" points="258.1692,-160.6875 268.719,-159.7117 259.8633,-153.8955 258.1692,-160.6875"/>
</g>
<!-- GetBackgroundThreads -->
<g id="node3" class="node">
<title>GetBackgroundThreads</title>
<polygon fill="none" stroke="#000000" points="397,-137.5 251,-137.5 251,-101.5 397,-101.5 397,-137.5"/>
<text text-anchor="middle" x="324" y="-115.8" font-family="Times,serif" font-size="14.00" fill="#000000">GetBackgroundThreads</text>
</g>
<!-- MaybeScheduleFlushOrCompaction&#45;&gt;GetBackgroundThreads -->
<g id="edge2" class="edge">
<title>MaybeScheduleFlushOrCompaction&#45;&gt;GetBackgroundThreads</title>
<path fill="none" stroke="#666666" d="M215.1157,-119.5C223.7168,-119.5 232.3231,-119.5 240.7176,-119.5"/>
<polygon fill="#666666" stroke="#666666" points="240.8375,-123.0001 250.8374,-119.5 240.8374,-116.0001 240.8375,-123.0001"/>
</g>
<!-- Schedule -->
<g id="node4" class="node">
<title>Schedule</title>
<polygon fill="none" stroke="#000000" points="266,-36.5 266,-82.5 382,-82.5 382,-36.5 266,-36.5"/>
<text text-anchor="middle" x="324" y="-67.3" font-family="Times,serif" font-size="14.00" fill="#000000">Schedule</text>
<polyline fill="none" stroke="#000000" points="266,-59.5 382,-59.5 "/>
<text text-anchor="middle" x="324" y="-44.3" font-family="Times,serif" font-size="14.00" fill="#000000">后台线程池调度</text>
</g>
<!-- MaybeScheduleFlushOrCompaction&#45;&gt;Schedule -->
<g id="edge3" class="edge">
<title>MaybeScheduleFlushOrCompaction&#45;&gt;Schedule</title>
<path fill="none" stroke="#666666" d="M215.1157,-89.6758C229.0694,-85.8087 243.0371,-81.9377 256.0915,-78.3199"/>
<polygon fill="#666666" stroke="#666666" points="257.1788,-81.6506 265.8808,-75.6069 255.3092,-74.9048 257.1788,-81.6506"/>
</g>
<!-- BGThread -->
<g id="node5" class="node">
<title>BGThread</title>
<polygon fill="none" stroke="#000000" points="433,-36.5 433,-82.5 535,-82.5 535,-36.5 433,-36.5"/>
<text text-anchor="middle" x="484" y="-67.3" font-family="Times,serif" font-size="14.00" fill="#000000">BGThread</text>
<polyline fill="none" stroke="#000000" points="433,-59.5 535,-59.5 "/>
<text text-anchor="middle" x="484" y="-44.3" font-family="Times,serif" font-size="14.00" fill="#000000">后台工作线程</text>
</g>
<!-- Schedule&#45;&gt;BGThread -->
<g id="edge4" class="edge">
<title>Schedule&#45;&gt;BGThread</title>
<path fill="none" stroke="#b3b3b3" stroke-dasharray="5,2" d="M382.2163,-59.5C395.4598,-59.5 409.5656,-59.5 422.9244,-59.5"/>
<polygon fill="#b3b3b3" stroke="#b3b3b3" points="422.9678,-63.0001 432.9678,-59.5 422.9677,-56.0001 422.9678,-63.0001"/>
</g>
<!-- BGWorkFlush -->
<g id="node6" class="node">
<title>BGWorkFlush</title>
<polygon fill="none" stroke="#000000" points="686.5,-104.5 589.5,-104.5 589.5,-68.5 686.5,-68.5 686.5,-104.5"/>
<text text-anchor="middle" x="638" y="-82.8" font-family="Times,serif" font-size="14.00" fill="#000000">BGWorkFlush</text>
</g>
<!-- BGThread&#45;&gt;BGWorkFlush -->
<g id="edge5" class="edge">
<title>BGThread&#45;&gt;BGWorkFlush</title>
<path fill="none" stroke="#7f7f7f" stroke-dasharray="5,2" d="M535.2798,-68.4906C549.427,-70.971 564.883,-73.6808 579.4102,-76.2278"/>
<polygon fill="#7f7f7f" stroke="#7f7f7f" points="578.8374,-79.6806 589.2916,-77.9602 580.0463,-72.7858 578.8374,-79.6806"/>
</g>
<!-- BGWorkCompaction -->
<g id="node7" class="node">
<title>BGWorkCompaction</title>
<polygon fill="none" stroke="#000000" points="705,-50.5 571,-50.5 571,-14.5 705,-14.5 705,-50.5"/>
<text text-anchor="middle" x="638" y="-28.8" font-family="Times,serif" font-size="14.00" fill="#000000">BGWorkCompaction</text>
</g>
<!-- BGThread&#45;&gt;BGWorkCompaction -->
<g id="edge6" class="edge">
<title>BGThread&#45;&gt;BGWorkCompaction</title>
<path fill="none" stroke="#7f7f7f" stroke-dasharray="5,2" d="M535.2798,-50.5094C543.4553,-49.076 552.0679,-47.566 560.6857,-46.0551"/>
<polygon fill="#7f7f7f" stroke="#7f7f7f" points="561.5336,-49.4599 570.7789,-44.2855 560.3247,-42.5651 561.5336,-49.4599"/>
</g>
<!-- BackgroundCallFlush -->
<g id="node8" class="node">
<title>BackgroundCallFlush</title>
<polygon fill="none" stroke="#000000" points="894.5,-109.5 759.5,-109.5 759.5,-73.5 894.5,-73.5 894.5,-109.5"/>
<text text-anchor="middle" x="827" y="-87.8" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundCallFlush</text>
</g>
<!-- BGWorkFlush&#45;&gt;BackgroundCallFlush -->
<g id="edge7" class="edge">
<title>BGWorkFlush&#45;&gt;BackgroundCallFlush</title>
<path fill="none" stroke="#666666" d="M686.6722,-87.7876C705.6588,-88.2899 727.902,-88.8784 749.0108,-89.4368"/>
<polygon fill="#666666" stroke="#666666" points="749.1739,-92.9422 759.263,-89.708 749.3591,-85.9447 749.1739,-92.9422"/>
</g>
<!-- BackgroundCallCompaction -->
<g id="node13" class="node">
<title>BackgroundCallCompaction</title>
<polygon fill="none" stroke="#000000" points="913,-50.5 741,-50.5 741,-14.5 913,-14.5 913,-50.5"/>
<text text-anchor="middle" x="827" y="-28.8" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundCallCompaction</text>
</g>
<!-- BGWorkCompaction&#45;&gt;BackgroundCallCompaction -->
<g id="edge12" class="edge">
<title>BGWorkCompaction&#45;&gt;BackgroundCallCompaction</title>
<path fill="none" stroke="#666666" d="M705.1665,-32.5C713.4789,-32.5 722.1,-32.5 730.7407,-32.5"/>
<polygon fill="#666666" stroke="#666666" points="730.8759,-36.0001 740.8759,-32.5 730.8759,-29.0001 730.8759,-36.0001"/>
</g>
<!-- BackgroundFlush -->
<g id="node9" class="node">
<title>BackgroundFlush</title>
<polygon fill="none" stroke="#000000" points="967,-66 967,-127 1080,-127 1080,-66 967,-66"/>
<text text-anchor="middle" x="1023.5" y="-111.8" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundFlush</text>
<polyline fill="none" stroke="#000000" points="967,-104 1080,-104 "/>
<text text-anchor="start" x="975" y="-88.8" font-family="Times,serif" font-size="14.00" fill="#000000">将memTable</text>
<text text-anchor="start" x="975" y="-73.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 刷到磁盘上</text>
</g>
<!-- BackgroundCallFlush&#45;&gt;BackgroundFlush -->
<g id="edge8" class="edge">
<title>BackgroundCallFlush&#45;&gt;BackgroundFlush</title>
<path fill="none" stroke="#666666" d="M894.6242,-93.2207C914.6661,-93.7307 936.5972,-94.2887 956.5934,-94.7975"/>
<polygon fill="#666666" stroke="#666666" points="956.7677,-98.303 966.8536,-95.0586 956.9459,-91.3053 956.7677,-98.303"/>
</g>
<!-- Flush_Job -->
<g id="node10" class="node">
<title>Flush_Job</title>
<polygon fill="none" stroke="#000000" points="1221,-113.5 1149,-113.5 1149,-77.5 1221,-77.5 1221,-113.5"/>
<text text-anchor="middle" x="1185" y="-91.8" font-family="Times,serif" font-size="14.00" fill="#000000">Flush_Job</text>
</g>
<!-- BackgroundFlush&#45;&gt;Flush_Job -->
<g id="edge9" class="edge">
<title>BackgroundFlush&#45;&gt;Flush_Job</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1080.4389,-96.1474C1099.5063,-96.0294 1120.5189,-95.8993 1138.675,-95.7868"/>
<polygon fill="#666666" stroke="#666666" points="1138.7388,-99.2866 1148.7169,-95.7247 1138.6954,-92.2867 1138.7388,-99.2866"/>
</g>
<!-- WriteLevel0Table -->
<g id="node11" class="node">
<title>WriteLevel0Table</title>
<polygon fill="none" stroke="#000000" points="1283,-72.5 1283,-118.5 1440,-118.5 1440,-72.5 1283,-72.5"/>
<text text-anchor="middle" x="1361.5" y="-103.3" font-family="Times,serif" font-size="14.00" fill="#000000">WriteLevel0Table</text>
<polyline fill="none" stroke="#000000" points="1283,-95.5 1440,-95.5 "/>
<text text-anchor="middle" x="1361.5" y="-80.3" font-family="Times,serif" font-size="14.00" fill="#000000">将memtable刷入磁盘中</text>
</g>
<!-- Flush_Job&#45;&gt;WriteLevel0Table -->
<g id="edge10" class="edge">
<title>Flush_Job&#45;&gt;WriteLevel0Table</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1221.1433,-95.5C1236.2053,-95.5 1254.4222,-95.5 1272.6721,-95.5"/>
<polygon fill="#666666" stroke="#666666" points="1272.7945,-99.0001 1282.7945,-95.5 1272.7945,-92.0001 1272.7945,-99.0001"/>
</g>
<!-- TableBuilder -->
<g id="node12" class="node">
<title>TableBuilder</title>
<polygon fill="none" stroke="#000000" points="1575,-79.5 1487,-79.5 1487,-43.5 1575,-43.5 1575,-79.5"/>
<text text-anchor="middle" x="1531" y="-57.8" font-family="Times,serif" font-size="14.00" fill="#000000">TableBuilder</text>
</g>
<!-- WriteLevel0Table&#45;&gt;TableBuilder -->
<g id="edge11" class="edge">
<title>WriteLevel0Table&#45;&gt;TableBuilder</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1440.2954,-79.6944C1452.5987,-77.2265 1465.0702,-74.7249 1476.6659,-72.3989"/>
<polygon fill="#666666" stroke="#666666" points="1477.488,-75.8038 1486.6043,-70.4053 1476.1112,-68.9405 1477.488,-75.8038"/>
</g>
<!-- BackgroundCompaction -->
<g id="node14" class="node">
<title>BackgroundCompaction</title>
<polygon fill="none" stroke="#000000" points="949,-.5 949,-46.5 1098,-46.5 1098,-.5 949,-.5"/>
<text text-anchor="middle" x="1023.5" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundCompaction</text>
<polyline fill="none" stroke="#000000" points="949,-23.5 1098,-23.5 "/>
<text text-anchor="start" x="957" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#000000">压缩</text>
</g>
<!-- BackgroundCallCompaction&#45;&gt;BackgroundCompaction -->
<g id="edge13" class="edge">
<title>BackgroundCallCompaction&#45;&gt;BackgroundCompaction</title>
<path fill="none" stroke="#666666" d="M913.1878,-28.5525C921.6186,-28.1663 930.1697,-27.7747 938.5877,-27.3891"/>
<polygon fill="#666666" stroke="#666666" points="938.9435,-30.8766 948.7728,-26.9226 938.6231,-23.8839 938.9435,-30.8766"/>
</g>
<!-- CompactionJob -->
<g id="node15" class="node">
<title>CompactionJob</title>
<polygon fill="none" stroke="#000000" points="1236,-45.5 1134,-45.5 1134,-9.5 1236,-9.5 1236,-45.5"/>
<text text-anchor="middle" x="1185" y="-23.8" font-family="Times,serif" font-size="14.00" fill="#000000">CompactionJob</text>
</g>
<!-- BackgroundCompaction&#45;&gt;CompactionJob -->
<g id="edge14" class="edge">
<title>BackgroundCompaction&#45;&gt;CompactionJob</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1098.1044,-25.3478C1106.683,-25.5603 1115.3547,-25.775 1123.7291,-25.9825"/>
<polygon fill="#666666" stroke="#666666" points="1123.6868,-29.4824 1133.7704,-26.2312 1123.8602,-22.4845 1123.6868,-29.4824"/>
</g>
<!-- ProcessKeyValueCompaction -->
<g id="node16" class="node">
<title>ProcessKeyValueCompaction</title>
<polygon fill="none" stroke="#000000" points="1272,-6.5 1272,-52.5 1451,-52.5 1451,-6.5 1272,-6.5"/>
<text text-anchor="middle" x="1361.5" y="-37.3" font-family="Times,serif" font-size="14.00" fill="#000000">ProcessKeyValueCompaction</text>
<polyline fill="none" stroke="#000000" points="1272,-29.5 1451,-29.5 "/>
<text text-anchor="start" x="1280" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#000000">最归并排序compaction</text>
</g>
<!-- CompactionJob&#45;&gt;ProcessKeyValueCompaction -->
<g id="edge15" class="edge">
<title>CompactionJob&#45;&gt;ProcessKeyValueCompaction</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1236.0511,-28.0785C1244.262,-28.1715 1252.9988,-28.2705 1261.892,-28.3713"/>
<polygon fill="#666666" stroke="#666666" points="1261.9405,-31.872 1271.9795,-28.4856 1262.0199,-24.8724 1261.9405,-31.872"/>
</g>
<!-- ProcessKeyValueCompaction&#45;&gt;TableBuilder -->
<g id="edge16" class="edge">
<title>ProcessKeyValueCompaction&#45;&gt;TableBuilder</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1451.2133,-46.437C1460.0203,-48.0997 1468.7556,-49.7488 1477.037,-51.3123"/>
<polygon fill="#666666" stroke="#666666" points="1476.4119,-54.756 1486.8876,-53.172 1477.7105,-47.8775 1476.4119,-54.756"/>
</g>
</g>
</svg>
