<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: atomic_flush Pages: 1 -->
<svg width="1957pt" height="930pt"
 viewBox="0.00 0.00 1957.00 930.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 926)">
<title>atomic_flush</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-926 1953,-926 1953,4 -4,4"/>
<g id="clust5" class="cluster">
<title>cluster_TableBuilder</title>
<polygon fill="none" stroke="#000000" points="1765,-418 1765,-608 1925,-608 1925,-418 1765,-418"/>
<text text-anchor="middle" x="1845" y="-588" font-family="Times,serif" font-size="20.00" fill="#000000">TableBuilder</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_CompactionJob</title>
<polygon fill="none" stroke="#000000" points="949,-616 949,-914 1941,-914 1941,-616 949,-616"/>
<text text-anchor="middle" x="1445" y="-894" font-family="Times,serif" font-size="20.00" fill="#000000">CompactionJob</text>
</g>
<!-- MaybeScheduleFlushOrCompaction -->
<g id="node1" class="node">
<title>MaybeScheduleFlushOrCompaction</title>
<polygon fill="none" stroke="#000000" points="215,-375 0,-375 0,-339 215,-339 215,-375"/>
<text text-anchor="middle" x="107.5" y="-353.3" font-family="Times,serif" font-size="14.00" fill="#000000">MaybeScheduleFlushOrCompaction</text>
</g>
<!-- Schedule -->
<g id="node2" class="node">
<title>Schedule</title>
<polygon fill="none" stroke="#000000" points="317,-333 251,-333 251,-297 317,-297 317,-333"/>
<text text-anchor="middle" x="284" y="-311.3" font-family="Times,serif" font-size="14.00" fill="#000000">Schedule</text>
</g>
<!-- MaybeScheduleFlushOrCompaction&#45;&gt;Schedule -->
<g id="edge1" class="edge">
<title>MaybeScheduleFlushOrCompaction&#45;&gt;Schedule</title>
<path fill="none" stroke="#666666" d="M183.3762,-338.9445C203.0584,-334.2609 223.5783,-329.378 240.9148,-325.2526"/>
<polygon fill="#666666" stroke="#666666" points="241.8058,-328.6383 250.7239,-322.9184 240.1853,-321.8285 241.8058,-328.6383"/>
</g>
<!-- BGWorkBottomCompaction -->
<g id="node3" class="node">
<title>BGWorkBottomCompaction</title>
<polygon fill="none" stroke="#000000" points="528,-333 353,-333 353,-297 528,-297 528,-333"/>
<text text-anchor="middle" x="440.5" y="-311.3" font-family="Times,serif" font-size="14.00" fill="#000000">BGWorkBottomCompaction</text>
</g>
<!-- Schedule&#45;&gt;BGWorkBottomCompaction -->
<g id="edge2" class="edge">
<title>Schedule&#45;&gt;BGWorkBottomCompaction</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M317.1896,-315C325.0307,-315 333.7876,-315 342.9191,-315"/>
<polygon fill="#666666" stroke="#666666" points="342.9493,-318.5001 352.9492,-315 342.9492,-311.5001 342.9493,-318.5001"/>
</g>
<!-- BGWorkFlush -->
<g id="node4" class="node">
<title>BGWorkFlush</title>
<polygon fill="none" stroke="#000000" points="489,-198 392,-198 392,-162 489,-162 489,-198"/>
<text text-anchor="middle" x="440.5" y="-176.3" font-family="Times,serif" font-size="14.00" fill="#000000">BGWorkFlush</text>
</g>
<!-- Schedule&#45;&gt;BGWorkFlush -->
<g id="edge3" class="edge">
<title>Schedule&#45;&gt;BGWorkFlush</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M296.8543,-296.8328C309.7562,-279.4052 330.8478,-253.005 353,-234 366.2391,-222.6418 382.1204,-212.0867 396.6976,-203.3765"/>
<polygon fill="#666666" stroke="#666666" points="398.696,-206.2628 405.5703,-198.2009 395.1689,-200.2163 398.696,-206.2628"/>
</g>
<!-- BGWorkCompaction -->
<g id="node5" class="node">
<title>BGWorkCompaction</title>
<polygon fill="none" stroke="#000000" points="507.5,-279 373.5,-279 373.5,-243 507.5,-243 507.5,-279"/>
<text text-anchor="middle" x="440.5" y="-257.3" font-family="Times,serif" font-size="14.00" fill="#000000">BGWorkCompaction</text>
</g>
<!-- Schedule&#45;&gt;BGWorkCompaction -->
<g id="edge4" class="edge">
<title>Schedule&#45;&gt;BGWorkCompaction</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M317.1562,-301.4547C328.4615,-296.989 341.2206,-292.1158 353,-288 358.5764,-286.0516 364.3774,-284.1 370.2202,-282.1871"/>
<polygon fill="#666666" stroke="#666666" points="371.6185,-285.4137 380.0606,-279.012 369.4689,-278.7519 371.6185,-285.4137"/>
</g>
<!-- BackgroundCallCompaction -->
<g id="node6" class="node">
<title>BackgroundCallCompaction</title>
<polygon fill="none" stroke="#000000" points="736,-333 564,-333 564,-297 736,-297 736,-333"/>
<text text-anchor="middle" x="650" y="-311.3" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundCallCompaction</text>
</g>
<!-- BGWorkBottomCompaction&#45;&gt;BackgroundCallCompaction -->
<g id="edge7" class="edge">
<title>BGWorkBottomCompaction&#45;&gt;BackgroundCallCompaction</title>
<path fill="none" stroke="#666666" d="M528.133,-315C536.503,-315 545.0229,-315 553.471,-315"/>
<polygon fill="#666666" stroke="#666666" points="553.7254,-318.5001 563.7254,-315 553.7254,-311.5001 553.7254,-318.5001"/>
</g>
<!-- BackgroundCallFlush -->
<g id="node8" class="node">
<title>BackgroundCallFlush</title>
<polygon fill="none" stroke="#000000" points="717.5,-144 582.5,-144 582.5,-108 717.5,-108 717.5,-144"/>
<text text-anchor="middle" x="650" y="-122.3" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundCallFlush</text>
</g>
<!-- BGWorkFlush&#45;&gt;BackgroundCallFlush -->
<g id="edge8" class="edge">
<title>BGWorkFlush&#45;&gt;BackgroundCallFlush</title>
<path fill="none" stroke="#666666" d="M489.0901,-167.4756C513.8512,-161.0932 544.5564,-153.1788 572.4857,-145.9798"/>
<polygon fill="#666666" stroke="#666666" points="573.4246,-149.3523 582.2345,-143.467 571.6774,-142.5738 573.4246,-149.3523"/>
</g>
<!-- BGWorkCompaction&#45;&gt;BackgroundCallCompaction -->
<g id="edge5" class="edge">
<title>BGWorkCompaction&#45;&gt;BackgroundCallCompaction</title>
<path fill="none" stroke="#666666" d="M507.6516,-278.3088C527.5924,-283.4486 549.6292,-289.1288 570.2862,-294.4532"/>
<polygon fill="#666666" stroke="#666666" points="569.4259,-297.8458 579.983,-296.9527 571.1731,-291.0674 569.4259,-297.8458"/>
</g>
<!-- BackgroundCompaction -->
<g id="node7" class="node">
<title>BackgroundCompaction</title>
<polygon fill="none" stroke="#000000" points="921,-392 772,-392 772,-356 921,-356 921,-392"/>
<text text-anchor="middle" x="846.5" y="-370.3" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundCompaction</text>
</g>
<!-- BackgroundCallCompaction&#45;&gt;BackgroundCompaction -->
<g id="edge6" class="edge">
<title>BackgroundCallCompaction&#45;&gt;BackgroundCompaction</title>
<path fill="none" stroke="#666666" d="M710.0242,-333.0225C731.0674,-339.3409 754.8823,-346.4914 776.6598,-353.0302"/>
<polygon fill="#666666" stroke="#666666" points="775.9209,-356.4626 786.5051,-355.9863 777.934,-349.7583 775.9209,-356.4626"/>
</g>
<!-- BackgroundCompaction&#45;&gt;MaybeScheduleFlushOrCompaction -->
<g id="edge9" class="edge">
<title>BackgroundCompaction&#45;&gt;MaybeScheduleFlushOrCompaction</title>
<path fill="none" stroke="#666666" d="M771.9791,-382.4353C759.9641,-383.5022 747.6494,-384.4216 736,-385 557.962,-393.8398 351.4871,-380.0284 225.1938,-368.8542"/>
<polygon fill="#666666" stroke="#666666" points="225.3839,-365.3573 215.1119,-367.9527 224.7604,-372.3295 225.3839,-365.3573"/>
</g>
<!-- BackgroundCompaction&#45;&gt;Schedule -->
<g id="edge10" class="edge">
<title>BackgroundCompaction&#45;&gt;Schedule</title>
<path fill="none" stroke="#666666" d="M771.9231,-376.2378C674.4053,-377.563 498.8272,-374.4368 353,-342 344.2417,-340.0519 335.1337,-337.161 326.5169,-333.9856"/>
<polygon fill="#666666" stroke="#666666" points="327.6307,-330.6637 317.0416,-330.3149 325.102,-337.191 327.6307,-330.6637"/>
</g>
<!-- EnoughRoomForCompaction -->
<g id="node9" class="node">
<title>EnoughRoomForCompaction</title>
<polygon fill="none" stroke="#000000" points="1163.5,-608 985.5,-608 985.5,-572 1163.5,-572 1163.5,-608"/>
<text text-anchor="middle" x="1074.5" y="-586.3" font-family="Times,serif" font-size="14.00" fill="#000000">EnoughRoomForCompaction</text>
</g>
<!-- BackgroundCompaction&#45;&gt;EnoughRoomForCompaction -->
<g id="edge11" class="edge">
<title>BackgroundCompaction&#45;&gt;EnoughRoomForCompaction</title>
<path fill="none" stroke="#666666" d="M850.8677,-392.174C861.0264,-430.3102 889.9957,-518.8034 949,-563 957.0269,-569.0125 966.1097,-573.7455 975.6291,-577.463"/>
<polygon fill="#666666" stroke="#666666" points="974.6763,-580.838 985.2712,-580.8519 976.9975,-574.234 974.6763,-580.838"/>
</g>
<!-- ReleaseCompactionFiles -->
<g id="node10" class="node">
<title>ReleaseCompactionFiles</title>
<polygon fill="none" stroke="#000000" points="1150.5,-554 998.5,-554 998.5,-518 1150.5,-518 1150.5,-554"/>
<text text-anchor="middle" x="1074.5" y="-532.3" font-family="Times,serif" font-size="14.00" fill="#000000">ReleaseCompactionFiles</text>
</g>
<!-- BackgroundCompaction&#45;&gt;ReleaseCompactionFiles -->
<g id="edge12" class="edge">
<title>BackgroundCompaction&#45;&gt;ReleaseCompactionFiles</title>
<path fill="none" stroke="#666666" d="M854.9416,-392.1705C869.6361,-421.6659 902.8197,-479.6175 949,-509 960.8777,-516.5573 974.5349,-522.0289 988.3702,-525.9841"/>
<polygon fill="#666666" stroke="#666666" points="987.8942,-529.4766 998.4531,-528.6042 989.6548,-522.7016 987.8942,-529.4766"/>
</g>
<!-- PickCompactionFromQueue -->
<g id="node11" class="node">
<title>PickCompactionFromQueue</title>
<polygon fill="none" stroke="#000000" points="1161,-446 988,-446 988,-410 1161,-410 1161,-446"/>
<text text-anchor="middle" x="1074.5" y="-424.3" font-family="Times,serif" font-size="14.00" fill="#000000">PickCompactionFromQueue</text>
</g>
<!-- BackgroundCompaction&#45;&gt;PickCompactionFromQueue -->
<g id="edge13" class="edge">
<title>BackgroundCompaction&#45;&gt;PickCompactionFromQueue</title>
<path fill="none" stroke="#666666" d="M913.1042,-392.016C925.0328,-395.108 937.3666,-398.2179 949,-401 958.5101,-403.2743 968.4468,-405.5621 978.3845,-407.792"/>
<polygon fill="#666666" stroke="#666666" points="977.7852,-411.2442 988.3067,-409.9999 979.3057,-404.4113 977.7852,-411.2442"/>
</g>
<!-- AddToCompactionQueue -->
<g id="node12" class="node">
<title>AddToCompactionQueue</title>
<polygon fill="none" stroke="#000000" points="1153,-500 996,-500 996,-464 1153,-464 1153,-500"/>
<text text-anchor="middle" x="1074.5" y="-478.3" font-family="Times,serif" font-size="14.00" fill="#000000">AddToCompactionQueue</text>
</g>
<!-- BackgroundCompaction&#45;&gt;AddToCompactionQueue -->
<g id="edge14" class="edge">
<title>BackgroundCompaction&#45;&gt;AddToCompactionQueue</title>
<path fill="none" stroke="#666666" d="M864.0126,-392.0637C883.1468,-410.7124 915.5568,-439.2419 949,-455 960.5672,-460.4504 973.2534,-464.8139 985.976,-468.3039"/>
<polygon fill="#666666" stroke="#666666" points="985.1374,-471.7021 995.6942,-470.8061 986.8828,-464.9232 985.1374,-471.7021"/>
</g>
<!-- NeedsCompaction -->
<g id="node13" class="node">
<title>NeedsCompaction</title>
<polygon fill="none" stroke="#000000" points="1133,-392 1016,-392 1016,-356 1133,-356 1133,-392"/>
<text text-anchor="middle" x="1074.5" y="-370.3" font-family="Times,serif" font-size="14.00" fill="#000000">NeedsCompaction</text>
</g>
<!-- BackgroundCompaction&#45;&gt;NeedsCompaction -->
<g id="edge15" class="edge">
<title>BackgroundCompaction&#45;&gt;NeedsCompaction</title>
<path fill="none" stroke="#666666" d="M921.1557,-374C948.4486,-374 979.1708,-374 1005.9091,-374"/>
<polygon fill="#666666" stroke="#666666" points="1005.9463,-377.5001 1015.9463,-374 1005.9463,-370.5001 1005.9463,-377.5001"/>
</g>
<!-- NotifyOnCompactionBegin -->
<g id="node14" class="node">
<title>NotifyOnCompactionBegin</title>
<polygon fill="none" stroke="#000000" points="1158,-338 991,-338 991,-302 1158,-302 1158,-338"/>
<text text-anchor="middle" x="1074.5" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">NotifyOnCompactionBegin</text>
</g>
<!-- BackgroundCompaction&#45;&gt;NotifyOnCompactionBegin -->
<g id="edge16" class="edge">
<title>BackgroundCompaction&#45;&gt;NotifyOnCompactionBegin</title>
<path fill="none" stroke="#666666" d="M913.1042,-355.984C925.0328,-352.892 937.3666,-349.7821 949,-347 959.2891,-344.5394 970.0775,-342.063 980.8262,-339.6613"/>
<polygon fill="#666666" stroke="#666666" points="981.6653,-343.0603 990.6709,-337.4791 980.1504,-336.2262 981.6653,-343.0603"/>
</g>
<!-- LogAndApply -->
<g id="node15" class="node">
<title>LogAndApply</title>
<polygon fill="none" stroke="#000000" points="1122,-284 1027,-284 1027,-248 1122,-248 1122,-284"/>
<text text-anchor="middle" x="1074.5" y="-262.3" font-family="Times,serif" font-size="14.00" fill="#000000">LogAndApply</text>
</g>
<!-- BackgroundCompaction&#45;&gt;LogAndApply -->
<g id="edge17" class="edge">
<title>BackgroundCompaction&#45;&gt;LogAndApply</title>
<path fill="none" stroke="#666666" d="M864.0126,-355.9363C883.1468,-337.2876 915.5568,-308.7581 949,-293 970.1546,-283.0321 995.0518,-276.6995 1017.0695,-272.6966"/>
<polygon fill="#666666" stroke="#666666" points="1017.6867,-276.142 1026.9594,-271.0168 1016.5145,-269.2409 1017.6867,-276.142"/>
</g>
<!-- SetThreadOperation -->
<g id="node16" class="node">
<title>SetThreadOperation</title>
<polygon fill="none" stroke="#000000" points="1137.5,-230 1011.5,-230 1011.5,-194 1137.5,-194 1137.5,-230"/>
<text text-anchor="middle" x="1074.5" y="-208.3" font-family="Times,serif" font-size="14.00" fill="#000000">SetThreadOperation</text>
</g>
<!-- BackgroundCompaction&#45;&gt;SetThreadOperation -->
<g id="edge18" class="edge">
<title>BackgroundCompaction&#45;&gt;SetThreadOperation</title>
<path fill="none" stroke="#666666" d="M854.9416,-355.8295C869.6361,-326.3341 902.8197,-268.3825 949,-239 964.6274,-229.057 983.3351,-222.7242 1001.4761,-218.7056"/>
<polygon fill="#666666" stroke="#666666" points="1002.3553,-222.0991 1011.4729,-216.7028 1000.9802,-215.2354 1002.3553,-222.0991"/>
</g>
<!-- AddFile -->
<g id="node17" class="node">
<title>AddFile</title>
<polygon fill="none" stroke="#000000" points="1105,-176 1044,-176 1044,-140 1105,-140 1105,-176"/>
<text text-anchor="middle" x="1074.5" y="-154.3" font-family="Times,serif" font-size="14.00" fill="#000000">AddFile</text>
</g>
<!-- BackgroundCompaction&#45;&gt;AddFile -->
<g id="edge19" class="edge">
<title>BackgroundCompaction&#45;&gt;AddFile</title>
<path fill="none" stroke="#666666" d="M850.8677,-355.826C861.0264,-317.6898 889.9957,-229.1966 949,-185 973.3295,-166.7762 1007.3592,-160.307 1033.8463,-158.24"/>
<polygon fill="#666666" stroke="#666666" points="1034.1833,-161.7261 1043.9553,-157.6324 1033.7632,-154.7388 1034.1833,-161.7261"/>
</g>
<!-- InstallSuperVersionAndScheduleWork -->
<g id="node18" class="node">
<title>InstallSuperVersionAndScheduleWork</title>
<polygon fill="none" stroke="#000000" points="1189,-122 960,-122 960,-86 1189,-86 1189,-122"/>
<text text-anchor="middle" x="1074.5" y="-100.3" font-family="Times,serif" font-size="14.00" fill="#000000">InstallSuperVersionAndScheduleWork</text>
</g>
<!-- BackgroundCompaction&#45;&gt;InstallSuperVersionAndScheduleWork -->
<g id="edge20" class="edge">
<title>BackgroundCompaction&#45;&gt;InstallSuperVersionAndScheduleWork</title>
<path fill="none" stroke="#666666" d="M848.5207,-355.7058C854.5792,-310.0965 876.8904,-190.7295 949,-131 950.3865,-129.8516 951.8104,-128.7487 953.2681,-127.6897"/>
<polygon fill="#666666" stroke="#666666" points="955.4472,-130.4494 961.9591,-122.0921 951.6568,-124.5644 955.4472,-130.4494"/>
</g>
<!-- NotifyOnFlushCompleted -->
<g id="node19" class="node">
<title>NotifyOnFlushCompleted</title>
<polygon fill="none" stroke="#000000" points="1153.5,-68 995.5,-68 995.5,-32 1153.5,-32 1153.5,-68"/>
<text text-anchor="middle" x="1074.5" y="-46.3" font-family="Times,serif" font-size="14.00" fill="#000000">NotifyOnFlushCompleted</text>
</g>
<!-- BackgroundCompaction&#45;&gt;NotifyOnFlushCompleted -->
<g id="edge21" class="edge">
<title>BackgroundCompaction&#45;&gt;NotifyOnFlushCompleted</title>
<path fill="none" stroke="#666666" d="M850.3445,-355.7665C863.0418,-297.2436 905.3212,-115.7124 949,-77 959.4014,-67.7812 972.1828,-61.4517 985.5674,-57.1508"/>
<polygon fill="#666666" stroke="#666666" points="986.7281,-60.4597 995.3946,-54.3653 984.8191,-53.725 986.7281,-60.4597"/>
</g>
<!-- CompactionJob -->
<g id="node20" class="node">
<title>CompactionJob</title>
<polygon fill="none" stroke="#000000" points="1125.5,-796 1023.5,-796 1023.5,-760 1125.5,-760 1125.5,-796"/>
<text text-anchor="middle" x="1074.5" y="-774.3" font-family="Times,serif" font-size="14.00" fill="#000000">CompactionJob</text>
</g>
<!-- BackgroundCompaction&#45;&gt;CompactionJob -->
<g id="edge22" class="edge">
<title>BackgroundCompaction&#45;&gt;CompactionJob</title>
<path fill="none" stroke="#666666" d="M848.9264,-392.1475C858.4059,-460.3324 895.0952,-699.9075 949,-751 966.1197,-767.2265 990.5348,-774.651 1013.2868,-777.7779"/>
<polygon fill="#666666" stroke="#666666" points="1012.9206,-781.2587 1023.2492,-778.8983 1013.703,-774.3025 1012.9206,-781.2587"/>
</g>
<!-- CompactionJob_Prepare -->
<g id="node21" class="node">
<title>CompactionJob_Prepare</title>
<polygon fill="none" stroke="#000000" points="1149.5,-742 999.5,-742 999.5,-706 1149.5,-706 1149.5,-742"/>
<text text-anchor="middle" x="1074.5" y="-720.3" font-family="Times,serif" font-size="14.00" fill="#000000">CompactionJob_Prepare</text>
</g>
<!-- BackgroundCompaction&#45;&gt;CompactionJob_Prepare -->
<g id="edge23" class="edge">
<title>BackgroundCompaction&#45;&gt;CompactionJob_Prepare</title>
<path fill="none" stroke="#666666" d="M849.7815,-392.0629C861.3353,-453.6968 901.9806,-654.2641 949,-697 960.3643,-707.329 974.7033,-714.0537 989.5923,-718.3662"/>
<polygon fill="#666666" stroke="#666666" points="988.8763,-721.7954 999.4302,-720.8653 990.5998,-715.0109 988.8763,-721.7954"/>
</g>
<!-- CompactionJob_Run -->
<g id="node22" class="node">
<title>CompactionJob_Run</title>
<polygon fill="none" stroke="#000000" points="957,-626.5 957,-687.5 1192,-687.5 1192,-626.5 957,-626.5"/>
<text text-anchor="middle" x="1074.5" y="-672.3" font-family="Times,serif" font-size="14.00" fill="#000000">CompactionJob_Run</text>
<polyline fill="none" stroke="#000000" points="957,-664.5 1192,-664.5 "/>
<text text-anchor="start" x="965" y="-649.3" font-family="Times,serif" font-size="14.00" fill="#000000">使用线程池跑key/value压缩</text>
<text text-anchor="start" x="965" y="-634.3" font-family="Times,serif" font-size="14.00" fill="#000000"> 每个线程参数为sub_comact_states[i]</text>
</g>
<!-- BackgroundCompaction&#45;&gt;CompactionJob_Run -->
<g id="edge24" class="edge">
<title>BackgroundCompaction&#45;&gt;CompactionJob_Run</title>
<path fill="none" stroke="#666666" d="M848.9321,-392.2086C855.8918,-437.1036 880.0285,-554.0117 949,-617 950.1609,-618.0602 951.35,-619.0923 952.5649,-620.0971"/>
<polygon fill="#666666" stroke="#666666" points="950.8245,-623.1654 960.9328,-626.3393 955.0101,-617.5545 950.8245,-623.1654"/>
</g>
<!-- BackgroundFlush -->
<g id="node26" class="node">
<title>BackgroundFlush</title>
<polygon fill="none" stroke="#000000" points="903,-36 790,-36 790,0 903,0 903,-36"/>
<text text-anchor="middle" x="846.5" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundFlush</text>
</g>
<!-- BackgroundCallFlush&#45;&gt;BackgroundFlush -->
<g id="edge29" class="edge">
<title>BackgroundCallFlush&#45;&gt;BackgroundFlush</title>
<path fill="none" stroke="#666666" d="M682.8897,-107.9232C716.3287,-89.5446 768.2538,-61.0056 804.6148,-41.0209"/>
<polygon fill="#666666" stroke="#666666" points="806.4253,-44.0197 813.503,-36.1357 803.0536,-37.8852 806.4253,-44.0197"/>
</g>
<!-- compaction_queue_ -->
<g id="node23" class="node">
<title>compaction_queue_</title>
<polygon fill="none" stroke="#000000" points="1257.5,-424.5 1257.5,-485.5 1461.5,-485.5 1461.5,-424.5 1257.5,-424.5"/>
<text text-anchor="middle" x="1359.5" y="-470.3" font-family="Times,serif" font-size="14.00" fill="#000000">compaction_queue_</text>
<polyline fill="none" stroke="#000000" points="1257.5,-462.5 1461.5,-462.5 "/>
<text text-anchor="start" x="1265.5" y="-447.3" font-family="Times,serif" font-size="14.00" fill="#000000">std::deque&lt;ColumnFamilyData*&gt;</text>
<text text-anchor="start" x="1265.5" y="-432.3" font-family="Times,serif" font-size="14.00" fill="#000000"> compaction_queue_;</text>
</g>
<!-- PickCompactionFromQueue&#45;&gt;compaction_queue_ -->
<g id="edge25" class="edge">
<title>PickCompactionFromQueue&#45;&gt;compaction_queue_</title>
<path fill="none" stroke="#666666" d="M1161.1702,-436.2109C1188.3449,-438.7853 1218.7372,-441.6646 1247.4071,-444.3807"/>
<polygon fill="#666666" stroke="#666666" points="1247.1825,-447.875 1257.468,-445.3338 1247.8427,-440.9062 1247.1825,-447.875"/>
</g>
<!-- RequestCompactionToken -->
<g id="node24" class="node">
<title>RequestCompactionToken</title>
<polygon fill="none" stroke="#000000" points="1440,-406 1279,-406 1279,-370 1440,-370 1440,-406"/>
<text text-anchor="middle" x="1359.5" y="-384.3" font-family="Times,serif" font-size="14.00" fill="#000000">RequestCompactionToken</text>
</g>
<!-- PickCompactionFromQueue&#45;&gt;RequestCompactionToken -->
<g id="edge26" class="edge">
<title>PickCompactionFromQueue&#45;&gt;RequestCompactionToken</title>
<path fill="none" stroke="#666666" d="M1161.1702,-415.8358C1195.1543,-411.0661 1234.1706,-405.5901 1268.5572,-400.7639"/>
<polygon fill="#666666" stroke="#666666" points="1269.1793,-404.211 1278.5957,-399.355 1268.2063,-397.2789 1269.1793,-404.211"/>
</g>
<!-- AddToCompactionQueue&#45;&gt;compaction_queue_ -->
<g id="edge27" class="edge">
<title>AddToCompactionQueue&#45;&gt;compaction_queue_</title>
<path fill="none" stroke="#666666" d="M1153.1319,-474.5507C1182.1974,-471.7971 1215.7325,-468.6201 1247.2069,-465.6383"/>
<polygon fill="#666666" stroke="#666666" points="1247.7198,-469.1055 1257.3451,-464.6778 1247.0595,-462.1367 1247.7198,-469.1055"/>
</g>
<!-- thread_pool -->
<g id="node30" class="node">
<title>thread_pool</title>
<polygon fill="none" stroke="#000000" points="1400,-660 1319,-660 1319,-624 1400,-624 1400,-660"/>
<text text-anchor="middle" x="1359.5" y="-638.3" font-family="Times,serif" font-size="14.00" fill="#000000">thread_pool</text>
</g>
<!-- CompactionJob_Run&#45;&gt;thread_pool -->
<g id="edge31" class="edge">
<title>CompactionJob_Run&#45;&gt;thread_pool</title>
<path fill="none" stroke="#666666" d="M1192.0658,-650.8123C1232.7434,-648.6714 1276.2188,-646.3832 1308.6718,-644.6752"/>
<polygon fill="#666666" stroke="#666666" points="1309.0015,-648.1628 1318.8037,-644.1419 1308.6335,-641.1724 1309.0015,-648.1628"/>
</g>
<!-- sub_compact_states -->
<g id="node31" class="node">
<title>sub_compact_states</title>
<polygon fill="none" stroke="#000000" points="1228,-678.5 1228,-839.5 1491,-839.5 1491,-678.5 1228,-678.5"/>
<text text-anchor="start" x="1236" y="-824.3" font-family="Times,serif" font-size="14.00" fill="#000000">sub_compact_states</text>
<polyline fill="none" stroke="#000000" points="1228,-816.5 1491,-816.5 "/>
<text text-anchor="start" x="1236" y="-801.3" font-family="Times,serif" font-size="14.00" fill="#000000">CompactionJob::SubcompactionState</text>
<polyline fill="none" stroke="#000000" points="1228,-793.5 1491,-793.5 "/>
<text text-anchor="start" x="1236" y="-778.3" font-family="Times,serif" font-size="14.00" fill="#000000">Slice *start, *end;</text>
<polyline fill="none" stroke="#000000" points="1228,-770.5 1491,-770.5 "/>
<text text-anchor="start" x="1236" y="-755.3" font-family="Times,serif" font-size="14.00" fill="#000000">Status status;</text>
<polyline fill="none" stroke="#000000" points="1228,-747.5 1491,-747.5 "/>
<text text-anchor="start" x="1236" y="-732.3" font-family="Times,serif" font-size="14.00" fill="#000000">... std::vector&lt;Output&gt; outputs;</text>
<polyline fill="none" stroke="#000000" points="1228,-724.5 1491,-724.5 "/>
<text text-anchor="start" x="1236" y="-709.3" font-family="Times,serif" font-size="14.00" fill="#000000">std::unique_ptr&lt;WritableFileWriter&gt; outfile;</text>
<polyline fill="none" stroke="#000000" points="1228,-701.5 1491,-701.5 "/>
<text text-anchor="start" x="1236" y="-686.3" font-family="Times,serif" font-size="14.00" fill="#000000">std::unique_ptr&lt;TableBuilder&gt; builder;</text>
</g>
<!-- CompactionJob_Run&#45;&gt;sub_compact_states -->
<g id="edge32" class="edge">
<title>CompactionJob_Run&#45;&gt;sub_compact_states</title>
<path fill="none" stroke="#666666" d="M1165.0345,-687.552C1174.1551,-690.7102 1183.2685,-693.8984 1192,-697 1200.5832,-700.0489 1209.402,-703.2144 1218.2894,-706.4297"/>
<polygon fill="#666666" stroke="#666666" points="1217.358,-709.8149 1227.9522,-709.9349 1219.7451,-703.2345 1217.358,-709.8149"/>
</g>
<!-- ProcessKeyValueCompaction -->
<g id="node32" class="node">
<title>ProcessKeyValueCompaction</title>
<polygon fill="none" stroke="#000000" points="1713.5,-714 1534.5,-714 1534.5,-678 1713.5,-678 1713.5,-714"/>
<text text-anchor="middle" x="1624" y="-692.3" font-family="Times,serif" font-size="14.00" fill="#000000">ProcessKeyValueCompaction</text>
</g>
<!-- CompactionJob_Run&#45;&gt;ProcessKeyValueCompaction -->
<g id="edge33" class="edge">
<title>CompactionJob_Run&#45;&gt;ProcessKeyValueCompaction</title>
<path fill="none" stroke="#666666" d="M1181.8096,-687.5699C1185.4629,-690.4362 1188.8842,-693.5712 1192,-697 1238.6897,-748.3792 1173.5457,-805.9363 1228,-849 1319.6839,-921.5057 1384.6357,-897.4732 1491,-849 1547.7408,-823.1416 1589.6457,-759.7951 1610.0733,-723.2335"/>
<polygon fill="#666666" stroke="#666666" points="1613.3271,-724.5765 1615.0304,-714.1195 1607.1778,-721.2319 1613.3271,-724.5765"/>
</g>
<!-- PopFirstFromCompactionQueue -->
<g id="node25" class="node">
<title>PopFirstFromCompactionQueue</title>
<polygon fill="none" stroke="#000000" points="1721,-234 1527,-234 1527,-198 1721,-198 1721,-234"/>
<text text-anchor="middle" x="1624" y="-212.3" font-family="Times,serif" font-size="14.00" fill="#000000">PopFirstFromCompactionQueue</text>
</g>
<!-- compaction_queue_&#45;&gt;PopFirstFromCompactionQueue -->
<g id="edge28" class="edge">
<title>compaction_queue_&#45;&gt;PopFirstFromCompactionQueue</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1461.6582,-431.7659C1472.0776,-427.1432 1482.0896,-421.6129 1491,-415 1552.4503,-369.3943 1594.3152,-286.4248 1612.9736,-243.4471"/>
<polygon fill="#666666" stroke="#666666" points="1616.2265,-244.7412 1616.9097,-234.1684 1609.7824,-242.0075 1616.2265,-244.7412"/>
</g>
<!-- BackgroundFlush&#45;&gt;PopFirstFromCompactionQueue -->
<g id="edge30" class="edge">
<title>BackgroundFlush&#45;&gt;PopFirstFromCompactionQueue</title>
<path fill="none" stroke="#666666" d="M903.2563,-11.8952C972.3826,-6.0368 1092.271,-.9798 1192,-23 1346.4219,-57.0964 1512.8965,-149.0576 1585.9662,-192.5707"/>
<polygon fill="#666666" stroke="#666666" points="1584.4445,-195.7392 1594.8209,-197.8796 1588.0441,-189.7356 1584.4445,-195.7392"/>
</g>
<!-- TableBuilder_Add -->
<g id="node27" class="node">
<title>TableBuilder_Add</title>
<polygon fill="none" stroke="#000000" points="1904,-570 1786,-570 1786,-534 1904,-534 1904,-570"/>
<text text-anchor="middle" x="1845" y="-548.3" font-family="Times,serif" font-size="14.00" fill="#000000">TableBuilder_Add</text>
</g>
<!-- TableBuilder_Finish -->
<g id="node28" class="node">
<title>TableBuilder_Finish</title>
<polygon fill="none" stroke="#000000" points="1909,-516 1781,-516 1781,-480 1909,-480 1909,-516"/>
<text text-anchor="middle" x="1845" y="-494.3" font-family="Times,serif" font-size="14.00" fill="#000000">TableBuilder_Finish</text>
</g>
<!-- TableBuilder_Abandon -->
<g id="node29" class="node">
<title>TableBuilder_Abandon</title>
<polygon fill="none" stroke="#000000" points="1917,-462 1773,-462 1773,-426 1917,-426 1917,-462"/>
<text text-anchor="middle" x="1845" y="-440.3" font-family="Times,serif" font-size="14.00" fill="#000000">TableBuilder_Abandon</text>
</g>
<!-- thread_pool&#45;&gt;ProcessKeyValueCompaction -->
<g id="edge35" class="edge">
<title>thread_pool&#45;&gt;ProcessKeyValueCompaction</title>
<path fill="none" stroke="#b3b3b3" stroke-dasharray="5,2" d="M1400.2485,-650.3192C1433.6565,-657.1397 1482.3443,-667.0798 1525.7782,-675.9472"/>
<polygon fill="#b3b3b3" stroke="#b3b3b3" points="1525.3246,-679.4267 1535.8227,-677.9978 1526.7249,-672.5682 1525.3246,-679.4267"/>
</g>
<!-- sub_compact_states&#45;&gt;ProcessKeyValueCompaction -->
<g id="edge34" class="edge">
<title>sub_compact_states&#45;&gt;ProcessKeyValueCompaction</title>
<path fill="none" stroke="#b3b3b3" stroke-dasharray="5,2" d="M1491.3625,-727.5923C1507.3912,-723.7745 1523.4275,-719.9549 1538.5295,-716.3578"/>
<polygon fill="#b3b3b3" stroke="#b3b3b3" points="1539.3925,-719.7503 1548.3094,-714.0284 1537.7705,-712.9408 1539.3925,-719.7503"/>
</g>
<!-- ProcessKeyValueCompaction&#45;&gt;TableBuilder_Add -->
<g id="edge36" class="edge">
<title>ProcessKeyValueCompaction&#45;&gt;TableBuilder_Add</title>
<path fill="none" stroke="#666666" d="M1651.9898,-677.7623C1691.7602,-651.8485 1764.6605,-604.3479 1808.5907,-575.7237"/>
<polygon fill="#666666" stroke="#666666" points="1810.7698,-578.4813 1817.2375,-570.0896 1806.9483,-572.6164 1810.7698,-578.4813"/>
</g>
<!-- ProcessKeyValueCompaction&#45;&gt;TableBuilder_Finish -->
<g id="edge37" class="edge">
<title>ProcessKeyValueCompaction&#45;&gt;TableBuilder_Finish</title>
<path fill="none" stroke="#666666" d="M1633.1986,-677.7874C1651.7608,-642.8699 1697.0895,-566.3156 1757,-525 1761.5223,-521.8813 1766.4168,-519.1134 1771.5019,-516.6582"/>
<polygon fill="#666666" stroke="#666666" points="1773.0713,-519.7918 1780.822,-512.5684 1770.2584,-513.3817 1773.0713,-519.7918"/>
</g>
<!-- ProcessKeyValueCompaction&#45;&gt;TableBuilder_Abandon -->
<g id="edge38" class="edge">
<title>ProcessKeyValueCompaction&#45;&gt;TableBuilder_Abandon</title>
<path fill="none" stroke="#666666" d="M1629.6462,-677.7618C1643.8174,-635.0212 1685.0019,-527.7273 1757,-471 1759.0869,-469.3558 1761.2738,-467.8112 1763.539,-466.3603"/>
<polygon fill="#666666" stroke="#666666" points="1765.6433,-469.1909 1772.6182,-461.2159 1762.1924,-463.1006 1765.6433,-469.1909"/>
</g>
<!-- CreateCompactionFilter -->
<g id="node33" class="node">
<title>CreateCompactionFilter</title>
<polygon fill="none" stroke="#000000" points="1919,-660 1771,-660 1771,-624 1919,-624 1919,-660"/>
<text text-anchor="middle" x="1845" y="-638.3" font-family="Times,serif" font-size="14.00" fill="#000000">CreateCompactionFilter</text>
</g>
<!-- ProcessKeyValueCompaction&#45;&gt;CreateCompactionFilter -->
<g id="edge39" class="edge">
<title>ProcessKeyValueCompaction&#45;&gt;CreateCompactionFilter</title>
<path fill="none" stroke="#666666" d="M1697.8971,-677.9437C1718.2622,-672.9676 1740.4974,-667.5346 1761.3707,-662.4343"/>
<polygon fill="#666666" stroke="#666666" points="1762.2892,-665.8129 1771.1726,-660.0393 1760.6276,-659.013 1762.2892,-665.8129"/>
</g>
<!-- MakeInputIterator -->
<g id="node34" class="node">
<title>MakeInputIterator</title>
<polygon fill="none" stroke="#000000" points="1903,-714 1787,-714 1787,-678 1903,-678 1903,-714"/>
<text text-anchor="middle" x="1845" y="-692.3" font-family="Times,serif" font-size="14.00" fill="#000000">MakeInputIterator</text>
</g>
<!-- ProcessKeyValueCompaction&#45;&gt;MakeInputIterator -->
<g id="edge40" class="edge">
<title>ProcessKeyValueCompaction&#45;&gt;MakeInputIterator</title>
<path fill="none" stroke="#666666" d="M1713.5706,-696C1734.5597,-696 1756.5946,-696 1776.4948,-696"/>
<polygon fill="#666666" stroke="#666666" points="1776.6899,-699.5001 1786.6898,-696 1776.6898,-692.5001 1776.6899,-699.5001"/>
</g>
<!-- MergeHelper -->
<g id="node35" class="node">
<title>MergeHelper</title>
<polygon fill="none" stroke="#000000" points="1889.5,-768 1800.5,-768 1800.5,-732 1889.5,-732 1889.5,-768"/>
<text text-anchor="middle" x="1845" y="-746.3" font-family="Times,serif" font-size="14.00" fill="#000000">MergeHelper</text>
</g>
<!-- ProcessKeyValueCompaction&#45;&gt;MergeHelper -->
<g id="edge41" class="edge">
<title>ProcessKeyValueCompaction&#45;&gt;MergeHelper</title>
<path fill="none" stroke="#666666" d="M1697.8971,-714.0563C1728.0713,-721.4292 1762.3508,-729.8052 1790.2233,-736.6156"/>
<polygon fill="#666666" stroke="#666666" points="1789.6377,-740.0755 1800.1827,-739.0492 1791.2993,-733.2755 1789.6377,-740.0755"/>
</g>
<!-- OpenCompactionOutputFile -->
<g id="node36" class="node">
<title>OpenCompactionOutputFile</title>
<polygon fill="none" stroke="#000000" points="1930.5,-822 1759.5,-822 1759.5,-786 1930.5,-786 1930.5,-822"/>
<text text-anchor="middle" x="1845" y="-800.3" font-family="Times,serif" font-size="14.00" fill="#000000">OpenCompactionOutputFile</text>
</g>
<!-- ProcessKeyValueCompaction&#45;&gt;OpenCompactionOutputFile -->
<g id="edge42" class="edge">
<title>ProcessKeyValueCompaction&#45;&gt;OpenCompactionOutputFile</title>
<path fill="none" stroke="#666666" d="M1649.4368,-714.1484C1675.4553,-732.0606 1717.5446,-759.2683 1757,-777 1761.1292,-778.8557 1765.4221,-780.6313 1769.792,-782.3219"/>
<polygon fill="#666666" stroke="#666666" points="1768.8541,-785.7065 1779.4475,-785.885 1771.2776,-779.1393 1768.8541,-785.7065"/>
</g>
<!-- FinishCompactionOutputFile -->
<g id="node37" class="node">
<title>FinishCompactionOutputFile</title>
<polygon fill="none" stroke="#000000" points="1933,-876 1757,-876 1757,-840 1933,-840 1933,-876"/>
<text text-anchor="middle" x="1845" y="-854.3" font-family="Times,serif" font-size="14.00" fill="#000000">FinishCompactionOutputFile</text>
</g>
<!-- ProcessKeyValueCompaction&#45;&gt;FinishCompactionOutputFile -->
<g id="edge43" class="edge">
<title>ProcessKeyValueCompaction&#45;&gt;FinishCompactionOutputFile</title>
<path fill="none" stroke="#666666" d="M1637.0076,-714.1076C1658.6771,-742.9877 1704.9599,-799.4309 1757,-831 1759.6472,-832.6059 1762.3979,-834.1234 1765.221,-835.5566"/>
<polygon fill="#666666" stroke="#666666" points="1763.9035,-838.8039 1774.4464,-839.8524 1766.8585,-832.4582 1763.9035,-838.8039"/>
</g>
</g>
</svg>
