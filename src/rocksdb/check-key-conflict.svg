<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: check_key_conflict Pages: 1 -->
<svg width="1677pt" height="682pt"
 viewBox="0.00 0.00 1677.00 682.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 678)">
<title>check_key_conflict</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-678 1673,-678 1673,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_MemTable</title>
<polygon fill="none" stroke="#000000" points="1244,-530 1244,-666 1661,-666 1661,-530 1244,-530"/>
<text text-anchor="middle" x="1452.5" y="-646" font-family="Times,serif" font-size="20.00" fill="#000000">MemTable</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_TransactionBaseImpl</title>
<polygon fill="none" stroke="#000000" points="8,-8 8,-170 706,-170 706,-8 8,-8"/>
<text text-anchor="middle" x="357" y="-150" font-family="Times,serif" font-size="20.00" fill="#000000"> TransactionBaseImpl</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_DBImpl</title>
<polygon fill="none" stroke="#000000" points="258,-268 258,-522 1393,-522 1393,-268 258,-268"/>
<text text-anchor="middle" x="825.5" y="-502" font-family="Times,serif" font-size="20.00" fill="#000000">DBImpl</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_TransactionUtil</title>
<polygon fill="none" stroke="#000000" points="44,-178 44,-260 945.5,-260 945.5,-178 44,-178"/>
<text text-anchor="middle" x="494.75" y="-240" font-family="Times,serif" font-size="20.00" fill="#000000">TransactionUtil</text>
</g>
<!-- GetEarliestSequenceNumber -->
<g id="node1" class="node">
<title>GetEarliestSequenceNumber</title>
<polygon fill="none" stroke="#000000" points="1426,-628 1252,-628 1252,-592 1426,-592 1426,-628"/>
<text text-anchor="middle" x="1339" y="-606.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetEarliestSequenceNumber</text>
</g>
<!-- earliest_seqno_ -->
<g id="node2" class="node">
<title>earliest_seqno_</title>
<polygon fill="#95e1d3" stroke="#000000" points="1462,-566.5 1462,-627.5 1653,-627.5 1653,-566.5 1462,-566.5"/>
<text text-anchor="middle" x="1557.5" y="-612.3" font-family="Times,serif" font-size="14.00" fill="#000000">earliest_seqno_</text>
<polyline fill="none" stroke="#000000" points="1462,-604.5 1653,-604.5 "/>
<text text-anchor="start" x="1470" y="-589.3" font-family="Times,serif" font-size="14.00" fill="#000000">std::atomic&lt;SequenceNumber&gt;</text>
<text text-anchor="middle" x="1557.5" y="-574.3" font-family="Times,serif" font-size="14.00" fill="#000000"> earliest_seqno_;</text>
</g>
<!-- GetEarliestSequenceNumber&#45;&gt;earliest_seqno_ -->
<g id="edge1" class="edge">
<title>GetEarliestSequenceNumber&#45;&gt;earliest_seqno_</title>
<path fill="none" stroke="#666666" d="M1426.299,-604.806C1434.5808,-604.3133 1443.0381,-603.8101 1451.4699,-603.3084"/>
<polygon fill="#666666" stroke="#666666" points="1451.9541,-606.7859 1461.7285,-602.6981 1451.5383,-599.7983 1451.9541,-606.7859"/>
</g>
<!-- MemTable_Get -->
<g id="node3" class="node">
<title>MemTable_Get</title>
<polygon fill="none" stroke="#000000" points="1391,-574 1287,-574 1287,-538 1391,-538 1391,-574"/>
<text text-anchor="middle" x="1339" y="-552.3" font-family="Times,serif" font-size="14.00" fill="#000000">MemTable_Get</text>
</g>
<!-- tracked_keys_ -->
<g id="node4" class="node">
<title>tracked_keys_</title>
<polygon fill="#95e1d3" stroke="#000000" points="16,-51 16,-97 230,-97 230,-51 16,-51"/>
<text text-anchor="middle" x="123" y="-81.8" font-family="Times,serif" font-size="14.00" fill="#000000">tracked_keys_</text>
<polyline fill="none" stroke="#000000" points="16,-74 230,-74 "/>
<text text-anchor="start" x="24" y="-58.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionKeyMap tracked_keys_;</text>
</g>
<!-- TransactionKeyMap -->
<g id="node5" class="node">
<title>TransactionKeyMap</title>
<polygon fill="#95e1d3" stroke="#000000" points="268.5,-21 268.5,-127 459.5,-127 459.5,-21 268.5,-21"/>
<text text-anchor="middle" x="364" y="-111.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionKeyMap</text>
<polyline fill="none" stroke="#000000" points="268.5,-104 459.5,-104 "/>
<text text-anchor="start" x="276.5" y="-88.8" font-family="Times,serif" font-size="14.00" fill="#000000">using TransactionKeyMap =</text>
<text text-anchor="start" x="276.5" y="-73.8" font-family="Times,serif" font-size="14.00" fill="#000000"> std::unordered_map&lt;uint32_t,</text>
<text text-anchor="start" x="276.5" y="-58.8" font-family="Times,serif" font-size="14.00" fill="#000000"> std::unordered_map&lt;std::string</text>
<text text-anchor="start" x="276.5" y="-43.8" font-family="Times,serif" font-size="14.00" fill="#000000">, TransactionKeyMapInfo&gt;&gt;</text>
<text text-anchor="middle" x="364" y="-28.8" font-family="Times,serif" font-size="14.00" fill="#000000">;</text>
</g>
<!-- tracked_keys_&#45;&gt;TransactionKeyMap -->
<g id="edge2" class="edge">
<title>tracked_keys_&#45;&gt;TransactionKeyMap</title>
<path fill="none" stroke="#666666" d="M230.1096,-74C239.434,-74 248.8667,-74 258.1806,-74"/>
<polygon fill="#666666" stroke="#666666" points="258.2298,-77.5001 268.2298,-74 258.2297,-70.5001 258.2298,-77.5001"/>
</g>
<!-- TransactionKeyMapInfo -->
<g id="node6" class="node">
<title>TransactionKeyMapInfo</title>
<polygon fill="none" stroke="#000000" points="547,-16.5 547,-131.5 698,-131.5 698,-16.5 547,-16.5"/>
<text text-anchor="middle" x="622.5" y="-116.3" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionKeyMapInfo</text>
<polyline fill="none" stroke="#000000" points="547,-108.5 698,-108.5 "/>
<text text-anchor="start" x="555" y="-93.3" font-family="Times,serif" font-size="14.00" fill="#000000">SequenceNumber seq;</text>
<polyline fill="none" stroke="#000000" points="547,-85.5 698,-85.5 "/>
<text text-anchor="start" x="555" y="-70.3" font-family="Times,serif" font-size="14.00" fill="#000000">uint32_t num_writes;</text>
<polyline fill="none" stroke="#000000" points="547,-62.5 698,-62.5 "/>
<text text-anchor="start" x="555" y="-47.3" font-family="Times,serif" font-size="14.00" fill="#000000">uint32_t num_reads;</text>
<polyline fill="none" stroke="#000000" points="547,-39.5 698,-39.5 "/>
<text text-anchor="start" x="555" y="-24.3" font-family="Times,serif" font-size="14.00" fill="#000000">bool exclusive;</text>
</g>
<!-- TransactionKeyMap&#45;&gt;TransactionKeyMapInfo -->
<g id="edge3" class="edge">
<title>TransactionKeyMap&#45;&gt;TransactionKeyMapInfo</title>
<path fill="none" stroke="#666666" d="M459.5214,-74C484.8027,-74 511.935,-74 536.6675,-74"/>
<polygon fill="#666666" stroke="#666666" points="536.7426,-77.5001 546.7425,-74 536.7425,-70.5001 536.7426,-77.5001"/>
</g>
<!-- CheckKey -->
<g id="node15" class="node">
<title>CheckKey</title>
<polygon fill="none" stroke="#000000" points="937.5,-222 863.5,-222 863.5,-186 937.5,-186 937.5,-222"/>
<text text-anchor="middle" x="900.5" y="-200.3" font-family="Times,serif" font-size="14.00" fill="#000000">CheckKey</text>
</g>
<!-- TransactionKeyMapInfo&#45;&gt;CheckKey -->
<g id="edge14" class="edge">
<title>TransactionKeyMapInfo:seq&#45;&gt;CheckKey</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M698.5,-97C768.232,-97 837.4032,-147.4082 873.9323,-179.0272"/>
<polygon fill="#666666" stroke="#666666" points="871.8367,-181.8463 881.6464,-185.8489 876.4739,-176.6025 871.8367,-181.8463"/>
</g>
<!-- GetAndRefSuperVersion -->
<g id="node7" class="node">
<title>GetAndRefSuperVersion</title>
<polygon fill="none" stroke="#000000" points="440.5,-382 287.5,-382 287.5,-346 440.5,-346 440.5,-382"/>
<text text-anchor="middle" x="364" y="-360.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetAndRefSuperVersion</text>
</g>
<!-- SuperVersion -->
<g id="node11" class="node">
<title>SuperVersion</title>
<polygon fill="#95e1d3" stroke="#000000" points="498,-276.5 498,-483.5 747,-483.5 747,-276.5 498,-276.5"/>
<text text-anchor="middle" x="622.5" y="-468.3" font-family="Times,serif" font-size="14.00" fill="#000000">SuperVersion</text>
<polyline fill="none" stroke="#000000" points="498,-460.5 747,-460.5 "/>
<text text-anchor="start" x="506" y="-445.3" font-family="Times,serif" font-size="14.00" fill="#000000">ColumnFamilyData* cfd;</text>
<polyline fill="none" stroke="#000000" points="498,-437.5 747,-437.5 "/>
<text text-anchor="start" x="506" y="-422.3" font-family="Times,serif" font-size="14.00" fill="#000000">MemTable* mem;</text>
<polyline fill="none" stroke="#000000" points="498,-414.5 747,-414.5 "/>
<text text-anchor="start" x="506" y="-399.3" font-family="Times,serif" font-size="14.00" fill="#000000">MemTableListVersion* imm;</text>
<polyline fill="none" stroke="#000000" points="498,-391.5 747,-391.5 "/>
<text text-anchor="start" x="506" y="-376.3" font-family="Times,serif" font-size="14.00" fill="#000000">Version* current;</text>
<polyline fill="none" stroke="#000000" points="498,-368.5 747,-368.5 "/>
<text text-anchor="start" x="506" y="-353.3" font-family="Times,serif" font-size="14.00" fill="#000000">MutableCFOptions mutable_cf_options;</text>
<polyline fill="none" stroke="#000000" points="498,-345.5 747,-345.5 "/>
<text text-anchor="start" x="506" y="-330.3" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t version_number;</text>
<polyline fill="none" stroke="#000000" points="498,-322.5 747,-322.5 "/>
<text text-anchor="start" x="506" y="-307.3" font-family="Times,serif" font-size="14.00" fill="#000000">WriteStallCondition write_stall_condition;</text>
<polyline fill="none" stroke="#000000" points="498,-299.5 747,-299.5 "/>
<text text-anchor="start" x="506" y="-284.3" font-family="Times,serif" font-size="14.00" fill="#000000">InstrumentedMutex* db_mutex;</text>
</g>
<!-- GetAndRefSuperVersion&#45;&gt;SuperVersion -->
<g id="edge4" class="edge">
<title>GetAndRefSuperVersion&#45;&gt;SuperVersion</title>
<path fill="none" stroke="#666666" d="M440.5093,-368.7356C455.4273,-369.6589 471.4768,-370.6523 487.6434,-371.653"/>
<polygon fill="#666666" stroke="#666666" points="487.5183,-375.1518 497.7155,-372.2764 487.9509,-368.1652 487.5183,-375.1518"/>
</g>
<!-- GetEarliestMemTableSequenceNumber -->
<g id="node8" class="node">
<title>GetEarliestMemTableSequenceNumber</title>
<polygon fill="none" stroke="#000000" points="1018,-484 783,-484 783,-448 1018,-448 1018,-484"/>
<text text-anchor="middle" x="900.5" y="-462.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetEarliestMemTableSequenceNumber</text>
</g>
<!-- GetEarliestMemTableSequenceNumber&#45;&gt;GetEarliestSequenceNumber -->
<g id="edge5" class="edge">
<title>GetEarliestMemTableSequenceNumber&#45;&gt;GetEarliestSequenceNumber</title>
<path fill="none" stroke="#666666" d="M950.869,-484.0633C1017.581,-507.7785 1139.0601,-550.2394 1244,-583 1250.4881,-585.0255 1257.2447,-587.0711 1264.0311,-589.082"/>
<polygon fill="#666666" stroke="#666666" points="1263.3866,-592.5403 1273.9675,-591.997 1265.3572,-585.8234 1263.3866,-592.5403"/>
</g>
<!-- ReturnAndCleanupSuperVersion -->
<g id="node9" class="node">
<title>ReturnAndCleanupSuperVersion</title>
<polygon fill="none" stroke="#000000" points="462,-312 266,-312 266,-276 462,-276 462,-312"/>
<text text-anchor="middle" x="364" y="-290.3" font-family="Times,serif" font-size="14.00" fill="#000000">ReturnAndCleanupSuperVersion</text>
</g>
<!-- GetLatestSequenceForKey -->
<g id="node10" class="node">
<title>GetLatestSequenceForKey</title>
<polygon fill="none" stroke="#000000" points="1216,-484 1054,-484 1054,-448 1216,-448 1216,-484"/>
<text text-anchor="middle" x="1135" y="-462.3" font-family="Times,serif" font-size="14.00" fill="#000000">GetLatestSequenceForKey</text>
</g>
<!-- GetLatestSequenceForKey&#45;&gt;GetEarliestSequenceNumber -->
<g id="edge6" class="edge">
<title>GetLatestSequenceForKey&#45;&gt;GetEarliestSequenceNumber</title>
<path fill="none" stroke="#666666" d="M1154.3378,-484.0226C1171.1899,-500.0316 1195.9945,-524.3381 1216,-547 1229.4146,-562.1958 1227.1947,-571.6666 1244,-583 1246.1768,-584.468 1248.433,-585.857 1250.7515,-587.1711"/>
<polygon fill="#666666" stroke="#666666" points="1249.4681,-590.4457 1259.9657,-591.878 1252.6525,-584.2119 1249.4681,-590.4457"/>
</g>
<!-- GetLatestSequenceForKey&#45;&gt;MemTable_Get -->
<g id="edge7" class="edge">
<title>GetLatestSequenceForKey&#45;&gt;MemTable_Get</title>
<path fill="none" stroke="#666666" d="M1164.2753,-484.188C1185.7782,-497.028 1216.0008,-514.0121 1244,-526 1254.4529,-530.4754 1265.8022,-534.6307 1276.8982,-538.3351"/>
<polygon fill="#666666" stroke="#666666" points="1275.963,-541.7113 1286.5551,-541.4711 1278.1251,-535.0535 1275.963,-541.7113"/>
</g>
<!-- LastSequence -->
<g id="node12" class="node">
<title>LastSequence</title>
<polygon fill="none" stroke="#000000" points="1385,-430 1293,-430 1293,-394 1385,-394 1385,-430"/>
<text text-anchor="middle" x="1339" y="-408.3" font-family="Times,serif" font-size="14.00" fill="#000000">LastSequence</text>
</g>
<!-- GetLatestSequenceForKey&#45;&gt;LastSequence -->
<g id="edge8" class="edge">
<title>GetLatestSequenceForKey&#45;&gt;LastSequence</title>
<path fill="none" stroke="#666666" d="M1203.2127,-447.9437C1229.0705,-441.099 1258.1943,-433.3898 1282.82,-426.8712"/>
<polygon fill="#666666" stroke="#666666" points="1283.9508,-430.1925 1292.7222,-424.25 1282.1595,-423.4255 1283.9508,-430.1925"/>
</g>
<!-- LookupKey -->
<g id="node13" class="node">
<title>LookupKey</title>
<polygon fill="none" stroke="#000000" points="1379.5,-484 1298.5,-484 1298.5,-448 1379.5,-448 1379.5,-484"/>
<text text-anchor="middle" x="1339" y="-462.3" font-family="Times,serif" font-size="14.00" fill="#000000">LookupKey</text>
</g>
<!-- GetLatestSequenceForKey&#45;&gt;LookupKey -->
<g id="edge9" class="edge">
<title>GetLatestSequenceForKey&#45;&gt;LookupKey</title>
<path fill="none" stroke="#666666" d="M1216.2124,-466C1240.5761,-466 1266.5924,-466 1288.3771,-466"/>
<polygon fill="#666666" stroke="#666666" points="1288.3855,-469.5001 1298.3855,-466 1288.3854,-462.5001 1288.3855,-469.5001"/>
</g>
<!-- SuperVersion&#45;&gt;CheckKey -->
<g id="edge16" class="edge">
<title>SuperVersion&#45;&gt;CheckKey</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M747.4139,-286.9373C759.2848,-278.9416 771.2686,-271.176 783,-264 805.8244,-250.0384 832.2838,-236.3257 854.3087,-225.5415"/>
<polygon fill="#666666" stroke="#666666" points="855.9825,-228.6197 863.4529,-221.1069 852.9279,-222.3213 855.9825,-228.6197"/>
</g>
<!-- CheckKeyForConflicts -->
<g id="node14" class="node">
<title>CheckKeyForConflicts</title>
<polygon fill="none" stroke="#000000" points="194,-222 52,-222 52,-186 194,-186 194,-222"/>
<text text-anchor="middle" x="123" y="-200.3" font-family="Times,serif" font-size="14.00" fill="#000000">CheckKeyForConflicts</text>
</g>
<!-- CheckKeyForConflicts&#45;&gt;GetAndRefSuperVersion -->
<g id="edge10" class="edge">
<title>CheckKeyForConflicts&#45;&gt;GetAndRefSuperVersion</title>
<path fill="none" stroke="#666666" d="M140.261,-222.3552C164.575,-247.3675 211.1921,-292.319 258,-321 271.1266,-329.0432 286.0231,-336.1581 300.4139,-342.1694"/>
<polygon fill="#666666" stroke="#666666" points="299.1914,-345.4504 309.774,-345.959 301.8184,-338.962 299.1914,-345.4504"/>
</g>
<!-- CheckKeyForConflicts&#45;&gt;GetEarliestMemTableSequenceNumber -->
<g id="edge11" class="edge">
<title>CheckKeyForConflicts&#45;&gt;GetEarliestMemTableSequenceNumber</title>
<path fill="none" stroke="#666666" d="M131.8052,-222.2131C150.3523,-258.8593 196.8215,-342.1627 258,-391 348.5791,-463.3071 384.4315,-469.8679 498,-493 603.2412,-514.4359 726.8312,-500.5011 809.0213,-485.8802"/>
<polygon fill="#666666" stroke="#666666" points="809.8729,-489.2828 819.0851,-484.0497 808.6202,-482.3958 809.8729,-489.2828"/>
</g>
<!-- CheckKeyForConflicts&#45;&gt;ReturnAndCleanupSuperVersion -->
<g id="edge12" class="edge">
<title>CheckKeyForConflicts&#45;&gt;ReturnAndCleanupSuperVersion</title>
<path fill="none" stroke="#666666" d="M159.9497,-222.1354C186.7581,-234.8687 224.1125,-251.7446 258,-264 266.7434,-267.162 275.9885,-270.205 285.2295,-273.06"/>
<polygon fill="#666666" stroke="#666666" points="284.2519,-276.4209 294.8369,-275.9644 286.2776,-269.7203 284.2519,-276.4209"/>
</g>
<!-- CheckKeyForConflicts&#45;&gt;CheckKey -->
<g id="edge13" class="edge">
<title>CheckKeyForConflicts&#45;&gt;CheckKey</title>
<path fill="none" stroke="#666666" d="M194.0591,-204C350.4566,-204 721.0336,-204 852.8989,-204"/>
<polygon fill="#666666" stroke="#666666" points="853.078,-207.5001 863.0779,-204 853.0779,-200.5001 853.078,-207.5001"/>
</g>
<!-- CheckKey&#45;&gt;GetLatestSequenceForKey -->
<g id="edge15" class="edge">
<title>CheckKey&#45;&gt;GetLatestSequenceForKey</title>
<path fill="none" stroke="#666666" d="M937.7615,-216.6268C962.7138,-226.5118 995.0662,-242.2477 1018,-264 1071.7639,-314.994 1108.4125,-396.1895 1124.9683,-438.4321"/>
<polygon fill="#666666" stroke="#666666" points="1121.7136,-439.7203 1128.5611,-447.805 1128.2499,-437.2148 1121.7136,-439.7203"/>
</g>
</g>
</svg>
