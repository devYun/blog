<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: flush_queue_put_detail Pages: 1 -->
<svg width="2140pt" height="1290pt"
 viewBox="0.00 0.00 2140.18 1290.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1286)">
<title>flush_queue_put_detail</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1286 2136.1807,-1286 2136.1807,4 -4,4"/>
<g id="clust5" class="cluster">
<title>cluster_MemTableList</title>
<polygon fill="none" stroke="#000000" points="1280.4492,-316 1280.4492,-498 1735.3296,-498 1735.3296,-316 1280.4492,-316"/>
<text text-anchor="middle" x="1507.8894" y="-478" font-family="Times,serif" font-size="20.00" fill="#000000">MemTableList</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_MemTableInsert</title>
<polygon fill="none" stroke="#000000" points="214.7656,-183 214.7656,-371 706.7197,-371 706.7197,-183 214.7656,-183"/>
<text text-anchor="middle" x="460.7427" y="-351" font-family="Times,serif" font-size="20.00" fill="#000000">MemTableInserter</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_FlushScheduler</title>
<polygon fill="none" stroke="#000000" points="792.0303,-8 792.0303,-208 1506.6719,-208 1506.6719,-8 792.0303,-8"/>
<text text-anchor="middle" x="1149.3511" y="-188" font-family="Times,serif" font-size="20.00" fill="#000000">FlushScheduler</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_ColumnFamily</title>
<polygon fill="none" stroke="#000000" points="8,-1024 8,-1274 1477.9185,-1274 1477.9185,-1024 8,-1024"/>
<text text-anchor="middle" x="742.9592" y="-1254" font-family="Times,serif" font-size="20.00" fill="#000000">ColumnFamily</text>
</g>
<g id="clust11" class="cluster">
<title>cluster_ColumnFamilyData</title>
<polygon fill="none" stroke="#000000" points="29.7759,-1104 29.7759,-1238 1469.9185,-1238 1469.9185,-1104 29.7759,-1104"/>
<text text-anchor="middle" x="749.8472" y="-1218" font-family="Times,serif" font-size="20.00" fill="#000000">ColumnFamilyData</text>
</g>
<g id="clust13" class="cluster">
<title>cluster_DBImpl</title>
<polygon fill="none" stroke="#000000" points="56.5044,-550 56.5044,-1016 2124.1807,-1016 2124.1807,-550 56.5044,-550"/>
<text text-anchor="middle" x="1090.3425" y="-996" font-family="Times,serif" font-size="20.00" fill="#000000">Dbimpl</text>
</g>
<!-- PreprocessWrite -->
<g id="node1" class="node">
<title>PreprocessWrite</title>
<polygon fill="none" stroke="#000000" points="673.3164,-671 565.3887,-671 565.3887,-635 673.3164,-635 673.3164,-671"/>
<text text-anchor="middle" x="619.3525" y="-648.8" font-family="Times,serif" font-size="14.00" fill="#000000">PreprocessWrite</text>
</g>
<!-- ScheduleFlushes -->
<g id="node2" class="node">
<title>ScheduleFlushes</title>
<polygon fill="none" stroke="#000000" points="734.7197,-619.6001 734.7197,-708.3999 963.4199,-708.3999 963.4199,-619.6001 734.7197,-619.6001"/>
<text text-anchor="middle" x="849.0698" y="-693.1999" font-family="Times,serif" font-size="14.00" fill="#000000">ScheduleFlushes</text>
<polyline fill="none" stroke="#000000" points="734.7197,-686.3999 963.4199,-686.3999 "/>
<text text-anchor="start" x="742.7197" y="-671.1999" font-family="Times,serif" font-size="14.00" fill="#000000">生成flush请求放入</text>
<text text-anchor="start" x="742.7197" y="-651.6" font-family="Times,serif" font-size="14.00" fill="#000000"> flush_queue_队列中</text>
<text text-anchor="start" x="742.7197" y="-632" font-family="Times,serif" font-size="14.00" fill="#000000"> 由后台线程将memtable刷到磁盘上</text>
</g>
<!-- PreprocessWrite&#45;&gt;ScheduleFlushes -->
<g id="edge1" class="edge">
<title>PreprocessWrite&#45;&gt;ScheduleFlushes</title>
<path fill="none" stroke="#666666" d="M673.5014,-655.5929C689.0583,-656.3379 706.7002,-657.1826 724.6558,-658.0424"/>
<polygon fill="#666666" stroke="#666666" points="724.4962,-661.5387 734.6522,-658.5211 724.8311,-654.5467 724.4962,-661.5387"/>
</g>
<!-- FlushScheduler -->
<g id="node3" class="node">
<title>FlushScheduler</title>
<polygon fill="none" stroke="#000000" points="1035.2915,-105 1035.2915,-171 1199.6587,-171 1199.6587,-105 1035.2915,-105"/>
<text text-anchor="middle" x="1117.4751" y="-155.8" font-family="Times,serif" font-size="14.00" fill="#000000">flush_scheduler_</text>
<polyline fill="none" stroke="#000000" points="1035.2915,-149 1199.6587,-149 "/>
<text text-anchor="start" x="1043.2915" y="-133.8" font-family="Times,serif" font-size="14.00" fill="#000000">FlushScheduler</text>
<polyline fill="none" stroke="#000000" points="1035.2915,-127 1199.6587,-127 "/>
<text text-anchor="middle" x="1117.4751" y="-111.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::aomic&lt;Node*&gt; head_</text>
</g>
<!-- ScheduleFlushes&#45;&gt;FlushScheduler -->
<g id="edge2" class="edge">
<title>ScheduleFlushes&#45;&gt;FlushScheduler</title>
<path fill="none" stroke="#3f72af" d="M871.9539,-619.1535C923.1049,-518.9117 1046.1126,-277.8507 1095.9565,-180.1704"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1099.1192,-181.6729 1100.5469,-171.1747 1092.884,-178.4912 1099.1192,-181.6729"/>
</g>
<!-- SelectColumnFamiliesForAtomicFlush -->
<g id="node4" class="node">
<title>SelectColumnFamiliesForAtomicFlush</title>
<polygon fill="none" stroke="#000000" points="999.4199,-558.4001 999.4199,-627.5999 1235.5303,-627.5999 1235.5303,-558.4001 999.4199,-558.4001"/>
<text text-anchor="middle" x="1117.4751" y="-612.3999" font-family="Times,serif" font-size="14.00" fill="#000000">SelectColumnFamiliesForAtomicFlush</text>
<polyline fill="none" stroke="#000000" points="999.4199,-605.5999 1235.5303,-605.5999 "/>
<text text-anchor="start" x="1007.4199" y="-590.3999" font-family="Times,serif" font-size="14.00" fill="#000000">如果immutable_db_options_.</text>
<text text-anchor="start" x="1007.4199" y="-570.8" font-family="Times,serif" font-size="14.00" fill="#000000">attomic_flush 为true</text>
</g>
<!-- ScheduleFlushes&#45;&gt;SelectColumnFamiliesForAtomicFlush -->
<g id="edge3" class="edge">
<title>ScheduleFlushes&#45;&gt;SelectColumnFamiliesForAtomicFlush</title>
<path fill="none" stroke="#3f72af" d="M963.6764,-633.6837C972.2688,-631.4107 980.9708,-629.1089 989.6373,-626.8163"/>
<polygon fill="#3f72af" stroke="#3f72af" points="990.6268,-630.175 999.3992,-624.2341 988.8367,-623.4078 990.6268,-630.175"/>
</g>
<!-- TakeNextColumnFamily -->
<g id="node5" class="node">
<title>TakeNextColumnFamily</title>
<polygon fill="none" stroke="#000000" points="1039.4751,-36.2 1039.4751,-85.8 1195.4751,-85.8 1195.4751,-36.2 1039.4751,-36.2"/>
<text text-anchor="middle" x="1117.4751" y="-70.6" font-family="Times,serif" font-size="14.00" fill="#000000">TakeNextColumnFamily</text>
<polyline fill="none" stroke="#000000" points="1039.4751,-63.8 1195.4751,-63.8 "/>
<text text-anchor="middle" x="1117.4751" y="-48.6" font-family="Times,serif" font-size="14.00" fill="#000000">从链表头取出一个节点</text>
</g>
<!-- ScheduleFlushes&#45;&gt;TakeNextColumnFamily -->
<g id="edge4" class="edge">
<title>ScheduleFlushes&#45;&gt;TakeNextColumnFamily</title>
<path fill="none" stroke="#3f72af" d="M860.2633,-619.2734C893.5136,-486.7333 989.9756,-104.6552 999.4199,-95 1007.9257,-86.3043 1018.5008,-79.7956 1029.8011,-74.931"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1031.3612,-78.0807 1039.4343,-71.2195 1028.8446,-71.5488 1031.3612,-78.0807"/>
</g>
<!-- MaybeFlushStatsCF -->
<g id="node6" class="node">
<title>MaybeFlushStatsCF</title>
<polygon fill="none" stroke="#000000" points="1182.8271,-682 1052.1231,-682 1052.1231,-646 1182.8271,-646 1182.8271,-682"/>
<text text-anchor="middle" x="1117.4751" y="-659.8" font-family="Times,serif" font-size="14.00" fill="#000000">MaybeFlushStatsCF</text>
</g>
<!-- ScheduleFlushes&#45;&gt;MaybeFlushStatsCF -->
<g id="edge5" class="edge">
<title>ScheduleFlushes&#45;&gt;MaybeFlushStatsCF</title>
<path fill="none" stroke="#3f72af" d="M963.6764,-664C990.1071,-664 1017.5743,-664 1041.8574,-664"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1042.0572,-667.5001 1052.0572,-664 1042.0571,-660.5001 1042.0572,-667.5001"/>
</g>
<!-- SwitchMemtable -->
<g id="node7" class="node">
<title>SwitchMemtable</title>
<polygon fill="none" stroke="#000000" points="1017.1284,-802.4001 1017.1284,-871.5999 1217.8218,-871.5999 1217.8218,-802.4001 1017.1284,-802.4001"/>
<text text-anchor="middle" x="1117.4751" y="-856.3999" font-family="Times,serif" font-size="14.00" fill="#000000">SwitchMemtable</text>
<polyline fill="none" stroke="#000000" points="1017.1284,-849.5999 1217.8218,-849.5999 "/>
<text text-anchor="start" x="1025.1284" y="-834.3999" font-family="Times,serif" font-size="14.00" fill="#000000">将memtable加到immtable list中</text>
<text text-anchor="start" x="1025.1284" y="-814.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 并创建新的memtable</text>
</g>
<!-- ScheduleFlushes&#45;&gt;SwitchMemtable -->
<g id="edge6" class="edge">
<title>ScheduleFlushes&#45;&gt;SwitchMemtable</title>
<path fill="none" stroke="#3f72af" d="M892.5562,-708.6273C920.978,-735.8484 960.0204,-769.7593 999.4199,-793 1002.2459,-794.6669 1005.1459,-796.2896 1008.1018,-797.8674"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1006.6196,-801.0404 1017.1181,-802.466 1009.8001,-794.8046 1006.6196,-801.0404"/>
</g>
<!-- GenerateFlushRequest -->
<g id="node8" class="node">
<title>GenerateFlushRequest</title>
<polygon fill="none" stroke="#000000" points="1036.375,-700.4001 1036.375,-783.5999 1198.5752,-783.5999 1198.5752,-700.4001 1036.375,-700.4001"/>
<text text-anchor="middle" x="1117.4751" y="-768.3999" font-family="Times,serif" font-size="14.00" fill="#000000">GenerateFlushRequest</text>
<polyline fill="none" stroke="#000000" points="1036.375,-761.5999 1198.5752,-761.5999 "/>
<text text-anchor="start" x="1044.375" y="-746.3999" font-family="Times,serif" font-size="14.00" fill="#000000">遍历cfds, 获取每个cfd的</text>
<text text-anchor="start" x="1044.375" y="-726.8" font-family="Times,serif" font-size="14.00" fill="#000000"> LastestMemTableID</text>
<text text-anchor="start" x="1044.375" y="-712.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 生成FlushRequest</text>
</g>
<!-- ScheduleFlushes&#45;&gt;GenerateFlushRequest -->
<g id="edge7" class="edge">
<title>ScheduleFlushes&#45;&gt;GenerateFlushRequest</title>
<path fill="none" stroke="#3f72af" d="M963.6764,-697.3053C984.6148,-703.3901 1006.2037,-709.6639 1026.3447,-715.517"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1025.5271,-718.9242 1036.1066,-718.3539 1027.4806,-712.2022 1025.5271,-718.9242"/>
</g>
<!-- SchedulePendingFlush -->
<g id="node9" class="node">
<title>SchedulePendingFlush</title>
<polygon fill="none" stroke="#000000" points="1457.4325,-852 1312.7696,-852 1312.7696,-816 1457.4325,-816 1457.4325,-852"/>
<text text-anchor="middle" x="1385.1011" y="-829.8" font-family="Times,serif" font-size="14.00" fill="#000000">SchedulePendingFlush</text>
</g>
<!-- ScheduleFlushes&#45;&gt;SchedulePendingFlush -->
<g id="edge8" class="edge">
<title>ScheduleFlushes&#45;&gt;SchedulePendingFlush</title>
<path fill="none" stroke="#3f72af" d="M865.2041,-708.7757C886.744,-761.0204 930.3971,-844.8517 999.4199,-881 1045.9004,-905.3426 1184.7388,-894.1614 1235.5303,-881 1253.2484,-876.4088 1254.4672,-867.6231 1271.5303,-861 1281.5113,-857.1259 1292.2093,-853.7009 1302.9033,-850.7046"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1303.9526,-854.0469 1312.7025,-848.0729 1302.1369,-847.2865 1303.9526,-854.0469"/>
</g>
<!-- MaybeScheduleFlushOrCompaction -->
<g id="node10" class="node">
<title>MaybeScheduleFlushOrCompaction</title>
<polygon fill="none" stroke="#000000" points="1007.2129,-910.4001 1007.2129,-979.5999 1227.7373,-979.5999 1227.7373,-910.4001 1007.2129,-910.4001"/>
<text text-anchor="middle" x="1117.4751" y="-964.3999" font-family="Times,serif" font-size="14.00" fill="#000000">MaybeScheduleFlushOrCompaction</text>
<polyline fill="none" stroke="#000000" points="1007.2129,-957.5999 1227.7373,-957.5999 "/>
<text text-anchor="start" x="1015.2129" y="-942.3999" font-family="Times,serif" font-size="14.00" fill="#000000">将memtable flush到磁盘上</text>
<text text-anchor="start" x="1015.2129" y="-922.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 触发后台线程压缩</text>
</g>
<!-- ScheduleFlushes&#45;&gt;MaybeScheduleFlushOrCompaction -->
<g id="edge9" class="edge">
<title>ScheduleFlushes&#45;&gt;MaybeScheduleFlushOrCompaction</title>
<path fill="none" stroke="#3f72af" d="M867.9797,-708.64C891.8079,-760.1036 937.2841,-844.2343 999.4199,-896 1003.1655,-899.1205 1007.1376,-902.0662 1011.2698,-904.8442"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1009.628,-907.9465 1019.9551,-910.3132 1013.3579,-902.023 1009.628,-907.9465"/>
</g>
<!-- _Node -->
<g id="node28" class="node">
<title>_Node</title>
<polygon fill="none" stroke="#000000" points="1271.5303,-28 1271.5303,-94 1498.6719,-94 1498.6719,-28 1271.5303,-28"/>
<text text-anchor="middle" x="1385.1011" y="-78.8" font-family="Times,serif" font-size="14.00" fill="#000000">Node</text>
<polyline fill="none" stroke="#000000" points="1271.5303,-72 1498.6719,-72 "/>
<text text-anchor="start" x="1279.5303" y="-56.8" font-family="Times,serif" font-size="14.00" fill="#000000">ColumnFamilyData* column_family;</text>
<polyline fill="none" stroke="#000000" points="1271.5303,-50 1498.6719,-50 "/>
<text text-anchor="start" x="1279.5303" y="-34.8" font-family="Times,serif" font-size="14.00" fill="#000000">Node* next;</text>
</g>
<!-- FlushScheduler&#45;&gt;_Node -->
<g id="edge31" class="edge">
<title>FlushScheduler&#45;&gt;_Node</title>
<path fill="none" stroke="#666666" d="M1199.9555,-114.2692C1219.4456,-108.6616 1240.6482,-102.5612 1261.5171,-96.557"/>
<polygon fill="#666666" stroke="#666666" points="1262.7566,-99.8424 1271.3989,-93.7138 1260.821,-93.1153 1262.7566,-99.8424"/>
</g>
<!-- TakeNextColumnFamily&#45;&gt;_Node -->
<g id="edge30" class="edge">
<title>TakeNextColumnFamily&#45;&gt;_Node</title>
<path fill="none" stroke="#666666" d="M1195.603,-61C1216.0734,-61 1238.6599,-61 1260.891,-61"/>
<polygon fill="#666666" stroke="#666666" points="1261.0715,-64.5001 1271.0715,-61 1261.0714,-57.5001 1261.0715,-64.5001"/>
</g>
<!-- WriteRecoverableState -->
<g id="node13" class="node">
<title>WriteRecoverableState</title>
<polygon fill="none" stroke="#000000" points="1457.8689,-542 1312.3332,-542 1312.3332,-506 1457.8689,-506 1457.8689,-542"/>
<text text-anchor="middle" x="1385.1011" y="-519.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteRecoverableState</text>
</g>
<!-- SwitchMemtable&#45;&gt;WriteRecoverableState -->
<g id="edge12" class="edge">
<title>SwitchMemtable&#45;&gt;WriteRecoverableState</title>
<path fill="none" stroke="#666666" d="M1217.9516,-809.1266C1224.5283,-804.5453 1230.5141,-799.2109 1235.5303,-793 1305.2339,-706.6949 1194.9349,-626.2515 1271.5303,-546 1279.9802,-537.1468 1290.8424,-531.2618 1302.4897,-527.4335"/>
<polygon fill="#666666" stroke="#666666" points="1303.72,-530.7246 1312.4224,-524.6816 1301.8509,-523.9787 1303.72,-530.7246"/>
</g>
<!-- ConstructNewMemtable -->
<g id="node14" class="node">
<title>ConstructNewMemtable</title>
<polygon fill="none" stroke="#000000" points="1461.7363,-1148 1308.4659,-1148 1308.4659,-1112 1461.7363,-1112 1461.7363,-1148"/>
<text text-anchor="middle" x="1385.1011" y="-1125.8" font-family="Times,serif" font-size="14.00" fill="#000000">ConstructNewMemtable</text>
</g>
<!-- SwitchMemtable&#45;&gt;ConstructNewMemtable -->
<g id="edge13" class="edge">
<title>SwitchMemtable&#45;&gt;ConstructNewMemtable</title>
<path fill="none" stroke="#666666" d="M1201.4764,-871.6752C1214.1998,-879.8049 1226.1767,-889.525 1235.5303,-901 1270.442,-943.8299 1242.7633,-972.8227 1271.5303,-1020 1292.4201,-1054.2588 1326.4837,-1085.2594 1351.865,-1105.5524"/>
<polygon fill="#666666" stroke="#666666" points="1349.7446,-1108.3374 1359.7729,-1111.7554 1354.0649,-1102.8296 1349.7446,-1108.3374"/>
</g>
<!-- CreateWAL -->
<g id="node15" class="node">
<title>CreateWAL</title>
<polygon fill="none" stroke="#000000" points="1426.4567,-798 1343.7455,-798 1343.7455,-762 1426.4567,-762 1426.4567,-798"/>
<text text-anchor="middle" x="1385.1011" y="-775.8" font-family="Times,serif" font-size="14.00" fill="#000000">CreateWAL</text>
</g>
<!-- SwitchMemtable&#45;&gt;CreateWAL -->
<g id="edge14" class="edge">
<title>SwitchMemtable&#45;&gt;CreateWAL</title>
<path fill="none" stroke="#666666" d="M1217.8906,-815.6131C1257.4086,-807.1964 1301.0782,-797.8955 1333.8771,-790.9099"/>
<polygon fill="#666666" stroke="#666666" points="1334.6389,-794.3262 1343.6904,-788.8198 1333.1806,-787.4798 1334.6389,-794.3262"/>
</g>
<!-- SetMemtable -->
<g id="node16" class="node">
<title>SetMemtable</title>
<polygon fill="none" stroke="#000000" points="1430.2502,-1202 1339.952,-1202 1339.952,-1166 1430.2502,-1166 1430.2502,-1202"/>
<text text-anchor="middle" x="1385.1011" y="-1179.8" font-family="Times,serif" font-size="14.00" fill="#000000">SetMemtable</text>
</g>
<!-- SwitchMemtable&#45;&gt;SetMemtable -->
<g id="edge15" class="edge">
<title>SwitchMemtable&#45;&gt;SetMemtable</title>
<path fill="none" stroke="#666666" d="M1204.7927,-871.695C1216.651,-879.7294 1227.4864,-889.4138 1235.5303,-901 1301.0557,-995.3811 1194.1795,-1072.0398 1271.5303,-1157 1286.1868,-1173.0984 1308.5404,-1180.4405 1329.5508,-1183.5405"/>
<polygon fill="#666666" stroke="#666666" points="1329.3759,-1187.0441 1339.7174,-1184.7412 1330.197,-1180.0924 1329.3759,-1187.0441"/>
</g>
<!-- MemTableList_Add -->
<g id="node17" class="node">
<title>MemTableList_Add</title>
<polygon fill="none" stroke="#000000" points="1288.4492,-412.2 1288.4492,-461.8 1481.7529,-461.8 1481.7529,-412.2 1288.4492,-412.2"/>
<text text-anchor="middle" x="1385.1011" y="-446.6" font-family="Times,serif" font-size="14.00" fill="#000000">MemTableList::Add</text>
<polyline fill="none" stroke="#000000" points="1288.4492,-439.8 1481.7529,-439.8 "/>
<text text-anchor="start" x="1296.4492" y="-424.6" font-family="Times,serif" font-size="14.00" fill="#000000">将memtabl加到memtablelist中</text>
</g>
<!-- SwitchMemtable&#45;&gt;MemTableList_Add -->
<g id="edge16" class="edge">
<title>SwitchMemtable&#45;&gt;MemTableList_Add</title>
<path fill="none" stroke="#666666" d="M1217.8456,-809.4458C1224.4924,-804.7936 1230.5203,-799.3558 1235.5303,-793 1317.5698,-688.9213 1196.3848,-606.1605 1271.5303,-497 1279.852,-484.9115 1291.4009,-475.073 1303.9677,-467.1265"/>
<polygon fill="#666666" stroke="#666666" points="1305.9627,-470.0136 1312.8033,-461.9231 1302.4104,-463.9818 1305.9627,-470.0136"/>
</g>
<!-- alive_log_files_ -->
<g id="node18" class="node">
<title>alive_log_files_</title>
<polygon fill="none" stroke="#000000" points="1438.0365,-306 1332.1656,-306 1332.1656,-270 1438.0365,-270 1438.0365,-306"/>
<text text-anchor="middle" x="1385.1011" y="-283.8" font-family="Times,serif" font-size="14.00" fill="#000000">alive_log_files_</text>
</g>
<!-- SwitchMemtable&#45;&gt;alive_log_files_ -->
<g id="edge17" class="edge">
<title>SwitchMemtable&#45;&gt;alive_log_files_</title>
<path fill="none" stroke="#666666" d="M1217.9048,-809.8872C1224.5863,-805.1382 1230.6032,-799.5576 1235.5303,-793 1299.9176,-707.3057 1200.9634,-392.6818 1271.5303,-312 1284.1823,-297.5345 1303.1675,-290.5157 1322.012,-287.403"/>
<polygon fill="#666666" stroke="#666666" points="1322.6588,-290.8483 1332.1212,-286.0826 1321.7521,-283.9073 1322.6588,-290.8483"/>
</g>
<!-- GenerateFlushRequest&#45;&gt;SchedulePendingFlush -->
<g id="edge35" class="edge">
<title>GenerateFlushRequest&#45;&gt;SchedulePendingFlush</title>
<path fill="none" stroke="#666666" d="M1198.9785,-777.0713C1231.7051,-791.0232 1263.5986,-804.4037 1271.5303,-807 1281.6318,-810.3065 1292.361,-813.3914 1303.0366,-816.2067"/>
<polygon fill="#666666" stroke="#666666" points="1302.25,-819.6182 1312.8062,-818.7151 1303.9908,-812.8381 1302.25,-819.6182"/>
</g>
<!-- GetLatestMemTableID -->
<g id="node12" class="node">
<title>GetLatestMemTableID</title>
<polygon fill="none" stroke="#000000" points="1457.7382,-252 1312.4639,-252 1312.4639,-216 1457.7382,-216 1457.7382,-252"/>
<text text-anchor="middle" x="1385.1011" y="-229.8" font-family="Times,serif" font-size="14.00" fill="#000000">GetLatestMemTableID</text>
</g>
<!-- GenerateFlushRequest&#45;&gt;GetLatestMemTableID -->
<g id="edge11" class="edge">
<title>GenerateFlushRequest&#45;&gt;GetLatestMemTableID</title>
<path fill="none" stroke="#666666" d="M1198.8291,-720.758C1213.0767,-713.5259 1226.2777,-703.8712 1235.5303,-691 1291.5004,-613.1398 1208.9926,-333.6905 1271.5303,-261 1279.7696,-251.4231 1290.7302,-244.9092 1302.5983,-240.5345"/>
<polygon fill="#666666" stroke="#666666" points="1303.8011,-243.825 1312.2762,-237.4671 1301.6861,-237.1521 1303.8011,-243.825"/>
</g>
<!-- flush_queue_ -->
<g id="node11" class="node">
<title>flush_queue_</title>
<polygon fill="#3fc1c9" stroke="#000000" points="1534.6719,-784.4001 1534.6719,-883.5999 1784.9941,-883.5999 1784.9941,-784.4001 1534.6719,-784.4001"/>
<text text-anchor="middle" x="1659.833" y="-868.3999" font-family="Times,serif" font-size="14.00" fill="#000000">flush队列: flush_queue_</text>
<polyline fill="none" stroke="#000000" points="1534.6719,-856 1784.9941,-856 "/>
<text text-anchor="start" x="1542.6719" y="-840.8" font-family="Times,serif" font-size="14.00" fill="#000000">放入条件:cfd&#45;&gt;imm()&#45;&gt;IsFlushPending()</text>
<polyline fill="none" stroke="#000000" points="1534.6719,-828.4001 1784.9941,-828.4001 "/>
<text text-anchor="middle" x="1659.833" y="-813.2001" font-family="Times,serif" font-size="14.00" fill="#000000">std::deque&lt;FlushRequest&gt; flush_queue_;</text>
<polyline fill="none" stroke="#000000" points="1534.6719,-806.4001 1784.9941,-806.4001 "/>
<text text-anchor="middle" x="1659.833" y="-791.2001" font-family="Times,serif" font-size="14.00" fill="#000000"> </text>
</g>
<!-- SchedulePendingFlush&#45;&gt;flush_queue_ -->
<g id="edge10" class="edge">
<title>SchedulePendingFlush&#45;&gt;flush_queue_</title>
<path fill="none" stroke="#666666" d="M1457.2837,-834C1477.9183,-834 1501.1076,-834 1524.2302,-834"/>
<polygon fill="#666666" stroke="#666666" points="1524.4826,-837.5001 1534.4825,-834 1524.4825,-830.5001 1524.4826,-837.5001"/>
</g>
<!-- BackgroundFlush -->
<g id="node33" class="node">
<title>BackgroundFlush</title>
<polygon fill="none" stroke="#000000" points="1280.8682,-870.8002 1280.8682,-979.1998 1489.334,-979.1998 1489.334,-870.8002 1280.8682,-870.8002"/>
<text text-anchor="middle" x="1385.1011" y="-963.9998" font-family="Times,serif" font-size="14.00" fill="#000000">BackgroundFlush</text>
<polyline fill="none" stroke="#000000" points="1280.8682,-957.1998 1489.334,-957.1998 "/>
<text text-anchor="start" x="1288.8682" y="-941.9998" font-family="Times,serif" font-size="14.00" fill="#000000">遍历flush_queue_</text>
<text text-anchor="start" x="1288.8682" y="-922.3999" font-family="Times,serif" font-size="14.00" fill="#000000"> 将需要刷新的columnfamilyData</text>
<text text-anchor="start" x="1288.8682" y="-902.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 的memtable</text>
<text text-anchor="start" x="1288.8682" y="-883.2001" font-family="Times,serif" font-size="14.00" fill="#000000"> 刷到磁盘上</text>
</g>
<!-- MaybeScheduleFlushOrCompaction&#45;&gt;BackgroundFlush -->
<g id="edge36" class="edge">
<title>MaybeScheduleFlushOrCompaction&#45;&gt;BackgroundFlush</title>
<path fill="none" stroke="#666666" d="M1227.8739,-936.7498C1241.8934,-935.7021 1256.2668,-934.6279 1270.3525,-933.5753"/>
<polygon fill="#666666" stroke="#666666" points="1270.8377,-937.0489 1280.549,-932.8133 1270.3159,-930.0684 1270.8377,-937.0489"/>
</g>
<!-- FlushRequest -->
<g id="node32" class="node">
<title>FlushRequest</title>
<polygon fill="#3fc1c9" stroke="#000000" points="1820.9941,-760 1820.9941,-874 2116.1807,-874 2116.1807,-760 1820.9941,-760"/>
<text text-anchor="middle" x="1968.5874" y="-858.8" font-family="Times,serif" font-size="14.00" fill="#000000">FlushRequest</text>
<polyline fill="none" stroke="#000000" points="1820.9941,-852 2116.1807,-852 "/>
<text text-anchor="start" x="1828.9941" y="-836.8" font-family="Times,serif" font-size="14.00" fill="#000000">A flush request specifies</text>
<text text-anchor="start" x="1828.9941" y="-822.8" font-family="Times,serif" font-size="14.00" fill="#000000"> the column families to flush</text>
<text text-anchor="start" x="1828.9941" y="-808.8" font-family="Times,serif" font-size="14.00" fill="#000000"> as well as the largest memtable</text>
<text text-anchor="start" x="1828.9941" y="-794.8" font-family="Times,serif" font-size="14.00" fill="#000000"> id to persist for each column family</text>
<text text-anchor="start" x="1828.9941" y="-780.8" font-family="Times,serif" font-size="14.00" fill="#000000"> typedef std::vector&lt;std::pair</text>
<text text-anchor="middle" x="1968.5874" y="-766.8" font-family="Times,serif" font-size="14.00" fill="#000000">&lt;ColumnFamilyData*, uint64_t&gt;&gt; FlushRequest;</text>
</g>
<!-- flush_queue_&#45;&gt;FlushRequest -->
<g id="edge34" class="edge">
<title>flush_queue_:FlushRequest&#45;&gt;FlushRequest</title>
<path fill="none" stroke="#666666" d="M1784.833,-817C1793.2022,-817 1801.7859,-817 1810.4521,-817"/>
<polygon fill="#666666" stroke="#666666" points="1810.6556,-820.5001 1820.6556,-817 1810.6555,-813.5001 1810.6556,-820.5001"/>
</g>
<!-- current_ -->
<g id="node19" class="node">
<title>current_</title>
<polygon fill="#95e1d3" stroke="#000000" points="1592.3364,-362.2 1592.3364,-425.8 1727.3296,-425.8 1727.3296,-362.2 1592.3364,-362.2"/>
<text text-anchor="middle" x="1659.833" y="-410.6" font-family="Times,serif" font-size="14.00" fill="#000000">current_</text>
<polyline fill="none" stroke="#000000" points="1592.3364,-403.8 1727.3296,-403.8 "/>
<text text-anchor="start" x="1600.3364" y="-388.6" font-family="Times,serif" font-size="14.00" fill="#000000">ColumnFamilyData</text>
<text text-anchor="start" x="1600.3364" y="-374.6" font-family="Times,serif" font-size="14.00" fill="#000000"> 对应的immtable list</text>
</g>
<!-- MemTableList_Add&#45;&gt;current_ -->
<g id="edge18" class="edge">
<title>MemTableList_Add&#45;&gt;current_</title>
<path fill="none" stroke="#666666" d="M1481.9613,-421.8398C1514.8596,-416.6907 1551.1621,-411.0088 1582.3457,-406.128"/>
<polygon fill="#666666" stroke="#666666" points="1582.9412,-409.5775 1592.2797,-404.5732 1581.8587,-402.6617 1582.9412,-409.5775"/>
</g>
<!-- PickMemtablesToFlush -->
<g id="node20" class="node">
<title>PickMemtablesToFlush</title>
<polygon fill="none" stroke="#000000" points="1310.7036,-324.4001 1310.7036,-393.5999 1459.4985,-393.5999 1459.4985,-324.4001 1310.7036,-324.4001"/>
<text text-anchor="middle" x="1385.1011" y="-378.3999" font-family="Times,serif" font-size="14.00" fill="#000000">PickMemtablesToFlush</text>
<polyline fill="none" stroke="#000000" points="1310.7036,-371.5999 1459.4985,-371.5999 "/>
<text text-anchor="start" x="1318.7036" y="-356.3999" font-family="Times,serif" font-size="14.00" fill="#000000">遍历current list</text>
<text text-anchor="start" x="1318.7036" y="-336.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 返回要flush的memlist</text>
</g>
<!-- PickMemtablesToFlush&#45;&gt;current_ -->
<g id="edge19" class="edge">
<title>PickMemtablesToFlush&#45;&gt;current_</title>
<path fill="none" stroke="#666666" d="M1459.8099,-368.5177C1497.7333,-373.349 1543.7656,-379.2134 1582.1059,-384.0978"/>
<polygon fill="#666666" stroke="#666666" points="1581.8267,-387.5904 1592.1888,-385.3823 1582.7114,-380.6466 1581.8267,-387.5904"/>
</g>
<!-- WriteBatchInternal_Iterate -->
<g id="node21" class="node">
<title>WriteBatchInternal_Iterate</title>
<polygon fill="none" stroke="#000000" points="222.7656,-246.4001 222.7656,-315.5999 389.0127,-315.5999 389.0127,-246.4001 222.7656,-246.4001"/>
<text text-anchor="middle" x="305.8892" y="-300.3999" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchInternal_Iterate</text>
<polyline fill="none" stroke="#000000" points="222.7656,-293.5999 389.0127,-293.5999 "/>
<text text-anchor="start" x="230.7656" y="-278.3999" font-family="Times,serif" font-size="14.00" fill="#000000">迭代遍历WAL日志内容</text>
<text text-anchor="start" x="230.7656" y="-258.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 插入memtable中</text>
</g>
<!-- PutCFImpl -->
<g id="node22" class="node">
<title>PutCFImpl</title>
<polygon fill="none" stroke="#000000" points="503.7406,-227 425.2574,-227 425.2574,-191 503.7406,-191 503.7406,-227"/>
<text text-anchor="middle" x="464.499" y="-204.8" font-family="Times,serif" font-size="14.00" fill="#000000">PutCFImpl</text>
</g>
<!-- WriteBatchInternal_Iterate&#45;&gt;PutCFImpl -->
<g id="edge20" class="edge">
<title>WriteBatchInternal_Iterate&#45;&gt;PutCFImpl</title>
<path fill="none" stroke="#666666" d="M382.4065,-246.2654C393.9253,-241.0365 405.5226,-235.772 416.2247,-230.9138"/>
<polygon fill="#666666" stroke="#666666" points="417.7158,-234.0808 425.3748,-226.7602 414.8223,-227.7068 417.7158,-234.0808"/>
</g>
<!-- DeleteImpl -->
<g id="node23" class="node">
<title>DeleteImpl</title>
<polygon fill="none" stroke="#000000" points="503.9717,-281 425.0264,-281 425.0264,-245 503.9717,-245 503.9717,-281"/>
<text text-anchor="middle" x="464.499" y="-258.8" font-family="Times,serif" font-size="14.00" fill="#000000">DeleteImpl</text>
</g>
<!-- WriteBatchInternal_Iterate&#45;&gt;DeleteImpl -->
<g id="edge21" class="edge">
<title>WriteBatchInternal_Iterate&#45;&gt;DeleteImpl</title>
<path fill="none" stroke="#666666" d="M389.3745,-271.5256C398.0853,-270.537 406.7287,-269.5561 414.8828,-268.6308"/>
<polygon fill="#666666" stroke="#666666" points="415.3762,-272.0973 424.9177,-267.4919 414.5868,-265.142 415.3762,-272.0973"/>
</g>
<!-- MergeCF -->
<g id="node24" class="node">
<title>MergeCF</title>
<polygon fill="none" stroke="#000000" points="499.4163,-335 429.5818,-335 429.5818,-299 499.4163,-299 499.4163,-335"/>
<text text-anchor="middle" x="464.499" y="-312.8" font-family="Times,serif" font-size="14.00" fill="#000000">MergeCF</text>
</g>
<!-- WriteBatchInternal_Iterate&#45;&gt;MergeCF -->
<g id="edge22" class="edge">
<title>WriteBatchInternal_Iterate&#45;&gt;MergeCF</title>
<path fill="none" stroke="#666666" d="M389.3745,-299.9488C399.7878,-302.3124 410.1048,-304.654 419.6046,-306.8102"/>
<polygon fill="#666666" stroke="#666666" points="419.0313,-310.2691 429.558,-309.0694 420.5808,-303.4427 419.0313,-310.2691"/>
</g>
<!-- CheckMemtableFull -->
<g id="node25" class="node">
<title>CheckMemtableFull</title>
<polygon fill="none" stroke="#000000" points="539.9854,-196.4001 539.9854,-265.5999 698.7197,-265.5999 698.7197,-196.4001 539.9854,-196.4001"/>
<text text-anchor="middle" x="619.3525" y="-250.3999" font-family="Times,serif" font-size="14.00" fill="#000000">CheckMemtableFull</text>
<polyline fill="none" stroke="#000000" points="539.9854,-243.5999 698.7197,-243.5999 "/>
<text text-anchor="start" x="547.9854" y="-228.3999" font-family="Times,serif" font-size="14.00" fill="#000000">如果memtable满了，</text>
<text text-anchor="start" x="547.9854" y="-208.8" font-family="Times,serif" font-size="14.00" fill="#000000"> 需要flush，则放入队列</text>
</g>
<!-- PutCFImpl&#45;&gt;CheckMemtableFull -->
<g id="edge23" class="edge">
<title>PutCFImpl&#45;&gt;CheckMemtableFull</title>
<path fill="none" stroke="#666666" d="M503.9758,-214.6085C511.9838,-215.7461 520.7113,-216.9861 529.6633,-218.2579"/>
<polygon fill="#666666" stroke="#666666" points="529.4464,-221.7621 539.8393,-219.7036 530.431,-214.8317 529.4464,-221.7621"/>
</g>
<!-- DeleteImpl&#45;&gt;CheckMemtableFull -->
<g id="edge24" class="edge">
<title>DeleteImpl&#45;&gt;CheckMemtableFull</title>
<path fill="none" stroke="#666666" d="M503.9758,-254.8423C512.0699,-253.1696 520.8991,-251.3451 529.9521,-249.4743"/>
<polygon fill="#666666" stroke="#666666" points="530.7545,-252.8825 539.8393,-247.4312 529.3379,-246.0274 530.7545,-252.8825"/>
</g>
<!-- MergeCF&#45;&gt;CheckMemtableFull -->
<g id="edge25" class="edge">
<title>MergeCF&#45;&gt;CheckMemtableFull</title>
<path fill="none" stroke="#666666" d="M496.9614,-298.9716C511.7639,-290.7508 529.9218,-280.6665 547.6745,-270.8074"/>
<polygon fill="#666666" stroke="#666666" points="549.8582,-273.5982 556.9012,-265.6832 546.4596,-267.4786 549.8582,-273.5982"/>
</g>
<!-- ScheduleWork -->
<g id="node27" class="node">
<title>ScheduleWork</title>
<polygon fill="none" stroke="#000000" points="898.149,-79 799.9907,-79 799.9907,-43 898.149,-43 898.149,-79"/>
<text text-anchor="middle" x="849.0698" y="-56.8" font-family="Times,serif" font-size="14.00" fill="#000000">ScheduleWork</text>
</g>
<!-- CheckMemtableFull&#45;&gt;ScheduleWork -->
<g id="edge28" class="edge">
<title>CheckMemtableFull&#45;&gt;ScheduleWork</title>
<path fill="none" stroke="#666666" d="M666.1161,-196.3931C710.7534,-163.3597 776.8653,-114.4342 816.1937,-85.3296"/>
<polygon fill="#666666" stroke="#666666" points="818.6803,-87.8437 824.6365,-79.0816 814.5162,-82.2169 818.6803,-87.8437"/>
</g>
<!-- WriteImpl -->
<g id="node26" class="node">
<title>WriteImpl</title>
<polygon fill="none" stroke="#000000" points="138.14,-638 64.6256,-638 64.6256,-602 138.14,-602 138.14,-638"/>
<text text-anchor="middle" x="101.3828" y="-615.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteImpl</text>
</g>
<!-- WriteImpl&#45;&gt;PreprocessWrite -->
<g id="edge26" class="edge">
<title>WriteImpl&#45;&gt;PreprocessWrite</title>
<path fill="none" stroke="#666666" d="M138.2187,-622.3468C225.4278,-627.9029 445.4111,-641.9181 555.1024,-648.9066"/>
<polygon fill="#666666" stroke="#666666" points="555.1628,-652.4175 565.3652,-649.5604 555.608,-645.4316 555.1628,-652.4175"/>
</g>
<!-- WriteImpl&#45;&gt;WriteBatchInternal_Iterate -->
<g id="edge27" class="edge">
<title>WriteImpl&#45;&gt;WriteBatchInternal_Iterate</title>
<path fill="none" stroke="#666666" d="M112.378,-601.7739C143.7893,-549.7049 234.5605,-399.238 279.7254,-324.3704"/>
<polygon fill="#666666" stroke="#666666" points="282.8315,-325.9972 285.0002,-315.6267 276.8377,-322.3813 282.8315,-325.9972"/>
</g>
<!-- ScheduleWork&#45;&gt;TakeNextColumnFamily -->
<g id="edge37" class="edge">
<title>ScheduleWork&#45;&gt;TakeNextColumnFamily</title>
<path fill="none" stroke="#666666" d="M898.2995,-61C934.8747,-61 985.7545,-61 1029.2857,-61"/>
<polygon fill="#666666" stroke="#666666" points="1029.3143,-64.5001 1039.3143,-61 1029.3143,-57.5001 1029.3143,-64.5001"/>
</g>
<!-- ScheduleWork&#45;&gt;_Node -->
<g id="edge29" class="edge">
<title>ScheduleWork&#45;&gt;_Node</title>
<path fill="none" stroke="#666666" d="M898.3721,-46.9394C927.4955,-39.3677 965.2437,-30.8161 999.4199,-27 1103.7097,-15.355 1131.247,-15.2966 1235.5303,-27 1243.8993,-27.9392 1252.4833,-29.1653 1261.1012,-30.593"/>
<polygon fill="#666666" stroke="#666666" points="1260.7704,-34.088 1271.2227,-32.3564 1261.9719,-27.1918 1260.7704,-34.088"/>
</g>
<!-- GetColumnFamily -->
<g id="node29" class="node">
<title>GetColumnFamily</title>
<polygon fill="none" stroke="#000000" points="16,-1032.2 16,-1095.8 186.7656,-1095.8 186.7656,-1032.2 16,-1032.2"/>
<text text-anchor="middle" x="101.3828" y="-1080.6" font-family="Times,serif" font-size="14.00" fill="#000000">GetColumnFamily</text>
<polyline fill="none" stroke="#000000" points="16,-1073.8 186.7656,-1073.8 "/>
<text text-anchor="start" x="24" y="-1058.6" font-family="Times,serif" font-size="14.00" fill="#000000">根据columnID获取对应的</text>
<text text-anchor="start" x="24" y="-1039" font-family="Times,serif" font-size="14.00" fill="#000000"> ColumnFamliyData</text>
</g>
<!-- ColumnFamilyData -->
<g id="node30" class="node">
<title>ColumnFamilyData</title>
<polygon fill="none" stroke="#000000" points="37.7759,-1136 37.7759,-1180 164.9897,-1180 164.9897,-1136 37.7759,-1136"/>
<text text-anchor="middle" x="101.3828" y="-1164.8" font-family="Times,serif" font-size="14.00" fill="#000000">ColumnFamilyData</text>
<polyline fill="none" stroke="#000000" points="37.7759,-1158 164.9897,-1158 "/>
<text text-anchor="start" x="45.7759" y="-1142.8" font-family="Times,serif" font-size="14.00" fill="#000000">field </text>
</g>
<!-- CreateNewMemtable -->
<g id="node31" class="node">
<title>CreateNewMemtable</title>
<polygon fill="none" stroke="#000000" points="1185.2,-1175 1049.7502,-1175 1049.7502,-1139 1185.2,-1139 1185.2,-1175"/>
<text text-anchor="middle" x="1117.4751" y="-1152.8" font-family="Times,serif" font-size="14.00" fill="#000000">CreateNewMemtable</text>
</g>
<!-- CreateNewMemtable&#45;&gt;ConstructNewMemtable -->
<g id="edge32" class="edge">
<title>CreateNewMemtable&#45;&gt;ConstructNewMemtable</title>
<path fill="none" stroke="#666666" d="M1185.3544,-1150.1519C1219.6093,-1146.696 1261.5494,-1142.4648 1298.1402,-1138.7732"/>
<polygon fill="#666666" stroke="#666666" points="1298.7099,-1142.2336 1308.308,-1137.7474 1298.0072,-1135.269 1298.7099,-1142.2336"/>
</g>
<!-- CreateNewMemtable&#45;&gt;SetMemtable -->
<g id="edge33" class="edge">
<title>CreateNewMemtable&#45;&gt;SetMemtable</title>
<path fill="none" stroke="#666666" d="M1185.3544,-1163.8481C1229.9896,-1168.3513 1287.6733,-1174.1708 1329.5682,-1178.3975"/>
<polygon fill="#666666" stroke="#666666" points="1329.2922,-1181.8873 1339.593,-1179.4088 1329.9949,-1174.9226 1329.2922,-1181.8873"/>
</g>
</g>
</svg>
