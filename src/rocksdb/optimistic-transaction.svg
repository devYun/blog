<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: optimistic_transaction Pages: 1 -->
<svg width="1235pt" height="580pt"
 viewBox="0.00 0.00 1235.26 580.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 576)">
<title>optimistic_transaction</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-576 1231.2627,-576 1231.2627,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_DBImpl</title>
<polygon fill="none" stroke="#000000" points="363.1797,-484 363.1797,-564 738.1992,-564 738.1992,-484 363.1797,-484"/>
<text text-anchor="middle" x="550.6895" y="-544" font-family="Times,serif" font-size="20.00" fill="#000000">DBImpl</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_OptimisticTransactionDB</title>
<polygon fill="none" stroke="#000000" points="8,-8 8,-142 755.1899,-142 755.1899,-8 8,-8"/>
<text text-anchor="middle" x="381.595" y="-122" font-family="Times,serif" font-size="20.00" fill="#000000">OptimisticTransactionDB</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_TransactionBaseImpl</title>
<polygon fill="none" stroke="#000000" points="585.8115,-180 585.8115,-314 1038.1592,-314 1038.1592,-180 585.8115,-180"/>
<text text-anchor="middle" x="811.9854" y="-294" font-family="Times,serif" font-size="20.00" fill="#000000">TransactionBaseImpl</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_TransactionUtil</title>
<polygon fill="none" stroke="#000000" points="1058.1592,-222 1058.1592,-316 1219.2627,-316 1219.2627,-222 1058.1592,-222"/>
<text text-anchor="middle" x="1138.7109" y="-296" font-family="Times,serif" font-size="20.00" fill="#000000">TransactionUtil</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_OptimisticTransaction</title>
<polygon fill="none" stroke="#000000" points="34.5713,-322 34.5713,-476 1022.4331,-476 1022.4331,-322 34.5713,-322"/>
<text text-anchor="middle" x="528.5022" y="-456" font-family="Times,serif" font-size="20.00" fill="#000000">OptimisticTransaction</text>
</g>
<!-- DBImpl_Write -->
<g id="node1" class="node">
<title>DBImpl_Write</title>
<polygon fill="none" stroke="#000000" points="730.302,-528 629.8914,-528 629.8914,-492 730.302,-492 730.302,-528"/>
<text text-anchor="middle" x="680.0967" y="-505.8" font-family="Times,serif" font-size="14.00" fill="#000000">DBImpl_Write</text>
</g>
<!-- DBImpl_WriteWithCallback -->
<g id="node2" class="node">
<title>DBImpl_WriteWithCallback</title>
<polygon fill="none" stroke="#000000" points="548.7851,-528 370.9776,-528 370.9776,-492 548.7851,-492 548.7851,-528"/>
<text text-anchor="middle" x="459.8813" y="-505.8" font-family="Times,serif" font-size="14.00" fill="#000000">DBImpl_WriteWithCallback</text>
</g>
<!-- OptimisticTransactionCallback -->
<g id="node17" class="node">
<title>OptimisticTransactionCallback</title>
<polygon fill="none" stroke="#000000" points="775.564,-440 584.6293,-440 584.6293,-404 775.564,-404 775.564,-440"/>
<text text-anchor="middle" x="680.0967" y="-417.8" font-family="Times,serif" font-size="14.00" fill="#000000">OptimisticTransactionCallback</text>
</g>
<!-- DBImpl_WriteWithCallback&#45;&gt;OptimisticTransactionCallback -->
<g id="edge17" class="edge">
<title>DBImpl_WriteWithCallback&#45;&gt;OptimisticTransactionCallback</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M537.3686,-491.9588C541.2806,-490.6999 545.1319,-489.3798 548.8633,-488 580.6055,-476.2626 614.7028,-458.959 640.1841,-445.014"/>
<polygon fill="#666666" stroke="#666666" points="642.1076,-447.9498 649.1619,-440.0448 638.7177,-441.8253 642.1076,-447.9498"/>
</g>
<!-- BeginTransaction -->
<g id="node3" class="node">
<title>BeginTransaction</title>
<polygon fill="none" stroke="#000000" points="131.0586,-106 15.9805,-106 15.9805,-70 131.0586,-70 131.0586,-106"/>
<text text-anchor="middle" x="73.5195" y="-83.8" font-family="Times,serif" font-size="14.00" fill="#000000">BeginTransaction</text>
</g>
<!-- ReinitializeTransaction -->
<g id="node4" class="node">
<title>ReinitializeTransaction</title>
<polygon fill="none" stroke="#000000" points="324.0982,-106 177.8403,-106 177.8403,-70 324.0982,-70 324.0982,-106"/>
<text text-anchor="middle" x="250.9692" y="-83.8" font-family="Times,serif" font-size="14.00" fill="#000000">ReinitializeTransaction</text>
</g>
<!-- BeginTransaction&#45;&gt;ReinitializeTransaction -->
<g id="edge1" class="edge">
<title>BeginTransaction&#45;&gt;ReinitializeTransaction</title>
<path fill="none" stroke="#666666" d="M131.1324,-88C142.7545,-88 155.1921,-88 167.4947,-88"/>
<polygon fill="#666666" stroke="#666666" points="167.7762,-91.5001 177.7762,-88 167.7761,-84.5001 167.7762,-91.5001"/>
</g>
<!-- OptimisticTransaction -->
<g id="node7" class="node">
<title>OptimisticTransaction</title>
<polygon fill="none" stroke="#000000" points="321.1775,-366 180.7609,-366 180.7609,-330 321.1775,-330 321.1775,-366"/>
<text text-anchor="middle" x="250.9692" y="-343.8" font-family="Times,serif" font-size="14.00" fill="#000000">OptimisticTransaction</text>
</g>
<!-- BeginTransaction&#45;&gt;OptimisticTransaction -->
<g id="edge2" class="edge">
<title>BeginTransaction&#45;&gt;OptimisticTransaction</title>
<path fill="none" stroke="#666666" d="M85.9975,-106.2827C116.7969,-151.4102 196.5481,-268.2619 232.6886,-321.2151"/>
<polygon fill="#666666" stroke="#666666" points="229.977,-323.4509 238.5051,-329.7375 235.7587,-319.5048 229.977,-323.4509"/>
</g>
<!-- GetLockBucketsSize -->
<g id="node5" class="node">
<title>GetLockBucketsSize</title>
<polygon fill="none" stroke="#000000" points="747.2833,-106 612.91,-106 612.91,-70 747.2833,-70 747.2833,-106"/>
<text text-anchor="middle" x="680.0967" y="-83.8" font-family="Times,serif" font-size="14.00" fill="#000000">GetLockBucketsSize</text>
</g>
<!-- LockBucket -->
<g id="node6" class="node">
<title>LockBucket</title>
<polygon fill="none" stroke="#000000" points="722.5186,-52 637.6747,-52 637.6747,-16 722.5186,-16 722.5186,-52"/>
<text text-anchor="middle" x="680.0967" y="-29.8" font-family="Times,serif" font-size="14.00" fill="#000000">LockBucket</text>
</g>
<!-- Initialize -->
<g id="node12" class="node">
<title>Initialize</title>
<polygon fill="none" stroke="#000000" points="492.6338,-420 427.1289,-420 427.1289,-384 492.6338,-384 492.6338,-420"/>
<text text-anchor="middle" x="459.8813" y="-397.8" font-family="Times,serif" font-size="14.00" fill="#000000">Initialize</text>
</g>
<!-- OptimisticTransaction&#45;&gt;Initialize -->
<g id="edge5" class="edge">
<title>OptimisticTransaction&#45;&gt;Initialize</title>
<path fill="none" stroke="#666666" d="M311.9551,-366.0402C328.525,-370.7643 346.4992,-375.7274 363.1797,-380 380.7213,-384.4931 400.171,-389.0076 417.0004,-392.7675"/>
<polygon fill="#666666" stroke="#666666" points="416.5796,-396.2591 427.0999,-395.0042 418.0932,-389.4247 416.5796,-396.2591"/>
</g>
<!-- tracked_keys_ -->
<g id="node8" class="node">
<title>tracked_keys_</title>
<polygon fill="#95e1d3" stroke="#000000" points="811.3301,-233 811.3301,-277 1030.1592,-277 1030.1592,-233 811.3301,-233"/>
<text text-anchor="middle" x="920.7446" y="-261.8" font-family="Times,serif" font-size="14.00" fill="#000000">tracked_keys_</text>
<polyline fill="none" stroke="#000000" points="811.3301,-255 1030.1592,-255 "/>
<text text-anchor="middle" x="920.7446" y="-239.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionKeyMap tracked_keys_;</text>
</g>
<!-- CheckKeyForConflicts -->
<g id="node9" class="node">
<title>CheckKeyForConflicts</title>
<polygon fill="#f38181" stroke="#000000" points="1066.1592,-230.2 1066.1592,-279.8 1211.2627,-279.8 1211.2627,-230.2 1066.1592,-230.2"/>
<text text-anchor="middle" x="1138.7109" y="-264.6" font-family="Times,serif" font-size="14.00" fill="#000000">CheckKeyForConflicts</text>
<polyline fill="none" stroke="#000000" points="1066.1592,-257.8 1211.2627,-257.8 "/>
<text text-anchor="middle" x="1138.7109" y="-242.6" font-family="Times,serif" font-size="14.00" fill="#000000">检查key冲突</text>
</g>
<!-- tracked_keys_&#45;&gt;CheckKeyForConflicts -->
<g id="edge3" class="edge">
<title>tracked_keys_&#45;&gt;CheckKeyForConflicts</title>
<path fill="none" stroke="#666666" stroke-dasharray="5,2" d="M1030.3664,-255C1038.9583,-255 1047.5449,-255 1055.9126,-255"/>
<polygon fill="#666666" stroke="#666666" points="1055.9964,-258.5001 1065.9964,-255 1055.9964,-251.5001 1055.9964,-258.5001"/>
</g>
<!-- GetTrackedKeys -->
<g id="node10" class="node">
<title>GetTrackedKeys</title>
<polygon fill="none" stroke="#000000" points="735.4537,-278 624.7397,-278 624.7397,-242 735.4537,-242 735.4537,-278"/>
<text text-anchor="middle" x="680.0967" y="-255.8" font-family="Times,serif" font-size="14.00" fill="#000000">GetTrackedKeys</text>
</g>
<!-- GetTrackedKeys&#45;&gt;tracked_keys_ -->
<g id="edge4" class="edge">
<title>GetTrackedKeys&#45;&gt;tracked_keys_</title>
<path fill="none" stroke="#666666" d="M735.3062,-258.8529C755.0091,-258.4435 778.0455,-257.9649 801.0511,-257.4869"/>
<polygon fill="#666666" stroke="#666666" points="801.3264,-260.982 811.2515,-257.275 801.1809,-253.9835 801.3264,-260.982"/>
</g>
<!-- TransactionBaseImpl_Clear -->
<g id="node11" class="node">
<title>TransactionBaseImpl_Clear</title>
<polygon fill="none" stroke="#000000" points="766.1675,-224 594.0258,-224 594.0258,-188 766.1675,-188 766.1675,-224"/>
<text text-anchor="middle" x="680.0967" y="-201.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionBaseImpl_Clear</text>
</g>
<!-- SetSnapshot -->
<g id="node13" class="node">
<title>SetSnapshot</title>
<polygon fill="none" stroke="#000000" points="722.8245,-386 637.3688,-386 637.3688,-350 722.8245,-350 722.8245,-386"/>
<text text-anchor="middle" x="680.0967" y="-363.8" font-family="Times,serif" font-size="14.00" fill="#000000">SetSnapshot</text>
</g>
<!-- Initialize&#45;&gt;SetSnapshot -->
<g id="edge6" class="edge">
<title>Initialize&#45;&gt;SetSnapshot</title>
<path fill="none" stroke="#666666" d="M492.8498,-396.9099C528.4314,-391.4163 585.6111,-382.588 627.4332,-376.1309"/>
<polygon fill="#666666" stroke="#666666" points="628.0954,-379.5703 637.4442,-374.5853 627.0272,-372.6522 628.0954,-379.5703"/>
</g>
<!-- Commit -->
<g id="node14" class="node">
<title>Commit</title>
<polygon fill="none" stroke="#000000" points="104.4161,-421 42.623,-421 42.623,-385 104.4161,-385 104.4161,-421"/>
<text text-anchor="middle" x="73.5195" y="-398.8" font-family="Times,serif" font-size="14.00" fill="#000000">Commit</text>
</g>
<!-- CommitWithParallelValidate -->
<g id="node15" class="node">
<title>CommitWithParallelValidate</title>
<polygon fill="none" stroke="#000000" points="548.8452,-366 370.9175,-366 370.9175,-330 548.8452,-330 548.8452,-366"/>
<text text-anchor="middle" x="459.8813" y="-343.8" font-family="Times,serif" font-size="14.00" fill="#000000">CommitWithParallelValidate</text>
</g>
<!-- Commit&#45;&gt;CommitWithParallelValidate -->
<g id="edge7" class="edge">
<title>Commit&#45;&gt;CommitWithParallelValidate</title>
<path fill="none" stroke="#666666" d="M104.8558,-400.064C164.2815,-394.4264 291.3067,-382.0233 334.8994,-375 347.0911,-373.0358 359.8859,-370.6503 372.446,-368.1193"/>
<polygon fill="#666666" stroke="#666666" points="373.3614,-371.5044 382.4526,-366.0637 371.9528,-364.6476 373.3614,-371.5044"/>
</g>
<!-- CommitWithSerialValidate -->
<g id="node16" class="node">
<title>CommitWithSerialValidate</title>
<polygon fill="none" stroke="#000000" points="334.8296,-440 167.1088,-440 167.1088,-404 334.8296,-404 334.8296,-440"/>
<text text-anchor="middle" x="250.9692" y="-417.8" font-family="Times,serif" font-size="14.00" fill="#000000">CommitWithSerialValidate</text>
</g>
<!-- Commit&#45;&gt;CommitWithSerialValidate -->
<g id="edge8" class="edge">
<title>Commit&#45;&gt;CommitWithSerialValidate</title>
<path fill="none" stroke="#666666" d="M104.4289,-406.3095C119.3112,-407.903 138.0373,-409.9081 157.0818,-411.9472"/>
<polygon fill="#666666" stroke="#666666" points="156.7353,-415.43 167.0511,-413.0147 157.4806,-408.4698 156.7353,-415.43"/>
</g>
<!-- CommitWithParallelValidate&#45;&gt;DBImpl_Write -->
<g id="edge9" class="edge">
<title>CommitWithParallelValidate&#45;&gt;DBImpl_Write</title>
<path fill="none" stroke="#666666" d="M472.2961,-366.1436C492.6044,-394.4874 535.6312,-449.2068 584.8633,-480 595.532,-486.673 607.808,-491.9738 619.9218,-496.1441"/>
<polygon fill="#666666" stroke="#666666" points="618.9767,-499.5167 629.5682,-499.2508 621.1226,-492.8538 618.9767,-499.5167"/>
</g>
<!-- CommitWithParallelValidate&#45;&gt;GetLockBucketsSize -->
<g id="edge10" class="edge">
<title>CommitWithParallelValidate&#45;&gt;GetLockBucketsSize</title>
<path fill="none" stroke="#666666" d="M544.6987,-329.9023C546.1523,-328.6796 547.5437,-327.3803 548.8633,-326 605.2401,-267.0283 538.0875,-212.8433 584.8633,-146 595.0692,-131.4155 610.2303,-119.8252 625.47,-110.9598"/>
<polygon fill="#666666" stroke="#666666" points="627.3311,-113.931 634.4152,-106.0528 623.9644,-107.7937 627.3311,-113.931"/>
</g>
<!-- CommitWithParallelValidate&#45;&gt;LockBucket -->
<g id="edge11" class="edge">
<title>CommitWithParallelValidate&#45;&gt;LockBucket</title>
<path fill="none" stroke="#666666" d="M545.1708,-329.697C546.4603,-328.5335 547.6937,-327.3024 548.8633,-326 628.2793,-237.5653 506.9568,-150.7674 584.8633,-61 595.6838,-48.5321 611.7933,-41.6194 627.6988,-37.8483"/>
<polygon fill="#666666" stroke="#666666" points="628.4064,-41.2762 637.5268,-35.8848 627.0348,-34.4119 628.4064,-41.2762"/>
</g>
<!-- CommitWithParallelValidate&#45;&gt;CheckKeyForConflicts -->
<g id="edge12" class="edge">
<title>CommitWithParallelValidate&#45;&gt;CheckKeyForConflicts</title>
<path fill="none" stroke="#666666" d="M544.6276,-329.8331C546.1026,-328.6311 547.5176,-327.3549 548.8633,-326 597.1764,-277.3555 531.0237,-218.447 584.8633,-176 624.4156,-144.8171 990.5593,-159.5378 1038.1592,-176 1065.1459,-185.3333 1090.3982,-205.231 1108.8462,-222.7211"/>
<polygon fill="#666666" stroke="#666666" points="1106.7246,-225.5418 1116.3211,-230.0315 1111.619,-220.5373 1106.7246,-225.5418"/>
</g>
<!-- CommitWithParallelValidate&#45;&gt;GetTrackedKeys -->
<g id="edge13" class="edge">
<title>CommitWithParallelValidate&#45;&gt;GetTrackedKeys</title>
<path fill="none" stroke="#666666" d="M537.3686,-329.9588C541.2806,-328.6999 545.1319,-327.3798 548.8633,-326 580.6055,-314.2626 614.7028,-296.959 640.1841,-283.014"/>
<polygon fill="#666666" stroke="#666666" points="642.1076,-285.9498 649.1619,-278.0448 638.7177,-279.8253 642.1076,-285.9498"/>
</g>
<!-- CommitWithParallelValidate&#45;&gt;TransactionBaseImpl_Clear -->
<g id="edge14" class="edge">
<title>CommitWithParallelValidate&#45;&gt;TransactionBaseImpl_Clear</title>
<path fill="none" stroke="#666666" d="M544.0013,-329.8597C545.6862,-328.6521 547.3106,-327.3671 548.8633,-326 582.1286,-296.7107 552.0989,-262.8486 584.8633,-233 586.0146,-231.9512 587.2037,-230.9428 588.4265,-229.9732"/>
<polygon fill="#666666" stroke="#666666" points="590.6826,-232.6697 596.9429,-224.1222 586.7187,-226.9002 590.6826,-232.6697"/>
</g>
<!-- CommitWithSerialValidate&#45;&gt;DBImpl_WriteWithCallback -->
<g id="edge15" class="edge">
<title>CommitWithSerialValidate&#45;&gt;DBImpl_WriteWithCallback</title>
<path fill="none" stroke="#666666" d="M276.5443,-440.1457C298.5594,-454.9875 331.6677,-475.498 363.1797,-488 363.6198,-488.1746 364.0616,-488.348 364.505,-488.5202"/>
<polygon fill="#666666" stroke="#666666" points="363.4303,-491.8533 374.0246,-491.9608 365.8097,-485.2701 363.4303,-491.8533"/>
</g>
<!-- CommitWithSerialValidate&#45;&gt;OptimisticTransactionCallback -->
<g id="edge16" class="edge">
<title>CommitWithSerialValidate&#45;&gt;OptimisticTransactionCallback</title>
<path fill="none" stroke="#666666" d="M334.8354,-431.9547C344.3834,-432.795 353.9845,-433.5097 363.1797,-434 445.5887,-438.394 466.423,-437.7613 548.8633,-434 557.241,-433.6178 565.9102,-433.099 574.6157,-432.4905"/>
<polygon fill="#666666" stroke="#666666" points="575.1205,-435.9629 584.8365,-431.7379 574.6064,-428.9818 575.1205,-435.9629"/>
</g>
<!-- CheckTransactionForConflicts -->
<g id="node18" class="node">
<title>CheckTransactionForConflicts</title>
<polygon fill="none" stroke="#000000" points="1014.622,-403 826.8673,-403 826.8673,-367 1014.622,-367 1014.622,-403"/>
<text text-anchor="middle" x="920.7446" y="-380.8" font-family="Times,serif" font-size="14.00" fill="#000000">CheckTransactionForConflicts</text>
</g>
<!-- OptimisticTransactionCallback&#45;&gt;CheckTransactionForConflicts -->
<g id="edge18" class="edge">
<title>OptimisticTransactionCallback&#45;&gt;CheckTransactionForConflicts</title>
<path fill="none" stroke="#666666" d="M775.5528,-407.3235C789.1746,-405.2291 803.241,-403.0664 817.0119,-400.9491"/>
<polygon fill="#666666" stroke="#666666" points="817.6244,-404.3961 826.9764,-399.417 816.5606,-397.4774 817.6244,-404.3961"/>
</g>
<!-- CheckTransactionForConflicts&#45;&gt;CheckKeyForConflicts -->
<g id="edge19" class="edge">
<title>CheckTransactionForConflicts&#45;&gt;CheckKeyForConflicts</title>
<path fill="none" stroke="#666666" d="M953.3468,-366.8711C977.0261,-353.5888 1009.7607,-334.9891 1038.1592,-318 1055.622,-307.553 1074.5796,-295.7881 1091.2783,-285.2778"/>
<polygon fill="#666666" stroke="#666666" points="1093.1959,-288.2064 1099.7848,-279.9096 1089.46,-282.2866 1093.1959,-288.2064"/>
</g>
</g>
</svg>
