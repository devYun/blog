<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: transaction_struct Pages: 1 -->
<svg width="1948pt" height="768pt"
 viewBox="0.00 0.00 1948.00 768.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 764)">
<title>transaction_struct</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-764 1944,-764 1944,4 -4,4"/>
<!-- Transaction -->
<g id="node1" class="node">
<title>Transaction</title>
<polygon fill="none" stroke="#000000" points="0,-262.5 0,-759.5 395,-759.5 395,-262.5 0,-262.5"/>
<text text-anchor="middle" x="197.5" y="-744.3" font-family="Times,serif" font-size="14.00" fill="#000000">Transaction</text>
<polyline fill="none" stroke="#000000" points="0,-736.5 395,-736.5 "/>
<text text-anchor="middle" x="197.5" y="-721.3" font-family="Times,serif" font-size="14.00" fill="#000000">对外接口</text>
<polyline fill="none" stroke="#000000" points="0,-713.5 395,-713.5 "/>
<text text-anchor="start" x="8" y="-698.3" font-family="Times,serif" font-size="14.00" fill="#000000">virtual void SetSnapshot() = 0;</text>
<polyline fill="none" stroke="#000000" points="0,-690.5 395,-690.5 "/>
<text text-anchor="start" x="8" y="-675.3" font-family="Times,serif" font-size="14.00" fill="#000000">virtual void SetSnapshotOnNextOperation(</text>
<text text-anchor="start" x="8" y="-660.3" font-family="Times,serif" font-size="14.00" fill="#000000"> std::shared_ptr&lt;TransactionNotifier&gt;</text>
<text text-anchor="start" x="8" y="-645.3" font-family="Times,serif" font-size="14.00" fill="#000000"> notifier = nullptr) = 0;</text>
<polyline fill="none" stroke="#000000" points="0,-637.5 395,-637.5 "/>
<text text-anchor="start" x="8" y="-622.3" font-family="Times,serif" font-size="14.00" fill="#000000">virtual void ClearSnapshot() = 0;</text>
<polyline fill="none" stroke="#000000" points="0,-614.5 395,-614.5 "/>
<text text-anchor="start" x="8" y="-599.3" font-family="Times,serif" font-size="14.00" fill="#000000">virtual Status Prepare() = 0;</text>
<polyline fill="none" stroke="#000000" points="0,-591.5 395,-591.5 "/>
<text text-anchor="start" x="8" y="-576.3" font-family="Times,serif" font-size="14.00" fill="#000000">virtual Status Commit() = 0;</text>
<polyline fill="none" stroke="#000000" points="0,-568.5 395,-568.5 "/>
<text text-anchor="start" x="8" y="-553.3" font-family="Times,serif" font-size="14.00" fill="#000000">virtual Status Rollback() = 0;</text>
<polyline fill="none" stroke="#000000" points="0,-545.5 395,-545.5 "/>
<text text-anchor="start" x="8" y="-530.3" font-family="Times,serif" font-size="14.00" fill="#000000">virtual void SetSavePoint() = 0;</text>
<polyline fill="none" stroke="#000000" points="0,-522.5 395,-522.5 "/>
<text text-anchor="start" x="8" y="-507.3" font-family="Times,serif" font-size="14.00" fill="#000000">virtual Status RollbackToSavePoint() = 0;</text>
<polyline fill="none" stroke="#000000" points="0,-499.5 395,-499.5 "/>
<text text-anchor="start" x="8" y="-484.3" font-family="Times,serif" font-size="14.00" fill="#000000">virtual Status PopSavePoint() = 0;</text>
<polyline fill="none" stroke="#000000" points="0,-476.5 395,-476.5 "/>
<text text-anchor="start" x="8" y="-461.3" font-family="Times,serif" font-size="14.00" fill="#000000">virtual Status Get(const ReadOptions&amp; options,</text>
<text text-anchor="start" x="8" y="-446.3" font-family="Times,serif" font-size="14.00" fill="#000000"> ColumnFamilyHandle* column_family, const Slice&amp; key,</text>
<text text-anchor="start" x="8" y="-431.3" font-family="Times,serif" font-size="14.00" fill="#000000"> std::string* value) = 0;</text>
<polyline fill="none" stroke="#000000" points="0,-423.5 395,-423.5 "/>
<text text-anchor="start" x="8" y="-408.3" font-family="Times,serif" font-size="14.00" fill="#000000">virtual Status GetForUpdate(const ReadOptions&amp; options,...</text>
<polyline fill="none" stroke="#000000" points="0,-400.5 395,-400.5 "/>
<text text-anchor="start" x="8" y="-385.3" font-family="Times,serif" font-size="14.00" fill="#000000">virtual Iterator* GetIterator(const ReadOptions&amp; read_options) = 0..;</text>
<polyline fill="none" stroke="#000000" points="0,-377.5 395,-377.5 "/>
<text text-anchor="middle" x="197.5" y="-362.3" font-family="Times,serif" font-size="14.00" fill="#000000">数据成员</text>
<polyline fill="none" stroke="#000000" points="0,-354.5 395,-354.5 "/>
<text text-anchor="start" x="8" y="-339.3" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t log_number_;</text>
<polyline fill="none" stroke="#000000" points="0,-331.5 395,-331.5 "/>
<text text-anchor="start" x="8" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionName name_;</text>
<polyline fill="none" stroke="#000000" points="0,-308.5 395,-308.5 "/>
<text text-anchor="start" x="8" y="-293.3" font-family="Times,serif" font-size="14.00" fill="#000000">std::atomic&lt;TransactionState&gt; txn_state_;</text>
<polyline fill="none" stroke="#000000" points="0,-285.5 395,-285.5 "/>
<text text-anchor="start" x="8" y="-270.3" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t id_ = 0;</text>
</g>
<!-- TransactionBaseImpl -->
<g id="node2" class="node">
<title>TransactionBaseImpl</title>
<polygon fill="none" stroke="#000000" points="431,-312 431,-710 902,-710 902,-312 431,-312"/>
<text text-anchor="middle" x="666.5" y="-694.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionBaseImpl</text>
<polyline fill="none" stroke="#000000" points="431,-687 902,-687 "/>
<text text-anchor="start" x="439" y="-671.8" font-family="Times,serif" font-size="14.00" fill="#000000">DB *db_</text>
<polyline fill="none" stroke="#000000" points="431,-664 902,-664 "/>
<text text-anchor="start" x="439" y="-648.8" font-family="Times,serif" font-size="14.00" fill="#000000">DBImpl* dbimpl_;</text>
<polyline fill="none" stroke="#000000" points="431,-641 902,-641 "/>
<text text-anchor="start" x="439" y="-625.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteOptions write_options_;</text>
<polyline fill="none" stroke="#000000" points="431,-618 902,-618 "/>
<text text-anchor="start" x="439" y="-602.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t start_time_;</text>
<polyline fill="none" stroke="#000000" points="431,-595 902,-595 "/>
<text text-anchor="start" x="439" y="-579.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::shared_ptr&lt;const Snapshot&gt; snapshot_;</text>
<polyline fill="none" stroke="#000000" points="431,-572 902,-572 "/>
<text text-anchor="start" x="439" y="-556.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t num_puts_ = 0;</text>
<polyline fill="none" stroke="#000000" points="431,-549 902,-549 "/>
<text text-anchor="start" x="439" y="-533.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t num_deletes_ = 0;</text>
<polyline fill="none" stroke="#000000" points="431,-526 902,-526 "/>
<text text-anchor="start" x="439" y="-510.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t num_merges_ = 0;</text>
<polyline fill="none" stroke="#000000" points="431,-503 902,-503 "/>
<text text-anchor="start" x="439" y="-487.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchWithIndex write_batch_;</text>
<polyline fill="none" stroke="#000000" points="431,-480 902,-480 "/>
<text text-anchor="start" x="439" y="-464.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionKeyMap tracked_keys_;</text>
<polyline fill="none" stroke="#000000" points="431,-457 902,-457 "/>
<text text-anchor="start" x="439" y="-441.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::unique_ptr&lt;std::stack&lt;</text>
<text text-anchor="start" x="439" y="-426.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionBaseImpl::SavePoint, autovector&lt;TransactionBaseImpl::SavePoint&gt;&gt;&gt;</text>
<text text-anchor="start" x="439" y="-411.8" font-family="Times,serif" font-size="14.00" fill="#000000"> save_points_;</text>
<polyline fill="none" stroke="#000000" points="431,-404 902,-404 "/>
<text text-anchor="start" x="439" y="-388.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatch commit_time_batch_;</text>
<polyline fill="none" stroke="#000000" points="431,-381 902,-381 "/>
<text text-anchor="start" x="439" y="-365.8" font-family="Times,serif" font-size="14.00" fill="#000000">bool indexing_enabled_;</text>
<polyline fill="none" stroke="#000000" points="431,-358 902,-358 "/>
<text text-anchor="start" x="439" y="-342.8" font-family="Times,serif" font-size="14.00" fill="#000000">bool snapshot_needed_ = false;</text>
<polyline fill="none" stroke="#000000" points="431,-335 902,-335 "/>
<text text-anchor="start" x="439" y="-319.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::shared_ptr&lt;TransactionNotifier&gt; snapshot_notifier_ = nullptr;</text>
</g>
<!-- Transaction&#45;&gt;TransactionBaseImpl -->
<g id="edge1" class="edge">
<title>Transaction&#45;&gt;TransactionBaseImpl</title>
<path fill="none" stroke="#666666" d="M395.0389,-511C403.5857,-511 412.1997,-511 420.8339,-511"/>
<polygon fill="#666666" stroke="#666666" points="420.9762,-514.5001 430.9762,-511 420.9762,-507.5001 420.9762,-514.5001"/>
</g>
<!-- SavePoint -->
<g id="node3" class="node">
<title>SavePoint</title>
<polygon fill="none" stroke="#000000" points="938,-204.5 938,-365.5 1266,-365.5 1266,-204.5 938,-204.5"/>
<text text-anchor="middle" x="1102" y="-350.3" font-family="Times,serif" font-size="14.00" fill="#000000">SavePoint</text>
<polyline fill="none" stroke="#000000" points="938,-342.5 1266,-342.5 "/>
<text text-anchor="start" x="946" y="-327.3" font-family="Times,serif" font-size="14.00" fill="#000000">std::shared_ptr&lt;const Snapshot&gt; snapshot_;</text>
<polyline fill="none" stroke="#000000" points="938,-319.5 1266,-319.5 "/>
<text text-anchor="start" x="946" y="-304.3" font-family="Times,serif" font-size="14.00" fill="#000000">bool snapshot_needed_ = false;</text>
<polyline fill="none" stroke="#000000" points="938,-296.5 1266,-296.5 "/>
<text text-anchor="start" x="946" y="-281.3" font-family="Times,serif" font-size="14.00" fill="#000000">std::shared_ptr&lt;TransactionNotifier&gt; snapshot_notifier_;</text>
<polyline fill="none" stroke="#000000" points="938,-273.5 1266,-273.5 "/>
<text text-anchor="start" x="946" y="-258.3" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t num_puts_ = 0;</text>
<polyline fill="none" stroke="#000000" points="938,-250.5 1266,-250.5 "/>
<text text-anchor="start" x="946" y="-235.3" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t num_deletes_ = 0;</text>
<polyline fill="none" stroke="#000000" points="938,-227.5 1266,-227.5 "/>
<text text-anchor="start" x="946" y="-212.3" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t num_merges_ = 0;</text>
</g>
<!-- TransactionBaseImpl&#45;&gt;SavePoint -->
<g id="edge2" class="edge">
<title>TransactionBaseImpl:SavePoint&#45;&gt;SavePoint</title>
<path fill="none" stroke="#666666" d="M902,-430C931.2153,-430 916.5553,-394.8408 938,-375 938.9722,-374.1005 939.955,-373.2068 940.948,-372.319"/>
<polygon fill="#666666" stroke="#666666" points="943.4365,-374.7956 948.7475,-365.628 938.8787,-369.4827 943.4365,-374.7956"/>
</g>
<!-- Snapshot -->
<g id="node4" class="node">
<title>Snapshot</title>
<polygon fill="none" stroke="#000000" points="1328,-427 1328,-473 1668,-473 1668,-427 1328,-427"/>
<text text-anchor="middle" x="1498" y="-457.8" font-family="Times,serif" font-size="14.00" fill="#000000">Snapshot</text>
<polyline fill="none" stroke="#000000" points="1328,-450 1668,-450 "/>
<text text-anchor="start" x="1336" y="-434.8" font-family="Times,serif" font-size="14.00" fill="#000000">virtual SequenceNumber GetSequenceNumber() const = 0;</text>
</g>
<!-- TransactionBaseImpl&#45;&gt;Snapshot -->
<g id="edge3" class="edge">
<title>TransactionBaseImpl:Snapshot&#45;&gt;Snapshot</title>
<path fill="none" stroke="#666666" d="M902,-584C956.4059,-584 894.2365,-668.6774 938,-701 1055.2622,-787.6069 1132.4415,-759.4234 1266,-701 1369.5126,-655.7197 1447.3845,-538.9493 1480.4966,-482.078"/>
<polygon fill="#666666" stroke="#666666" points="1483.672,-483.5761 1485.6072,-473.1595 1477.5985,-480.0957 1483.672,-483.5761"/>
</g>
<!-- TransactionKeyMap -->
<g id="node5" class="node">
<title>TransactionKeyMap</title>
<polygon fill="none" stroke="#000000" points="1004.5,-109 1004.5,-185 1199.5,-185 1199.5,-109 1004.5,-109"/>
<text text-anchor="middle" x="1102" y="-169.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionKeyMap</text>
<polyline fill="none" stroke="#000000" points="1004.5,-162 1199.5,-162 "/>
<text text-anchor="start" x="1012.5" y="-146.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::unordered_map&lt;uint32_t</text>
<text text-anchor="start" x="1012.5" y="-131.8" font-family="Times,serif" font-size="14.00" fill="#000000">, std::unordered_map&lt;std::string</text>
<text text-anchor="start" x="1012.5" y="-116.8" font-family="Times,serif" font-size="14.00" fill="#000000">, TransactionKeyMapInfo&gt;&gt;</text>
</g>
<!-- TransactionBaseImpl&#45;&gt;TransactionKeyMap -->
<g id="edge4" class="edge">
<title>TransactionBaseImpl:TransactionKeyMap&#45;&gt;TransactionKeyMap</title>
<path fill="none" stroke="#666666" d="M902,-468C963.1919,-468 898.1786,-241.4618 938,-195 952.7151,-177.831 973.206,-166.6307 994.7288,-159.3667"/>
<polygon fill="#666666" stroke="#666666" points="995.8176,-162.6936 1004.3361,-156.394 993.7484,-156.0064 995.8176,-162.6936"/>
</g>
<!-- OptimisticTransaction -->
<g id="node6" class="node">
<title>OptimisticTransaction</title>
<polygon fill="none" stroke="#000000" points="1171,-692 1033,-692 1033,-656 1171,-656 1171,-692"/>
<text text-anchor="middle" x="1102" y="-670.3" font-family="Times,serif" font-size="14.00" fill="#000000">OptimisticTransaction</text>
</g>
<!-- TransactionBaseImpl&#45;&gt;OptimisticTransaction -->
<g id="edge5" class="edge">
<title>TransactionBaseImpl&#45;&gt;OptimisticTransaction</title>
<path fill="none" stroke="#666666" d="M902.017,-634.1633C914.0544,-638.8174 926.0907,-643.1355 938,-647 964.8929,-655.7267 995.2244,-661.7285 1022.4227,-665.8129"/>
<polygon fill="#666666" stroke="#666666" points="1022.2836,-669.3287 1032.6796,-667.2861 1023.2789,-662.3999 1022.2836,-669.3287"/>
</g>
<!-- PessimisticTransaction -->
<g id="node7" class="node">
<title>PessimisticTransaction</title>
<polygon fill="none" stroke="#000000" points="976.5,-384.5 976.5,-637.5 1227.5,-637.5 1227.5,-384.5 976.5,-384.5"/>
<text text-anchor="middle" x="1102" y="-622.3" font-family="Times,serif" font-size="14.00" fill="#000000">PessimisticTransaction</text>
<polyline fill="none" stroke="#000000" points="976.5,-614.5 1227.5,-614.5 "/>
<text text-anchor="start" x="984.5" y="-599.3" font-family="Times,serif" font-size="14.00" fill="#000000">PessimisticTransactionDB* txn_db_impl_;</text>
<polyline fill="none" stroke="#000000" points="976.5,-591.5 1227.5,-591.5 "/>
<text text-anchor="start" x="984.5" y="-576.3" font-family="Times,serif" font-size="14.00" fill="#000000">DBImpl* db_impl_;</text>
<polyline fill="none" stroke="#000000" points="976.5,-568.5 1227.5,-568.5 "/>
<text text-anchor="start" x="984.5" y="-553.3" font-family="Times,serif" font-size="14.00" fill="#000000">uint64_t expiration_time_;</text>
<polyline fill="none" stroke="#000000" points="976.5,-545.5 1227.5,-545.5 "/>
<text text-anchor="start" x="984.5" y="-530.3" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionID txn_id_;</text>
<polyline fill="none" stroke="#000000" points="976.5,-522.5 1227.5,-522.5 "/>
<polyline fill="none" stroke="#000000" points="976.5,-522.5 1227.5,-522.5 "/>
<text text-anchor="start" x="984.5" y="-507.3" font-family="Times,serif" font-size="14.00" fill="#000000">uint32_t waiting_cf_id_;</text>
<polyline fill="none" stroke="#000000" points="976.5,-499.5 1227.5,-499.5 "/>
<text text-anchor="start" x="984.5" y="-484.3" font-family="Times,serif" font-size="14.00" fill="#000000">const std::string* waiting_key_;</text>
<polyline fill="none" stroke="#000000" points="976.5,-476.5 1227.5,-476.5 "/>
<text text-anchor="start" x="984.5" y="-461.3" font-family="Times,serif" font-size="14.00" fill="#000000">mutable std::mutex wait_mutex_;</text>
<polyline fill="none" stroke="#000000" points="976.5,-453.5 1227.5,-453.5 "/>
<text text-anchor="start" x="984.5" y="-438.3" font-family="Times,serif" font-size="14.00" fill="#000000">int64_t lock_timeout_;</text>
<polyline fill="none" stroke="#000000" points="976.5,-430.5 1227.5,-430.5 "/>
<text text-anchor="start" x="984.5" y="-415.3" font-family="Times,serif" font-size="14.00" fill="#000000">bool deadlock_detect_;</text>
<polyline fill="none" stroke="#000000" points="976.5,-407.5 1227.5,-407.5 "/>
<text text-anchor="start" x="984.5" y="-392.3" font-family="Times,serif" font-size="14.00" fill="#000000">bool skip_concurrency_control_;</text>
</g>
<!-- TransactionBaseImpl&#45;&gt;PessimisticTransaction -->
<g id="edge6" class="edge">
<title>TransactionBaseImpl&#45;&gt;PessimisticTransaction</title>
<path fill="none" stroke="#666666" d="M902.0945,-511C924.0542,-511 945.7702,-511 966.3411,-511"/>
<polygon fill="#666666" stroke="#666666" points="966.3436,-514.5001 976.3436,-511 966.3435,-507.5001 966.3436,-514.5001"/>
</g>
<!-- SavePoint&#45;&gt;Snapshot -->
<g id="edge7" class="edge">
<title>SavePoint:Snapshot&#45;&gt;Snapshot</title>
<path fill="none" stroke="#666666" d="M1266,-331C1307.8463,-331 1269.2038,-392.0092 1302,-418 1307.3558,-422.2444 1313.0571,-426.0234 1319.0184,-429.3837"/>
<polygon fill="#666666" stroke="#666666" points="1317.441,-432.5082 1327.9285,-434.0125 1320.6681,-426.2965 1317.441,-432.5082"/>
</g>
<!-- SequenceNumber -->
<g id="node13" class="node">
<title>SequenceNumber</title>
<polygon fill="none" stroke="#000000" points="1730,-275 1730,-321 1940,-321 1940,-275 1730,-275"/>
<text text-anchor="middle" x="1835" y="-305.8" font-family="Times,serif" font-size="14.00" fill="#000000">SequenceNumber</text>
<polyline fill="none" stroke="#000000" points="1730,-298 1940,-298 "/>
<text text-anchor="middle" x="1835" y="-282.8" font-family="Times,serif" font-size="14.00" fill="#000000">typedef uint64_t SequenceNumber;</text>
</g>
<!-- Snapshot&#45;&gt;SequenceNumber -->
<g id="edge13" class="edge">
<title>Snapshot&#45;&gt;SequenceNumber</title>
<path fill="none" stroke="#666666" d="M1668.1424,-428.2105C1677.033,-425.2237 1685.7083,-421.8377 1694,-418 1739.5962,-396.8966 1782.0769,-356.8284 1808.2487,-328.8211"/>
<polygon fill="#666666" stroke="#666666" points="1811,-330.9996 1815.187,-321.2672 1805.8447,-326.2643 1811,-330.9996"/>
</g>
<!-- TransactionKeyMapInfo -->
<g id="node14" class="node">
<title>TransactionKeyMapInfo</title>
<polygon fill="none" stroke="#000000" points="1422.5,-89.5 1422.5,-204.5 1573.5,-204.5 1573.5,-89.5 1422.5,-89.5"/>
<text text-anchor="middle" x="1498" y="-189.3" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionKeyMapInfo</text>
<polyline fill="none" stroke="#000000" points="1422.5,-181.5 1573.5,-181.5 "/>
<text text-anchor="start" x="1430.5" y="-166.3" font-family="Times,serif" font-size="14.00" fill="#000000">SequenceNumber seq;</text>
<polyline fill="none" stroke="#000000" points="1422.5,-158.5 1573.5,-158.5 "/>
<text text-anchor="start" x="1430.5" y="-143.3" font-family="Times,serif" font-size="14.00" fill="#000000">uint32_t num_writes;</text>
<polyline fill="none" stroke="#000000" points="1422.5,-135.5 1573.5,-135.5 "/>
<text text-anchor="start" x="1430.5" y="-120.3" font-family="Times,serif" font-size="14.00" fill="#000000">uint32_t num_reads;</text>
<polyline fill="none" stroke="#000000" points="1422.5,-112.5 1573.5,-112.5 "/>
<text text-anchor="start" x="1430.5" y="-97.3" font-family="Times,serif" font-size="14.00" fill="#000000">bool exclusive;</text>
</g>
<!-- TransactionKeyMap&#45;&gt;TransactionKeyMapInfo -->
<g id="edge14" class="edge">
<title>TransactionKeyMap&#45;&gt;TransactionKeyMapInfo</title>
<path fill="none" stroke="#666666" d="M1199.6336,-147C1264.7172,-147 1349.47,-147 1412.0076,-147"/>
<polygon fill="#666666" stroke="#666666" points="1412.2383,-150.5001 1422.2382,-147 1412.2382,-143.5001 1412.2383,-150.5001"/>
</g>
<!-- PessimisticTransactionDB -->
<g id="node8" class="node">
<title>PessimisticTransactionDB</title>
<polygon fill="none" stroke="#000000" points="1302,-224 1302,-408 1694,-408 1694,-224 1302,-224"/>
<text text-anchor="middle" x="1498" y="-392.8" font-family="Times,serif" font-size="14.00" fill="#000000">PessimisticTransactionDB</text>
<polyline fill="none" stroke="#000000" points="1302,-385 1694,-385 "/>
<text text-anchor="start" x="1310" y="-369.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionLockMgr lock_mgr_;</text>
<polyline fill="none" stroke="#000000" points="1302,-362 1694,-362 "/>
<text text-anchor="start" x="1310" y="-346.8" font-family="Times,serif" font-size="14.00" fill="#000000">InstrumentedMutex column_family_mutex_;</text>
<polyline fill="none" stroke="#000000" points="1302,-339 1694,-339 "/>
<text text-anchor="start" x="1310" y="-323.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::mutex map_mutex_;</text>
<polyline fill="none" stroke="#000000" points="1302,-316 1694,-316 "/>
<text text-anchor="start" x="1310" y="-300.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::unordered_map&lt;TransactionID, PessimisticTransaction*&gt;</text>
<polyline fill="none" stroke="#000000" points="1302,-293 1694,-293 "/>
<text text-anchor="start" x="1310" y="-277.8" font-family="Times,serif" font-size="14.00" fill="#000000">expirable_transactions_map_;</text>
<polyline fill="none" stroke="#000000" points="1302,-270 1694,-270 "/>
<text text-anchor="start" x="1310" y="-254.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::mutex name_map_mutex_;</text>
<polyline fill="none" stroke="#000000" points="1302,-247 1694,-247 "/>
<text text-anchor="start" x="1310" y="-231.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::unordered_map&lt;TransactionName, Transaction*&gt; transactions_</text>
</g>
<!-- PessimisticTransaction&#45;&gt;PessimisticTransactionDB -->
<g id="edge8" class="edge">
<title>PessimisticTransaction:PessimisticTransactionDB&#45;&gt;PessimisticTransactionDB</title>
<path fill="none" stroke="#666666" d="M1228,-603C1316.556,-603 1242.5674,-483.6502 1302,-418 1302.7723,-417.1469 1303.5535,-416.2997 1304.3431,-415.4585"/>
<polygon fill="#666666" stroke="#666666" points="1307.1282,-417.6198 1311.6711,-408.0484 1302.1509,-412.6978 1307.1282,-417.6198"/>
</g>
<!-- DB -->
<g id="node9" class="node">
<title>DB</title>
<polygon fill="none" stroke="#000000" points="224.5,-63 170.5,-63 170.5,-27 224.5,-27 224.5,-63"/>
<text text-anchor="middle" x="197.5" y="-41.3" font-family="Times,serif" font-size="14.00" fill="#000000">DB</text>
</g>
<!-- StackableDB -->
<g id="node10" class="node">
<title>StackableDB</title>
<polygon fill="none" stroke="#000000" points="622.5,-22 622.5,-68 710.5,-68 710.5,-22 622.5,-22"/>
<text text-anchor="middle" x="666.5" y="-52.8" font-family="Times,serif" font-size="14.00" fill="#000000">StackableDB</text>
<polyline fill="none" stroke="#000000" points="622.5,-45 710.5,-45 "/>
<text text-anchor="start" x="630.5" y="-29.8" font-family="Times,serif" font-size="14.00" fill="#000000">DB* db_;</text>
<polyline fill="none" stroke="#000000" points="622.5,-22 710.5,-22 "/>
</g>
<!-- DB&#45;&gt;StackableDB -->
<g id="edge9" class="edge">
<title>DB&#45;&gt;StackableDB</title>
<path fill="none" stroke="#666666" d="M224.7426,-45C299.9866,-45 511.7341,-45 612.2421,-45"/>
<polygon fill="#666666" stroke="#666666" points="612.4839,-48.5001 622.4839,-45 612.4839,-41.5001 612.4839,-48.5001"/>
</g>
<!-- TransactionDB -->
<g id="node11" class="node">
<title>TransactionDB</title>
<polygon fill="none" stroke="#000000" points="1151.5,-90 1052.5,-90 1052.5,-54 1151.5,-54 1151.5,-90"/>
<text text-anchor="middle" x="1102" y="-68.3" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionDB</text>
</g>
<!-- StackableDB&#45;&gt;TransactionDB -->
<g id="edge10" class="edge">
<title>StackableDB&#45;&gt;TransactionDB</title>
<path fill="none" stroke="#666666" d="M710.6547,-47.7375C789.2816,-52.6122 953.6005,-62.7996 1042.2467,-68.2954"/>
<polygon fill="#666666" stroke="#666666" points="1042.2129,-71.8 1052.4104,-68.9256 1042.6462,-64.8134 1042.2129,-71.8"/>
</g>
<!-- OptimisticTransactionDB -->
<g id="node12" class="node">
<title>OptimisticTransactionDB</title>
<polygon fill="none" stroke="#000000" points="1180.5,-36 1023.5,-36 1023.5,0 1180.5,0 1180.5,-36"/>
<text text-anchor="middle" x="1102" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#000000">OptimisticTransactionDB</text>
</g>
<!-- StackableDB&#45;&gt;OptimisticTransactionDB -->
<g id="edge12" class="edge">
<title>StackableDB&#45;&gt;OptimisticTransactionDB</title>
<path fill="none" stroke="#666666" d="M710.6547,-42.2625C781.3125,-37.8819 921.1721,-29.2109 1013.1288,-23.5098"/>
<polygon fill="#666666" stroke="#666666" points="1013.4981,-26.9937 1023.2623,-22.8816 1013.0649,-20.0071 1013.4981,-26.9937"/>
</g>
<!-- TransactionDB&#45;&gt;PessimisticTransactionDB -->
<g id="edge11" class="edge">
<title>TransactionDB&#45;&gt;PessimisticTransactionDB</title>
<path fill="none" stroke="#666666" d="M1151.8303,-67.6812C1187.674,-67.3406 1234.9746,-72.9524 1266,-100 1306.0503,-134.9154 1267.8352,-173.3076 1302,-214 1302.6205,-214.739 1303.2477,-215.4734 1303.8815,-216.2031"/>
<polygon fill="#666666" stroke="#666666" points="1301.5663,-218.856 1310.9133,-223.8444 1306.7172,-214.1159 1301.5663,-218.856"/>
</g>
<!-- TransactionKeyMapInfo&#45;&gt;SequenceNumber -->
<g id="edge15" class="edge">
<title>TransactionKeyMapInfo&#45;&gt;SequenceNumber</title>
<path fill="none" stroke="#666666" d="M1573.8296,-169.4303C1610.7647,-181.3266 1655.4215,-197.1673 1694,-215 1727.9685,-230.7017 1764.3167,-252.2237 1791.5993,-269.4172"/>
<polygon fill="#666666" stroke="#666666" points="1789.807,-272.4251 1800.1243,-274.8345 1793.5614,-266.5171 1789.807,-272.4251"/>
</g>
</g>
</svg>
