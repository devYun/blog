<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: write_committed Pages: 1 -->
<svg width="1488pt" height="1042pt"
 viewBox="0.00 0.00 1488.30 1042.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1038)">
<title>write_committed</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1038 1484.2969,-1038 1484.2969,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_DBImpl</title>
<polygon fill="none" stroke="#000000" points="667.0054,-8 667.0054,-196 1133.1582,-196 1133.1582,-8 667.0054,-8"/>
<text text-anchor="middle" x="900.0818" y="-176" font-family="Times,serif" font-size="20.00" fill="#000000">DBImpl</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_WriteBatch</title>
<polygon fill="none" stroke="#000000" points="421.3945,-142 421.3945,-476 606.0225,-476 606.0225,-142 421.3945,-142"/>
<text text-anchor="middle" x="513.7085" y="-456" font-family="Times,serif" font-size="20.00" fill="#000000">WriteBatch</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_WriteBatchInternal</title>
<polygon fill="none" stroke="#000000" points="429.3945,-196 429.3945,-440 598.0225,-440 598.0225,-196 429.3945,-196"/>
<text text-anchor="middle" x="513.7085" y="-420" font-family="Times,serif" font-size="20.00" fill="#000000">WriteBatchInternal</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_PessimisticTransaction</title>
<polygon fill="none" stroke="#000000" points="8,-484 8,-1026 1472.2969,-1026 1472.2969,-484 8,-484"/>
<text text-anchor="middle" x="740.1484" y="-1006" font-family="Times,serif" font-size="20.00" fill="#000000">PessimisticTransaction</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_TransactionBaseImpl</title>
<polygon fill="none" stroke="#000000" points="418.9233,-492 418.9233,-694 1464.2969,-694 1464.2969,-492 418.9233,-492"/>
<text text-anchor="middle" x="941.6101" y="-674" font-family="Times,serif" font-size="20.00" fill="#000000"> TransactionBaseImpl</text>
</g>
<g id="clust12" class="cluster">
<title>cluster_WriteCommittedTxn</title>
<polygon fill="none" stroke="#000000" points="181.772,-748 181.772,-990 879.9116,-990 879.9116,-748 181.772,-748"/>
<text text-anchor="middle" x="530.8418" y="-970" font-family="Times,serif" font-size="20.00" fill="#000000">WriteCommittedTxn</text>
</g>
<!-- WriteImpl_Prepare -->
<g id="node1" class="node">
<title>WriteImpl_Prepare</title>
<polygon fill="none" stroke="#000000" stroke-dasharray="5,2" points="826.2661,-160 703.2466,-160 703.2466,-124 826.2661,-124 826.2661,-160"/>
<text text-anchor="middle" x="764.7563" y="-137.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteImpl_Prepare</text>
</g>
<!-- WriteImpl -->
<g id="node4" class="node">
<title>WriteImpl</title>
<polygon fill="none" stroke="#000000" points="1125.037,-133 1051.5225,-133 1051.5225,-97 1125.037,-97 1125.037,-133"/>
<text text-anchor="middle" x="1088.2798" y="-110.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteImpl</text>
</g>
<!-- WriteImpl_Prepare&#45;&gt;WriteImpl -->
<g id="edge1" class="edge">
<title>WriteImpl_Prepare&#45;&gt;WriteImpl</title>
<path fill="none" stroke="#666666" d="M826.3701,-136.858C888.8486,-131.6437 984.1886,-123.687 1040.965,-118.9487"/>
<polygon fill="#666666" stroke="#666666" points="1041.4267,-122.4224 1051.101,-118.1028 1040.8445,-115.4467 1041.4267,-122.4224"/>
</g>
<!-- WriteImpl_Rollback_Marker -->
<g id="node2" class="node">
<title>WriteImpl_Rollback_Marker</title>
<polygon fill="none" stroke="#000000" stroke-dasharray="5,2" points="854.259,-52 675.2537,-52 675.2537,-16 854.259,-16 854.259,-52"/>
<text text-anchor="middle" x="764.7563" y="-29.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteImpl_Rollback_Marker</text>
</g>
<!-- WriteImpl_Rollback_Marker&#45;&gt;WriteImpl -->
<g id="edge2" class="edge">
<title>WriteImpl_Rollback_Marker&#45;&gt;WriteImpl</title>
<path fill="none" stroke="#666666" d="M842.8644,-52.0547C855.2694,-54.9968 867.9498,-58.0481 879.9116,-61 935.6692,-74.7596 999.5733,-91.4593 1041.7496,-102.6105"/>
<polygon fill="#666666" stroke="#666666" points="1040.8961,-106.0051 1051.4589,-105.1811 1042.6877,-99.2383 1040.8961,-106.0051"/>
</g>
<!-- WriteImpl_Commit -->
<g id="node3" class="node">
<title>WriteImpl_Commit</title>
<polygon fill="none" stroke="#000000" stroke-dasharray="5,2" points="827.9101,-106 701.6026,-106 701.6026,-70 827.9101,-70 827.9101,-106"/>
<text text-anchor="middle" x="764.7563" y="-83.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteImpl_Commit</text>
</g>
<!-- WriteImpl_Commit&#45;&gt;WriteImpl -->
<g id="edge3" class="edge">
<title>WriteImpl_Commit&#45;&gt;WriteImpl</title>
<path fill="none" stroke="#666666" d="M828.2882,-93.3021C890.8272,-98.5214 984.8919,-106.3717 1041.0773,-111.0607"/>
<polygon fill="#666666" stroke="#666666" points="1040.855,-114.5542 1051.1114,-111.8981 1041.4372,-107.5784 1040.855,-114.5542"/>
</g>
<!-- MarkWalTerminationPoint -->
<g id="node5" class="node">
<title>MarkWalTerminationPoint</title>
<polygon fill="none" stroke="#000000" points="596.5242,-186 429.8928,-186 429.8928,-150 596.5242,-150 596.5242,-186"/>
<text text-anchor="middle" x="513.2085" y="-163.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkWalTerminationPoint</text>
</g>
<!-- write_batch_ -->
<g id="node24" class="node">
<title>write_batch_</title>
<polygon fill="#95e1d3" stroke="#000000" points="695.1133,-501 695.1133,-545 834.3994,-545 834.3994,-501 695.1133,-501"/>
<text text-anchor="middle" x="764.7563" y="-529.8" font-family="Times,serif" font-size="14.00" fill="#000000">write_batch_</text>
<polyline fill="none" stroke="#000000" points="695.1133,-523 834.3994,-523 "/>
<text text-anchor="middle" x="764.7563" y="-507.8" font-family="Times,serif" font-size="14.00" fill="#000000">WriteBatchWithIndex</text>
</g>
<!-- MarkWalTerminationPoint&#45;&gt;write_batch_ -->
<g id="edge19" class="edge">
<title>MarkWalTerminationPoint&#45;&gt;write_batch_</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M596.4929,-178.683C604.748,-182.0605 612.5648,-186.411 619.3418,-192 714.7174,-270.6569 749.4106,-424.2159 760.3397,-490.8584"/>
<polygon fill="#ff0000" stroke="#ff0000" points="756.8889,-491.4457 761.8953,-500.783 763.8045,-490.3616 756.8889,-491.4457"/>
</g>
<!-- MarkCommit -->
<g id="node6" class="node">
<title>MarkCommit</title>
<polygon fill="none" stroke="#000000" points="559.4295,-350 466.9875,-350 466.9875,-314 559.4295,-314 559.4295,-350"/>
<text text-anchor="middle" x="513.2085" y="-327.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkCommit</text>
</g>
<!-- MarkCommit&#45;&gt;write_batch_ -->
<g id="edge20" class="edge">
<title>MarkCommit&#45;&gt;write_batch_</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M559.4395,-337.6046C578.9727,-341.484 601.3197,-348.0186 619.3418,-359 675.1469,-393.0038 721.5189,-455.1881 746.0009,-492.4422"/>
<polygon fill="#ff0000" stroke="#ff0000" points="743.0944,-494.3932 751.4604,-500.894 748.9743,-490.5949 743.0944,-494.3932"/>
</g>
<!-- WriteBatchInternal_Append -->
<g id="node7" class="node">
<title>WriteBatchInternal_Append</title>
<polygon fill="none" stroke="#000000" points="483.0464,-259 483.0464,-295 543.3706,-295 543.3706,-259 483.0464,-259"/>
<text text-anchor="middle" x="513.2085" y="-272.8" font-family="Times,serif" font-size="14.00" fill="#000000">Append</text>
</g>
<!-- WriteBatchInternal_Append&#45;&gt;write_batch_ -->
<g id="edge21" class="edge">
<title>WriteBatchInternal_Append&#45;&gt;write_batch_</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M543.5547,-279.2301C566.2218,-282.1847 597.0118,-289.0504 619.3418,-305 686.9111,-353.2627 732.0479,-443.5185 752.3929,-491.3562"/>
<polygon fill="#ff0000" stroke="#ff0000" points="749.2859,-493.0003 756.3571,-500.89 755.7494,-490.3126 749.2859,-493.0003"/>
</g>
<!-- MarkEndPrepare -->
<g id="node8" class="node">
<title>MarkEndPrepare</title>
<polygon fill="none" stroke="#000000" points="568.837,-404 457.5799,-404 457.5799,-368 568.837,-368 568.837,-404"/>
<text text-anchor="middle" x="513.2085" y="-381.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkEndPrepare</text>
</g>
<!-- MarkEndPrepare&#45;&gt;write_batch_ -->
<g id="edge22" class="edge">
<title>MarkEndPrepare&#45;&gt;write_batch_</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M546.3527,-404.0512C589.4312,-427.513 665.0417,-468.6926 715.0162,-495.9101"/>
<polygon fill="#ff0000" stroke="#ff0000" points="713.5795,-499.1131 724.0356,-500.8223 716.9276,-492.9656 713.5795,-499.1131"/>
</g>
<!-- MarkRollback -->
<g id="node9" class="node">
<title>MarkRollback</title>
<polygon fill="none" stroke="#000000" points="561.5777,-240 464.8393,-240 464.8393,-204 561.5777,-204 561.5777,-240"/>
<text text-anchor="middle" x="513.2085" y="-217.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkRollback</text>
</g>
<!-- MarkRollback&#45;&gt;write_batch_ -->
<g id="edge23" class="edge">
<title>MarkRollback&#45;&gt;write_batch_</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M561.6264,-226.2889C581.1992,-230.0529 602.9815,-237.0477 619.3418,-250 699.4062,-313.3865 740.7613,-433.2422 756.7367,-490.6969"/>
<polygon fill="#ff0000" stroke="#ff0000" points="753.4437,-491.9282 759.4279,-500.6711 760.202,-490.1046 753.4437,-491.9282"/>
</g>
<!-- Commit -->
<g id="node10" class="node">
<title>Commit</title>
<polygon fill="none" stroke="#000000" points="80.169,-653 18.3759,-653 18.3759,-617 80.169,-617 80.169,-653"/>
<text text-anchor="middle" x="49.2725" y="-630.8" font-family="Times,serif" font-size="14.00" fill="#000000">Commit</text>
</g>
<!-- CommitInternal -->
<g id="node11" class="node">
<title>CommitInternal</title>
<polygon fill="none" stroke="#000000" points="297.7387,-846 191.8815,-846 191.8815,-810 297.7387,-810 297.7387,-846"/>
<text text-anchor="middle" x="244.8101" y="-823.8" font-family="Times,serif" font-size="14.00" fill="#000000">CommitInternal</text>
</g>
<!-- Commit&#45;&gt;CommitInternal -->
<g id="edge4" class="edge">
<title>Commit&#45;&gt;CommitInternal</title>
<path fill="none" stroke="#b83b5e" d="M67.2701,-653.3588C72.8023,-659.791 78.494,-667.3328 82.5449,-675 109.7524,-726.4952 75.9935,-761.2335 118.5449,-801 135.5171,-816.8614 159.4388,-824.3057 181.9026,-827.5483"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="181.7481,-831.0544 192.091,-828.7576 182.5733,-824.1032 181.7481,-831.0544"/>
</g>
<!-- txn_state_ -->
<g id="node12" class="node">
<title>txn_state_</title>
<polygon fill="#95e1d3" stroke="#000000" points="118.5449,-666.2 118.5449,-737.8 371.0752,-737.8 371.0752,-666.2 118.5449,-666.2"/>
<text text-anchor="middle" x="244.8101" y="-722.6" font-family="Times,serif" font-size="14.00" fill="#000000">txn_state_</text>
<polyline fill="none" stroke="#000000" points="118.5449,-715.8 371.0752,-715.8 "/>
<text text-anchor="start" x="126.5449" y="-700.6" font-family="Times,serif" font-size="14.00" fill="#000000">事务状态</text>
<polyline fill="none" stroke="#000000" points="118.5449,-688.2 371.0752,-688.2 "/>
<text text-anchor="middle" x="244.8101" y="-673" font-family="Times,serif" font-size="14.00" fill="#000000">std::atomic&lt;TransactionState&gt; txn_state_;</text>
</g>
<!-- Commit&#45;&gt;txn_state_ -->
<g id="edge5" class="edge">
<title>Commit&#45;&gt;txn_state_</title>
<path fill="none" stroke="#b83b5e" d="M80.256,-645.6163C94.443,-650.4775 112.224,-656.57 130.81,-662.9384"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="129.6912,-666.2548 140.2858,-666.1853 131.9603,-659.6327 129.6912,-666.2548"/>
</g>
<!-- MarkLogAsHavingPrepSectionFlushed -->
<g id="node13" class="node">
<title>MarkLogAsHavingPrepSectionFlushed</title>
<polygon fill="none" stroke="#000000" points="363.4519,-579 126.1682,-579 126.1682,-543 363.4519,-543 363.4519,-579"/>
<text text-anchor="middle" x="244.8101" y="-556.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkLogAsHavingPrepSectionFlushed</text>
</g>
<!-- Commit&#45;&gt;MarkLogAsHavingPrepSectionFlushed -->
<g id="edge6" class="edge">
<title>Commit&#45;&gt;MarkLogAsHavingPrepSectionFlushed</title>
<path fill="none" stroke="#b83b5e" d="M71.0766,-616.9768C84.1174,-607.0524 101.4355,-595.3024 118.5449,-588 123.506,-585.8826 128.6499,-583.9247 133.8986,-582.115"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="135.0126,-585.4333 143.4423,-579.0153 132.8502,-578.7756 135.0126,-585.4333"/>
</g>
<!-- PessimisticTransaction_Clear -->
<g id="node14" class="node">
<title>PessimisticTransaction_Clear</title>
<polygon fill="none" stroke="#000000" points="153.4595,-597.2 153.4595,-646.8 336.1606,-646.8 336.1606,-597.2 153.4595,-597.2"/>
<text text-anchor="middle" x="244.8101" y="-631.6" font-family="Times,serif" font-size="14.00" fill="#000000">PessimisticTransaction::Clear</text>
<polyline fill="none" stroke="#000000" points="153.4595,-624.8 336.1606,-624.8 "/>
<text text-anchor="middle" x="244.8101" y="-609.6" font-family="Times,serif" font-size="14.00" fill="#000000">清掉事务hold的key lock</text>
</g>
<!-- Commit&#45;&gt;PessimisticTransaction_Clear -->
<g id="edge7" class="edge">
<title>Commit&#45;&gt;PessimisticTransaction_Clear</title>
<path fill="none" stroke="#b83b5e" d="M80.256,-632.9401C97.5164,-631.7926 120.0963,-630.2914 142.9738,-628.7704"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="143.3876,-632.2507 153.1334,-628.095 142.9232,-625.2661 143.3876,-632.2507"/>
</g>
<!-- CommitInternal&#45;&gt;WriteImpl_Commit -->
<g id="edge27" class="edge">
<title>CommitInternal&#45;&gt;WriteImpl_Commit</title>
<path fill="none" stroke="#b83b5e" d="M297.7937,-830.6571C323.8234,-828.9182 353.3314,-821.8107 371.0752,-801 421.1008,-742.3277 352.6625,-162.6284 407.0752,-108 445.4142,-69.509 597.9999,-74.2384 691.048,-81.1242"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="691.0141,-84.6318 701.2522,-81.9055 691.5486,-77.6522 691.0141,-84.6318"/>
</g>
<!-- CommitInternal&#45;&gt;MarkWalTerminationPoint -->
<g id="edge28" class="edge">
<title>CommitInternal&#45;&gt;MarkWalTerminationPoint</title>
<path fill="none" stroke="#b83b5e" d="M297.7327,-830.6049C323.7457,-828.8517 353.2572,-821.7472 371.0752,-801 459.4018,-698.1529 319.3532,-295.3633 407.0752,-192 411.0689,-187.2942 415.772,-183.3986 420.9382,-180.1831"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="422.8135,-183.1511 430.0265,-175.3907 419.5484,-176.9592 422.8135,-183.1511"/>
</g>
<!-- CommitInternal&#45;&gt;MarkCommit -->
<g id="edge29" class="edge">
<title>CommitInternal&#45;&gt;MarkCommit</title>
<path fill="none" stroke="#b83b5e" d="M297.5441,-830.4411C323.5055,-828.6431 353.0278,-821.5479 371.0752,-801 436.1078,-726.957 343.478,-434.2795 407.0752,-359 419.3999,-344.4113 438.3927,-337.1142 456.9234,-333.6327"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="457.4788,-337.0885 466.8285,-332.1051 456.4118,-330.1703 457.4788,-337.0885"/>
</g>
<!-- CommitInternal&#45;&gt;WriteBatchInternal_Append -->
<g id="edge30" class="edge">
<title>CommitInternal&#45;&gt;WriteBatchInternal_Append</title>
<path fill="none" stroke="#b83b5e" d="M297.6187,-830.5063C323.6005,-828.7262 353.1185,-821.6273 371.0752,-801 443.6368,-717.6468 336.5041,-390.0451 407.0752,-305 422.7989,-286.0513 449.6879,-279.0975 472.4656,-276.8575"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="472.862,-280.3382 482.5868,-276.1338 472.3627,-273.356 472.862,-280.3382"/>
</g>
<!-- GetWriteBatch -->
<g id="node23" class="node">
<title>GetWriteBatch</title>
<polygon fill="none" stroke="#000000" points="563.3932,-658 463.0238,-658 463.0238,-622 563.3932,-622 563.3932,-658"/>
<text text-anchor="middle" x="513.2085" y="-635.8" font-family="Times,serif" font-size="14.00" fill="#000000">GetWriteBatch</text>
</g>
<!-- CommitInternal&#45;&gt;GetWriteBatch -->
<g id="edge31" class="edge">
<title>CommitInternal&#45;&gt;GetWriteBatch</title>
<path fill="none" stroke="#b83b5e" d="M297.7244,-828.964C322.9351,-826.6465 351.7327,-819.5326 371.0752,-801 417.1544,-756.8502 360.8578,-706.0051 407.0752,-662 419.3768,-650.2872 436.1986,-644.0991 452.8234,-640.9959"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="453.743,-644.3967 463.1071,-639.4405 452.6961,-637.4754 453.743,-644.3967"/>
</g>
<!-- GetCommitTimeWriteBatch -->
<g id="node28" class="node">
<title>GetCommitTimeWriteBatch</title>
<polygon fill="none" stroke="#000000" points="600.8492,-792 425.5678,-792 425.5678,-756 600.8492,-756 600.8492,-792"/>
<text text-anchor="middle" x="513.2085" y="-769.8" font-family="Times,serif" font-size="14.00" fill="#000000">GetCommitTimeWriteBatch</text>
</g>
<!-- CommitInternal&#45;&gt;GetCommitTimeWriteBatch -->
<g id="edge32" class="edge">
<title>CommitInternal&#45;&gt;GetCommitTimeWriteBatch</title>
<path fill="none" stroke="#b83b5e" d="M297.837,-817.3313C331.3562,-810.5875 375.6976,-801.6663 415.4306,-793.6723"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="416.3103,-797.0655 425.4235,-791.6618 414.9296,-790.203 416.3103,-797.0655"/>
</g>
<!-- SetId -->
<g id="node29" class="node">
<title>SetId</title>
<polygon fill="none" stroke="#000000" points="540.2085,-846 486.2085,-846 486.2085,-810 540.2085,-810 540.2085,-846"/>
<text text-anchor="middle" x="513.2085" y="-823.8" font-family="Times,serif" font-size="14.00" fill="#000000">SetId</text>
</g>
<!-- CommitInternal&#45;&gt;SetId -->
<g id="edge33" class="edge">
<title>CommitInternal&#45;&gt;SetId</title>
<path fill="none" stroke="#b83b5e" d="M297.837,-828C350.4196,-828 429.6347,-828 475.9124,-828"/>
<polygon fill="#b83b5e" stroke="#b83b5e" points="476.0991,-831.5001 486.099,-828 476.099,-824.5001 476.0991,-831.5001"/>
</g>
<!-- GetTrackedKeys -->
<g id="node19" class="node">
<title>GetTrackedKeys</title>
<polygon fill="none" stroke="#000000" points="432.1118,-500.2 432.1118,-549.8 594.3052,-549.8 594.3052,-500.2 432.1118,-500.2"/>
<text text-anchor="middle" x="513.2085" y="-534.6" font-family="Times,serif" font-size="14.00" fill="#000000">GetTrackedKeys</text>
<polyline fill="none" stroke="#000000" points="432.1118,-527.8 594.3052,-527.8 "/>
<text text-anchor="start" x="440.1118" y="-512.6" font-family="Times,serif" font-size="14.00" fill="#000000">获取事务track的所有key</text>
</g>
<!-- PessimisticTransaction_Clear&#45;&gt;GetTrackedKeys -->
<g id="edge13" class="edge">
<title>PessimisticTransaction_Clear&#45;&gt;GetTrackedKeys</title>
<path fill="none" stroke="#666666" d="M336.1818,-602.2823C348.2136,-598.2844 360.1487,-593.5582 371.0752,-588 389.3877,-578.6846 388.9866,-568.743 407.0752,-559 411.9726,-556.3621 417.1086,-553.8879 422.3678,-551.5739"/>
<polygon fill="#666666" stroke="#666666" points="424.0602,-554.6603 431.9426,-547.5809 421.3658,-548.1996 424.0602,-554.6603"/>
</g>
<!-- PessimisticTransactionDB_Unlock -->
<g id="node20" class="node">
<title>PessimisticTransactionDB_Unlock</title>
<polygon fill="none" stroke="#000000" points="619.4753,-738 406.9417,-738 406.9417,-702 619.4753,-702 619.4753,-738"/>
<text text-anchor="middle" x="513.2085" y="-715.8" font-family="Times,serif" font-size="14.00" fill="#000000">PessimisticTransactionDB_Unlock</text>
</g>
<!-- PessimisticTransaction_Clear&#45;&gt;PessimisticTransactionDB_Unlock -->
<g id="edge14" class="edge">
<title>PessimisticTransaction_Clear&#45;&gt;PessimisticTransactionDB_Unlock</title>
<path fill="none" stroke="#666666" d="M336.1647,-640.4309C348.3889,-644.8449 360.3808,-650.2904 371.0752,-657 389.2898,-668.4278 387.0309,-682.2314 406.1495,-696.5048"/>
<polygon fill="#666666" stroke="#666666" points="404.3168,-699.4878 414.6109,-701.9942 408.1266,-693.6154 404.3168,-699.4878"/>
</g>
<!-- TransactionBaseImpl_Clear -->
<g id="node21" class="node">
<title>TransactionBaseImpl_Clear</title>
<polygon fill="none" stroke="#000000" points="599.2793,-604 427.1376,-604 427.1376,-568 599.2793,-568 599.2793,-604"/>
<text text-anchor="middle" x="513.2085" y="-581.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionBaseImpl_Clear</text>
</g>
<!-- PessimisticTransaction_Clear&#45;&gt;TransactionBaseImpl_Clear -->
<g id="edge15" class="edge">
<title>PessimisticTransaction_Clear&#45;&gt;TransactionBaseImpl_Clear</title>
<path fill="none" stroke="#666666" d="M336.4269,-609.7115C362.4159,-606.2256 390.782,-602.4209 417.0324,-598.9"/>
<polygon fill="#666666" stroke="#666666" points="417.5342,-602.3641 426.9802,-597.5657 416.6036,-595.4263 417.5342,-602.3641"/>
</g>
<!-- Prepare -->
<g id="node15" class="node">
<title>Prepare</title>
<polygon fill="none" stroke="#000000" points="78.5249,-837 20.02,-837 20.02,-801 78.5249,-801 78.5249,-837"/>
<text text-anchor="middle" x="49.2725" y="-814.8" font-family="Times,serif" font-size="14.00" fill="#000000">Prepare</text>
</g>
<!-- Prepare&#45;&gt;txn_state_ -->
<g id="edge8" class="edge">
<title>Prepare&#45;&gt;txn_state_</title>
<path fill="none" stroke="#3f72af" d="M61.8487,-800.7961C74.406,-783.8794 95.1628,-759.0896 118.5449,-744 119.0605,-743.6673 119.579,-743.3369 120.1003,-743.0089"/>
<polygon fill="#3f72af" stroke="#3f72af" points="121.9309,-745.9927 128.7698,-737.9006 118.3773,-739.9617 121.9309,-745.9927"/>
</g>
<!-- PrepareInternal -->
<g id="node16" class="node">
<title>PrepareInternal</title>
<polygon fill="none" stroke="#000000" points="296.0937,-900 193.5265,-900 193.5265,-864 296.0937,-864 296.0937,-900"/>
<text text-anchor="middle" x="244.8101" y="-877.8" font-family="Times,serif" font-size="14.00" fill="#000000">PrepareInternal</text>
</g>
<!-- Prepare&#45;&gt;PrepareInternal -->
<g id="edge9" class="edge">
<title>Prepare&#45;&gt;PrepareInternal</title>
<path fill="none" stroke="#3f72af" d="M78.8249,-836.591C90.8241,-843.1345 105.0246,-850.1416 118.5449,-855 139.2124,-862.4266 162.5531,-868.1232 183.4943,-872.3263"/>
<polygon fill="#3f72af" stroke="#3f72af" points="183.0772,-875.8103 193.5595,-874.2707 184.4049,-868.9374 183.0772,-875.8103"/>
</g>
<!-- PrepareInternal&#45;&gt;WriteImpl_Prepare -->
<g id="edge34" class="edge">
<title>PrepareInternal&#45;&gt;WriteImpl_Prepare</title>
<path fill="none" stroke="#3f72af" d="M296.2126,-884.7697C322.628,-883.2199 352.9862,-876.2529 371.0752,-855 422.776,-794.2563 349.2745,-192.9714 407.0752,-138 446.5996,-100.4103 600.2983,-116.2914 692.8703,-129.9604"/>
<polygon fill="#3f72af" stroke="#3f72af" points="692.605,-133.4598 703.0142,-131.4854 693.6457,-126.5376 692.605,-133.4598"/>
</g>
<!-- PrepareInternal&#45;&gt;MarkEndPrepare -->
<g id="edge35" class="edge">
<title>PrepareInternal&#45;&gt;MarkEndPrepare</title>
<path fill="none" stroke="#3f72af" d="M296.1332,-884.4039C322.3573,-882.7153 352.5601,-875.7326 371.0752,-855 425.6594,-793.8782 371.3192,-561.7348 407.0752,-488 422.6358,-455.9115 452.7685,-428.498 476.9629,-410.1975"/>
<polygon fill="#3f72af" stroke="#3f72af" points="479.2564,-412.8555 485.2395,-404.1117 475.1096,-407.2159 479.2564,-412.8555"/>
</g>
<!-- PrepareInternal&#45;&gt;GetWriteBatch -->
<g id="edge36" class="edge">
<title>PrepareInternal&#45;&gt;GetWriteBatch</title>
<path fill="none" stroke="#3f72af" d="M296.0613,-883.7024C321.9363,-881.7554 351.8361,-874.7509 371.0752,-855 431.9602,-792.4952 345.9945,-724.3136 407.0752,-662 419.0199,-649.8142 435.8192,-643.5008 452.5351,-640.4287"/>
<polygon fill="#3f72af" stroke="#3f72af" points="453.5015,-643.8246 462.8882,-638.9112 452.4863,-636.8986 453.5015,-643.8246"/>
</g>
<!-- MarkLogCallback -->
<g id="node30" class="node">
<title>MarkLogCallback</title>
<polygon fill="none" stroke="#000000" points="572.3438,-900 454.0732,-900 454.0732,-864 572.3438,-864 572.3438,-900"/>
<text text-anchor="middle" x="513.2085" y="-877.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkLogCallback</text>
</g>
<!-- PrepareInternal&#45;&gt;MarkLogCallback -->
<g id="edge37" class="edge">
<title>PrepareInternal&#45;&gt;MarkLogCallback</title>
<path fill="none" stroke="#3f72af" d="M296.2424,-882C338.13,-882 397.6677,-882 443.7819,-882"/>
<polygon fill="#3f72af" stroke="#3f72af" points="444.0011,-885.5001 454.001,-882 444.001,-878.5001 444.0011,-885.5001"/>
</g>
<!-- two_write_queues -->
<g id="node31" class="node">
<title>two_write_queues</title>
<polygon fill="none" stroke="#000000" points="572.3506,-954 454.0664,-954 454.0664,-918 572.3506,-918 572.3506,-954"/>
<text text-anchor="middle" x="513.2085" y="-931.8" font-family="Times,serif" font-size="14.00" fill="#000000">two_write_queues</text>
</g>
<!-- PrepareInternal&#45;&gt;two_write_queues -->
<g id="edge38" class="edge">
<title>PrepareInternal&#45;&gt;two_write_queues</title>
<path fill="none" stroke="#3f72af" d="M296.2424,-892.3478C338.218,-900.7931 397.9179,-912.8043 444.0724,-922.0903"/>
<polygon fill="#3f72af" stroke="#3f72af" points="443.5071,-925.5466 454.001,-924.0878 444.8879,-918.6841 443.5071,-925.5466"/>
</g>
<!-- Rollback -->
<g id="node17" class="node">
<title>Rollback</title>
<polygon fill="none" stroke="#000000" points="82.3189,-720 16.226,-720 16.226,-684 82.3189,-684 82.3189,-720"/>
<text text-anchor="middle" x="49.2725" y="-697.8" font-family="Times,serif" font-size="14.00" fill="#000000">Rollback</text>
</g>
<!-- Rollback&#45;&gt;txn_state_ -->
<g id="edge10" class="edge">
<title>Rollback&#45;&gt;txn_state_</title>
<path fill="none" stroke="#17b978" d="M82.4427,-702C90.1245,-702 98.7692,-702 107.9661,-702"/>
<polygon fill="#17b978" stroke="#17b978" points="108.143,-705.5001 118.1429,-702 108.1429,-698.5001 108.143,-705.5001"/>
</g>
<!-- Rollback&#45;&gt;PessimisticTransaction_Clear -->
<g id="edge11" class="edge">
<title>Rollback&#45;&gt;PessimisticTransaction_Clear</title>
<path fill="none" stroke="#17b978" d="M73.23,-683.8259C86.1122,-674.7431 102.5925,-664.1862 118.5449,-657 126.5316,-653.4022 134.9724,-650.0948 143.5502,-647.0719"/>
<polygon fill="#17b978" stroke="#17b978" points="144.9262,-650.3013 153.2759,-643.7795 142.6816,-643.6709 144.9262,-650.3013"/>
</g>
<!-- RollbackInternal -->
<g id="node18" class="node">
<title>RollbackInternal</title>
<polygon fill="none" stroke="#000000" points="299.8863,-792 189.7339,-792 189.7339,-756 299.8863,-756 299.8863,-792"/>
<text text-anchor="middle" x="244.8101" y="-769.8" font-family="Times,serif" font-size="14.00" fill="#000000">RollbackInternal</text>
</g>
<!-- Rollback&#45;&gt;RollbackInternal -->
<g id="edge12" class="edge">
<title>Rollback&#45;&gt;RollbackInternal</title>
<path fill="none" stroke="#17b978" d="M69.291,-720.2303C82.3793,-731.1426 100.3668,-744.339 118.5449,-752 137.5771,-760.0209 159.4068,-765.1176 179.5035,-768.3561"/>
<polygon fill="#17b978" stroke="#17b978" points="179.1135,-771.8365 189.5192,-769.8436 180.1419,-764.9125 179.1135,-771.8365"/>
</g>
<!-- RollbackInternal&#45;&gt;WriteImpl_Rollback_Marker -->
<g id="edge40" class="edge">
<title>RollbackInternal&#45;&gt;WriteImpl_Rollback_Marker</title>
<path fill="none" stroke="#17b978" d="M300.1369,-778.8374C325.464,-777.8515 353.6519,-771.6427 371.0752,-752 471.4897,-638.7944 302.944,-181.7964 407.0752,-72 474.006,-1.4279 591.8951,-2.6634 673.9597,-14.4526"/>
<polygon fill="#17b978" stroke="#17b978" points="673.6235,-17.9415 684.0349,-15.9784 674.6717,-11.0205 673.6235,-17.9415"/>
</g>
<!-- RollbackInternal&#45;&gt;MarkRollback -->
<g id="edge41" class="edge">
<title>RollbackInternal&#45;&gt;MarkRollback</title>
<path fill="none" stroke="#17b978" d="M299.9775,-778.6946C325.2669,-777.6749 353.4691,-771.4789 371.0752,-752 446.0701,-669.0277 335.6921,-336.0993 407.0752,-250 418.8768,-235.7654 436.9795,-228.2988 454.9113,-224.5148"/>
<polygon fill="#17b978" stroke="#17b978" points="455.5727,-227.9523 464.8147,-222.7718 454.3593,-221.0582 455.5727,-227.9523"/>
</g>
<!-- tracked_keys_ -->
<g id="node25" class="node">
<title>tracked_keys_</title>
<polygon fill="#95e1d3" stroke="#000000" points="655.3418,-564 655.3418,-608 874.1709,-608 874.1709,-564 655.3418,-564"/>
<text text-anchor="middle" x="764.7563" y="-592.8" font-family="Times,serif" font-size="14.00" fill="#000000">tracked_keys_</text>
<polyline fill="none" stroke="#000000" points="655.3418,-586 874.1709,-586 "/>
<text text-anchor="start" x="663.3418" y="-570.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionKeyMap tracked_keys_;</text>
</g>
<!-- GetTrackedKeys&#45;&gt;tracked_keys_ -->
<g id="edge24" class="edge">
<title>GetTrackedKeys&#45;&gt;tracked_keys_</title>
<path fill="none" stroke="#666666" d="M594.5315,-544.7207C616.6369,-550.0812 640.8447,-555.9516 663.8902,-561.5401"/>
<polygon fill="#666666" stroke="#666666" points="663.143,-564.9603 673.6862,-563.9156 664.7927,-558.1574 663.143,-564.9603"/>
</g>
<!-- TransactionLockMgr_Unlock -->
<g id="node22" class="node">
<title>TransactionLockMgr_Unlock</title>
<polygon fill="none" stroke="#000000" points="855.9441,-738 673.5686,-738 673.5686,-702 855.9441,-702 855.9441,-738"/>
<text text-anchor="middle" x="764.7563" y="-715.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionLockMgr_Unlock</text>
</g>
<!-- PessimisticTransactionDB_Unlock&#45;&gt;TransactionLockMgr_Unlock -->
<g id="edge16" class="edge">
<title>PessimisticTransactionDB_Unlock&#45;&gt;TransactionLockMgr_Unlock</title>
<path fill="none" stroke="#666666" d="M619.5228,-720C633.9813,-720 648.7914,-720 663.1637,-720"/>
<polygon fill="#666666" stroke="#666666" points="663.5403,-723.5001 673.5403,-720 663.5402,-716.5001 663.5403,-723.5001"/>
</g>
<!-- GetWriteBatch&#45;&gt;write_batch_ -->
<g id="edge17" class="edge">
<title>GetWriteBatch&#45;&gt;write_batch_</title>
<path fill="none" stroke="#666666" d="M563.3453,-635.267C582.2906,-631.5222 603.1601,-624.8531 619.3418,-613 643.8175,-595.0715 631.1874,-573.3591 655.3418,-555 664.299,-548.1919 674.6735,-542.8294 685.3941,-538.6063"/>
<polygon fill="#666666" stroke="#666666" points="686.6614,-541.87 694.8774,-535.1807 684.2831,-535.2863 686.6614,-541.87"/>
</g>
<!-- write_batch_&#45;&gt;WriteImpl -->
<g id="edge18" class="edge">
<title>write_batch_&#45;&gt;WriteImpl</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M782.3801,-500.7744C837.7375,-430.9625 1007.9807,-216.2664 1067.487,-141.2221"/>
<polygon fill="#0000ff" stroke="#0000ff" points="1070.3899,-143.1944 1073.8607,-133.1842 1064.905,-138.8451 1070.3899,-143.1944"/>
</g>
<!-- TransactionKeyMap -->
<g id="node26" class="node">
<title>TransactionKeyMap</title>
<polygon fill="none" stroke="#000000" points="910.1709,-553 910.1709,-619 1266.3887,-619 1266.3887,-553 910.1709,-553"/>
<text text-anchor="middle" x="1088.2798" y="-603.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionKeyMap</text>
<polyline fill="none" stroke="#000000" points="910.1709,-597 1266.3887,-597 "/>
<text text-anchor="start" x="918.1709" y="-581.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::unordered_map&lt;uint32_t,</text>
<polyline fill="none" stroke="#000000" points="910.1709,-575 1266.3887,-575 "/>
<text text-anchor="middle" x="1088.2798" y="-559.8" font-family="Times,serif" font-size="14.00" fill="#000000">std::unordered_map&lt;std::string, TransactionKeyMapInfo&gt;&gt;;</text>
</g>
<!-- tracked_keys_&#45;&gt;TransactionKeyMap -->
<g id="edge25" class="edge">
<title>tracked_keys_&#45;&gt;TransactionKeyMap</title>
<path fill="none" stroke="#666666" d="M874.2866,-586C882.6532,-586 891.2286,-586 899.9091,-586"/>
<polygon fill="#666666" stroke="#666666" points="900.1413,-589.5001 910.1413,-586 900.1412,-582.5001 900.1413,-589.5001"/>
</g>
<!-- TransactionKeyMapInfo -->
<g id="node27" class="node">
<title>TransactionKeyMapInfo</title>
<polygon fill="none" stroke="#000000" points="1302.3887,-531 1302.3887,-641 1456.2969,-641 1456.2969,-531 1302.3887,-531"/>
<text text-anchor="middle" x="1379.3428" y="-625.8" font-family="Times,serif" font-size="14.00" fill="#000000">TransactionKeyMapInfo</text>
<polyline fill="none" stroke="#000000" points="1302.3887,-619 1456.2969,-619 "/>
<text text-anchor="start" x="1310.3887" y="-603.8" font-family="Times,serif" font-size="14.00" fill="#000000">SequenceNumber seq;</text>
<polyline fill="none" stroke="#000000" points="1302.3887,-597 1456.2969,-597 "/>
<text text-anchor="start" x="1310.3887" y="-581.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint32_t num_writes;</text>
<polyline fill="none" stroke="#000000" points="1302.3887,-575 1456.2969,-575 "/>
<text text-anchor="start" x="1310.3887" y="-559.8" font-family="Times,serif" font-size="14.00" fill="#000000">uint32_t num_reads;</text>
<polyline fill="none" stroke="#000000" points="1302.3887,-553 1456.2969,-553 "/>
<text text-anchor="start" x="1310.3887" y="-537.8" font-family="Times,serif" font-size="14.00" fill="#000000">bool exclusive;</text>
</g>
<!-- TransactionKeyMap&#45;&gt;TransactionKeyMapInfo -->
<g id="edge26" class="edge">
<title>TransactionKeyMap&#45;&gt;TransactionKeyMapInfo</title>
<path fill="none" stroke="#666666" d="M1266.3936,-586C1275.2033,-586 1283.8451,-586 1292.1807,-586"/>
<polygon fill="#666666" stroke="#666666" points="1292.1872,-589.5001 1302.1871,-586 1292.1871,-582.5001 1292.1872,-589.5001"/>
</g>
<!-- MarkLogAsContainingPrepSection -->
<g id="node32" class="node">
<title>MarkLogAsContainingPrepSection</title>
<polygon fill="none" stroke="#000000" points="872.0671,-900 657.4456,-900 657.4456,-864 872.0671,-864 872.0671,-900"/>
<text text-anchor="middle" x="764.7563" y="-877.8" font-family="Times,serif" font-size="14.00" fill="#000000">MarkLogAsContainingPrepSection</text>
</g>
<!-- MarkLogCallback&#45;&gt;MarkLogAsContainingPrepSection -->
<g id="edge39" class="edge">
<title>MarkLogCallback&#45;&gt;MarkLogAsContainingPrepSection</title>
<path fill="none" stroke="#666666" d="M572.5033,-882C594.9434,-882 621.3457,-882 647.2758,-882"/>
<polygon fill="#666666" stroke="#666666" points="647.5666,-885.5001 657.5666,-882 647.5665,-878.5001 647.5666,-885.5001"/>
</g>
</g>
</svg>
