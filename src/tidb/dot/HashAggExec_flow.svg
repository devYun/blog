<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: HashAggExec_Flow Pages: 1 -->
<svg width="2695pt" height="807pt"
 viewBox="0.00 0.00 2695.00 806.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 802.5)">
<title>HashAggExec_Flow</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-802.5 2691,-802.5 2691,4 -4,4"/>
<!-- af_UpdatePartialResult -->
<g id="node1" class="node">
<title>af_UpdatePartialResult</title>
<polygon fill="#23689b" stroke="black" points="1234.5,-436 1234.5,-482 1359.5,-482 1359.5,-436 1234.5,-436"/>
<text text-anchor="middle" x="1297" y="-466.8" font-family="Times,serif" font-size="14.00" fill="white">UpdatePartialResult</text>
<polyline fill="none" stroke="black" points="1234.5,-459 1359.5,-459 "/>
<text text-anchor="start" x="1242.5" y="-443.8" font-family="Times,serif" font-size="14.00" fill="white">AggFunc接口函数</text>
</g>
<!-- AllocPartialResult -->
<g id="node2" class="node">
<title>AllocPartialResult</title>
<polygon fill="#23689b" stroke="black" points="1753.5,-405 1753.5,-451 1877.5,-451 1877.5,-405 1753.5,-405"/>
<text text-anchor="middle" x="1815.5" y="-435.8" font-family="Times,serif" font-size="14.00" fill="white">AllocPartialResult</text>
<polyline fill="none" stroke="black" points="1753.5,-428 1877.5,-428 "/>
<text text-anchor="start" x="1761.5" y="-412.8" font-family="Times,serif" font-size="14.00" fill="white">AggFunc接口函数</text>
</g>
<!-- MergePartialResult -->
<g id="node3" class="node">
<title>MergePartialResult</title>
<polygon fill="#23689b" stroke="black" points="1487,-261 1487,-307 1611,-307 1611,-261 1487,-261"/>
<text text-anchor="middle" x="1549" y="-291.8" font-family="Times,serif" font-size="14.00" fill="white">MergePartialResult</text>
<polyline fill="none" stroke="black" points="1487,-284 1611,-284 "/>
<text text-anchor="start" x="1495" y="-268.8" font-family="Times,serif" font-size="14.00" fill="white">AggFunc接口函数</text>
</g>
<!-- AppendFinalResult2Chunk -->
<g id="node4" class="node">
<title>AppendFinalResult2Chunk</title>
<polygon fill="#23689b" stroke="black" points="1467,-157 1467,-203 1631,-203 1631,-157 1467,-157"/>
<text text-anchor="middle" x="1549" y="-187.8" font-family="Times,serif" font-size="14.00" fill="white">AppendFinalResult2Chunk</text>
<polyline fill="none" stroke="black" points="1467,-180 1631,-180 "/>
<text text-anchor="start" x="1475" y="-164.8" font-family="Times,serif" font-size="14.00" fill="white">AggFunc接口函数</text>
</g>
<!-- Next -->
<g id="node5" class="node">
<title>Next</title>
<polygon fill="none" stroke="black" points="54,-129 0,-129 0,-93 54,-93 54,-129"/>
<text text-anchor="middle" x="27" y="-107.3" font-family="Times,serif" font-size="14.00">Next</text>
</g>
<!-- parallelExec -->
<g id="node6" class="node">
<title>parallelExec</title>
<polygon fill="none" stroke="black" points="175,-129 91,-129 91,-93 175,-93 175,-129"/>
<text text-anchor="middle" x="133" y="-107.3" font-family="Times,serif" font-size="14.00">parallelExec</text>
</g>
<!-- Next&#45;&gt;parallelExec -->
<g id="edge1" class="edge">
<title>Next&#45;&gt;parallelExec</title>
<path fill="none" stroke="#666666" d="M54.24,-111C62.29,-111 71.43,-111 80.55,-111"/>
<polygon fill="#666666" stroke="#666666" points="80.78,-114.5 90.78,-111 80.78,-107.5 80.78,-114.5"/>
</g>
<!-- prepare4ParallelExec -->
<g id="node7" class="node">
<title>prepare4ParallelExec</title>
<polygon fill="none" stroke="black" points="212,-398 212,-474 431,-474 431,-398 212,-398"/>
<text text-anchor="middle" x="321.5" y="-458.8" font-family="Times,serif" font-size="14.00">prepare4ParallelExec</text>
<polyline fill="none" stroke="black" points="212,-451 431,-451 "/>
<text text-anchor="start" x="220" y="-435.8" font-family="Times,serif" font-size="14.00">启动多个paritalWorker go routine</text>
<text text-anchor="start" x="220" y="-420.8" font-family="Times,serif" font-size="14.00"> 启动多个finalWorkers go routine</text>
<text text-anchor="start" x="220" y="-405.8" font-family="Times,serif" font-size="14.00"> 启动一个fetchChildData go routine</text>
</g>
<!-- parallelExec&#45;&gt;prepare4ParallelExec -->
<g id="edge2" class="edge">
<title>parallelExec&#45;&gt;prepare4ParallelExec</title>
<path fill="none" stroke="#666666" d="M144.56,-129.4C172.94,-178.85 251.51,-315.77 293.39,-388.76"/>
<polygon fill="#666666" stroke="#666666" points="290.54,-390.83 298.56,-397.76 296.62,-387.35 290.54,-390.83"/>
</g>
<!-- finalOutputCh -->
<g id="node8" class="node">
<title>finalOutputCh</title>
<polygon fill="#95e1d3" stroke="black" points="1444,-0.5 1444,-137.5 1654,-137.5 1654,-0.5 1444,-0.5"/>
<text text-anchor="middle" x="1549" y="-122.3" font-family="Times,serif" font-size="14.00">finalOutputCh</text>
<polyline fill="none" stroke="black" points="1444,-114.5 1654,-114.5 "/>
<text text-anchor="start" x="1452" y="-99.3" font-family="Times,serif" font-size="14.00">finalOutputCh chan *AfFinalResult</text>
<polyline fill="none" stroke="black" points="1444,-91.5 1654,-91.5 "/>
<text text-anchor="start" x="1452" y="-76.3" font-family="Times,serif" font-size="14.00">用于finalWorker和main thread</text>
<text text-anchor="start" x="1452" y="-61.3" font-family="Times,serif" font-size="14.00"> 之间数据同步</text>
<polyline fill="none" stroke="black" points="1444,-53.5 1654,-53.5 "/>
<text text-anchor="start" x="1452" y="-38.3" font-family="Times,serif" font-size="14.00">main读完数据后</text>
<text text-anchor="start" x="1452" y="-23.3" font-family="Times,serif" font-size="14.00"> 将chunk放回giveBackCh</text>
<text text-anchor="start" x="1452" y="-8.3" font-family="Times,serif" font-size="14.00"> 用于数据复用</text>
</g>
<!-- parallelExec&#45;&gt;finalOutputCh -->
<g id="edge3" class="edge">
<title>parallelExec&#45;&gt;finalOutputCh</title>
<path fill="none" stroke="#666666" d="M175.06,-106.84C212.82,-103.37 270.37,-99 320.5,-99 320.5,-99 320.5,-99 1298,-99 1342.52,-99 1391.18,-94.25 1433.64,-88.54"/>
<polygon fill="#666666" stroke="#666666" points="1434.3,-91.98 1443.73,-87.14 1433.34,-85.04 1434.3,-91.98"/>
</g>
<!-- HashAggPartialWorker_run -->
<g id="node9" class="node">
<title>HashAggPartialWorker_run</title>
<polygon fill="#ff577f" stroke="black" points="523,-445 523,-481 688,-481 688,-445 523,-445"/>
<text text-anchor="middle" x="605.5" y="-459.3" font-family="Times,serif" font-size="14.00">HashAggPartialWorker.run</text>
</g>
<!-- prepare4ParallelExec&#45;&gt;HashAggPartialWorker_run -->
<g id="edge4" class="edge">
<title>prepare4ParallelExec&#45;&gt;HashAggPartialWorker_run</title>
<path fill="none" stroke="#666666" d="M431.13,-446.4C457.97,-448.97 486.47,-451.7 512.45,-454.19"/>
<polygon fill="#666666" stroke="#666666" points="512.36,-457.69 522.65,-455.16 513.03,-450.73 512.36,-457.69"/>
<text text-anchor="middle" x="477" y="-456.8" font-family="Times,serif" font-size="14.00">go routine</text>
</g>
<!-- HashAggFinalWorker_run -->
<g id="node10" class="node">
<title>HashAggFinalWorker_run</title>
<polygon fill="#ff577f" stroke="black" points="982,-242 982,-278 1140,-278 1140,-242 982,-242"/>
<text text-anchor="middle" x="1061" y="-256.3" font-family="Times,serif" font-size="14.00">HashAggFinalWorker.run</text>
</g>
<!-- prepare4ParallelExec&#45;&gt;HashAggFinalWorker_run -->
<g id="edge5" class="edge">
<title>prepare4ParallelExec&#45;&gt;HashAggFinalWorker_run</title>
<path fill="none" stroke="#666666" d="M431.32,-410.03C579.08,-374.77 840.13,-312.47 974.62,-280.38"/>
<polygon fill="#666666" stroke="#666666" points="975.56,-283.75 984.48,-278.02 973.94,-276.94 975.56,-283.75"/>
<text text-anchor="middle" x="734" y="-348.8" font-family="Times,serif" font-size="14.00">go routine</text>
</g>
<!-- fetchChildData -->
<g id="node11" class="node">
<title>fetchChildData</title>
<polygon fill="#ff577f" stroke="black" points="1247.5,-696 1247.5,-732 1346.5,-732 1346.5,-696 1247.5,-696"/>
<text text-anchor="middle" x="1297" y="-710.3" font-family="Times,serif" font-size="14.00">fetchChildData</text>
</g>
<!-- prepare4ParallelExec&#45;&gt;fetchChildData -->
<g id="edge6" class="edge">
<title>prepare4ParallelExec&#45;&gt;fetchChildData</title>
<path fill="none" stroke="#666666" d="M339.19,-474.21C375.45,-550.62 469.17,-715 604.5,-715 604.5,-715 604.5,-715 1062,-715 1121.61,-715 1189.76,-714.67 1237.08,-714.39"/>
<polygon fill="#666666" stroke="#666666" points="1237.17,-717.89 1247.15,-714.33 1237.13,-710.89 1237.17,-717.89"/>
<text text-anchor="middle" x="849" y="-718.8" font-family="Times,serif" font-size="14.00">go routine</text>
</g>
<!-- AfFinalResult -->
<g id="node24" class="node">
<title>AfFinalResult</title>
<polygon fill="none" stroke="black" points="1717.5,-23 1717.5,-115 1913.5,-115 1913.5,-23 1717.5,-23"/>
<text text-anchor="middle" x="1815.5" y="-99.8" font-family="Times,serif" font-size="14.00">AfFinalResult</text>
<polyline fill="none" stroke="black" points="1717.5,-92 1913.5,-92 "/>
<text text-anchor="start" x="1725.5" y="-76.8" font-family="Times,serif" font-size="14.00">chk *chunk.Chunk</text>
<polyline fill="none" stroke="black" points="1717.5,-69 1913.5,-69 "/>
<text text-anchor="start" x="1725.5" y="-53.8" font-family="Times,serif" font-size="14.00">err error</text>
<polyline fill="none" stroke="black" points="1717.5,-46 1913.5,-46 "/>
<text text-anchor="start" x="1725.5" y="-30.8" font-family="Times,serif" font-size="14.00">giveBackCh chan *chunk.Chunk</text>
</g>
<!-- finalOutputCh&#45;&gt;AfFinalResult -->
<g id="edge25" class="edge">
<title>finalOutputCh&#45;&gt;AfFinalResult</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1654.16,-69C1671.56,-69 1689.64,-69 1707.12,-69"/>
<polygon fill="blue" stroke="blue" points="1707.34,-72.5 1717.34,-69 1707.34,-65.5 1707.34,-72.5"/>
</g>
<!-- shuffleIntermData -->
<g id="node16" class="node">
<title>shuffleIntermData</title>
<polygon fill="none" stroke="black" points="1960,-298 1960,-374 2191,-374 2191,-298 1960,-298"/>
<text text-anchor="middle" x="2075.5" y="-358.8" font-family="Times,serif" font-size="14.00">shuffleIntermData</text>
<polyline fill="none" stroke="black" points="1960,-351 2191,-351 "/>
<text text-anchor="start" x="1968" y="-335.8" font-family="Times,serif" font-size="14.00">遍历partialResultsMap</text>
<text text-anchor="start" x="1968" y="-320.8" font-family="Times,serif" font-size="14.00"> 将groupkeys分为FinalConcurrency组</text>
<text text-anchor="start" x="1968" y="-305.8" font-family="Times,serif" font-size="14.00"> 发送到输出的ch</text>
</g>
<!-- HashAggPartialWorker_run&#45;&gt;shuffleIntermData -->
<g id="edge16" class="edge">
<title>HashAggPartialWorker_run&#45;&gt;shuffleIntermData</title>
<path fill="none" stroke="#666666" d="M688.16,-474.2C694.19,-474.87 700.19,-475.48 706,-476 1017.13,-504.04 1095.61,-511 1408,-511 1408,-511 1408,-511 1816.5,-511 1908.39,-511 1991.88,-434.02 2037.69,-382.18"/>
<polygon fill="#666666" stroke="#666666" points="2040.53,-384.25 2044.44,-374.4 2035.24,-379.66 2040.53,-384.25"/>
</g>
<!-- getChildInput -->
<g id="node18" class="node">
<title>getChildInput</title>
<polygon fill="none" stroke="black" points="780,-537.5 780,-666.5 918,-666.5 918,-537.5 780,-537.5"/>
<text text-anchor="middle" x="849" y="-651.3" font-family="Times,serif" font-size="14.00">getChildInput</text>
<polyline fill="none" stroke="black" points="780,-643.5 918,-643.5 "/>
<text text-anchor="start" x="788" y="-628.3" font-family="Times,serif" font-size="14.00">从worker 绑定的</text>
<text text-anchor="start" x="788" y="-613.3" font-family="Times,serif" font-size="14.00"> partialInputChs</text>
<text text-anchor="start" x="788" y="-598.3" font-family="Times,serif" font-size="14.00"> 中获取数据,完毕后</text>
<polyline fill="none" stroke="black" points="780,-590.5 918,-590.5 "/>
<text text-anchor="start" x="788" y="-575.3" font-family="Times,serif" font-size="14.00">再放回到inputCh中</text>
<text text-anchor="start" x="788" y="-560.3" font-family="Times,serif" font-size="14.00"> 这样fetchChildData</text>
<text text-anchor="start" x="788" y="-545.3" font-family="Times,serif" font-size="14.00"> 可以接着去取数据</text>
</g>
<!-- HashAggPartialWorker_run&#45;&gt;getChildInput -->
<g id="edge17" class="edge">
<title>HashAggPartialWorker_run&#45;&gt;getChildInput</title>
<path fill="none" stroke="#666666" d="M635.95,-481.12C655.67,-493.17 682.26,-509.25 706,-523 726.93,-535.13 749.77,-548 770.9,-559.75"/>
<polygon fill="#666666" stroke="#666666" points="769.39,-562.91 779.83,-564.71 772.79,-556.79 769.39,-562.91"/>
</g>
<!-- updatePartialResult -->
<g id="node19" class="node">
<title>updatePartialResult</title>
<polygon fill="none" stroke="black" points="1122,-477 1000,-477 1000,-441 1122,-441 1122,-477"/>
<text text-anchor="middle" x="1061" y="-455.3" font-family="Times,serif" font-size="14.00">updatePartialResult</text>
</g>
<!-- HashAggPartialWorker_run&#45;&gt;updatePartialResult -->
<g id="edge18" class="edge">
<title>HashAggPartialWorker_run&#45;&gt;updatePartialResult</title>
<path fill="none" stroke="#666666" d="M688.1,-462.28C774.06,-461.52 908.03,-460.34 989.54,-459.62"/>
<polygon fill="#666666" stroke="#666666" points="989.73,-463.12 999.7,-459.53 989.67,-456.12 989.73,-463.12"/>
</g>
<!-- getFinalResult -->
<g id="node14" class="node">
<title>getFinalResult</title>
<polygon fill="none" stroke="black" points="1213.5,-157 1213.5,-203 1380.5,-203 1380.5,-157 1213.5,-157"/>
<text text-anchor="middle" x="1297" y="-187.8" font-family="Times,serif" font-size="14.00">getFinalResult</text>
<polyline fill="none" stroke="black" points="1213.5,-180 1380.5,-180 "/>
<text text-anchor="start" x="1221.5" y="-164.8" font-family="Times,serif" font-size="14.00">将最终结果写入outputCh</text>
</g>
<!-- HashAggFinalWorker_run&#45;&gt;getFinalResult -->
<g id="edge7" class="edge">
<title>HashAggFinalWorker_run&#45;&gt;getFinalResult</title>
<path fill="none" stroke="#666666" d="M1114.81,-241.95C1145.61,-231.42 1185.01,-217.95 1219.2,-206.26"/>
<polygon fill="#666666" stroke="#666666" points="1220.36,-209.56 1228.69,-203.01 1218.1,-202.93 1220.36,-209.56"/>
</g>
<!-- consumeIntermData -->
<g id="node15" class="node">
<title>consumeIntermData</title>
<polygon fill="none" stroke="black" points="1232,-222 1232,-298 1362,-298 1362,-222 1232,-222"/>
<text text-anchor="middle" x="1297" y="-282.8" font-family="Times,serif" font-size="14.00">consumeIntermData</text>
<polyline fill="none" stroke="black" points="1232,-275 1362,-275 "/>
<text text-anchor="start" x="1240" y="-259.8" font-family="Times,serif" font-size="14.00">调用MergeResult将</text>
<text text-anchor="start" x="1240" y="-244.8" font-family="Times,serif" font-size="14.00"> partialWorker输出</text>
<text text-anchor="start" x="1240" y="-229.8" font-family="Times,serif" font-size="14.00"> 中间结果merge</text>
</g>
<!-- HashAggFinalWorker_run&#45;&gt;consumeIntermData -->
<g id="edge8" class="edge">
<title>HashAggFinalWorker_run&#45;&gt;consumeIntermData</title>
<path fill="none" stroke="#666666" d="M1140.24,-260C1166.52,-260 1195.73,-260 1221.69,-260"/>
<polygon fill="#666666" stroke="#666666" points="1221.85,-263.5 1231.85,-260 1221.85,-256.5 1221.85,-263.5"/>
</g>
<!-- Next_children -->
<g id="node17" class="node">
<title>Next_children</title>
<polygon fill="none" stroke="black" points="1488,-722 1488,-798 1610,-798 1610,-722 1488,-722"/>
<text text-anchor="middle" x="1549" y="-782.8" font-family="Times,serif" font-size="14.00">Next_children</text>
<polyline fill="none" stroke="black" points="1488,-775 1610,-775 "/>
<text text-anchor="start" x="1496" y="-759.8" font-family="Times,serif" font-size="14.00">从child executor中</text>
<text text-anchor="start" x="1496" y="-744.8" font-family="Times,serif" font-size="14.00"> 读取数据</text>
<text text-anchor="start" x="1496" y="-729.8" font-family="Times,serif" font-size="14.00"> 然后放入ch中</text>
</g>
<!-- fetchChildData&#45;&gt;Next_children -->
<g id="edge15" class="edge">
<title>fetchChildData&#45;&gt;Next_children</title>
<path fill="none" stroke="#666666" d="M1346.8,-722.98C1384.16,-729.85 1436.2,-739.43 1478,-747.12"/>
<polygon fill="#666666" stroke="#666666" points="1477.38,-750.56 1487.85,-748.93 1478.64,-743.68 1477.38,-750.56"/>
</g>
<!-- partialInputChs -->
<g id="node23" class="node">
<title>partialInputChs</title>
<polygon fill="#95e1d3" stroke="black" points="1471.5,-627 1471.5,-703 1626.5,-703 1626.5,-627 1471.5,-627"/>
<text text-anchor="middle" x="1549" y="-687.8" font-family="Times,serif" font-size="14.00">partialInputChs</text>
<polyline fill="none" stroke="black" points="1471.5,-680 1626.5,-680 "/>
<text text-anchor="start" x="1479.5" y="-664.8" font-family="Times,serif" font-size="14.00">每个worker绑定了一个</text>
<text text-anchor="start" x="1479.5" y="-649.8" font-family="Times,serif" font-size="14.00"> worker i 绑定了</text>
<text text-anchor="start" x="1479.5" y="-634.8" font-family="Times,serif" font-size="14.00"> patialInputChans[i]</text>
</g>
<!-- fetchChildData&#45;&gt;partialInputChs -->
<g id="edge27" class="edge">
<title>fetchChildData&#45;&gt;partialInputChs</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1346.8,-704.44C1379.28,-698.07 1422.86,-689.53 1461.15,-682.02"/>
<polygon fill="blue" stroke="blue" points="1462.14,-685.4 1471.28,-680.04 1460.79,-678.53 1462.14,-685.4"/>
</g>
<!-- getPartialInput -->
<g id="node12" class="node">
<title>getPartialInput</title>
<polygon fill="none" stroke="black" points="2488.5,-205.5 2488.5,-266.5 2638.5,-266.5 2638.5,-205.5 2488.5,-205.5"/>
<text text-anchor="middle" x="2563.5" y="-251.3" font-family="Times,serif" font-size="14.00">getPartialInput</text>
<polyline fill="none" stroke="black" points="2488.5,-243.5 2638.5,-243.5 "/>
<text text-anchor="start" x="2496.5" y="-228.3" font-family="Times,serif" font-size="14.00">从PartialWorker的输出</text>
<text text-anchor="start" x="2496.5" y="-213.3" font-family="Times,serif" font-size="14.00"> ch中获取数据</text>
</g>
<!-- getPartialResult -->
<g id="node13" class="node">
<title>getPartialResult</title>
<polygon fill="none" stroke="black" points="1427,-326.5 1427,-387.5 1671,-387.5 1671,-326.5 1427,-326.5"/>
<text text-anchor="middle" x="1549" y="-372.3" font-family="Times,serif" font-size="14.00">getPartialResult</text>
<polyline fill="none" stroke="black" points="1427,-364.5 1671,-364.5 "/>
<text text-anchor="start" x="1435" y="-349.3" font-family="Times,serif" font-size="14.00">根据groupKeys 去map中取partialResult</text>
<text text-anchor="start" x="1435" y="-334.3" font-family="Times,serif" font-size="14.00"> 如果不存在，则创建一个</text>
</g>
<!-- getPartialResult&#45;&gt;AllocPartialResult -->
<g id="edge23" class="edge">
<title>getPartialResult&#45;&gt;AllocPartialResult</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1663.71,-387.52C1690.78,-394.79 1718.91,-402.34 1743.44,-408.93"/>
<polygon fill="blue" stroke="blue" points="1742.8,-412.38 1753.36,-411.59 1744.61,-405.62 1742.8,-412.38"/>
</g>
<!-- partialResultMap -->
<g id="node21" class="node">
<title>partialResultMap</title>
<polygon fill="none" stroke="black" points="1708,-286.5 1708,-385.5 1923,-385.5 1923,-286.5 1708,-286.5"/>
<text text-anchor="middle" x="1815.5" y="-370.3" font-family="Times,serif" font-size="14.00">partialResultMap</text>
<polyline fill="none" stroke="black" points="1708,-362.5 1923,-362.5 "/>
<text text-anchor="start" x="1716" y="-347.3" font-family="Times,serif" font-size="14.00">aggPartialResultMapper</text>
<text text-anchor="start" x="1716" y="-332.3" font-family="Times,serif" font-size="14.00"> type aggPartialResultMapper</text>
<text text-anchor="middle" x="1815.5" y="-317.3" font-family="Times,serif" font-size="14.00"> map[string][]aggfuncs.PartialResult</text>
<polyline fill="none" stroke="black" points="1708,-309.5 1923,-309.5 "/>
<text text-anchor="middle" x="1815.5" y="-294.3" font-family="Times,serif" font-size="14.00"> </text>
</g>
<!-- getPartialResult&#45;&gt;partialResultMap -->
<g id="edge24" class="edge">
<title>getPartialResult&#45;&gt;partialResultMap</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1671.03,-347.39C1679.83,-346.69 1688.69,-345.99 1697.47,-345.29"/>
<polygon fill="blue" stroke="blue" points="1698.03,-348.76 1707.72,-344.48 1697.47,-341.78 1698.03,-348.76"/>
</g>
<!-- getFinalResult&#45;&gt;AppendFinalResult2Chunk -->
<g id="edge12" class="edge">
<title>getFinalResult&#45;&gt;AppendFinalResult2Chunk</title>
<path fill="none" stroke="#666666" d="M1380.55,-180C1404.93,-180 1431.75,-180 1456.64,-180"/>
<polygon fill="#666666" stroke="#666666" points="1456.81,-183.5 1466.81,-180 1456.81,-176.5 1456.81,-183.5"/>
</g>
<!-- getFinalResult&#45;&gt;finalOutputCh -->
<g id="edge13" class="edge">
<title>getFinalResult&#45;&gt;finalOutputCh</title>
<path fill="none" stroke="#666666" d="M1350.1,-156.87C1374.64,-145.97 1404.93,-132.52 1434.37,-119.45"/>
<polygon fill="#666666" stroke="#666666" points="1436.18,-122.48 1443.9,-115.22 1433.34,-116.08 1436.18,-122.48"/>
</g>
<!-- getFinalResult&#45;&gt;getPartialResult -->
<g id="edge14" class="edge">
<title>getFinalResult&#45;&gt;getPartialResult</title>
<path fill="none" stroke="#666666" d="M1379.37,-203.28C1383.18,-205.89 1386.76,-208.78 1390,-212 1424.81,-246.57 1392.05,-281.57 1427,-316 1428.45,-317.43 1429.96,-318.81 1431.5,-320.14"/>
<polygon fill="#666666" stroke="#666666" points="1429.56,-323.06 1439.61,-326.41 1433.84,-317.52 1429.56,-323.06"/>
</g>
<!-- consumeIntermData&#45;&gt;MergePartialResult -->
<g id="edge9" class="edge">
<title>consumeIntermData&#45;&gt;MergePartialResult</title>
<path fill="none" stroke="#3f72af" d="M1362.06,-266.15C1397.1,-269.51 1440.6,-273.69 1476.72,-277.16"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1476.41,-280.64 1486.7,-278.11 1477.08,-273.68 1476.41,-280.64"/>
</g>
<!-- consumeIntermData&#45;&gt;getPartialInput -->
<g id="edge10" class="edge">
<title>consumeIntermData&#45;&gt;getPartialInput</title>
<path fill="none" stroke="#3f72af" d="M1362.01,-248.85C1412.38,-241.04 1484.45,-232 1548,-232 1548,-232 1548,-232 2316.5,-232 2370.32,-232 2430.76,-232.97 2478.26,-233.95"/>
<polygon fill="#3f72af" stroke="#3f72af" points="2478.43,-237.46 2488.5,-234.17 2478.57,-230.46 2478.43,-237.46"/>
</g>
<!-- consumeIntermData&#45;&gt;getPartialResult -->
<g id="edge11" class="edge">
<title>consumeIntermData&#45;&gt;getPartialResult</title>
<path fill="none" stroke="#3f72af" d="M1362.2,-289.12C1382.75,-298.1 1405.7,-307.78 1427,-316 1432.98,-318.3 1439.14,-320.61 1445.38,-322.89"/>
<polygon fill="#3f72af" stroke="#3f72af" points="1444.63,-326.34 1455.23,-326.44 1447.01,-319.76 1444.63,-326.34"/>
</g>
<!-- partialOutputChs -->
<g id="node25" class="node">
<title>partialOutputChs</title>
<polygon fill="#95e1d3" stroke="black" points="2228,-311 2228,-357 2403,-357 2403,-311 2228,-311"/>
<text text-anchor="middle" x="2315.5" y="-341.8" font-family="Times,serif" font-size="14.00">partialOutputChs</text>
<polyline fill="none" stroke="black" points="2228,-334 2403,-334 "/>
<text text-anchor="start" x="2236" y="-318.8" font-family="Times,serif" font-size="14.00">[]chan *HashAggIntermData</text>
</g>
<!-- shuffleIntermData&#45;&gt;partialOutputChs -->
<g id="edge30" class="edge">
<title>shuffleIntermData&#45;&gt;partialOutputChs</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M2191.32,-335.04C2200.12,-334.96 2208.95,-334.89 2217.62,-334.81"/>
<polygon fill="blue" stroke="blue" points="2217.74,-338.31 2227.71,-334.73 2217.68,-331.31 2217.74,-338.31"/>
</g>
<!-- getChildInput&#45;&gt;updatePartialResult -->
<g id="edge29" class="edge">
<title>getChildInput&#45;&gt;updatePartialResult</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M918.12,-553.51C930.35,-544.94 943.02,-536.16 955,-528 977.46,-512.71 1002.92,-495.96 1023.15,-482.8"/>
<polygon fill="blue" stroke="blue" points="1025.28,-485.59 1031.76,-477.2 1021.47,-479.72 1025.28,-485.59"/>
</g>
<!-- inputCh -->
<g id="node22" class="node">
<title>inputCh</title>
<polygon fill="#95e1d3" stroke="black" points="955,-537.5 955,-636.5 1167,-636.5 1167,-537.5 955,-537.5"/>
<text text-anchor="start" x="963" y="-621.3" font-family="Times,serif" font-size="14.00">inputCh</text>
<polyline fill="none" stroke="black" points="955,-613.5 1167,-613.5 "/>
<text text-anchor="start" x="963" y="-598.3" font-family="Times,serif" font-size="14.00">chk *chunk.Chunk</text>
<text text-anchor="start" x="963" y="-583.3" font-family="Times,serif" font-size="14.00"> giveBackCh chan&lt;&#45; *chunk.Chunk</text>
<polyline fill="none" stroke="black" points="955,-575.5 1167,-575.5 "/>
<text text-anchor="start" x="963" y="-560.3" font-family="Times,serif" font-size="14.00">用于fether和partialworker</text>
<text text-anchor="start" x="963" y="-545.3" font-family="Times,serif" font-size="14.00"> 之间数据复用</text>
</g>
<!-- getChildInput&#45;&gt;inputCh -->
<g id="edge33" class="edge">
<title>getChildInput&#45;&gt;inputCh</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M918.18,-597.13C926.71,-596.52 935.61,-595.89 944.61,-595.24"/>
<polygon fill="blue" stroke="blue" points="945.08,-598.72 954.8,-594.51 944.58,-591.74 945.08,-598.72"/>
</g>
<!-- updatePartialResult&#45;&gt;af_UpdatePartialResult -->
<g id="edge19" class="edge">
<title>updatePartialResult&#45;&gt;af_UpdatePartialResult</title>
<path fill="none" stroke="#666666" d="M1122.26,-459C1153.3,-459 1191.36,-459 1223.94,-459"/>
<polygon fill="#666666" stroke="#666666" points="1224.31,-462.5 1234.31,-459 1224.31,-455.5 1224.31,-462.5"/>
</g>
<!-- updatePartialResult&#45;&gt;getPartialResult -->
<g id="edge20" class="edge">
<title>updatePartialResult&#45;&gt;getPartialResult</title>
<path fill="none" stroke="#666666" d="M1077.17,-440.87C1100.93,-414.05 1149.87,-364.91 1204,-346 1271.61,-322.38 1351.31,-323.29 1416.96,-330.93"/>
<polygon fill="#666666" stroke="#666666" points="1416.6,-334.42 1426.96,-332.16 1417.46,-327.47 1416.6,-334.42"/>
</g>
<!-- getGroupKey -->
<g id="node20" class="node">
<title>getGroupKey</title>
<polygon fill="none" stroke="black" points="1204,-355.5 1204,-416.5 1390,-416.5 1390,-355.5 1204,-355.5"/>
<text text-anchor="middle" x="1297" y="-401.3" font-family="Times,serif" font-size="14.00">getGroupKey</text>
<polyline fill="none" stroke="black" points="1204,-393.5 1390,-393.5 "/>
<text text-anchor="start" x="1212" y="-378.3" font-family="Times,serif" font-size="14.00">evaluates the group items </text>
<text text-anchor="start" x="1212" y="-363.3" font-family="Times,serif" font-size="14.00"> and args of aggregate function</text>
</g>
<!-- updatePartialResult&#45;&gt;getGroupKey -->
<g id="edge21" class="edge">
<title>updatePartialResult&#45;&gt;getGroupKey</title>
<path fill="none" stroke="#666666" d="M1119.84,-440.96C1142.28,-433.95 1168.67,-425.72 1194.08,-417.79"/>
<polygon fill="#666666" stroke="#666666" points="1195.26,-421.09 1203.77,-414.77 1193.18,-414.41 1195.26,-421.09"/>
</g>
<!-- getGroupKey&#45;&gt;getPartialResult -->
<g id="edge22" class="edge">
<title>getGroupKey&#45;&gt;getPartialResult</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1390.03,-375.33C1398.73,-374.32 1407.65,-373.28 1416.63,-372.24"/>
<polygon fill="blue" stroke="blue" points="1417.24,-375.69 1426.77,-371.06 1416.43,-368.74 1417.24,-375.69"/>
</g>
<!-- partialResultMap&#45;&gt;shuffleIntermData -->
<g id="edge32" class="edge">
<title>partialResultMap&#45;&gt;shuffleIntermData</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1923.3,-336C1932.06,-336 1940.97,-336 1949.84,-336"/>
<polygon fill="blue" stroke="blue" points="1949.84,-339.5 1959.84,-336 1949.84,-332.5 1949.84,-339.5"/>
</g>
<!-- inputCh&#45;&gt;fetchChildData -->
<g id="edge34" class="edge">
<title>inputCh&#45;&gt;fetchChildData</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1153.48,-636.65C1188.03,-655.4 1225.7,-675.84 1253.63,-691"/>
<polygon fill="blue" stroke="blue" points="1252.25,-694.24 1262.71,-695.93 1255.59,-688.09 1252.25,-694.24"/>
</g>
<!-- partialInputChs&#45;&gt;getChildInput -->
<g id="edge28" class="edge">
<title>partialInputChs&#45;&gt;getChildInput</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M1471.09,-671.34C1356.96,-678.78 1136.66,-685.56 955,-646 945.9,-644.02 936.59,-641.27 927.46,-638.12"/>
<polygon fill="blue" stroke="blue" points="928.62,-634.81 918.02,-634.69 926.23,-641.39 928.62,-634.81"/>
</g>
<!-- partialOutputChs&#45;&gt;getPartialInput -->
<g id="edge31" class="edge">
<title>partialOutputChs&#45;&gt;getPartialInput</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M2364.43,-310.98C2387.12,-300.41 2414.73,-288.04 2440,-278 2452.44,-273.06 2465.72,-268.14 2478.78,-263.51"/>
<polygon fill="blue" stroke="blue" points="2479.96,-266.81 2488.24,-260.19 2477.64,-260.2 2479.96,-266.81"/>
</g>
<!-- HashAggIntermData -->
<g id="node26" class="node">
<title>HashAggIntermData</title>
<polygon fill="none" stroke="black" points="2440,-288 2440,-380 2687,-380 2687,-288 2440,-288"/>
<text text-anchor="middle" x="2563.5" y="-364.8" font-family="Times,serif" font-size="14.00">HashAggIntermData</text>
<polyline fill="none" stroke="black" points="2440,-357 2687,-357 "/>
<text text-anchor="start" x="2448" y="-341.8" font-family="Times,serif" font-size="14.00">groupKeys []string</text>
<polyline fill="none" stroke="black" points="2440,-334 2687,-334 "/>
<text text-anchor="start" x="2448" y="-318.8" font-family="Times,serif" font-size="14.00">cursor int</text>
<polyline fill="none" stroke="black" points="2440,-311 2687,-311 "/>
<text text-anchor="start" x="2448" y="-295.8" font-family="Times,serif" font-size="14.00">partialResultMap aggPartialResultMapper</text>
</g>
<!-- partialOutputChs&#45;&gt;HashAggIntermData -->
<g id="edge26" class="edge">
<title>partialOutputChs&#45;&gt;HashAggIntermData</title>
<path fill="none" stroke="blue" stroke-dasharray="5,2" d="M2403.23,-334C2411.87,-334 2420.78,-334 2429.76,-334"/>
<polygon fill="blue" stroke="blue" points="2429.91,-337.5 2439.91,-334 2429.91,-330.5 2429.91,-337.5"/>
</g>
</g>
</svg>
