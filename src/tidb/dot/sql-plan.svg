<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: sql_plan Pages: 1 -->
<svg width="1344pt" height="541pt"
 viewBox="0.00 0.00 1344.00 541.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 537)">
<title>sql_plan</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-537 1340,-537 1340,4 -4,4"/>
<g id="clust3" class="cluster">
<title>cluster_PlanBuilder</title>
<polygon fill="none" stroke="black" points="512,-281 512,-525 884.5,-525 884.5,-281 512,-281"/>
<text text-anchor="middle" x="698.25" y="-505" font-family="Times,serif" font-size="20.00">PlanBuilder</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_find_best_task</title>
<path fill="none" stroke="black" d="M1172,-136C1172,-136 1304,-136 1304,-136 1310,-136 1316,-142 1316,-148 1316,-148 1316,-368 1316,-368 1316,-374 1310,-380 1304,-380 1304,-380 1172,-380 1172,-380 1166,-380 1160,-374 1160,-368 1160,-368 1160,-148 1160,-148 1160,-142 1166,-136 1172,-136"/>
<text text-anchor="middle" x="1238" y="-360" font-family="Times,serif" font-size="20.00">find_best_task.go</text>
</g>
<!-- Compile -->
<g id="node1" class="node">
<title>Compile</title>
<polygon fill="none" stroke="black" points="0,-279 0,-325 145,-325 145,-279 0,-279"/>
<text text-anchor="middle" x="72.5" y="-309.8" font-family="Times,serif" font-size="14.00">Compile</text>
<polyline fill="none" stroke="black" points="0,-302 145,-302 "/>
<text text-anchor="middle" x="72.5" y="-286.8" font-family="Times,serif" font-size="14.00">置定并优化查询计划</text>
</g>
<!-- Preprocess -->
<g id="node2" class="node">
<title>Preprocess</title>
<polygon fill="none" stroke="black" points="181,-344 181,-390 383,-390 383,-344 181,-344"/>
<text text-anchor="start" x="189" y="-374.8" font-family="Times,serif" font-size="14.00">Preprocess</text>
<polyline fill="none" stroke="black" points="181,-367 383,-367 "/>
<text text-anchor="middle" x="282" y="-351.8" font-family="Times,serif" font-size="14.00">一些合法性检查以及名字绑定</text>
</g>
<!-- Compile&#45;&gt;Preprocess -->
<g id="edge1" class="edge">
<title>Compile&#45;&gt;Preprocess</title>
<path fill="none" stroke="black" d="M145.2,-324.46C162.2,-329.79 180.47,-335.51 197.93,-340.98"/>
<polygon fill="black" stroke="black" points="196.95,-344.34 207.54,-343.99 199.04,-337.66 196.95,-344.34"/>
</g>
<!-- Optimize -->
<g id="node3" class="node">
<title>Optimize</title>
<polygon fill="none" stroke="black" points="209.5,-279 209.5,-325 354.5,-325 354.5,-279 209.5,-279"/>
<text text-anchor="middle" x="282" y="-309.8" font-family="Times,serif" font-size="14.00">Optimize</text>
<polyline fill="none" stroke="black" points="209.5,-302 354.5,-302 "/>
<text text-anchor="start" x="217.5" y="-286.8" font-family="Times,serif" font-size="14.00">制定并优化查询计划</text>
</g>
<!-- Compile&#45;&gt;Optimize -->
<g id="edge2" class="edge">
<title>Compile&#45;&gt;Optimize</title>
<path fill="none" stroke="black" d="M145.2,-302C162.53,-302 181.19,-302 198.96,-302"/>
<polygon fill="black" stroke="black" points="199.3,-305.5 209.3,-302 199.3,-298.5 199.3,-305.5"/>
</g>
<!-- GetInfoSchema -->
<g id="node4" class="node">
<title>GetInfoSchema</title>
<polygon fill="none" stroke="black" points="333,-260 231,-260 231,-224 333,-224 333,-260"/>
<text text-anchor="middle" x="282" y="-238.3" font-family="Times,serif" font-size="14.00">GetInfoSchema</text>
</g>
<!-- Compile&#45;&gt;GetInfoSchema -->
<g id="edge3" class="edge">
<title>Compile&#45;&gt;GetInfoSchema</title>
<path fill="none" stroke="black" d="M145.15,-280.49C157.12,-276.95 169.4,-273.35 181,-270 193.91,-266.27 207.77,-262.34 220.94,-258.64"/>
<polygon fill="black" stroke="black" points="222.17,-261.94 230.85,-255.87 220.28,-255.2 222.17,-261.94"/>
</g>
<!-- optimize -->
<g id="node6" class="node">
<title>optimize</title>
<polygon fill="none" stroke="black" points="484,-320 419,-320 419,-284 484,-284 484,-320"/>
<text text-anchor="middle" x="451.5" y="-298.3" font-family="Times,serif" font-size="14.00">optimize</text>
</g>
<!-- Optimize&#45;&gt;optimize -->
<g id="edge4" class="edge">
<title>Optimize&#45;&gt;optimize</title>
<path fill="none" stroke="black" d="M354.52,-302C372.9,-302 392.09,-302 408.43,-302"/>
<polygon fill="black" stroke="black" points="408.72,-305.5 418.72,-302 408.72,-298.5 408.72,-305.5"/>
</g>
<!-- DoOptimize -->
<g id="node5" class="node">
<title>DoOptimize</title>
<polygon fill="none" stroke="black" points="532,-189 532,-235 720,-235 720,-189 532,-189"/>
<text text-anchor="middle" x="626" y="-219.8" font-family="Times,serif" font-size="14.00">DoOptimize</text>
<polyline fill="none" stroke="black" points="532,-212 720,-212 "/>
<text text-anchor="start" x="540" y="-196.8" font-family="Times,serif" font-size="14.00">将逻辑计划转换为物理计划</text>
</g>
<!-- logicalOptimize -->
<g id="node12" class="node">
<title>logicalOptimize</title>
<polygon fill="none" stroke="black" points="899,-270.5 768,-270.5 768,-217.5 899,-217.5 899,-270.5"/>
<text text-anchor="start" x="776" y="-255.3" font-family="Times,serif" font-size="14.00">logicalOptimize</text>
<text text-anchor="start" x="776" y="-240.3" font-family="Times,serif" font-size="14.00">遍历optRuleList, </text>
<text text-anchor="middle" x="833.5" y="-225.3" font-family="Times,serif" font-size="14.00">调用相应优化方法</text>
</g>
<!-- DoOptimize&#45;&gt;logicalOptimize -->
<g id="edge11" class="edge">
<title>DoOptimize&#45;&gt;logicalOptimize</title>
<path fill="none" stroke="black" d="M720.13,-226.5C732.74,-228.47 745.55,-230.46 757.78,-232.36"/>
<polygon fill="black" stroke="black" points="757.48,-235.86 767.9,-233.94 758.56,-228.94 757.48,-235.86"/>
</g>
<!-- phyicalOptimize -->
<g id="node13" class="node">
<title>phyicalOptimize</title>
<polygon fill="none" stroke="black" points="887,-199 780,-199 780,-161 887,-161 887,-199"/>
<text text-anchor="start" x="788" y="-183.8" font-family="Times,serif" font-size="14.00">phyicalOptimize</text>
<text text-anchor="middle" x="833.5" y="-168.8" font-family="Times,serif" font-size="14.00">物理优化</text>
</g>
<!-- DoOptimize&#45;&gt;phyicalOptimize -->
<g id="edge12" class="edge">
<title>DoOptimize&#45;&gt;phyicalOptimize</title>
<path fill="none" stroke="black" d="M720.13,-197.5C736.94,-194.88 754.1,-192.21 769.79,-189.77"/>
<polygon fill="black" stroke="black" points="770.52,-193.19 779.86,-188.2 769.44,-186.28 770.52,-193.19"/>
</g>
<!-- postOptimize -->
<g id="node14" class="node">
<title>postOptimize</title>
<polygon fill="none" stroke="black" points="878.5,-90 788.5,-90 788.5,-54 878.5,-54 878.5,-90"/>
<text text-anchor="middle" x="833.5" y="-68.3" font-family="Times,serif" font-size="14.00">postOptimize</text>
</g>
<!-- DoOptimize&#45;&gt;postOptimize -->
<g id="edge13" class="edge">
<title>DoOptimize&#45;&gt;postOptimize</title>
<path fill="none" stroke="black" d="M660.93,-188.88C698.61,-163.21 759.14,-121.98 797.31,-95.97"/>
<polygon fill="black" stroke="black" points="799.74,-98.55 806.04,-90.03 795.8,-92.76 799.74,-98.55"/>
</g>
<!-- optimize&#45;&gt;DoOptimize -->
<g id="edge5" class="edge">
<title>optimize&#45;&gt;DoOptimize</title>
<path fill="none" stroke="black" d="M484.14,-285.49C508.63,-272.72 543.09,-254.74 571.8,-239.76"/>
<polygon fill="black" stroke="black" points="573.65,-242.74 580.9,-235.01 570.41,-236.53 573.65,-242.74"/>
</g>
<!-- PlanBuilder_Build -->
<g id="node7" class="node">
<title>PlanBuilder_Build</title>
<polygon fill="#f38181" stroke="black" points="520,-338 520,-384 732,-384 732,-338 520,-338"/>
<text text-anchor="start" x="528" y="-368.8" font-family="Times,serif" font-size="14.00">PlanBuilder.Build</text>
<polyline fill="none" stroke="black" points="520,-361 732,-361 "/>
<text text-anchor="start" x="528" y="-345.8" font-family="Times,serif" font-size="14.00">Builds the ast node to a logical plan</text>
</g>
<!-- optimize&#45;&gt;PlanBuilder_Build -->
<g id="edge6" class="edge">
<title>optimize&#45;&gt;PlanBuilder_Build</title>
<path fill="none" stroke="black" d="M484.14,-312.82C502.1,-318.96 525.42,-326.94 547.9,-334.63"/>
<polygon fill="black" stroke="black" points="546.87,-337.98 557.47,-337.9 549.14,-331.35 546.87,-337.98"/>
</g>
<!-- buildInsert -->
<g id="node8" class="node">
<title>buildInsert</title>
<polygon fill="none" stroke="black" points="871,-325 796,-325 796,-289 871,-289 871,-325"/>
<text text-anchor="middle" x="833.5" y="-303.3" font-family="Times,serif" font-size="14.00">buildInsert</text>
</g>
<!-- PlanBuilder_Build&#45;&gt;buildInsert -->
<g id="edge7" class="edge">
<title>PlanBuilder_Build&#45;&gt;buildInsert</title>
<path fill="none" stroke="black" d="M714.75,-337.94C739.22,-331.51 764.84,-324.78 785.92,-319.24"/>
<polygon fill="black" stroke="black" points="787.09,-322.55 795.88,-316.62 785.32,-315.78 787.09,-322.55"/>
</g>
<!-- buildDelete -->
<g id="node9" class="node">
<title>buildDelete</title>
<polygon fill="none" stroke="black" points="873.5,-379 793.5,-379 793.5,-343 873.5,-343 873.5,-379"/>
<text text-anchor="middle" x="833.5" y="-357.3" font-family="Times,serif" font-size="14.00">buildDelete</text>
</g>
<!-- PlanBuilder_Build&#45;&gt;buildDelete -->
<g id="edge8" class="edge">
<title>PlanBuilder_Build&#45;&gt;buildDelete</title>
<path fill="none" stroke="black" d="M732.16,-361C749.97,-361 767.69,-361 783.16,-361"/>
<polygon fill="black" stroke="black" points="783.49,-364.5 793.49,-361 783.49,-357.5 783.49,-364.5"/>
</g>
<!-- buildSelect -->
<g id="node10" class="node">
<title>buildSelect</title>
<polygon fill="none" stroke="black" points="872,-433 795,-433 795,-397 872,-397 872,-433"/>
<text text-anchor="middle" x="833.5" y="-411.3" font-family="Times,serif" font-size="14.00">buildSelect</text>
</g>
<!-- PlanBuilder_Build&#45;&gt;buildSelect -->
<g id="edge9" class="edge">
<title>PlanBuilder_Build&#45;&gt;buildSelect</title>
<path fill="none" stroke="black" d="M714.75,-384.06C738.84,-390.39 764.06,-397.02 784.95,-402.5"/>
<polygon fill="black" stroke="black" points="784.27,-405.95 794.83,-405.1 786.05,-399.18 784.27,-405.95"/>
</g>
<!-- buildPrepare -->
<g id="node11" class="node">
<title>buildPrepare</title>
<polygon fill="none" stroke="black" points="876.5,-487 790.5,-487 790.5,-451 876.5,-451 876.5,-487"/>
<text text-anchor="middle" x="833.5" y="-465.3" font-family="Times,serif" font-size="14.00">buildPrepare</text>
</g>
<!-- PlanBuilder_Build&#45;&gt;buildPrepare -->
<g id="edge10" class="edge">
<title>PlanBuilder_Build&#45;&gt;buildPrepare</title>
<path fill="none" stroke="black" d="M664.3,-384.14C692.33,-401.1 731.93,-424.18 768,-442 772.09,-444.02 776.37,-446.03 780.69,-447.99"/>
<polygon fill="black" stroke="black" points="779.61,-451.34 790.18,-452.18 782.44,-444.93 779.61,-451.34"/>
</g>
<!-- rule_optimize -->
<g id="node15" class="node">
<title>rule_optimize</title>
<polygon fill="none" stroke="black" points="1077.5,-326 961.5,-326 961.5,-288 1077.5,-288 1077.5,-326"/>
<text text-anchor="start" x="969.5" y="-310.8" font-family="Times,serif" font-size="14.00">rule.optimize</text>
<text text-anchor="middle" x="1019.5" y="-295.8" font-family="Times,serif" font-size="14.00">基于规则的优化</text>
</g>
<!-- logicalOptimize&#45;&gt;rule_optimize -->
<g id="edge14" class="edge">
<title>logicalOptimize&#45;&gt;rule_optimize</title>
<path fill="none" stroke="black" d="M899.07,-266.61C911.01,-270.76 923.37,-275.03 935,-279 940.47,-280.87 946.14,-282.8 951.84,-284.72"/>
<polygon fill="black" stroke="black" points="950.83,-288.08 961.43,-287.96 953.07,-281.45 950.83,-288.08"/>
</g>
<!-- findBestTask -->
<g id="node16" class="node">
<title>findBestTask</title>
<polygon fill="none" stroke="black" points="1096.5,-269.5 942.5,-269.5 942.5,-216.5 1096.5,-216.5 1096.5,-269.5"/>
<text text-anchor="start" x="950.5" y="-254.3" font-family="Times,serif" font-size="14.00">findBestTask</text>
<text text-anchor="start" x="950.5" y="-239.3" font-family="Times,serif" font-size="14.00">converts the logical plan </text>
<text text-anchor="middle" x="1019.5" y="-224.3" font-family="Times,serif" font-size="14.00">to the physical plan</text>
</g>
<!-- phyicalOptimize&#45;&gt;findBestTask -->
<g id="edge15" class="edge">
<title>phyicalOptimize&#45;&gt;findBestTask</title>
<path fill="none" stroke="black" d="M887.23,-198.05C901.47,-202.93 917.27,-208.34 932.82,-213.66"/>
<polygon fill="black" stroke="black" points="931.86,-217.03 942.45,-216.96 934.13,-210.41 931.86,-217.03"/>
</g>
<!-- recursiveDeriveStats -->
<g id="node17" class="node">
<title>recursiveDeriveStats</title>
<polygon fill="none" stroke="black" points="1084,-198 955,-198 955,-162 1084,-162 1084,-198"/>
<text text-anchor="middle" x="1019.5" y="-176.3" font-family="Times,serif" font-size="14.00">recursiveDeriveStats</text>
</g>
<!-- phyicalOptimize&#45;&gt;recursiveDeriveStats -->
<g id="edge16" class="edge">
<title>phyicalOptimize&#45;&gt;recursiveDeriveStats</title>
<path fill="none" stroke="black" d="M887.23,-180C905.14,-180 925.5,-180 944.75,-180"/>
<polygon fill="black" stroke="black" points="945,-183.5 955,-180 945,-176.5 945,-183.5"/>
</g>
<!-- plan -->
<g id="node18" class="node">
<title>plan</title>
<polygon fill="none" stroke="black" points="1046.5,-144 992.5,-144 992.5,-108 1046.5,-108 1046.5,-144"/>
<text text-anchor="middle" x="1019.5" y="-122.3" font-family="Times,serif" font-size="14.00">plan</text>
</g>
<!-- phyicalOptimize&#45;&gt;plan -->
<g id="edge17" class="edge">
<title>phyicalOptimize&#45;&gt;plan</title>
<path fill="none" stroke="black" d="M887.23,-164.53C917.74,-155.57 955.34,-144.54 982.47,-136.57"/>
<polygon fill="black" stroke="black" points="983.71,-139.86 992.32,-133.68 981.74,-133.14 983.71,-139.86"/>
</g>
<!-- eliminatePhysicalProjection -->
<g id="node19" class="node">
<title>eliminatePhysicalProjection</title>
<polygon fill="none" stroke="black" points="1104,-90 935,-90 935,-54 1104,-54 1104,-90"/>
<text text-anchor="middle" x="1019.5" y="-68.3" font-family="Times,serif" font-size="14.00">eliminatePhysicalProjection</text>
</g>
<!-- postOptimize&#45;&gt;eliminatePhysicalProjection -->
<g id="edge18" class="edge">
<title>postOptimize&#45;&gt;eliminatePhysicalProjection</title>
<path fill="none" stroke="black" d="M878.57,-72C892.57,-72 908.62,-72 924.75,-72"/>
<polygon fill="black" stroke="black" points="924.78,-75.5 934.78,-72 924.78,-68.5 924.78,-75.5"/>
</g>
<!-- injectExtraProjection -->
<g id="node20" class="node">
<title>injectExtraProjection</title>
<polygon fill="none" stroke="black" points="1085,-36 954,-36 954,0 1085,0 1085,-36"/>
<text text-anchor="middle" x="1019.5" y="-14.3" font-family="Times,serif" font-size="14.00">injectExtraProjection</text>
</g>
<!-- postOptimize&#45;&gt;injectExtraProjection -->
<g id="edge19" class="edge">
<title>postOptimize&#45;&gt;injectExtraProjection</title>
<path fill="none" stroke="black" d="M878.57,-59.07C899.13,-53.03 924.12,-45.7 947.26,-38.91"/>
<polygon fill="black" stroke="black" points="948.44,-42.21 957.05,-36.03 946.47,-35.49 948.44,-42.21"/>
</g>
<!-- LogicalShow -->
<g id="node22" class="node">
<title>LogicalShow</title>
<polygon fill="none" stroke="black" points="1282.5,-342 1193.5,-342 1193.5,-306 1282.5,-306 1282.5,-342"/>
<text text-anchor="middle" x="1238" y="-320.3" font-family="Times,serif" font-size="14.00">LogicalShow</text>
</g>
<!-- findBestTask&#45;&gt;LogicalShow -->
<g id="edge21" class="edge">
<title>findBestTask&#45;&gt;LogicalShow</title>
<path fill="none" stroke="black" d="M1083.14,-269.55C1090.2,-272.68 1097.27,-275.87 1104,-279 1120.22,-286.54 1123.31,-290.57 1140,-297 1153.92,-302.36 1169.33,-307.14 1183.7,-311.14"/>
<polygon fill="black" stroke="black" points="1182.88,-314.55 1193.45,-313.78 1184.71,-307.79 1182.88,-314.55"/>
</g>
<!-- LogicalShowDDLJobs -->
<g id="node23" class="node">
<title>LogicalShowDDLJobs</title>
<polygon fill="none" stroke="black" points="1308,-288 1168,-288 1168,-252 1308,-252 1308,-288"/>
<text text-anchor="middle" x="1238" y="-266.3" font-family="Times,serif" font-size="14.00">LogicalShowDDLJobs</text>
</g>
<!-- findBestTask&#45;&gt;LogicalShowDDLJobs -->
<g id="edge22" class="edge">
<title>findBestTask&#45;&gt;LogicalShowDDLJobs</title>
<path fill="none" stroke="black" d="M1096.53,-252.48C1116.33,-254.95 1137.72,-257.62 1157.69,-260.11"/>
<polygon fill="black" stroke="black" points="1157.31,-263.59 1167.67,-261.35 1158.18,-256.64 1157.31,-263.59"/>
</g>
<!-- baseLogicalPlan -->
<g id="node24" class="node">
<title>baseLogicalPlan</title>
<polygon fill="none" stroke="black" points="1291,-234 1185,-234 1185,-198 1291,-198 1291,-234"/>
<text text-anchor="middle" x="1238" y="-212.3" font-family="Times,serif" font-size="14.00">baseLogicalPlan</text>
</g>
<!-- findBestTask&#45;&gt;baseLogicalPlan -->
<g id="edge23" class="edge">
<title>findBestTask&#45;&gt;baseLogicalPlan</title>
<path fill="none" stroke="black" d="M1096.53,-233.52C1122.11,-230.33 1150.34,-226.81 1174.74,-223.76"/>
<polygon fill="black" stroke="black" points="1175.45,-227.2 1184.94,-222.49 1174.59,-220.26 1175.45,-227.2"/>
</g>
<!-- Datasource -->
<g id="node25" class="node">
<title>Datasource</title>
<polygon fill="none" stroke="black" points="1276.5,-180 1199.5,-180 1199.5,-144 1276.5,-144 1276.5,-180"/>
<text text-anchor="middle" x="1238" y="-158.3" font-family="Times,serif" font-size="14.00">Datasource</text>
</g>
<!-- findBestTask&#45;&gt;Datasource -->
<g id="edge24" class="edge">
<title>findBestTask&#45;&gt;Datasource</title>
<path fill="none" stroke="black" d="M1083.14,-216.45C1090.2,-213.32 1097.27,-210.13 1104,-207 1120.22,-199.46 1123.31,-195.43 1140,-189 1155.66,-182.97 1173.21,-177.67 1189.03,-173.39"/>
<polygon fill="black" stroke="black" points="1190.36,-176.66 1199.14,-170.74 1188.58,-169.89 1190.36,-176.66"/>
</g>
<!-- doPhysicalProjectionElimination -->
<g id="node21" class="node">
<title>doPhysicalProjectionElimination</title>
<polygon fill="none" stroke="black" points="1336,-90 1140,-90 1140,-54 1336,-54 1336,-90"/>
<text text-anchor="middle" x="1238" y="-68.3" font-family="Times,serif" font-size="14.00">doPhysicalProjectionElimination</text>
</g>
<!-- eliminatePhysicalProjection&#45;&gt;doPhysicalProjectionElimination -->
<g id="edge20" class="edge">
<title>eliminatePhysicalProjection&#45;&gt;doPhysicalProjectionElimination</title>
<path fill="none" stroke="black" d="M1104.2,-72C1112.59,-72 1121.17,-72 1129.75,-72"/>
<polygon fill="black" stroke="black" points="1129.81,-75.5 1139.81,-72 1129.81,-68.5 1129.81,-75.5"/>
</g>
</g>
</svg>
