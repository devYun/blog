<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: exec_commit_merge Pages: 1 -->
<svg width="2386pt" height="620pt"
 viewBox="0.00 0.00 2386.00 620.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 616)">
<title>exec_commit_merge</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-616 2382,-616 2382,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_PeerStorage</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M924,-494C924,-494 1013,-494 1013,-494 1019,-494 1025,-500 1025,-506 1025,-506 1025,-564 1025,-564 1025,-570 1019,-576 1013,-576 1013,-576 924,-576 924,-576 918,-576 912,-570 912,-564 912,-564 912,-506 912,-506 912,-500 918,-494 924,-494"/>
<text text-anchor="middle" x="968.5" y="-556" font-family="Times,serif" font-size="20.00">PeerStorage</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_RaftPollerBuilder</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M415,-466C415,-466 780.5,-466 780.5,-466 786.5,-466 792.5,-472 792.5,-478 792.5,-478 792.5,-592 792.5,-592 792.5,-598 786.5,-604 780.5,-604 780.5,-604 415,-604 415,-604 409,-604 403,-598 403,-592 403,-592 403,-478 403,-478 403,-472 409,-466 415,-466"/>
<text text-anchor="middle" x="597.75" y="-584" font-family="Times,serif" font-size="20.00">RaftPollerBuilder</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_ApplyFsm</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-110C20,-110 2164,-110 2164,-110 2170,-110 2176,-116 2176,-122 2176,-122 2176,-446 2176,-446 2176,-452 2170,-458 2164,-458 2164,-458 20,-458 20,-458 14,-458 8,-452 8,-446 8,-446 8,-122 8,-122 8,-116 14,-110 20,-110"/>
<text text-anchor="middle" x="1092" y="-438" font-family="Times,serif" font-size="20.00">ApplyFsm</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_PeerFsm</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M425.5,-8C425.5,-8 2358,-8 2358,-8 2364,-8 2370,-14 2370,-20 2370,-20 2370,-90 2370,-90 2370,-96 2364,-102 2358,-102 2358,-102 425.5,-102 425.5,-102 419.5,-102 413.5,-96 413.5,-90 413.5,-90 413.5,-20 413.5,-20 413.5,-14 419.5,-8 425.5,-8"/>
<text text-anchor="middle" x="1391.75" y="-82" font-family="Times,serif" font-size="20.00">PeerFsmDelegate</text>
</g>
<!-- clear_meta -->
<g id="node1" class="node">
<title>clear_meta</title>
<path fill="none" stroke="#1c2123" d="M995,-538C995,-538 942,-538 942,-538 936,-538 930,-532 930,-526 930,-526 930,-514 930,-514 930,-508 936,-502 942,-502 942,-502 995,-502 995,-502 1001,-502 1007,-508 1007,-514 1007,-514 1007,-526 1007,-526 1007,-532 1001,-538 995,-538"/>
<text text-anchor="middle" x="968.5" y="-516.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">clear_meta</text>
</g>
<!-- init -->
<g id="node2" class="node">
<title>init</title>
<path fill="none" stroke="#1c2123" d="M423,-474.5C423,-474.5 599,-474.5 599,-474.5 605,-474.5 611,-480.5 611,-486.5 611,-486.5 611,-553.5 611,-553.5 611,-559.5 605,-565.5 599,-565.5 599,-565.5 423,-565.5 423,-565.5 417,-565.5 411,-559.5 411,-553.5 411,-553.5 411,-486.5 411,-486.5 411,-480.5 417,-474.5 423,-474.5"/>
<text text-anchor="middle" x="511" y="-550.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">init</text>
<polyline fill="none" stroke="#1c2123" points="411,-542.5 611,-542.5 "/>
<text text-anchor="start" x="419" y="-527.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">scan_cf扫描所有的Peer</text>
<text text-anchor="start" x="419" y="-512.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 如果发现pee状态为Tombstone</text>
<text text-anchor="start" x="419" y="-497.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 则会clear_stale_meta</text>
<text text-anchor="start" x="419" y="-482.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 清理掉过期的meta信息</text>
</g>
<!-- clear_stale_meta -->
<g id="node3" class="node">
<title>clear_stale_meta</title>
<path fill="none" stroke="#1c2123" d="M772.5,-538C772.5,-538 688.5,-538 688.5,-538 682.5,-538 676.5,-532 676.5,-526 676.5,-526 676.5,-514 676.5,-514 676.5,-508 682.5,-502 688.5,-502 688.5,-502 772.5,-502 772.5,-502 778.5,-502 784.5,-508 784.5,-514 784.5,-514 784.5,-526 784.5,-526 784.5,-532 778.5,-538 772.5,-538"/>
<text text-anchor="middle" x="730.5" y="-516.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">clear_stale_meta</text>
</g>
<!-- init&#45;&gt;clear_stale_meta -->
<g id="edge1" class="edge">
<title>init&#45;&gt;clear_stale_meta</title>
<path fill="none" stroke="#666666" d="M611.2,-520C629.76,-520 648.69,-520 665.81,-520"/>
<polygon fill="#666666" stroke="#666666" points="666.22,-523.5 676.22,-520 666.22,-516.5 666.22,-523.5"/>
</g>
<!-- clear_stale_meta&#45;&gt;clear_meta -->
<g id="edge2" class="edge">
<title>clear_stale_meta&#45;&gt;clear_meta</title>
<path fill="none" stroke="#666666" d="M784.76,-520C825.32,-520 880.66,-520 919.78,-520"/>
<polygon fill="#666666" stroke="#666666" points="919.86,-523.5 929.86,-520 919.86,-516.5 919.86,-523.5"/>
</g>
<!-- write_peer_state -->
<g id="node4" class="node">
<title>write_peer_state</title>
<path fill="none" stroke="#1c2123" d="M207.5,-335C207.5,-335 351.5,-335 351.5,-335 357.5,-335 363.5,-341 363.5,-347 363.5,-347 363.5,-407 363.5,-407 363.5,-413 357.5,-419 351.5,-419 351.5,-419 207.5,-419 207.5,-419 201.5,-419 195.5,-413 195.5,-407 195.5,-407 195.5,-347 195.5,-347 195.5,-341 201.5,-335 207.5,-335"/>
<text text-anchor="middle" x="279.5" y="-403.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">write_peer_state</text>
<polyline fill="none" stroke="#1c2123" points="195.5,-396 363.5,-396 "/>
<text text-anchor="start" x="203.5" y="-380.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">1.更新自己的region信息</text>
<polyline fill="none" stroke="#1c2123" points="195.5,-373 363.5,-373 "/>
<text text-anchor="start" x="203.5" y="-357.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">2.将source region sate写入</text>
<text text-anchor="middle" x="279.5" y="-342.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> PeerState::Tombstone</text>
</g>
<!-- write_peer_state&#45;&gt;init -->
<g id="edge3" class="edge">
<title>write_peer_state&#45;&gt;init</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M338.51,-419.19C358.61,-433.29 381.51,-448.77 403,-462 407.01,-464.47 411.13,-466.94 415.31,-469.41"/>
<polygon fill="green" stroke="green" points="413.56,-472.44 423.96,-474.44 417.08,-466.39 413.56,-472.44"/>
</g>
<!-- exec_commit_merge -->
<g id="node5" class="node">
<title>exec_commit_merge</title>
<path fill="none" stroke="#1c2123" d="M136,-275C136,-275 28,-275 28,-275 22,-275 16,-269 16,-263 16,-263 16,-251 16,-251 16,-245 22,-239 28,-239 28,-239 136,-239 136,-239 142,-239 148,-245 148,-251 148,-251 148,-263 148,-263 148,-269 142,-275 136,-275"/>
<text text-anchor="middle" x="82" y="-253.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">exec_commit_merge</text>
</g>
<!-- exec_commit_merge&#45;&gt;write_peer_state -->
<g id="edge4" class="edge">
<title>exec_commit_merge&#45;&gt;write_peer_state</title>
<path fill="none" stroke="#666666" d="M111.66,-275.04C131.84,-287.7 159.51,-304.98 184,-320 189.07,-323.11 194.31,-326.31 199.59,-329.52"/>
<polygon fill="#666666" stroke="#666666" points="198.14,-332.74 208.5,-334.94 201.77,-326.76 198.14,-332.74"/>
</g>
<!-- ready_source_region_id -->
<g id="node6" class="node">
<title>ready_source_region_id</title>
<path fill="none" stroke="#1c2123" d="M1741,-191C1741,-191 1893,-191 1893,-191 1899,-191 1905,-197 1905,-203 1905,-203 1905,-225 1905,-225 1905,-231 1899,-237 1893,-237 1893,-237 1741,-237 1741,-237 1735,-237 1729,-231 1729,-225 1729,-225 1729,-203 1729,-203 1729,-197 1735,-191 1741,-191"/>
<text text-anchor="middle" x="1817" y="-221.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">ready_source_region_id</text>
<polyline fill="none" stroke="#1c2123" points="1729,-214 1905,-214 "/>
<text text-anchor="start" x="1737" y="-198.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">设置ready_source_region_id</text>
</g>
<!-- exec_commit_merge&#45;&gt;ready_source_region_id -->
<g id="edge5" class="edge">
<title>exec_commit_merge&#45;&gt;ready_source_region_id</title>
<path fill="none" stroke="#666666" d="M112.23,-238.83C131.74,-227.8 158.43,-214.77 184,-209 266.81,-190.32 290.16,-206.11 375,-209 799.36,-223.45 904.87,-279.99 1329,-260 1464.39,-253.62 1620.25,-237.32 1718.44,-225.94"/>
<polygon fill="#666666" stroke="#666666" points="1719.11,-229.39 1728.64,-224.75 1718.3,-222.43 1719.11,-229.39"/>
</g>
<!-- SignificantMsg_CatchUpLogs -->
<g id="node7" class="node">
<title>SignificantMsg_CatchUpLogs</title>
<path fill="#feed9b" stroke="#f7e495" d="M200.5,-118.5C200.5,-118.5 358.5,-118.5 358.5,-118.5 364.5,-118.5 370.5,-124.5 370.5,-130.5 370.5,-130.5 370.5,-167.5 370.5,-167.5 370.5,-173.5 364.5,-179.5 358.5,-179.5 358.5,-179.5 200.5,-179.5 200.5,-179.5 194.5,-179.5 188.5,-173.5 188.5,-167.5 188.5,-167.5 188.5,-130.5 188.5,-130.5 188.5,-124.5 194.5,-118.5 200.5,-118.5"/>
<text text-anchor="middle" x="279.5" y="-164.3" font-family="Times,serif" font-size="14.00" fill="#40575d">SignificantMsg::CatchUpLogs</text>
<polyline fill="none" stroke="#f7e495" points="188.5,-156.5 370.5,-156.5 "/>
<text text-anchor="start" x="196.5" y="-141.3" font-family="Times,serif" font-size="14.00" fill="#40575d">向source region发送</text>
<text text-anchor="start" x="196.5" y="-126.3" font-family="Times,serif" font-size="14.00" fill="#40575d"> CatchUpLogs消息</text>
</g>
<!-- exec_commit_merge&#45;&gt;SignificantMsg_CatchUpLogs -->
<g id="edge6" class="edge">
<title>exec_commit_merge&#45;&gt;SignificantMsg_CatchUpLogs</title>
<path fill="none" stroke="#666666" d="M110.36,-238.76C130.4,-225.69 158.44,-208 184,-194 190,-190.72 196.27,-187.42 202.61,-184.2"/>
<polygon fill="#666666" stroke="#666666" points="204.56,-187.14 211.93,-179.53 201.42,-180.88 204.56,-187.14"/>
</g>
<!-- ApplyResult_WaitMergeSource -->
<g id="node8" class="node">
<title>ApplyResult_WaitMergeSource</title>
<path fill="#feed9b" stroke="#f7e495" d="M196,-219C196,-219 363,-219 363,-219 369,-219 375,-225 375,-231 375,-231 375,-283 375,-283 375,-289 369,-295 363,-295 363,-295 196,-295 196,-295 190,-295 184,-289 184,-283 184,-283 184,-231 184,-231 184,-225 190,-219 196,-219"/>
<text text-anchor="middle" x="279.5" y="-279.8" font-family="Times,serif" font-size="14.00" fill="#40575d">ApplyResult_WaitMergeSource</text>
<polyline fill="none" stroke="#f7e495" points="184,-272 375,-272 "/>
<text text-anchor="start" x="192" y="-256.8" font-family="Times,serif" font-size="14.00" fill="#40575d">返回WaitMergeSource</text>
<text text-anchor="start" x="192" y="-241.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> 等待source region</text>
<text text-anchor="start" x="192" y="-226.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> 执行完CatchUpLogs</text>
</g>
<!-- exec_commit_merge&#45;&gt;ApplyResult_WaitMergeSource -->
<g id="edge7" class="edge">
<title>exec_commit_merge&#45;&gt;ApplyResult_WaitMergeSource</title>
<path fill="none" stroke="#666666" d="M148.1,-257C156.32,-257 164.89,-257 173.54,-257"/>
<polygon fill="#666666" stroke="#666666" points="173.71,-260.5 183.71,-257 173.71,-253.5 173.71,-260.5"/>
</g>
<!-- ApplyResult_CommitMerge -->
<g id="node9" class="node">
<title>ApplyResult_CommitMerge</title>
<path fill="#feed9b" stroke="#f7e495" d="M1953,-191C1953,-191 2156,-191 2156,-191 2162,-191 2168,-197 2168,-203 2168,-203 2168,-225 2168,-225 2168,-231 2162,-237 2156,-237 2156,-237 1953,-237 1953,-237 1947,-237 1941,-231 1941,-225 1941,-225 1941,-203 1941,-203 1941,-197 1947,-191 1953,-191"/>
<text text-anchor="middle" x="2054.5" y="-221.8" font-family="Times,serif" font-size="14.00" fill="#40575d">ApplyResult::CommitMerge</text>
<polyline fill="none" stroke="#f7e495" points="1941,-214 2168,-214 "/>
<text text-anchor="middle" x="2054.5" y="-198.8" font-family="Times,serif" font-size="14.00" fill="#40575d">接着执行，返回CommitMerge消息</text>
</g>
<!-- exec_commit_merge&#45;&gt;ApplyResult_CommitMerge -->
<g id="edge8" class="edge">
<title>exec_commit_merge&#45;&gt;ApplyResult_CommitMerge</title>
<path fill="none" stroke="#666666" d="M114.7,-275.1C134.09,-285.32 159.76,-297.33 184,-304 196.46,-307.43 634.13,-349.84 647,-351 987.44,-381.69 1073.68,-381 1415.5,-381 1415.5,-381 1415.5,-381 1599.5,-381 1735.3,-381 1781.15,-431.7 1905,-376 1964.92,-349.05 2011.42,-285.06 2035.44,-246.05"/>
<polygon fill="#666666" stroke="#666666" points="2038.62,-247.56 2040.78,-237.18 2032.62,-243.95 2038.62,-247.56"/>
</g>
<!-- ready_source_region_id&#45;&gt;ApplyResult_CommitMerge -->
<g id="edge9" class="edge">
<title>ready_source_region_id&#45;&gt;ApplyResult_CommitMerge</title>
<path fill="none" stroke="#666666" d="M1905.02,-214C1913.4,-214 1922.01,-214 1930.65,-214"/>
<polygon fill="#666666" stroke="#666666" points="1930.8,-217.5 1940.8,-214 1930.8,-210.5 1930.8,-217.5"/>
</g>
<!-- on_catch_up_logs_for_merge -->
<g id="node20" class="node">
<title>on_catch_up_logs_for_merge</title>
<path fill="none" stroke="#1c2123" d="M588.5,-64C588.5,-64 433.5,-64 433.5,-64 427.5,-64 421.5,-58 421.5,-52 421.5,-52 421.5,-40 421.5,-40 421.5,-34 427.5,-28 433.5,-28 433.5,-28 588.5,-28 588.5,-28 594.5,-28 600.5,-34 600.5,-40 600.5,-40 600.5,-52 600.5,-52 600.5,-58 594.5,-64 588.5,-64"/>
<text text-anchor="middle" x="511" y="-42.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_catch_up_logs_for_merge</text>
</g>
<!-- SignificantMsg_CatchUpLogs&#45;&gt;on_catch_up_logs_for_merge -->
<g id="edge24" class="edge">
<title>SignificantMsg_CatchUpLogs&#45;&gt;on_catch_up_logs_for_merge</title>
<path fill="none" stroke="#666666" d="M348.74,-118.38C384.57,-102.29 427.7,-82.94 460.33,-68.29"/>
<polygon fill="#666666" stroke="#666666" points="461.98,-71.39 469.67,-64.1 459.11,-65 461.98,-71.39"/>
</g>
<!-- handle_raft_committed_entries -->
<g id="node10" class="node">
<title>handle_raft_committed_entries</title>
<path fill="none" stroke="#1c2123" d="M1135,-285C1135,-285 1317,-285 1317,-285 1323,-285 1329,-291 1329,-297 1329,-297 1329,-349 1329,-349 1329,-355 1323,-361 1317,-361 1317,-361 1135,-361 1135,-361 1129,-361 1123,-355 1123,-349 1123,-349 1123,-297 1123,-297 1123,-291 1129,-285 1135,-285"/>
<text text-anchor="middle" x="1226" y="-345.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_raft_committed_entries</text>
<polyline fill="none" stroke="#1c2123" points="1123,-338 1329,-338 "/>
<text text-anchor="start" x="1131" y="-322.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">将当前处理的entry和</text>
<text text-anchor="start" x="1131" y="-307.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 剩余的entry放到pending_entries</text>
<text text-anchor="start" x="1131" y="-292.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 下次resume时候，接着执行</text>
</g>
<!-- ApplyResult_WaitMergeSource&#45;&gt;handle_raft_committed_entries -->
<g id="edge10" class="edge">
<title>ApplyResult_WaitMergeSource&#45;&gt;handle_raft_committed_entries</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M375.39,-263.63C550.74,-275.88 924.74,-302.02 1112.52,-315.14"/>
<polygon fill="green" stroke="green" points="1112.48,-318.65 1122.69,-315.85 1112.96,-311.66 1112.48,-318.65"/>
</g>
<!-- on_ready_commit_merge -->
<g id="node21" class="node">
<title>on_ready_commit_merge</title>
<path fill="none" stroke="#1c2123" d="M2216,-17C2216,-17 2350,-17 2350,-17 2356,-17 2362,-23 2362,-29 2362,-29 2362,-51 2362,-51 2362,-57 2356,-63 2350,-63 2350,-63 2216,-63 2216,-63 2210,-63 2204,-57 2204,-51 2204,-51 2204,-29 2204,-29 2204,-23 2210,-17 2216,-17"/>
<text text-anchor="middle" x="2283" y="-47.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_ready_commit_merge</text>
<polyline fill="none" stroke="#1c2123" points="2204,-40 2362,-40 "/>
<text text-anchor="middle" x="2283" y="-24.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">在target region上执行</text>
</g>
<!-- ApplyResult_CommitMerge&#45;&gt;on_ready_commit_merge -->
<g id="edge26" class="edge">
<title>ApplyResult_CommitMerge&#45;&gt;on_ready_commit_merge</title>
<path fill="none" stroke="#666666" d="M2167.95,-190.85C2170.72,-189.34 2173.4,-187.72 2176,-186 2218.71,-157.68 2250.13,-105.92 2267.24,-72.25"/>
<polygon fill="#666666" stroke="#666666" points="2270.38,-73.78 2271.68,-63.27 2264.11,-70.68 2270.38,-73.78"/>
</g>
<!-- wait_merge_state -->
<g id="node11" class="node">
<title>wait_merge_state</title>
<path fill="#feed9b" stroke="#f7e495" d="M1772.5,-269C1772.5,-269 1861.5,-269 1861.5,-269 1867.5,-269 1873.5,-275 1873.5,-281 1873.5,-281 1873.5,-293 1873.5,-293 1873.5,-299 1867.5,-305 1861.5,-305 1861.5,-305 1772.5,-305 1772.5,-305 1766.5,-305 1760.5,-299 1760.5,-293 1760.5,-293 1760.5,-281 1760.5,-281 1760.5,-275 1766.5,-269 1772.5,-269"/>
<text text-anchor="middle" x="1817" y="-283.3" font-family="Times,serif" font-size="14.00" fill="#40575d">wait_merge_state</text>
</g>
<!-- handle_raft_committed_entries&#45;&gt;wait_merge_state -->
<g id="edge11" class="edge">
<title>handle_raft_committed_entries&#45;&gt;wait_merge_state</title>
<path fill="none" stroke="#666666" d="M1329.01,-350.21C1341.07,-352.59 1353.26,-354.62 1365,-356 1509.77,-373.07 1551.96,-392.86 1693,-356 1726.34,-347.29 1760.19,-327.31 1783.92,-311.08"/>
<polygon fill="#666666" stroke="#666666" points="1785.99,-313.89 1792.18,-305.29 1781.98,-308.16 1785.99,-313.89"/>
</g>
<!-- yield_state -->
<g id="node12" class="node">
<title>yield_state</title>
<path fill="none" stroke="#1c2123" d="M1624,-342C1624,-342 1573,-342 1573,-342 1567,-342 1561,-336 1561,-330 1561,-330 1561,-318 1561,-318 1561,-312 1567,-306 1573,-306 1573,-306 1624,-306 1624,-306 1630,-306 1636,-312 1636,-318 1636,-318 1636,-330 1636,-330 1636,-336 1630,-342 1624,-342"/>
<text text-anchor="middle" x="1598.5" y="-320.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">yield_state</text>
</g>
<!-- handle_raft_committed_entries&#45;&gt;yield_state -->
<g id="edge12" class="edge">
<title>handle_raft_committed_entries&#45;&gt;yield_state</title>
<path fill="none" stroke="#666666" d="M1329.11,-323.82C1341.21,-323.9 1353.38,-323.96 1365,-324 1429.36,-324.23 1503.74,-324.18 1550.69,-324.1"/>
<polygon fill="#666666" stroke="#666666" points="1550.86,-327.6 1560.86,-324.08 1550.85,-320.6 1550.86,-327.6"/>
</g>
<!-- pending_entries -->
<g id="node13" class="node">
<title>pending_entries</title>
<path fill="none" stroke="#1c2123" d="M1456,-256C1456,-256 1377,-256 1377,-256 1371,-256 1365,-250 1365,-244 1365,-244 1365,-232 1365,-232 1365,-226 1371,-220 1377,-220 1377,-220 1456,-220 1456,-220 1462,-220 1468,-226 1468,-232 1468,-232 1468,-244 1468,-244 1468,-250 1462,-256 1456,-256"/>
<text text-anchor="middle" x="1416.5" y="-234.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pending_entries</text>
</g>
<!-- handle_raft_committed_entries&#45;&gt;pending_entries -->
<g id="edge13" class="edge">
<title>handle_raft_committed_entries&#45;&gt;pending_entries</title>
<path fill="none" stroke="#666666" d="M1318.03,-284.91C1321.74,-283.27 1325.41,-281.63 1329,-280 1342.46,-273.9 1356.95,-267 1370.16,-260.58"/>
<polygon fill="#666666" stroke="#666666" points="1372.06,-263.54 1379.51,-256 1368.99,-257.25 1372.06,-263.54"/>
</g>
<!-- resume_pending -->
<g id="node14" class="node">
<title>resume_pending</title>
<path fill="none" stroke="#1c2123" d="M1516,-221C1516,-221 1681,-221 1681,-221 1687,-221 1693,-227 1693,-233 1693,-233 1693,-255 1693,-255 1693,-261 1687,-267 1681,-267 1681,-267 1516,-267 1516,-267 1510,-267 1504,-261 1504,-255 1504,-255 1504,-233 1504,-233 1504,-227 1510,-221 1516,-221"/>
<text text-anchor="middle" x="1598.5" y="-251.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">resume_pending</text>
<polyline fill="none" stroke="#1c2123" points="1504,-244 1693,-244 "/>
<text text-anchor="start" x="1512" y="-228.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">接着执行exec_commit_merge</text>
</g>
<!-- pending_entries&#45;&gt;resume_pending -->
<g id="edge14" class="edge">
<title>pending_entries&#45;&gt;resume_pending</title>
<path fill="none" stroke="#666666" d="M1468.12,-239.69C1476.28,-239.96 1484.98,-240.25 1493.85,-240.55"/>
<polygon fill="#666666" stroke="#666666" points="1493.83,-244.05 1503.94,-240.88 1494.06,-237.05 1493.83,-244.05"/>
</g>
<!-- resume_pending&#45;&gt;ready_source_region_id -->
<g id="edge15" class="edge">
<title>resume_pending&#45;&gt;ready_source_region_id</title>
<path fill="none" stroke="#666666" d="M1693.2,-231.02C1701.74,-229.83 1710.41,-228.63 1718.98,-227.44"/>
<polygon fill="#666666" stroke="#666666" points="1719.56,-230.9 1728.98,-226.06 1718.6,-223.96 1719.56,-230.9"/>
</g>
<!-- resume_pending&#45;&gt;wait_merge_state -->
<g id="edge16" class="edge">
<title>resume_pending&#45;&gt;wait_merge_state</title>
<path fill="none" stroke="#666666" d="M1693.2,-262.61C1712.4,-266.42 1732.21,-270.36 1750.18,-273.93"/>
<polygon fill="#666666" stroke="#666666" points="1749.75,-277.41 1760.24,-275.92 1751.11,-270.54 1749.75,-277.41"/>
</g>
<!-- handle_normal -->
<g id="node15" class="node">
<title>handle_normal</title>
<path fill="none" stroke="#1c2123" d="M1453.5,-310C1453.5,-310 1379.5,-310 1379.5,-310 1373.5,-310 1367.5,-304 1367.5,-298 1367.5,-298 1367.5,-286 1367.5,-286 1367.5,-280 1373.5,-274 1379.5,-274 1379.5,-274 1453.5,-274 1453.5,-274 1459.5,-274 1465.5,-280 1465.5,-286 1465.5,-286 1465.5,-298 1465.5,-298 1465.5,-304 1459.5,-310 1453.5,-310"/>
<text text-anchor="middle" x="1416.5" y="-288.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_normal</text>
</g>
<!-- handle_normal&#45;&gt;wait_merge_state -->
<g id="edge17" class="edge">
<title>handle_normal&#45;&gt;wait_merge_state</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1465.57,-291.4C1536.59,-290.51 1669.79,-288.83 1749.94,-287.83"/>
<polygon fill="green" stroke="green" points="1750.45,-291.32 1760.4,-287.7 1750.36,-284.32 1750.45,-291.32"/>
</g>
<!-- handle_normal&#45;&gt;yield_state -->
<g id="edge18" class="edge">
<title>handle_normal&#45;&gt;yield_state</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1465.74,-300.58C1492.12,-305.27 1524.66,-311.05 1550.8,-315.7"/>
<polygon fill="green" stroke="green" points="1550.38,-319.18 1560.84,-317.48 1551.61,-312.29 1550.38,-319.18"/>
</g>
<!-- handle_normal&#45;&gt;resume_pending -->
<g id="edge19" class="edge">
<title>handle_normal&#45;&gt;resume_pending</title>
<path fill="none" stroke="#666666" d="M1465.74,-279.14C1476.75,-276.2 1488.83,-272.98 1501.07,-269.71"/>
<polygon fill="#666666" stroke="#666666" points="1502.15,-273.05 1510.91,-267.09 1500.34,-266.29 1502.15,-273.05"/>
</g>
<!-- ApplyTask_LogsUpToDate -->
<g id="node16" class="node">
<title>ApplyTask_LogsUpToDate</title>
<path fill="none" stroke="#1c2123" d="M802,-165C802,-165 659,-165 659,-165 653,-165 647,-159 647,-153 647,-153 647,-141 647,-141 647,-135 653,-129 659,-129 659,-129 802,-129 802,-129 808,-129 814,-135 814,-141 814,-141 814,-153 814,-153 814,-159 808,-165 802,-165"/>
<text text-anchor="middle" x="730.5" y="-143.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ApplyTask_LogsUpToDate</text>
</g>
<!-- logs_up_to_date_for_merge -->
<g id="node17" class="node">
<title>logs_up_to_date_for_merge</title>
<path fill="none" stroke="#1c2123" d="M862,-119C862,-119 1075,-119 1075,-119 1081,-119 1087,-125 1087,-131 1087,-131 1087,-183 1087,-183 1087,-189 1081,-195 1075,-195 1075,-195 862,-195 862,-195 856,-195 850,-189 850,-183 850,-183 850,-131 850,-131 850,-125 856,-119 862,-119"/>
<text text-anchor="middle" x="968.5" y="-179.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">logs_up_to_date_for_merge</text>
<polyline fill="none" stroke="#1c2123" points="850,-172 1087,-172 "/>
<text text-anchor="start" x="858" y="-156.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">soure region 处理LogsUpToDate消息</text>
<text text-anchor="start" x="858" y="-141.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 停掉自己的ApplyFsm</text>
<text text-anchor="start" x="858" y="-126.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后发个空消息给target的ApplyFsm</text>
</g>
<!-- ApplyTask_LogsUpToDate&#45;&gt;logs_up_to_date_for_merge -->
<g id="edge20" class="edge">
<title>ApplyTask_LogsUpToDate&#45;&gt;logs_up_to_date_for_merge</title>
<path fill="none" stroke="#666666" d="M814.04,-150.5C822.35,-150.85 830.92,-151.21 839.57,-151.58"/>
<polygon fill="#666666" stroke="#666666" points="839.59,-155.08 849.73,-152.01 839.89,-148.09 839.59,-155.08"/>
</g>
<!-- destroy -->
<g id="node18" class="node">
<title>destroy</title>
<path fill="none" stroke="#1c2123" d="M1142.5,-119C1142.5,-119 1309.5,-119 1309.5,-119 1315.5,-119 1321.5,-125 1321.5,-131 1321.5,-131 1321.5,-153 1321.5,-153 1321.5,-159 1315.5,-165 1309.5,-165 1309.5,-165 1142.5,-165 1142.5,-165 1136.5,-165 1130.5,-159 1130.5,-153 1130.5,-153 1130.5,-131 1130.5,-131 1130.5,-125 1136.5,-119 1142.5,-119"/>
<text text-anchor="middle" x="1226" y="-149.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">destroy</text>
<polyline fill="none" stroke="#1c2123" points="1130.5,-142 1321.5,-142 "/>
<text text-anchor="start" x="1138.5" y="-126.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">停掉source region的ApplyFsm</text>
</g>
<!-- logs_up_to_date_for_merge&#45;&gt;destroy -->
<g id="edge21" class="edge">
<title>logs_up_to_date_for_merge&#45;&gt;destroy</title>
<path fill="none" stroke="#666666" d="M1087.15,-150.09C1098.07,-149.45 1109.09,-148.8 1119.88,-148.17"/>
<polygon fill="#666666" stroke="#666666" points="1120.37,-151.65 1130.15,-147.57 1119.96,-144.66 1120.37,-151.65"/>
</g>
<!-- force_send_Noop -->
<g id="node19" class="node">
<title>force_send_Noop</title>
<path fill="none" stroke="#1c2123" d="M1164.5,-184.5C1164.5,-184.5 1287.5,-184.5 1287.5,-184.5 1293.5,-184.5 1299.5,-190.5 1299.5,-196.5 1299.5,-196.5 1299.5,-233.5 1299.5,-233.5 1299.5,-239.5 1293.5,-245.5 1287.5,-245.5 1287.5,-245.5 1164.5,-245.5 1164.5,-245.5 1158.5,-245.5 1152.5,-239.5 1152.5,-233.5 1152.5,-233.5 1152.5,-196.5 1152.5,-196.5 1152.5,-190.5 1158.5,-184.5 1164.5,-184.5"/>
<text text-anchor="middle" x="1226" y="-230.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">force_send(Msg::Noop)</text>
<polyline fill="none" stroke="#1c2123" points="1152.5,-222.5 1299.5,-222.5 "/>
<text text-anchor="start" x="1160.5" y="-207.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">向target_region_id</text>
<text text-anchor="middle" x="1226" y="-192.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发送noop消息</text>
</g>
<!-- logs_up_to_date_for_merge&#45;&gt;force_send_Noop -->
<g id="edge22" class="edge">
<title>logs_up_to_date_for_merge&#45;&gt;force_send_Noop</title>
<path fill="none" stroke="#666666" d="M1087.15,-183.71C1105.77,-187.93 1124.67,-192.22 1142.26,-196.22"/>
<polygon fill="#666666" stroke="#666666" points="1141.93,-199.73 1152.46,-198.53 1143.48,-192.9 1141.93,-199.73"/>
</g>
<!-- force_send_Noop&#45;&gt;handle_normal -->
<g id="edge23" class="edge">
<title>force_send_Noop&#45;&gt;handle_normal</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1299.61,-244.66C1320.38,-253.14 1342.63,-262.23 1362.02,-270.15"/>
<polygon fill="green" stroke="green" points="1360.71,-273.4 1371.29,-273.94 1363.36,-266.92 1360.71,-273.4"/>
</g>
<!-- on_catch_up_logs_for_merge&#45;&gt;ApplyTask_LogsUpToDate -->
<g id="edge25" class="edge">
<title>on_catch_up_logs_for_merge&#45;&gt;ApplyTask_LogsUpToDate</title>
<path fill="none" stroke="#666666" d="M541.95,-64.1C578.32,-85.99 636.16,-120.48 647,-125 647.21,-125.09 647.41,-125.17 647.62,-125.26"/>
<polygon fill="#666666" stroke="#666666" points="646.54,-128.59 657.13,-128.92 649.05,-122.06 646.54,-128.59"/>
</g>
</g>
</svg>
