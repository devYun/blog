<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: kv_raft Pages: 1 -->
<svg width="788pt" height="150pt"
 viewBox="0.00 0.00 788.00 150.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 146)">
<title>kv_raft</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-146 784,-146 784,4 -4,4"/>
<!-- kv_Service_batch_raft -->
<g id="node1" class="node">
<title>kv_Service_batch_raft</title>
<path fill="none" stroke="#1c2123" d="M12,-80.5C12,-80.5 72,-80.5 72,-80.5 78,-80.5 84,-86.5 84,-92.5 84,-92.5 84,-129.5 84,-129.5 84,-135.5 78,-141.5 72,-141.5 72,-141.5 12,-141.5 12,-141.5 6,-141.5 0,-135.5 0,-129.5 0,-129.5 0,-92.5 0,-92.5 0,-86.5 6,-80.5 12,-80.5"/>
<text text-anchor="middle" x="42" y="-126.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">kv/Service</text>
<text text-anchor="middle" x="42" y="-111.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> batch_raft</text>
<polyline fill="none" stroke="#1c2123" points="0,-103.5 84,-103.5 "/>
<text text-anchor="start" x="8" y="-88.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">GRPC 接口</text>
</g>
<!-- RaftStoreRouter_send_raft_msg -->
<g id="node3" class="node">
<title>RaftStoreRouter_send_raft_msg</title>
<path fill="none" stroke="#1c2123" d="M132,-52C132,-52 213,-52 213,-52 219,-52 225,-58 225,-64 225,-64 225,-78 225,-78 225,-84 219,-90 213,-90 213,-90 132,-90 132,-90 126,-90 120,-84 120,-78 120,-78 120,-64 120,-64 120,-58 126,-52 132,-52"/>
<text text-anchor="middle" x="172.5" y="-74.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftStoreRouter</text>
<text text-anchor="middle" x="172.5" y="-59.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> send_raft_msg</text>
</g>
<!-- kv_Service_batch_raft&#45;&gt;RaftStoreRouter_send_raft_msg -->
<g id="edge1" class="edge">
<title>kv_Service_batch_raft&#45;&gt;RaftStoreRouter_send_raft_msg</title>
<path fill="none" stroke="#666666" d="M84.01,-98.23C92.23,-95.68 101.03,-92.93 109.78,-90.21"/>
<polygon fill="#666666" stroke="#666666" points="111.08,-93.47 119.59,-87.16 109,-86.79 111.08,-93.47"/>
</g>
<!-- kv_Service_raft -->
<g id="node2" class="node">
<title>kv_Service_raft</title>
<path fill="none" stroke="#1c2123" d="M12,-0.5C12,-0.5 72,-0.5 72,-0.5 78,-0.5 84,-6.5 84,-12.5 84,-12.5 84,-49.5 84,-49.5 84,-55.5 78,-61.5 72,-61.5 72,-61.5 12,-61.5 12,-61.5 6,-61.5 0,-55.5 0,-49.5 0,-49.5 0,-12.5 0,-12.5 0,-6.5 6,-0.5 12,-0.5"/>
<text text-anchor="middle" x="42" y="-46.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">kv/Service</text>
<text text-anchor="middle" x="42" y="-31.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> raft</text>
<polyline fill="none" stroke="#1c2123" points="0,-23.5 84,-23.5 "/>
<text text-anchor="start" x="8" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">GRPC 接口</text>
</g>
<!-- kv_Service_raft&#45;&gt;RaftStoreRouter_send_raft_msg -->
<g id="edge2" class="edge">
<title>kv_Service_raft&#45;&gt;RaftStoreRouter_send_raft_msg</title>
<path fill="none" stroke="#666666" d="M84.01,-43.77C92.23,-46.32 101.03,-49.07 109.78,-51.79"/>
<polygon fill="#666666" stroke="#666666" points="109,-55.21 119.59,-54.84 111.08,-48.53 109,-55.21"/>
</g>
<!-- ServerRaftStoreRouter_send_raft_msg -->
<g id="node4" class="node">
<title>ServerRaftStoreRouter_send_raft_msg</title>
<path fill="none" stroke="#1c2123" d="M273,-52C273,-52 389,-52 389,-52 395,-52 401,-58 401,-64 401,-64 401,-78 401,-78 401,-84 395,-90 389,-90 389,-90 273,-90 273,-90 267,-90 261,-84 261,-78 261,-78 261,-64 261,-64 261,-58 267,-52 273,-52"/>
<text text-anchor="middle" x="331" y="-74.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">ServerRaftStoreRouter</text>
<text text-anchor="start" x="269" y="-59.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> send_raft_msg</text>
</g>
<!-- RaftStoreRouter_send_raft_msg&#45;&gt;ServerRaftStoreRouter_send_raft_msg -->
<g id="edge3" class="edge">
<title>RaftStoreRouter_send_raft_msg&#45;&gt;ServerRaftStoreRouter_send_raft_msg</title>
<path fill="none" stroke="#666666" d="M225.18,-71C233.37,-71 242,-71 250.65,-71"/>
<polygon fill="#666666" stroke="#666666" points="250.79,-74.5 260.79,-71 250.79,-67.5 250.79,-74.5"/>
</g>
<!-- RaftRouter_send_raft_msg -->
<g id="node5" class="node">
<title>RaftRouter_send_raft_msg</title>
<path fill="none" stroke="#1c2123" d="M449,-52C449,-52 526,-52 526,-52 532,-52 538,-58 538,-64 538,-64 538,-78 538,-78 538,-84 532,-90 526,-90 526,-90 449,-90 449,-90 443,-90 437,-84 437,-78 437,-78 437,-64 437,-64 437,-58 443,-52 449,-52"/>
<text text-anchor="middle" x="487.5" y="-74.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftRouter</text>
<text text-anchor="middle" x="487.5" y="-59.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> send_raft_msg</text>
</g>
<!-- ServerRaftStoreRouter_send_raft_msg&#45;&gt;RaftRouter_send_raft_msg -->
<g id="edge4" class="edge">
<title>ServerRaftStoreRouter_send_raft_msg&#45;&gt;RaftRouter_send_raft_msg</title>
<path fill="none" stroke="#666666" d="M401.12,-71C409.68,-71 418.39,-71 426.8,-71"/>
<polygon fill="#666666" stroke="#666666" points="426.88,-74.5 436.88,-71 426.88,-67.5 426.88,-74.5"/>
</g>
<!-- RaftRouter_try_send -->
<g id="node6" class="node">
<title>RaftRouter_try_send</title>
<path fill="none" stroke="#1c2123" d="M586,-25.5C586,-25.5 768,-25.5 768,-25.5 774,-25.5 780,-31.5 780,-37.5 780,-37.5 780,-104.5 780,-104.5 780,-110.5 774,-116.5 768,-116.5 768,-116.5 586,-116.5 586,-116.5 580,-116.5 574,-110.5 574,-104.5 574,-104.5 574,-37.5 574,-37.5 574,-31.5 580,-25.5 586,-25.5"/>
<text text-anchor="middle" x="677" y="-101.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftRouter</text>
<text text-anchor="middle" x="677" y="-86.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> try_send</text>
<polyline fill="none" stroke="#1c2123" points="574,-78.5 780,-78.5 "/>
<text text-anchor="start" x="582" y="-63.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">根据normals中的map</text>
<text text-anchor="start" x="582" y="-48.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 找到region_id对应的PeerFsm的</text>
<text text-anchor="start" x="582" y="-33.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Mailbox, 使用它发送消息</text>
</g>
<!-- RaftRouter_send_raft_msg&#45;&gt;RaftRouter_try_send -->
<g id="edge5" class="edge">
<title>RaftRouter_send_raft_msg&#45;&gt;RaftRouter_try_send</title>
<path fill="none" stroke="#666666" d="M538.25,-71C546.29,-71 554.89,-71 563.72,-71"/>
<polygon fill="#666666" stroke="#666666" points="563.77,-74.5 573.77,-71 563.77,-67.5 563.77,-74.5"/>
</g>
</g>
</svg>
