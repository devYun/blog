<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.44.1 (20200629.0846)
 -->
<!-- Title: on_check_merge Pages: 1 -->
<svg width="1852pt" height="559pt"
 viewBox="0.00 0.00 1852.00 559.08" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 555.08)">
<title>on_check_merge</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-555.08 1848,-555.08 1848,4 -4,4"/>
<!-- on_check_merge -->
<g id="node1" class="node">
<title>on_check_merge</title>
<path fill="none" stroke="#1c2123" d="M433,-349.08C433,-349.08 347,-349.08 347,-349.08 341,-349.08 335,-343.08 335,-337.08 335,-337.08 335,-325.08 335,-325.08 335,-319.08 341,-313.08 347,-313.08 347,-313.08 433,-313.08 433,-313.08 439,-313.08 445,-319.08 445,-325.08 445,-325.08 445,-337.08 445,-337.08 445,-343.08 439,-349.08 433,-349.08"/>
<text text-anchor="middle" x="390" y="-327.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_check_merge</text>
</g>
<!-- register_merge_check_tick -->
<g id="node2" class="node">
<title>register_merge_check_tick</title>
<path fill="none" stroke="#1c2123" d="M758.5,-159.08C758.5,-159.08 618.5,-159.08 618.5,-159.08 612.5,-159.08 606.5,-153.08 606.5,-147.08 606.5,-147.08 606.5,-135.08 606.5,-135.08 606.5,-129.08 612.5,-123.08 618.5,-123.08 618.5,-123.08 758.5,-123.08 758.5,-123.08 764.5,-123.08 770.5,-129.08 770.5,-135.08 770.5,-135.08 770.5,-147.08 770.5,-147.08 770.5,-153.08 764.5,-159.08 758.5,-159.08"/>
<text text-anchor="middle" x="688.5" y="-137.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">register_merge_check_tick</text>
</g>
<!-- on_check_merge&#45;&gt;register_merge_check_tick -->
<g id="edge1" class="edge">
<title>on_check_merge&#45;&gt;register_merge_check_tick</title>
<path fill="none" stroke="#666666" d="M403.43,-312.88C427.2,-279.58 482.5,-208.98 547,-173.08 562.08,-164.69 579.22,-158.5 596.24,-153.93"/>
<polygon fill="#666666" stroke="#666666" points="597.37,-157.25 606.22,-151.42 595.67,-150.46 597.37,-157.25"/>
</g>
<!-- schedule_merge -->
<g id="node3" class="node">
<title>schedule_merge</title>
<path fill="none" stroke="#1c2123" d="M729,-361.08C729,-361.08 648,-361.08 648,-361.08 642,-361.08 636,-355.08 636,-349.08 636,-349.08 636,-337.08 636,-337.08 636,-331.08 642,-325.08 648,-325.08 648,-325.08 729,-325.08 729,-325.08 735,-325.08 741,-331.08 741,-337.08 741,-337.08 741,-349.08 741,-349.08 741,-355.08 735,-361.08 729,-361.08"/>
<text text-anchor="middle" x="688.5" y="-339.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">schedule_merge</text>
</g>
<!-- on_check_merge&#45;&gt;schedule_merge -->
<g id="edge2" class="edge">
<title>on_check_merge&#45;&gt;schedule_merge</title>
<path fill="none" stroke="#666666" d="M445.04,-333.27C496.04,-335.33 572.43,-338.42 625.8,-340.58"/>
<polygon fill="#666666" stroke="#666666" points="625.69,-344.08 635.82,-340.99 625.97,-337.09 625.69,-344.08"/>
</g>
<!-- pending_merge_state -->
<g id="node4" class="node">
<title>pending_merge_state</title>
<path fill="#feed9b" stroke="#f7e495" d="M878,-126.08C878,-126.08 1084,-126.08 1084,-126.08 1090,-126.08 1096,-132.08 1096,-138.08 1096,-138.08 1096,-236.08 1096,-236.08 1096,-242.08 1090,-248.08 1084,-248.08 1084,-248.08 878,-248.08 878,-248.08 872,-248.08 866,-242.08 866,-236.08 866,-236.08 866,-138.08 866,-138.08 866,-132.08 872,-126.08 878,-126.08"/>
<text text-anchor="middle" x="981" y="-232.88" font-family="Times,serif" font-size="14.00" fill="#40575d">pending_merge_state</text>
<polyline fill="none" stroke="#f7e495" points="866,-225.08 1096,-225.08 "/>
<text text-anchor="start" x="874" y="-209.88" font-family="Times,serif" font-size="14.00" fill="#40575d">Option&lt;MergeState&gt;</text>
<text text-anchor="start" x="874" y="-194.88" font-family="Times,serif" font-size="14.00" fill="#40575d"> pub min_index: u64,</text>
<polyline fill="none" stroke="#f7e495" points="866,-187.08 1096,-187.08 "/>
<text text-anchor="start" x="874" y="-171.88" font-family="Times,serif" font-size="14.00" fill="#40575d">pub target: ::protobuf::SingularPtrField</text>
<text text-anchor="start" x="874" y="-156.88" font-family="Times,serif" font-size="14.00" fill="#40575d"> &lt;super::metapb::Region&gt;,</text>
<polyline fill="none" stroke="#f7e495" points="866,-149.08 1096,-149.08 "/>
<text text-anchor="start" x="874" y="-133.88" font-family="Times,serif" font-size="14.00" fill="#40575d">pub commit: u64,</text>
</g>
<!-- on_check_merge&#45;&gt;pending_merge_state -->
<g id="edge14" class="edge">
<title>on_check_merge&#45;&gt;pending_merge_state</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M406.47,-312.78C432.2,-283.9 486.9,-228.68 547,-206.08 646.01,-168.85 766.86,-166.78 855.7,-172.48"/>
<polygon fill="green" stroke="green" points="855.61,-175.98 865.82,-173.17 856.09,-169 855.61,-175.98"/>
</g>
<!-- pending_remove -->
<g id="node10" class="node">
<title>pending_remove</title>
<path fill="none" stroke="#1c2123" d="M730.5,-415.08C730.5,-415.08 646.5,-415.08 646.5,-415.08 640.5,-415.08 634.5,-409.08 634.5,-403.08 634.5,-403.08 634.5,-391.08 634.5,-391.08 634.5,-385.08 640.5,-379.08 646.5,-379.08 646.5,-379.08 730.5,-379.08 730.5,-379.08 736.5,-379.08 742.5,-385.08 742.5,-391.08 742.5,-391.08 742.5,-403.08 742.5,-403.08 742.5,-409.08 736.5,-415.08 730.5,-415.08"/>
<text text-anchor="middle" x="688.5" y="-393.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">pending_remove</text>
</g>
<!-- on_check_merge&#45;&gt;pending_remove -->
<g id="edge15" class="edge">
<title>on_check_merge&#45;&gt;pending_remove</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M445.33,-345.45C475.24,-353.16 513.06,-362.58 547,-370.08 572.15,-375.64 599.97,-381.12 624.18,-385.68"/>
<polygon fill="green" stroke="green" points="623.84,-389.18 634.32,-387.58 625.13,-382.3 623.84,-389.18"/>
</g>
<!-- schedule_merge&#45;&gt;pending_merge_state -->
<g id="edge3" class="edge">
<title>schedule_merge&#45;&gt;pending_merge_state</title>
<path fill="none" stroke="#666666" d="M741.17,-342.57C769.41,-340.09 803.86,-333.29 830,-316.08 853.79,-300.43 845.78,-283.13 866,-263.08 868.82,-260.29 871.75,-257.54 874.78,-254.83"/>
<polygon fill="#666666" stroke="#666666" points="877.17,-257.39 882.46,-248.21 872.6,-252.09 877.17,-257.39"/>
</g>
<!-- validate_merge_peer -->
<g id="node5" class="node">
<title>validate_merge_peer</title>
<path fill="none" stroke="#1c2123" d="M1251,-325.08C1251,-325.08 1144,-325.08 1144,-325.08 1138,-325.08 1132,-319.08 1132,-313.08 1132,-313.08 1132,-301.08 1132,-301.08 1132,-295.08 1138,-289.08 1144,-289.08 1144,-289.08 1251,-289.08 1251,-289.08 1257,-289.08 1263,-295.08 1263,-301.08 1263,-301.08 1263,-313.08 1263,-313.08 1263,-319.08 1257,-325.08 1251,-325.08"/>
<text text-anchor="middle" x="1197.5" y="-303.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">validate_merge_peer</text>
</g>
<!-- schedule_merge&#45;&gt;validate_merge_peer -->
<g id="edge4" class="edge">
<title>schedule_merge&#45;&gt;validate_merge_peer</title>
<path fill="none" stroke="#666666" d="M741.38,-339.4C831.5,-333 1017.31,-319.8 1121.49,-312.41"/>
<polygon fill="#666666" stroke="#666666" points="1121.89,-315.89 1131.62,-311.69 1121.39,-308.91 1121.89,-315.89"/>
</g>
<!-- get_min_progress -->
<g id="node6" class="node">
<title>get_min_progress</title>
<path fill="none" stroke="#1c2123" d="M1242.5,-271.08C1242.5,-271.08 1152.5,-271.08 1152.5,-271.08 1146.5,-271.08 1140.5,-265.08 1140.5,-259.08 1140.5,-259.08 1140.5,-247.08 1140.5,-247.08 1140.5,-241.08 1146.5,-235.08 1152.5,-235.08 1152.5,-235.08 1242.5,-235.08 1242.5,-235.08 1248.5,-235.08 1254.5,-241.08 1254.5,-247.08 1254.5,-247.08 1254.5,-259.08 1254.5,-259.08 1254.5,-265.08 1248.5,-271.08 1242.5,-271.08"/>
<text text-anchor="middle" x="1197.5" y="-249.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_min_progress</text>
</g>
<!-- schedule_merge&#45;&gt;get_min_progress -->
<g id="edge5" class="edge">
<title>schedule_merge&#45;&gt;get_min_progress</title>
<path fill="none" stroke="#666666" d="M741.21,-333.22C776.37,-326.56 823.97,-317.64 866,-310.08 957.58,-293.62 1063.6,-275.5 1130.36,-264.21"/>
<polygon fill="#666666" stroke="#666666" points="1131.04,-267.64 1140.32,-262.52 1129.88,-260.74 1131.04,-267.64"/>
</g>
<!-- AdminCmdType_CommitMerge -->
<g id="node7" class="node">
<title>AdminCmdType_CommitMerge</title>
<path fill="none" stroke="#1c2123" d="M1311,-276.58C1311,-276.58 1536,-276.58 1536,-276.58 1542,-276.58 1548,-282.58 1548,-288.58 1548,-288.58 1548,-325.58 1548,-325.58 1548,-331.58 1542,-337.58 1536,-337.58 1536,-337.58 1311,-337.58 1311,-337.58 1305,-337.58 1299,-331.58 1299,-325.58 1299,-325.58 1299,-288.58 1299,-288.58 1299,-282.58 1305,-276.58 1311,-276.58"/>
<text text-anchor="middle" x="1423.5" y="-322.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">AdminCmdType_CommitMerge</text>
<polyline fill="none" stroke="#1c2123" points="1299,-314.58 1548,-314.58 "/>
<text text-anchor="start" x="1307" y="-299.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">发送类型为CommitMerge的AdminCmd</text>
<text text-anchor="start" x="1307" y="-284.38" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 会附带上entries</text>
</g>
<!-- schedule_merge&#45;&gt;AdminCmdType_CommitMerge -->
<g id="edge6" class="edge">
<title>schedule_merge&#45;&gt;AdminCmdType_CommitMerge</title>
<path fill="none" stroke="#666666" d="M741.05,-344.89C841.66,-347.84 1071.13,-351.72 1263,-334.08 1271.34,-333.31 1279.91,-332.36 1288.53,-331.27"/>
<polygon fill="#666666" stroke="#666666" points="1289.2,-334.71 1298.66,-329.94 1288.29,-327.77 1289.2,-334.71"/>
</g>
<!-- router_force_send -->
<g id="node8" class="node">
<title>router_force_send</title>
<path fill="none" stroke="#1c2123" d="M1596,-311.08C1596,-311.08 1832,-311.08 1832,-311.08 1838,-311.08 1844,-317.08 1844,-323.08 1844,-323.08 1844,-375.08 1844,-375.08 1844,-381.08 1838,-387.08 1832,-387.08 1832,-387.08 1596,-387.08 1596,-387.08 1590,-387.08 1584,-381.08 1584,-375.08 1584,-375.08 1584,-323.08 1584,-323.08 1584,-317.08 1590,-311.08 1596,-311.08"/>
<text text-anchor="middle" x="1714" y="-371.88" font-family="Times,serif" font-size="14.00" fill="#2f3638">router.force_send(targe_id, RaftCommand..)</text>
<polyline fill="none" stroke="#1c2123" points="1584,-364.08 1844,-364.08 "/>
<text text-anchor="start" x="1592" y="-348.88" font-family="Times,serif" font-size="14.00" fill="#2f3638">向本地的target_id</text>
<text text-anchor="start" x="1592" y="-333.88" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发送commit merge</text>
<text text-anchor="start" x="1592" y="-318.88" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 的 RaftCommand</text>
</g>
<!-- schedule_merge&#45;&gt;router_force_send -->
<g id="edge7" class="edge">
<title>schedule_merge&#45;&gt;router_force_send</title>
<path fill="none" stroke="#666666" d="M741.16,-349C776.3,-352.73 823.89,-357.18 866,-359.08 1115.06,-370.35 1405.72,-362.31 1573.64,-355.59"/>
<polygon fill="#666666" stroke="#666666" points="1573.93,-359.08 1583.78,-355.18 1573.64,-352.09 1573.93,-359.08"/>
</g>
<!-- pending_merge_state&#45;&gt;validate_merge_peer -->
<g id="edge10" class="edge">
<title>pending_merge_state&#45;&gt;validate_merge_peer</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1075.5,-248.2C1093.93,-259.34 1113.34,-270.47 1132,-280.08 1135.06,-281.66 1138.23,-283.22 1141.46,-284.74"/>
<polygon fill="green" stroke="green" points="1140.08,-287.96 1150.63,-288.94 1142.99,-281.6 1140.08,-287.96"/>
</g>
<!-- pending_merge_state&#45;&gt;get_min_progress -->
<g id="edge11" class="edge">
<title>pending_merge_state&#45;&gt;get_min_progress</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1096.16,-222.21C1107.88,-225.81 1119.49,-229.39 1130.42,-232.75"/>
<polygon fill="green" stroke="green" points="1129.67,-236.18 1140.26,-235.78 1131.73,-229.49 1129.67,-236.18"/>
</g>
<!-- validate_merge_peer&#45;&gt;AdminCmdType_CommitMerge -->
<g id="edge12" class="edge">
<title>validate_merge_peer&#45;&gt;AdminCmdType_CommitMerge</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1263.29,-307.08C1271.37,-307.08 1279.85,-307.08 1288.51,-307.08"/>
<polygon fill="green" stroke="green" points="1288.76,-310.58 1298.76,-307.08 1288.76,-303.58 1288.76,-310.58"/>
</g>
<!-- get_min_progress&#45;&gt;AdminCmdType_CommitMerge -->
<g id="edge13" class="edge">
<title>get_min_progress&#45;&gt;AdminCmdType_CommitMerge</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1254.74,-266.64C1265.37,-269.2 1276.9,-271.98 1288.77,-274.84"/>
<polygon fill="green" stroke="green" points="1288.26,-278.32 1298.8,-277.26 1289.9,-271.52 1288.26,-278.32"/>
</g>
<!-- AdminCmdType_CommitMerge&#45;&gt;router_force_send -->
<g id="edge9" class="edge">
<title>AdminCmdType_CommitMerge&#45;&gt;router_force_send</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1548.11,-325.08C1556.57,-326.31 1565.13,-327.55 1573.67,-328.8"/>
<polygon fill="green" stroke="green" points="1573.27,-332.28 1583.67,-330.25 1574.28,-325.35 1573.27,-332.28"/>
</g>
<!-- entries -->
<g id="node9" class="node">
<title>entries</title>
<path fill="none" stroke="#1c2123" d="M1212.5,-217.08C1212.5,-217.08 1182.5,-217.08 1182.5,-217.08 1176.5,-217.08 1170.5,-211.08 1170.5,-205.08 1170.5,-205.08 1170.5,-193.08 1170.5,-193.08 1170.5,-187.08 1176.5,-181.08 1182.5,-181.08 1182.5,-181.08 1212.5,-181.08 1212.5,-181.08 1218.5,-181.08 1224.5,-187.08 1224.5,-193.08 1224.5,-193.08 1224.5,-205.08 1224.5,-205.08 1224.5,-211.08 1218.5,-217.08 1212.5,-217.08"/>
<text text-anchor="middle" x="1197.5" y="-195.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">entries</text>
</g>
<!-- entries&#45;&gt;AdminCmdType_CommitMerge -->
<g id="edge8" class="edge">
<title>entries&#45;&gt;AdminCmdType_CommitMerge</title>
<path fill="none" stroke="#666666" d="M1224.74,-209.55C1236.52,-214.39 1250.55,-220.32 1263,-226.08 1293.78,-240.31 1327.31,-257.14 1355.66,-271.76"/>
<polygon fill="#666666" stroke="#666666" points="1354.18,-274.93 1364.67,-276.42 1357.4,-268.72 1354.18,-274.93"/>
</g>
<!-- on_ready_prepare_merge -->
<g id="node11" class="node">
<title>on_ready_prepare_merge</title>
<path fill="none" stroke="#1c2123" d="M12,-331.58C12,-331.58 221,-331.58 221,-331.58 227,-331.58 233,-337.58 233,-343.58 233,-343.58 233,-410.58 233,-410.58 233,-416.58 227,-422.58 221,-422.58 221,-422.58 12,-422.58 12,-422.58 6,-422.58 0,-416.58 0,-410.58 0,-410.58 0,-343.58 0,-343.58 0,-337.58 6,-331.58 12,-331.58"/>
<text text-anchor="middle" x="116.5" y="-407.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_ready_prepare_merge</text>
<polyline fill="none" stroke="#1c2123" points="0,-399.58 233,-399.58 "/>
<text text-anchor="start" x="8" y="-384.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">设置了pending_merge_state</text>
<text text-anchor="start" x="8" y="-369.38" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 如果有catch_up_logs</text>
<text text-anchor="start" x="8" y="-354.38" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 则先让ApplyFsm执行LogsUpToDate</text>
<text text-anchor="start" x="8" y="-339.38" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 否则就直接执行on_check_merge</text>
</g>
<!-- on_ready_prepare_merge&#45;&gt;on_check_merge -->
<g id="edge19" class="edge">
<title>on_ready_prepare_merge&#45;&gt;on_check_merge</title>
<path fill="none" stroke="#666666" d="M233.03,-357.51C264.53,-352.17 297.5,-346.58 324.98,-341.93"/>
<polygon fill="#666666" stroke="#666666" points="325.57,-345.38 334.84,-340.26 324.4,-338.48 325.57,-345.38"/>
</g>
<!-- on_ready_prepare_merge&#45;&gt;pending_merge_state -->
<g id="edge16" class="edge">
<title>on_ready_prepare_merge&#45;&gt;pending_merge_state</title>
<path fill="none" stroke="#666666" d="M155.11,-331.46C223.4,-252.67 376.56,-93.79 547,-34.08 665.71,7.5 714.04,14.63 830,-34.08 871.1,-51.35 906.59,-85.98 932.72,-117.93"/>
<polygon fill="#666666" stroke="#666666" points="930.18,-120.36 939.16,-125.98 935.65,-115.99 930.18,-120.36"/>
</g>
<!-- on_ready_prepare_merge&#45;&gt;pending_remove -->
<g id="edge17" class="edge">
<title>on_ready_prepare_merge&#45;&gt;pending_remove</title>
<path fill="none" stroke="#666666" d="M233.19,-381.14C351.12,-385.28 529.73,-391.55 624.02,-394.85"/>
<polygon fill="#666666" stroke="#666666" points="624.15,-398.36 634.26,-395.21 624.39,-391.37 624.15,-398.36"/>
</g>
<!-- catch_up_logs -->
<g id="node12" class="node">
<title>catch_up_logs</title>
<path fill="#feed9b" stroke="#f7e495" d="M281,-443.58C281,-443.58 499,-443.58 499,-443.58 505,-443.58 511,-449.58 511,-455.58 511,-455.58 511,-538.58 511,-538.58 511,-544.58 505,-550.58 499,-550.58 499,-550.58 281,-550.58 281,-550.58 275,-550.58 269,-544.58 269,-538.58 269,-538.58 269,-455.58 269,-455.58 269,-449.58 275,-443.58 281,-443.58"/>
<text text-anchor="middle" x="390" y="-535.38" font-family="Times,serif" font-size="14.00" fill="#40575d">catch_up_logs</text>
<polyline fill="none" stroke="#f7e495" points="269,-527.58 511,-527.58 "/>
<text text-anchor="start" x="277" y="-512.38" font-family="Times,serif" font-size="14.00" fill="#40575d">Option&lt;CatchUpLogs&gt;</text>
<text text-anchor="start" x="277" y="-497.38" font-family="Times,serif" font-size="14.00" fill="#40575d"> pub target_region_id: u64,</text>
<polyline fill="none" stroke="#f7e495" points="269,-489.58 511,-489.58 "/>
<text text-anchor="start" x="277" y="-474.38" font-family="Times,serif" font-size="14.00" fill="#40575d">pub merge: CommitMergeRequest,</text>
<polyline fill="none" stroke="#f7e495" points="269,-466.58 511,-466.58 "/>
<text text-anchor="start" x="277" y="-451.38" font-family="Times,serif" font-size="14.00" fill="#40575d">pub logs_up_to_date: Arc&lt;AtomicU64&gt;,</text>
</g>
<!-- on_ready_prepare_merge&#45;&gt;catch_up_logs -->
<g id="edge18" class="edge">
<title>on_ready_prepare_merge&#45;&gt;catch_up_logs</title>
<path fill="none" stroke="#666666" d="M220.53,-422.62C233.2,-428.22 246.28,-434 259.29,-439.75"/>
<polygon fill="#666666" stroke="#666666" points="258.18,-443.09 268.74,-443.93 261.01,-436.68 258.18,-443.09"/>
</g>
<!-- schedule_task -->
<g id="node13" class="node">
<title>schedule_task</title>
<path fill="none" stroke="#1c2123" d="M559,-455.58C559,-455.58 818,-455.58 818,-455.58 824,-455.58 830,-461.58 830,-467.58 830,-467.58 830,-504.58 830,-504.58 830,-510.58 824,-516.58 818,-516.58 818,-516.58 559,-516.58 559,-516.58 553,-516.58 547,-510.58 547,-504.58 547,-504.58 547,-467.58 547,-467.58 547,-461.58 553,-455.58 559,-455.58"/>
<text text-anchor="middle" x="688.5" y="-501.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">schedule_task</text>
<polyline fill="none" stroke="#1c2123" points="547,-493.58 830,-493.58 "/>
<text text-anchor="start" x="555" y="-478.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">发送LogsUpToDate消息给source 的ApplyFsm</text>
<text text-anchor="start" x="555" y="-463.38" font-family="Times,serif" font-size="14.00" fill="#2f3638"> destroy source ApplyFsm</text>
</g>
<!-- on_ready_prepare_merge&#45;&gt;schedule_task -->
<g id="edge20" class="edge">
<title>on_ready_prepare_merge&#45;&gt;schedule_task</title>
<path fill="none" stroke="#666666" d="M233.28,-394.79C245.34,-396.6 257.42,-398.39 269,-400.08 376.47,-415.79 404.84,-411.12 511,-434.08 534.74,-439.22 559.94,-445.89 583.65,-452.73"/>
<polygon fill="#666666" stroke="#666666" points="582.77,-456.12 593.35,-455.56 584.74,-449.4 582.77,-456.12"/>
</g>
<!-- catch_up_logs&#45;&gt;schedule_task -->
<g id="edge24" class="edge">
<title>catch_up_logs&#45;&gt;schedule_task</title>
<path fill="none" stroke="#666666" d="M511.17,-492.62C519.59,-492.31 528.14,-491.99 536.7,-491.68"/>
<polygon fill="#666666" stroke="#666666" points="536.88,-495.17 546.75,-491.3 536.62,-488.18 536.88,-495.17"/>
</g>
<!-- propose_normal -->
<g id="node14" class="node">
<title>propose_normal</title>
<path fill="none" stroke="#1c2123" d="M573.5,-215.58C573.5,-215.58 803.5,-215.58 803.5,-215.58 809.5,-215.58 815.5,-221.58 815.5,-227.58 815.5,-227.58 815.5,-294.58 815.5,-294.58 815.5,-300.58 809.5,-306.58 803.5,-306.58 803.5,-306.58 573.5,-306.58 573.5,-306.58 567.5,-306.58 561.5,-300.58 561.5,-294.58 561.5,-294.58 561.5,-227.58 561.5,-227.58 561.5,-221.58 567.5,-215.58 573.5,-215.58"/>
<text text-anchor="middle" x="688.5" y="-291.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">propose_normal</text>
<polyline fill="none" stroke="#1c2123" points="561.5,-283.58 815.5,-283.58 "/>
<text text-anchor="start" x="569.5" y="-268.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">在设置完pending_merge_state 之后</text>
<text text-anchor="start" x="569.5" y="-253.38" font-family="Times,serif" font-size="14.00" fill="#2f3638"> propose_normal 对于非RollbackMerge的</text>
<text text-anchor="start" x="569.5" y="-238.38" font-family="Times,serif" font-size="14.00" fill="#2f3638"> propose会返回错误</text>
<text text-anchor="start" x="569.5" y="-223.38" font-family="Times,serif" font-size="14.00" fill="#2f3638"> Error::ProposalInMergingMode</text>
</g>
<!-- propose_normal&#45;&gt;pending_merge_state -->
<g id="edge21" class="edge">
<title>propose_normal&#45;&gt;pending_merge_state</title>
<path fill="none" stroke="#666666" d="M815.65,-228.95C829.08,-225.53 842.73,-222.05 856.14,-218.63"/>
<polygon fill="#666666" stroke="#666666" points="857.02,-222.02 865.85,-216.16 855.29,-215.24 857.02,-222.02"/>
</g>
<!-- propose_conf_change -->
<g id="node15" class="node">
<title>propose_conf_change</title>
<path fill="none" stroke="#1c2123" d="M582,-43.58C582,-43.58 795,-43.58 795,-43.58 801,-43.58 807,-49.58 807,-55.58 807,-55.58 807,-92.58 807,-92.58 807,-98.58 801,-104.58 795,-104.58 795,-104.58 582,-104.58 582,-104.58 576,-104.58 570,-98.58 570,-92.58 570,-92.58 570,-55.58 570,-55.58 570,-49.58 576,-43.58 582,-43.58"/>
<text text-anchor="middle" x="688.5" y="-89.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">propose_conf_change</text>
<polyline fill="none" stroke="#1c2123" points="570,-81.58 807,-81.58 "/>
<text text-anchor="start" x="578" y="-66.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">在pending_merge_state不为None时候</text>
<text text-anchor="start" x="578" y="-51.38" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 会返回Error::ProposalInMergingMode</text>
</g>
<!-- propose_conf_change&#45;&gt;pending_merge_state -->
<g id="edge22" class="edge">
<title>propose_conf_change&#45;&gt;pending_merge_state</title>
<path fill="none" stroke="#666666" d="M803.18,-104.58C812.32,-107.6 821.35,-110.78 830,-114.08 838.73,-117.42 847.65,-121.08 856.57,-124.92"/>
<polygon fill="#666666" stroke="#666666" points="855.28,-128.18 865.85,-128.99 858.09,-121.77 855.28,-128.18"/>
</g>
<!-- on_catch_up_logs_for_merge -->
<g id="node16" class="node">
<title>on_catch_up_logs_for_merge</title>
<path fill="none" stroke="#1c2123" d="M194,-515.08C194,-515.08 39,-515.08 39,-515.08 33,-515.08 27,-509.08 27,-503.08 27,-503.08 27,-491.08 27,-491.08 27,-485.08 33,-479.08 39,-479.08 39,-479.08 194,-479.08 194,-479.08 200,-479.08 206,-485.08 206,-491.08 206,-491.08 206,-503.08 206,-503.08 206,-509.08 200,-515.08 194,-515.08"/>
<text text-anchor="middle" x="116.5" y="-493.38" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_catch_up_logs_for_merge</text>
</g>
<!-- on_catch_up_logs_for_merge&#45;&gt;catch_up_logs -->
<g id="edge23" class="edge">
<title>on_catch_up_logs_for_merge&#45;&gt;catch_up_logs</title>
<path fill="none" stroke="#666666" d="M206.02,-497.08C222.71,-497.08 240.49,-497.08 258.15,-497.08"/>
<polygon fill="#666666" stroke="#666666" points="258.53,-500.58 268.53,-497.08 258.53,-493.58 258.53,-500.58"/>
</g>
</g>
</svg>
