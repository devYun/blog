<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: reaft_client_resolve Pages: 1 -->
<svg width="2021pt" height="768pt"
 viewBox="0.00 0.00 2021.00 768.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 764)">
<title>reaft_client_resolve</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-764 2017,-764 2017,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_PdClient</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1192.5,-124C1192.5,-124 1254.5,-124 1254.5,-124 1260.5,-124 1266.5,-130 1266.5,-136 1266.5,-136 1266.5,-194 1266.5,-194 1266.5,-200 1260.5,-206 1254.5,-206 1254.5,-206 1192.5,-206 1192.5,-206 1186.5,-206 1180.5,-200 1180.5,-194 1180.5,-194 1180.5,-136 1180.5,-136 1180.5,-130 1186.5,-124 1192.5,-124"/>
<text text-anchor="middle" x="1223.5" y="-186" font-family="Times,serif" font-size="20.00">PdClient</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_PeerFsmDelegate</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1575,-15C1575,-15 1932.5,-15 1932.5,-15 1938.5,-15 1944.5,-21 1944.5,-27 1944.5,-27 1944.5,-139 1944.5,-139 1944.5,-145 1938.5,-151 1932.5,-151 1932.5,-151 1575,-151 1575,-151 1569,-151 1563,-145 1563,-139 1563,-139 1563,-27 1563,-27 1563,-21 1569,-15 1575,-15"/>
<text text-anchor="middle" x="1753.75" y="-131" font-family="Times,serif" font-size="20.00">PeerFsmDelegate</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_RaftStoreRouter</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M1138,-8C1138,-8 1531,-8 1531,-8 1537,-8 1543,-14 1543,-20 1543,-20 1543,-104 1543,-104 1543,-110 1537,-116 1531,-116 1531,-116 1138,-116 1138,-116 1132,-116 1126,-110 1126,-104 1126,-104 1126,-20 1126,-20 1126,-14 1132,-8 1138,-8"/>
<text text-anchor="middle" x="1334.5" y="-96" font-family="Times,serif" font-size="20.00">RaftStoreRouter</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_resolver</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M21,-214C21,-214 1993,-214 1993,-214 1999,-214 2005,-220 2005,-226 2005,-226 2005,-418 2005,-418 2005,-424 1999,-430 1993,-430 1993,-430 21,-430 21,-430 15,-430 9,-424 9,-418 9,-418 9,-226 9,-226 9,-220 15,-214 21,-214"/>
<text text-anchor="middle" x="1007" y="-410" font-family="Times,serif" font-size="20.00">resolver.rs/Runner</text>
</g>
<g id="clust13" class="cluster">
<title>cluster_PdStoreResolver</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M112,-438C112,-438 292,-438 292,-438 298,-438 304,-444 304,-450 304,-450 304,-608 304,-608 304,-614 298,-620 292,-620 292,-620 112,-620 112,-620 106,-620 100,-614 100,-608 100,-608 100,-450 100,-450 100,-444 106,-438 112,-438"/>
<text text-anchor="middle" x="202" y="-600" font-family="Times,serif" font-size="20.00">PdStoreResolver</text>
</g>
<g id="clust14" class="cluster">
<title>cluster_StreamBackEnd</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-628C20,-628 1288,-628 1288,-628 1294,-628 1300,-634 1300,-640 1300,-640 1300,-740 1300,-740 1300,-746 1294,-752 1288,-752 1288,-752 20,-752 20,-752 14,-752 8,-746 8,-740 8,-740 8,-640 8,-640 8,-634 14,-628 20,-628"/>
<text text-anchor="middle" x="654" y="-732" font-family="Times,serif" font-size="20.00">StreamBackEnd</text>
</g>
<!-- get_store -->
<g id="node1" class="node">
<title>get_store</title>
<path fill="none" stroke="#1c2123" d="M1244.5,-168C1244.5,-168 1202.5,-168 1202.5,-168 1196.5,-168 1190.5,-162 1190.5,-156 1190.5,-156 1190.5,-144 1190.5,-144 1190.5,-138 1196.5,-132 1202.5,-132 1202.5,-132 1244.5,-132 1244.5,-132 1250.5,-132 1256.5,-138 1256.5,-144 1256.5,-144 1256.5,-156 1256.5,-156 1256.5,-162 1250.5,-168 1244.5,-168"/>
<text text-anchor="middle" x="1223.5" y="-146.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_store</text>
</g>
<!-- register_store -->
<g id="node20" class="node">
<title>register_store</title>
<path fill="none" stroke="#1c2123" d="M1475,-324C1475,-324 1409,-324 1409,-324 1403,-324 1397,-318 1397,-312 1397,-312 1397,-300 1397,-300 1397,-294 1403,-288 1409,-288 1409,-288 1475,-288 1475,-288 1481,-288 1487,-294 1487,-300 1487,-300 1487,-312 1487,-312 1487,-318 1481,-324 1475,-324"/>
<text text-anchor="middle" x="1442" y="-302.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">register_store</text>
</g>
<!-- get_store&#45;&gt;register_store -->
<g id="edge24" class="edge">
<title>get_store&#45;&gt;register_store</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1256.89,-166.7C1275.07,-177.26 1297.19,-192.26 1313,-210 1336.01,-235.82 1322.27,-257.04 1349,-279 1359.87,-287.93 1373.58,-293.9 1387.08,-297.9"/>
<polygon fill="green" stroke="green" points="1386.27,-301.31 1396.83,-300.48 1388.06,-294.54 1386.27,-301.31"/>
</g>
<!-- take_peer_address -->
<g id="node21" class="node">
<title>take_peer_address</title>
<path fill="none" stroke="#1c2123" d="M1396,-223C1396,-223 1488,-223 1488,-223 1494,-223 1500,-229 1500,-235 1500,-235 1500,-257 1500,-257 1500,-263 1494,-269 1488,-269 1488,-269 1396,-269 1396,-269 1390,-269 1384,-263 1384,-257 1384,-257 1384,-235 1384,-235 1384,-229 1390,-223 1396,-223"/>
<text text-anchor="middle" x="1442" y="-253.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">take_peer_address</text>
<polyline fill="none" stroke="#1c2123" points="1384,-246 1500,-246 "/>
<text text-anchor="middle" x="1442" y="-230.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">返回peer addr</text>
</g>
<!-- get_store&#45;&gt;take_peer_address -->
<g id="edge25" class="edge">
<title>get_store&#45;&gt;take_peer_address</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1256.91,-164.37C1289.24,-178.71 1339.69,-201.08 1379.61,-218.78"/>
<polygon fill="green" stroke="green" points="1378.44,-222.09 1389,-222.94 1381.27,-215.69 1378.44,-222.09"/>
</g>
<!-- on_significant_msg -->
<g id="node2" class="node">
<title>on_significant_msg</title>
<path fill="none" stroke="#1c2123" d="M1682,-65C1682,-65 1583,-65 1583,-65 1577,-65 1571,-59 1571,-53 1571,-53 1571,-41 1571,-41 1571,-35 1577,-29 1583,-29 1583,-29 1682,-29 1682,-29 1688,-29 1694,-35 1694,-41 1694,-41 1694,-53 1694,-53 1694,-59 1688,-65 1682,-65"/>
<text text-anchor="middle" x="1632.5" y="-43.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">on_significant_msg</text>
</g>
<!-- global_replication_state -->
<g id="node3" class="node">
<title>global_replication_state</title>
<path fill="none" stroke="#1c2123" d="M1924.5,-59C1924.5,-59 1802.5,-59 1802.5,-59 1796.5,-59 1790.5,-53 1790.5,-47 1790.5,-47 1790.5,-35 1790.5,-35 1790.5,-29 1796.5,-23 1802.5,-23 1802.5,-23 1924.5,-23 1924.5,-23 1930.5,-23 1936.5,-29 1936.5,-35 1936.5,-35 1936.5,-47 1936.5,-47 1936.5,-53 1930.5,-59 1924.5,-59"/>
<text text-anchor="middle" x="1863.5" y="-37.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">global_replication_state</text>
</g>
<!-- on_significant_msg&#45;&gt;global_replication_state -->
<g id="edge1" class="edge">
<title>on_significant_msg&#45;&gt;global_replication_state</title>
<path fill="none" stroke="#666666" d="M1694.27,-45.41C1720.58,-44.72 1751.8,-43.9 1780.15,-43.16"/>
<polygon fill="#666666" stroke="#666666" points="1780.55,-46.65 1790.45,-42.89 1780.36,-39.65 1780.55,-46.65"/>
</g>
<!-- assign_commit_groups -->
<g id="node4" class="node">
<title>assign_commit_groups</title>
<path fill="none" stroke="#1c2123" d="M1923,-113C1923,-113 1804,-113 1804,-113 1798,-113 1792,-107 1792,-101 1792,-101 1792,-89 1792,-89 1792,-83 1798,-77 1804,-77 1804,-77 1923,-77 1923,-77 1929,-77 1935,-83 1935,-89 1935,-89 1935,-101 1935,-101 1935,-107 1929,-113 1923,-113"/>
<text text-anchor="middle" x="1863.5" y="-91.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">assign_commit_groups</text>
</g>
<!-- on_significant_msg&#45;&gt;assign_commit_groups -->
<g id="edge2" class="edge">
<title>on_significant_msg&#45;&gt;assign_commit_groups</title>
<path fill="none" stroke="#666666" d="M1694.22,-60.34C1706.08,-62.91 1718.42,-65.56 1730,-68 1746.8,-71.54 1764.82,-75.26 1781.99,-78.77"/>
<polygon fill="#666666" stroke="#666666" points="1781.48,-82.24 1791.98,-80.81 1782.88,-75.38 1781.48,-82.24"/>
</g>
<!-- report_resolved -->
<g id="node5" class="node">
<title>report_resolved</title>
<path fill="none" stroke="#1c2123" d="M1146,-16.5C1146,-16.5 1301,-16.5 1301,-16.5 1307,-16.5 1313,-22.5 1313,-28.5 1313,-28.5 1313,-65.5 1313,-65.5 1313,-71.5 1307,-77.5 1301,-77.5 1301,-77.5 1146,-77.5 1146,-77.5 1140,-77.5 1134,-71.5 1134,-65.5 1134,-65.5 1134,-28.5 1134,-28.5 1134,-22.5 1140,-16.5 1146,-16.5"/>
<text text-anchor="middle" x="1223.5" y="-62.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">report_resolved</text>
<polyline fill="none" stroke="#1c2123" points="1134,-54.5 1313,-54.5 "/>
<text text-anchor="start" x="1142" y="-39.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Report a StoreResolved event</text>
<text text-anchor="start" x="1142" y="-24.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> to all raft groups</text>
</g>
<!-- broadcast_normal -->
<g id="node6" class="node">
<title>broadcast_normal</title>
<path fill="none" stroke="#1c2123" d="M1361,-24C1361,-24 1523,-24 1523,-24 1529,-24 1535,-30 1535,-36 1535,-36 1535,-58 1535,-58 1535,-64 1529,-70 1523,-70 1523,-70 1361,-70 1361,-70 1355,-70 1349,-64 1349,-58 1349,-58 1349,-36 1349,-36 1349,-30 1355,-24 1361,-24"/>
<text text-anchor="middle" x="1442" y="-54.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">broadcast_normal</text>
<polyline fill="none" stroke="#1c2123" points="1349,-47 1535,-47 "/>
<text text-anchor="start" x="1357" y="-31.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">SignificantMsg::StoreResolved</text>
</g>
<!-- report_resolved&#45;&gt;broadcast_normal -->
<g id="edge3" class="edge">
<title>report_resolved&#45;&gt;broadcast_normal</title>
<path fill="none" stroke="#666666" d="M1313.18,-47C1321.66,-47 1330.3,-47 1338.89,-47"/>
<polygon fill="#666666" stroke="#666666" points="1338.94,-50.5 1348.94,-47 1338.94,-43.5 1338.94,-50.5"/>
</g>
<!-- broadcast_normal&#45;&gt;on_significant_msg -->
<g id="edge4" class="edge">
<title>broadcast_normal&#45;&gt;on_significant_msg</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1535.04,-47C1543.68,-47 1552.34,-47 1560.74,-47"/>
<polygon fill="green" stroke="green" points="1560.83,-50.5 1570.83,-47 1560.83,-43.5 1560.83,-50.5"/>
</g>
<!-- Runner -->
<g id="node7" class="node">
<title>Runner</title>
<path fill="none" stroke="#1c2123" d="M1742,-269.5C1742,-269.5 1985,-269.5 1985,-269.5 1991,-269.5 1997,-275.5 1997,-281.5 1997,-281.5 1997,-372.5 1997,-372.5 1997,-378.5 1991,-384.5 1985,-384.5 1985,-384.5 1742,-384.5 1742,-384.5 1736,-384.5 1730,-378.5 1730,-372.5 1730,-372.5 1730,-281.5 1730,-281.5 1730,-275.5 1736,-269.5 1742,-269.5"/>
<text text-anchor="middle" x="1863.5" y="-369.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Runner</text>
<polyline fill="none" stroke="#1c2123" points="1730,-361.5 1997,-361.5 "/>
<text text-anchor="start" x="1738" y="-346.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pd_client: Arc&lt;T&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="1730,-338.5 1997,-338.5 "/>
<text text-anchor="start" x="1738" y="-323.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_addrs: HashMap&lt;u64, StoreAddr&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="1730,-315.5 1997,-315.5 "/>
<text text-anchor="start" x="1738" y="-300.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">state: Arc&lt;Mutex&lt;GlobalReplicationState&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="1730,-292.5 1997,-292.5 "/>
<text text-anchor="start" x="1738" y="-277.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">router: RR,</text>
</g>
<!-- resolve -->
<g id="node8" class="node">
<title>resolve</title>
<path fill="none" stroke="#1c2123" d="M726,-265C726,-265 934,-265 934,-265 940,-265 946,-271 946,-277 946,-277 946,-329 946,-329 946,-335 940,-341 934,-341 934,-341 726,-341 726,-341 720,-341 714,-335 714,-329 714,-329 714,-277 714,-277 714,-271 720,-265 726,-265"/>
<text text-anchor="middle" x="830" y="-325.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolve</text>
<polyline fill="none" stroke="#1c2123" points="714,-318 946,-318 "/>
<text text-anchor="start" x="722" y="-302.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">先从store_addrs本地cache中取addr</text>
<text text-anchor="start" x="722" y="-287.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 失败的调用get_address去pd server</text>
<text text-anchor="start" x="722" y="-272.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 获取addr地址，然后保存到cache中</text>
</g>
<!-- task_cb -->
<g id="node15" class="node">
<title>task_cb</title>
<path fill="none" stroke="#1c2123" d="M994,-330.5C994,-330.5 1086,-330.5 1086,-330.5 1092,-330.5 1098,-336.5 1098,-342.5 1098,-342.5 1098,-379.5 1098,-379.5 1098,-385.5 1092,-391.5 1086,-391.5 1086,-391.5 994,-391.5 994,-391.5 988,-391.5 982,-385.5 982,-379.5 982,-379.5 982,-342.5 982,-342.5 982,-336.5 988,-330.5 994,-330.5"/>
<text text-anchor="middle" x="1040" y="-376.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">task_cb</text>
<polyline fill="none" stroke="#1c2123" points="982,-368.5 1098,-368.5 "/>
<text text-anchor="start" x="990" y="-353.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">解析完毕后调用</text>
<text text-anchor="start" x="990" y="-338.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> task的回调</text>
</g>
<!-- resolve&#45;&gt;task_cb -->
<g id="edge27" class="edge">
<title>resolve&#45;&gt;task_cb</title>
<path fill="none" stroke="#666666" d="M946.25,-335.14C954.98,-337.57 963.61,-339.98 971.87,-342.28"/>
<polygon fill="#666666" stroke="#666666" points="971.19,-345.72 981.76,-345.04 973.07,-338.98 971.19,-345.72"/>
</g>
<!-- get_address -->
<g id="node16" class="node">
<title>get_address</title>
<path fill="none" stroke="#1c2123" d="M1068,-261C1068,-261 1012,-261 1012,-261 1006,-261 1000,-255 1000,-249 1000,-249 1000,-237 1000,-237 1000,-231 1006,-225 1012,-225 1012,-225 1068,-225 1068,-225 1074,-225 1080,-231 1080,-237 1080,-237 1080,-249 1080,-249 1080,-255 1074,-261 1068,-261"/>
<text text-anchor="middle" x="1040" y="-239.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">get_address</text>
</g>
<!-- resolve&#45;&gt;get_address -->
<g id="edge13" class="edge">
<title>resolve&#45;&gt;get_address</title>
<path fill="none" stroke="#666666" d="M946.25,-269.75C961.64,-265.32 976.69,-260.97 990.05,-257.12"/>
<polygon fill="#666666" stroke="#666666" points="991.27,-260.41 999.9,-254.28 989.33,-253.69 991.27,-260.41"/>
</g>
<!-- store_addrs_get -->
<g id="node17" class="node">
<title>store_addrs_get</title>
<path fill="none" stroke="#1c2123" d="M1671.5,-392C1671.5,-392 1593.5,-392 1593.5,-392 1587.5,-392 1581.5,-386 1581.5,-380 1581.5,-380 1581.5,-368 1581.5,-368 1581.5,-362 1587.5,-356 1593.5,-356 1593.5,-356 1671.5,-356 1671.5,-356 1677.5,-356 1683.5,-362 1683.5,-368 1683.5,-368 1683.5,-380 1683.5,-380 1683.5,-386 1677.5,-392 1671.5,-392"/>
<text text-anchor="middle" x="1632.5" y="-370.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_addrs_get</text>
</g>
<!-- resolve&#45;&gt;store_addrs_get -->
<g id="edge14" class="edge">
<title>resolve&#45;&gt;store_addrs_get</title>
<path fill="none" stroke="#666666" d="M946.15,-299.86C1006.57,-300.32 1073.11,-304.84 1098,-321 1120.34,-335.51 1103.18,-360.25 1126,-374 1266.58,-458.72 1471.55,-419.66 1571.8,-392.45"/>
<polygon fill="#666666" stroke="#666666" points="1572.75,-395.82 1581.46,-389.78 1570.89,-389.07 1572.75,-395.82"/>
</g>
<!-- store_addrs_insert -->
<g id="node18" class="node">
<title>store_addrs_insert</title>
<path fill="none" stroke="#1c2123" d="M1678.5,-338C1678.5,-338 1586.5,-338 1586.5,-338 1580.5,-338 1574.5,-332 1574.5,-326 1574.5,-326 1574.5,-314 1574.5,-314 1574.5,-308 1580.5,-302 1586.5,-302 1586.5,-302 1678.5,-302 1678.5,-302 1684.5,-302 1690.5,-308 1690.5,-314 1690.5,-314 1690.5,-326 1690.5,-326 1690.5,-332 1684.5,-338 1678.5,-338"/>
<text text-anchor="middle" x="1632.5" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_addrs_insert</text>
</g>
<!-- resolve&#45;&gt;store_addrs_insert -->
<g id="edge15" class="edge">
<title>resolve&#45;&gt;store_addrs_insert</title>
<path fill="none" stroke="#666666" d="M946.2,-278.9C996.26,-274.55 1053.49,-278.37 1098,-306 1121.3,-320.47 1102.61,-346.66 1126,-361 1205.18,-409.54 1450.95,-345.36 1543,-333 1549.83,-332.08 1556.94,-331.09 1564.04,-330.09"/>
<polygon fill="#666666" stroke="#666666" points="1565,-333.48 1574.4,-328.6 1564,-326.55 1565,-333.48"/>
</g>
<!-- start -->
<g id="node9" class="node">
<title>start</title>
<path fill="none" stroke="#1c2123" d="M59,-330C59,-330 29,-330 29,-330 23,-330 17,-324 17,-318 17,-318 17,-306 17,-306 17,-300 23,-294 29,-294 29,-294 59,-294 59,-294 65,-294 71,-300 71,-306 71,-306 71,-318 71,-318 71,-324 65,-330 59,-330"/>
<text text-anchor="middle" x="44" y="-308.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">start</text>
</g>
<!-- start_impl -->
<g id="node10" class="node">
<title>start_impl</title>
<path fill="none" stroke="#1c2123" d="M434,-266.5C434,-266.5 576,-266.5 576,-266.5 582,-266.5 588,-272.5 588,-278.5 588,-278.5 588,-345.5 588,-345.5 588,-351.5 582,-357.5 576,-357.5 576,-357.5 434,-357.5 434,-357.5 428,-357.5 422,-351.5 422,-345.5 422,-345.5 422,-278.5 422,-278.5 422,-272.5 428,-266.5 434,-266.5"/>
<text text-anchor="middle" x="505" y="-342.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">start_impl</text>
<polyline fill="none" stroke="#1c2123" points="422,-334.5 588,-334.5 "/>
<text text-anchor="start" x="430" y="-319.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">spawn线程</text>
<text text-anchor="start" x="430" y="-304.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 在线程while循环中</text>
<text text-anchor="start" x="430" y="-289.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 从rx中获取task</text>
<text text-anchor="middle" x="505" y="-274.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后调用run 执行task.cb</text>
</g>
<!-- start&#45;&gt;start_impl -->
<g id="edge5" class="edge">
<title>start&#45;&gt;start_impl</title>
<path fill="none" stroke="#666666" d="M71.16,-301.59C80.15,-298.52 90.38,-295.56 100,-294 225.48,-273.71 259.29,-282.86 386,-293 394.4,-293.67 403.1,-294.61 411.8,-295.71"/>
<polygon fill="#666666" stroke="#666666" points="411.62,-299.22 422,-297.07 412.55,-292.28 411.62,-299.22"/>
</g>
<!-- unbounded -->
<g id="node12" class="node">
<title>unbounded</title>
<path fill="none" stroke="#1c2123" d="M136.5,-303C136.5,-303 267.5,-303 267.5,-303 273.5,-303 279.5,-309 279.5,-315 279.5,-315 279.5,-367 279.5,-367 279.5,-373 273.5,-379 267.5,-379 267.5,-379 136.5,-379 136.5,-379 130.5,-379 124.5,-373 124.5,-367 124.5,-367 124.5,-315 124.5,-315 124.5,-309 130.5,-303 136.5,-303"/>
<text text-anchor="middle" x="202" y="-363.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">unbounded</text>
<polyline fill="none" stroke="#1c2123" points="124.5,-356 279.5,-356 "/>
<text text-anchor="start" x="132.5" y="-340.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建unbounded channel </text>
<text text-anchor="start" x="132.5" y="-325.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> tx放入Scheduler</text>
<text text-anchor="start" x="132.5" y="-310.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> rx 传给start_impl</text>
</g>
<!-- start&#45;&gt;unbounded -->
<g id="edge8" class="edge">
<title>start&#45;&gt;unbounded</title>
<path fill="none" stroke="#666666" d="M71.11,-316.85C83.32,-319.12 98.64,-321.97 114.43,-324.91"/>
<polygon fill="#666666" stroke="#666666" points="113.83,-328.35 124.3,-326.74 115.11,-321.47 113.83,-328.35"/>
</g>
<!-- run -->
<g id="node11" class="node">
<title>run</title>
<path fill="none" stroke="#1c2123" d="M666,-330C666,-330 636,-330 636,-330 630,-330 624,-324 624,-318 624,-318 624,-306 624,-306 624,-300 630,-294 636,-294 636,-294 666,-294 666,-294 672,-294 678,-300 678,-306 678,-306 678,-318 678,-318 678,-324 672,-330 666,-330"/>
<text text-anchor="middle" x="651" y="-308.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">run</text>
</g>
<!-- start_impl&#45;&gt;run -->
<g id="edge6" class="edge">
<title>start_impl&#45;&gt;run</title>
<path fill="none" stroke="#666666" d="M588.1,-312C596.95,-312 605.6,-312 613.5,-312"/>
<polygon fill="#666666" stroke="#666666" points="613.73,-315.5 623.73,-312 613.73,-308.5 613.73,-315.5"/>
</g>
<!-- run&#45;&gt;resolve -->
<g id="edge7" class="edge">
<title>run&#45;&gt;resolve</title>
<path fill="none" stroke="#666666" d="M678.12,-310.67C685.61,-310.29 694.32,-309.85 703.7,-309.37"/>
<polygon fill="#666666" stroke="#666666" points="703.88,-312.87 713.69,-308.86 703.53,-305.88 703.88,-312.87"/>
</g>
<!-- run&#45;&gt;task_cb -->
<g id="edge12" class="edge">
<title>run&#45;&gt;task_cb</title>
<path fill="none" stroke="#666666" d="M674.4,-330.17C685.6,-338.14 699.77,-346.66 714,-351 800.02,-377.25 904.85,-374.7 971.76,-369.03"/>
<polygon fill="#666666" stroke="#666666" points="972.11,-372.51 981.76,-368.13 971.49,-365.54 972.11,-372.51"/>
</g>
<!-- rx -->
<g id="node13" class="node">
<title>rx</title>
<path fill="none" stroke="#1c2123" d="M374,-338C374,-338 344,-338 344,-338 338,-338 332,-332 332,-326 332,-326 332,-314 332,-314 332,-308 338,-302 344,-302 344,-302 374,-302 374,-302 380,-302 386,-308 386,-314 386,-314 386,-326 386,-326 386,-332 380,-338 374,-338"/>
<text text-anchor="middle" x="359" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">rx</text>
</g>
<!-- unbounded&#45;&gt;rx -->
<g id="edge9" class="edge">
<title>unbounded&#45;&gt;rx</title>
<path fill="none" stroke="#666666" d="M279.59,-330.62C294.25,-328.64 308.95,-326.65 321.6,-324.93"/>
<polygon fill="#666666" stroke="#666666" points="322.25,-328.38 331.69,-323.56 321.31,-321.44 322.25,-328.38"/>
</g>
<!-- tx -->
<g id="node14" class="node">
<title>tx</title>
<path fill="none" stroke="#1c2123" d="M374,-392C374,-392 344,-392 344,-392 338,-392 332,-386 332,-380 332,-380 332,-368 332,-368 332,-362 338,-356 344,-356 344,-356 374,-356 374,-356 380,-356 386,-362 386,-368 386,-368 386,-380 386,-380 386,-386 380,-392 374,-392"/>
<text text-anchor="middle" x="359" y="-370.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">tx</text>
</g>
<!-- unbounded&#45;&gt;tx -->
<g id="edge10" class="edge">
<title>unbounded&#45;&gt;tx</title>
<path fill="none" stroke="#666666" d="M279.59,-357.31C294.25,-360.43 308.95,-363.56 321.6,-366.25"/>
<polygon fill="#666666" stroke="#666666" points="321.18,-369.74 331.69,-368.4 322.64,-362.89 321.18,-369.74"/>
</g>
<!-- rx&#45;&gt;start_impl -->
<g id="edge11" class="edge">
<title>rx&#45;&gt;start_impl</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M386.08,-318.55C393.64,-318.13 402.35,-317.65 411.56,-317.14"/>
<polygon fill="green" stroke="green" points="411.91,-320.62 421.7,-316.57 411.53,-313.63 411.91,-320.62"/>
</g>
<!-- oneshot_channel -->
<g id="node26" class="node">
<title>oneshot_channel</title>
<path fill="none" stroke="#1c2123" d="M1167,-637C1167,-637 1280,-637 1280,-637 1286,-637 1292,-643 1292,-649 1292,-649 1292,-701 1292,-701 1292,-707 1286,-713 1280,-713 1280,-713 1167,-713 1167,-713 1161,-713 1155,-707 1155,-701 1155,-701 1155,-649 1155,-649 1155,-643 1161,-637 1167,-637"/>
<text text-anchor="middle" x="1223.5" y="-697.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">oneshot::channel</text>
<polyline fill="none" stroke="#1c2123" points="1155,-690 1292,-690 "/>
<text text-anchor="start" x="1163" y="-674.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">回调中使用</text>
<text text-anchor="start" x="1163" y="-659.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> oneshot::channel的tx</text>
<text text-anchor="start" x="1163" y="-644.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 触发rx.await</text>
</g>
<!-- task_cb&#45;&gt;oneshot_channel -->
<g id="edge31" class="edge">
<title>task_cb&#45;&gt;oneshot_channel</title>
<path fill="none" stroke="#666666" d="M1058.73,-391.68C1090.6,-446.8 1157.71,-562.91 1195.38,-628.08"/>
<polygon fill="#666666" stroke="#666666" points="1192.46,-630.02 1200.49,-636.93 1198.52,-626.52 1192.46,-630.02"/>
</g>
<!-- get_address&#45;&gt;get_store -->
<g id="edge18" class="edge">
<title>get_address&#45;&gt;get_store</title>
<path fill="none" stroke="#666666" d="M1076.43,-224.85C1106.47,-209.45 1149.6,-187.35 1181.21,-171.16"/>
<polygon fill="#666666" stroke="#666666" points="1182.9,-174.22 1190.21,-166.55 1179.71,-167.99 1182.9,-174.22"/>
</g>
<!-- get_address&#45;&gt;report_resolved -->
<g id="edge19" class="edge">
<title>get_address&#45;&gt;report_resolved</title>
<path fill="none" stroke="#666666" d="M1050.96,-224.99C1065.43,-199.8 1094.04,-153.36 1126,-120 1138.39,-107.07 1153.23,-94.65 1167.52,-83.84"/>
<polygon fill="#666666" stroke="#666666" points="1169.89,-86.44 1175.84,-77.67 1165.72,-80.81 1169.89,-86.44"/>
</g>
<!-- state_status_get_mode -->
<g id="node19" class="node">
<title>state_status_get_mode</title>
<path fill="none" stroke="#1c2123" d="M1281.5,-298C1281.5,-298 1165.5,-298 1165.5,-298 1159.5,-298 1153.5,-292 1153.5,-286 1153.5,-286 1153.5,-274 1153.5,-274 1153.5,-268 1159.5,-262 1165.5,-262 1165.5,-262 1281.5,-262 1281.5,-262 1287.5,-262 1293.5,-268 1293.5,-274 1293.5,-274 1293.5,-286 1293.5,-286 1293.5,-292 1287.5,-298 1281.5,-298"/>
<text text-anchor="middle" x="1223.5" y="-276.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">state_status_get_mode</text>
</g>
<!-- get_address&#45;&gt;state_status_get_mode -->
<g id="edge20" class="edge">
<title>get_address&#45;&gt;state_status_get_mode</title>
<path fill="none" stroke="#666666" d="M1080.38,-251.03C1098.83,-254.79 1121.49,-259.41 1143.26,-263.85"/>
<polygon fill="#666666" stroke="#666666" points="1142.68,-267.3 1153.18,-265.87 1144.08,-260.44 1142.68,-267.3"/>
</g>
<!-- get_address&#45;&gt;register_store -->
<g id="edge21" class="edge">
<title>get_address&#45;&gt;register_store</title>
<path fill="none" stroke="#666666" d="M1080,-241.67C1144.67,-239.93 1271.11,-238.6 1313,-253 1331.66,-259.42 1331.28,-270.32 1349,-279 1360.91,-284.83 1374.32,-289.65 1387.14,-293.52"/>
<polygon fill="#666666" stroke="#666666" points="1386.22,-296.9 1396.8,-296.3 1388.16,-290.17 1386.22,-296.9"/>
</g>
<!-- get_address&#45;&gt;take_peer_address -->
<g id="edge22" class="edge">
<title>get_address&#45;&gt;take_peer_address</title>
<path fill="none" stroke="#666666" d="M1080.33,-240.2C1094.7,-239.31 1111.08,-238.44 1126,-238 1209.08,-235.56 1229.93,-235.41 1313,-238 1332.71,-238.62 1354.1,-239.76 1373.65,-241"/>
<polygon fill="#666666" stroke="#666666" points="1373.48,-244.5 1383.69,-241.65 1373.94,-237.51 1373.48,-244.5"/>
</g>
<!-- group_id -->
<g id="node22" class="node">
<title>group_id</title>
<path fill="none" stroke="#1c2123" d="M1244,-352C1244,-352 1203,-352 1203,-352 1197,-352 1191,-346 1191,-340 1191,-340 1191,-328 1191,-328 1191,-322 1197,-316 1203,-316 1203,-316 1244,-316 1244,-316 1250,-316 1256,-322 1256,-328 1256,-328 1256,-340 1256,-340 1256,-346 1250,-352 1244,-352"/>
<text text-anchor="middle" x="1223.5" y="-330.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">group_id</text>
</g>
<!-- get_address&#45;&gt;group_id -->
<g id="edge23" class="edge">
<title>get_address&#45;&gt;group_id</title>
<path fill="none" stroke="#666666" d="M1064.97,-261.09C1089.96,-279.94 1125.57,-306.79 1126,-307 1143.08,-315.44 1163.2,-321.6 1180.64,-325.89"/>
<polygon fill="#666666" stroke="#666666" points="1180.03,-329.34 1190.56,-328.2 1181.61,-322.52 1180.03,-329.34"/>
</g>
<!-- store_addrs_get&#45;&gt;Runner -->
<g id="edge16" class="edge">
<title>store_addrs_get&#45;&gt;Runner:store_addrs</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1675.38,-355.88C1681.66,-353 1688.03,-349.98 1694,-347 1706.79,-340.61 1710.4,-332 1720.09,-328.53"/>
<polygon fill="green" stroke="green" points="1720.65,-331.99 1730,-327 1719.58,-325.07 1720.65,-331.99"/>
</g>
<!-- store_addrs_insert&#45;&gt;Runner -->
<g id="edge17" class="edge">
<title>store_addrs_insert&#45;&gt;Runner:store_addrs</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1690.6,-325.52C1700.21,-326.16 1710.22,-326.67 1719.97,-326.88"/>
<polygon fill="green" stroke="green" points="1719.96,-330.38 1730,-327 1720.04,-323.38 1719.96,-330.38"/>
</g>
<!-- take_peer_address&#45;&gt;store_addrs_insert -->
<g id="edge26" class="edge">
<title>take_peer_address&#45;&gt;store_addrs_insert</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1500.26,-263.64C1514.35,-268.32 1529.31,-273.59 1543,-279 1557.08,-284.56 1572.11,-291.24 1585.72,-297.57"/>
<polygon fill="green" stroke="green" points="1584.34,-300.79 1594.88,-301.88 1587.32,-294.46 1584.34,-300.79"/>
</g>
<!-- PdStoreAddrResolver -->
<g id="node23" class="node">
<title>PdStoreAddrResolver</title>
<path fill="none" stroke="#1c2123" d="M138,-512.5C138,-512.5 266,-512.5 266,-512.5 272,-512.5 278,-518.5 278,-524.5 278,-524.5 278,-569.5 278,-569.5 278,-575.5 272,-581.5 266,-581.5 266,-581.5 138,-581.5 138,-581.5 132,-581.5 126,-575.5 126,-569.5 126,-569.5 126,-524.5 126,-524.5 126,-518.5 132,-512.5 138,-512.5"/>
<text text-anchor="middle" x="202" y="-566.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PdStoreAddrResolver</text>
<polyline fill="none" stroke="#1c2123" points="126,-558.5 278,-558.5 "/>
<text text-anchor="start" x="134" y="-543.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">sched: Scheduler&lt;Task&gt;</text>
<polyline fill="none" stroke="#1c2123" points="126,-535.5 278,-535.5 "/>
<text text-anchor="start" x="134" y="-520.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用tx发消息给runner</text>
</g>
<!-- PdStoreAddrResolver&#45;&gt;tx -->
<g id="edge28" class="edge">
<title>PdStoreAddrResolver&#45;&gt;tx</title>
<path fill="none" stroke="#666666" d="M278.1,-522.22C287.58,-516.91 296.55,-510.56 304,-503 331.63,-474.97 345.92,-430.72 352.68,-402.03"/>
<polygon fill="#666666" stroke="#666666" points="356.11,-402.74 354.85,-392.22 349.28,-401.23 356.11,-402.74"/>
</g>
<!-- PdStoreAddrResolver_resolve -->
<g id="node24" class="node">
<title>PdStoreAddrResolver_resolve</title>
<path fill="none" stroke="#1c2123" d="M120,-447C120,-447 284,-447 284,-447 290,-447 296,-453 296,-459 296,-459 296,-481 296,-481 296,-487 290,-493 284,-493 284,-493 120,-493 120,-493 114,-493 108,-487 108,-481 108,-481 108,-459 108,-459 108,-453 114,-447 120,-447"/>
<text text-anchor="middle" x="202" y="-477.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolve</text>
<polyline fill="none" stroke="#1c2123" points="108,-470 296,-470 "/>
<text text-anchor="start" x="116" y="-454.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">将Task{store_id, cb}发送给tx</text>
</g>
<!-- PdStoreAddrResolver_resolve&#45;&gt;tx -->
<g id="edge29" class="edge">
<title>PdStoreAddrResolver_resolve&#45;&gt;tx</title>
<path fill="none" stroke="#666666" d="M280.5,-446.93C288.73,-443.16 296.73,-438.87 304,-434 317.4,-425.03 329.66,-412 339.1,-400.37"/>
<polygon fill="#666666" stroke="#666666" points="342.06,-402.27 345.46,-392.23 336.54,-397.96 342.06,-402.27"/>
</g>
<!-- StreamBackEnd_resolve -->
<g id="node25" class="node">
<title>StreamBackEnd_resolve</title>
<path fill="none" stroke="#1c2123" d="M28,-637C28,-637 60,-637 60,-637 66,-637 72,-643 72,-649 72,-649 72,-661 72,-661 72,-667 66,-673 60,-673 60,-673 28,-673 28,-673 22,-673 16,-667 16,-661 16,-661 16,-649 16,-649 16,-643 22,-637 28,-637"/>
<text text-anchor="middle" x="44" y="-651.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolve</text>
</g>
<!-- StreamBackEnd_resolve&#45;&gt;PdStoreAddrResolver_resolve -->
<g id="edge30" class="edge">
<title>StreamBackEnd_resolve&#45;&gt;PdStoreAddrResolver_resolve</title>
<path fill="none" stroke="#666666" d="M46.5,-636.8C50.08,-605.17 61.91,-539.91 100,-503 101.44,-501.6 102.94,-500.27 104.49,-498.99"/>
<polygon fill="#666666" stroke="#666666" points="106.63,-501.76 112.66,-493.04 102.51,-496.1 106.63,-501.76"/>
</g>
</g>
</svg>
