<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: raft_client_start Pages: 1 -->
<svg width="1215pt" height="584pt"
 viewBox="0.00 0.00 1215.00 584.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 580)">
<title>raft_client_start</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-580 1211,-580 1211,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_PdStoreAddrResolver</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M308,-484C308,-484 475,-484 475,-484 481,-484 487,-490 487,-496 487,-496 487,-556 487,-556 487,-562 481,-568 475,-568 475,-568 308,-568 308,-568 302,-568 296,-562 296,-556 296,-556 296,-496 296,-496 296,-490 302,-484 308,-484"/>
<text text-anchor="middle" x="391.5" y="-548" font-family="Times,serif" font-size="20.00">PdStoreAddrResolver</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_RaftCall</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M519,-8C519,-8 1187,-8 1187,-8 1193,-8 1199,-14 1199,-20 1199,-20 1199,-388 1199,-388 1199,-394 1193,-400 1187,-400 1187,-400 519,-400 519,-400 513,-400 507,-394 507,-388 507,-388 507,-20 507,-20 507,-14 513,-8 519,-8"/>
<text text-anchor="middle" x="853" y="-380" font-family="Times,serif" font-size="20.00">RaftCall</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_TikvClient</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M317,-148C317,-148 465,-148 465,-148 471,-148 477,-154 477,-160 477,-160 477,-464 477,-464 477,-470 471,-476 465,-476 465,-476 317,-476 317,-476 311,-476 305,-470 305,-464 305,-464 305,-160 305,-160 305,-154 311,-148 317,-148"/>
<text text-anchor="middle" x="391" y="-456" font-family="Times,serif" font-size="20.00">TikvClient</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_StreamBackend</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M94,-177C94,-177 264,-177 264,-177 270,-177 276,-183 276,-189 276,-189 276,-515 276,-515 276,-521 270,-527 264,-527 264,-527 94,-527 94,-527 88,-527 82,-521 82,-515 82,-515 82,-189 82,-189 82,-183 88,-177 94,-177"/>
<text text-anchor="middle" x="179" y="-507" font-family="Times,serif" font-size="20.00">StreamBackend</text>
</g>
<!-- PdStoreAddrResolver_resolve -->
<g id="node1" class="node">
<title>PdStoreAddrResolver_resolve</title>
<path fill="none" stroke="#1c2123" d="M375,-493C375,-493 407,-493 407,-493 413,-493 419,-499 419,-505 419,-505 419,-517 419,-517 419,-523 413,-529 407,-529 407,-529 375,-529 375,-529 369,-529 363,-523 363,-517 363,-517 363,-505 363,-505 363,-499 369,-493 375,-493"/>
<text text-anchor="middle" x="391" y="-507.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolve</text>
</g>
<!-- RaftCall -->
<g id="node2" class="node">
<title>RaftCall</title>
<path fill="none" stroke="#1c2123" d="M527,-17C527,-17 749,-17 749,-17 755,-17 761,-23 761,-29 761,-29 761,-295 761,-295 761,-301 755,-307 749,-307 749,-307 527,-307 527,-307 521,-307 515,-301 515,-295 515,-295 515,-29 515,-29 515,-23 521,-17 527,-17"/>
<text text-anchor="middle" x="638" y="-291.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftCall</text>
<polyline fill="none" stroke="#1c2123" points="515,-284 761,-284 "/>
<text text-anchor="start" x="523" y="-268.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">sender/receive为</text>
<text text-anchor="start" x="523" y="-253.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> grpc stream的输入输出</text>
<text text-anchor="start" x="523" y="-238.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> RaftCall会不断的去Queue中pop消息</text>
<text text-anchor="start" x="523" y="-223.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 使用sender发送出去</text>
<text text-anchor="start" x="523" y="-208.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> sender: ClientCStreamSender&lt;M&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="515,-201 761,-201 "/>
<text text-anchor="start" x="523" y="-185.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">receiver: ClientCStreamReceiver&lt;Done&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="515,-178 761,-178 "/>
<text text-anchor="start" x="523" y="-162.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">queue: Arc&lt;Queue&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="515,-155 761,-155 "/>
<text text-anchor="start" x="523" y="-139.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">buffer: B,</text>
<polyline fill="none" stroke="#1c2123" points="515,-132 761,-132 "/>
<text text-anchor="start" x="523" y="-116.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">router: R,</text>
<polyline fill="none" stroke="#1c2123" points="515,-109 761,-109 "/>
<text text-anchor="start" x="523" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">snap_scheduler: Scheduler&lt;SnapTask&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="515,-86 761,-86 "/>
<text text-anchor="start" x="523" y="-70.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">lifetime: Option&lt;oneshot::Sender&lt;()&gt;&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="515,-63 761,-63 "/>
<text text-anchor="start" x="523" y="-47.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">store_id: u64,</text>
<polyline fill="none" stroke="#1c2123" points="515,-40 761,-40 "/>
<text text-anchor="start" x="523" y="-24.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">addr: String,</text>
</g>
<!-- poll -->
<g id="node3" class="node">
<title>poll</title>
<path fill="none" stroke="#1c2123" d="M653,-362C653,-362 623,-362 623,-362 617,-362 611,-356 611,-350 611,-350 611,-338 611,-338 611,-332 617,-326 623,-326 623,-326 653,-326 653,-326 659,-326 665,-332 665,-338 665,-338 665,-350 665,-350 665,-356 659,-362 653,-362"/>
<text text-anchor="middle" x="638" y="-340.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">poll</text>
</g>
<!-- fill_msg -->
<g id="node4" class="node">
<title>fill_msg</title>
<path fill="none" stroke="#1c2123" d="M809,-92C809,-92 954,-92 954,-92 960,-92 966,-98 966,-104 966,-104 966,-156 966,-156 966,-162 960,-168 954,-168 954,-168 809,-168 809,-168 803,-168 797,-162 797,-156 797,-156 797,-104 797,-104 797,-98 803,-92 809,-92"/>
<text text-anchor="middle" x="881.5" y="-152.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">fill_msg</text>
<polyline fill="none" stroke="#1c2123" points="797,-145 966,-145 "/>
<text text-anchor="start" x="805" y="-129.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">从queue中pop消息</text>
<text text-anchor="start" x="805" y="-114.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 放入buffer中</text>
<text text-anchor="start" x="805" y="-99.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> skip掉 hassnapshot的消息</text>
</g>
<!-- poll&#45;&gt;fill_msg -->
<g id="edge1" class="edge">
<title>poll&#45;&gt;fill_msg</title>
<path fill="none" stroke="#666666" d="M665.05,-345.38C692.57,-345.35 735.45,-340.85 761,-316 806.75,-271.51 758.09,-227.58 797,-177 797.38,-176.51 797.77,-176.02 798.16,-175.53"/>
<polygon fill="#666666" stroke="#666666" points="800.86,-177.77 805.06,-168.04 795.71,-173.02 800.86,-177.77"/>
</g>
<!-- sender_poll_ready -->
<g id="node5" class="node">
<title>sender_poll_ready</title>
<path fill="none" stroke="#1c2123" d="M824.5,-187C824.5,-187 938.5,-187 938.5,-187 944.5,-187 950.5,-193 950.5,-199 950.5,-199 950.5,-221 950.5,-221 950.5,-227 944.5,-233 938.5,-233 938.5,-233 824.5,-233 824.5,-233 818.5,-233 812.5,-227 812.5,-221 812.5,-221 812.5,-199 812.5,-199 812.5,-193 818.5,-187 824.5,-187"/>
<text text-anchor="middle" x="881.5" y="-217.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">sender.poll_ready(ctx)</text>
<polyline fill="none" stroke="#1c2123" points="812.5,-210 950.5,-210 "/>
<text text-anchor="start" x="820.5" y="-194.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">等待sender ready</text>
</g>
<!-- poll&#45;&gt;sender_poll_ready -->
<g id="edge2" class="edge">
<title>poll&#45;&gt;sender_poll_ready</title>
<path fill="none" stroke="#666666" d="M665.1,-344.28C691.87,-343.25 733.39,-337.84 761,-316 789.37,-293.56 770.4,-267.51 797,-243 799.15,-241.02 801.43,-239.15 803.82,-237.39"/>
<polygon fill="#666666" stroke="#666666" points="805.85,-240.24 812.27,-231.81 802,-234.4 805.85,-240.24"/>
</g>
<!-- sender_poll_flush -->
<g id="node6" class="node">
<title>sender_poll_flush</title>
<path fill="none" stroke="#1c2123" d="M926,-288C926,-288 837,-288 837,-288 831,-288 825,-282 825,-276 825,-276 825,-264 825,-264 825,-258 831,-252 837,-252 837,-252 926,-252 926,-252 932,-252 938,-258 938,-264 938,-264 938,-276 938,-276 938,-282 932,-288 926,-288"/>
<text text-anchor="middle" x="881.5" y="-266.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">sender_poll_flush</text>
</g>
<!-- poll&#45;&gt;sender_poll_flush -->
<g id="edge3" class="edge">
<title>poll&#45;&gt;sender_poll_flush</title>
<path fill="none" stroke="#666666" d="M665.27,-340.01C690.38,-335.72 729.02,-327.88 761,-316 777.96,-309.7 780.33,-304.03 797,-297 802.8,-294.55 808.91,-292.19 815.07,-289.95"/>
<polygon fill="#666666" stroke="#666666" points="816.49,-293.16 824.76,-286.54 814.17,-286.56 816.49,-293.16"/>
</g>
<!-- receiver_poll -->
<g id="node7" class="node">
<title>receiver_poll</title>
<path fill="none" stroke="#1c2123" d="M913.5,-342C913.5,-342 849.5,-342 849.5,-342 843.5,-342 837.5,-336 837.5,-330 837.5,-330 837.5,-318 837.5,-318 837.5,-312 843.5,-306 849.5,-306 849.5,-306 913.5,-306 913.5,-306 919.5,-306 925.5,-312 925.5,-318 925.5,-318 925.5,-330 925.5,-330 925.5,-336 919.5,-342 913.5,-342"/>
<text text-anchor="middle" x="881.5" y="-320.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">receiver_poll</text>
</g>
<!-- poll&#45;&gt;receiver_poll -->
<g id="edge4" class="edge">
<title>poll&#45;&gt;receiver_poll</title>
<path fill="none" stroke="#666666" d="M665.3,-341.82C703.96,-338.62 776.95,-332.58 827.12,-328.42"/>
<polygon fill="#666666" stroke="#666666" points="827.47,-331.9 837.15,-327.59 826.89,-324.93 827.47,-331.9"/>
</g>
<!-- buffer_flush -->
<g id="node8" class="node">
<title>buffer_flush</title>
<path fill="none" stroke="#1c2123" d="M1034,-269.5C1034,-269.5 1159,-269.5 1159,-269.5 1165,-269.5 1171,-275.5 1171,-281.5 1171,-281.5 1171,-318.5 1171,-318.5 1171,-324.5 1165,-330.5 1159,-330.5 1159,-330.5 1034,-330.5 1034,-330.5 1028,-330.5 1022,-324.5 1022,-318.5 1022,-318.5 1022,-281.5 1022,-281.5 1022,-275.5 1028,-269.5 1034,-269.5"/>
<text text-anchor="middle" x="1096.5" y="-315.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">buffer.flush(sender)</text>
<polyline fill="none" stroke="#1c2123" points="1022,-307.5 1171,-307.5 "/>
<text text-anchor="start" x="1030" y="-292.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用grpc stream sender</text>
<text text-anchor="start" x="1030" y="-277.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发送消息</text>
</g>
<!-- poll&#45;&gt;buffer_flush -->
<g id="edge5" class="edge">
<title>poll&#45;&gt;buffer_flush</title>
<path fill="none" stroke="#666666" d="M665.16,-348.21C721.02,-356.39 855.82,-371.91 966,-351 984.63,-347.46 1004,-341.3 1021.92,-334.46"/>
<polygon fill="#666666" stroke="#666666" points="1023.69,-337.53 1031.71,-330.6 1021.12,-331.01 1023.69,-337.53"/>
</g>
<!-- fill_msg&#45;&gt;buffer_flush -->
<g id="edge6" class="edge">
<title>fill_msg&#45;&gt;buffer_flush</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M953.44,-168.28C957.77,-171.12 961.99,-174.04 966,-177 1000.51,-202.49 1035.54,-236.35 1060.45,-262.09"/>
<polygon fill="green" stroke="green" points="1058.07,-264.67 1067.52,-269.46 1063.12,-259.82 1058.07,-264.67"/>
</g>
<!-- pop -->
<g id="node9" class="node">
<title>pop</title>
<path fill="none" stroke="#1c2123" d="M1043.5,-49.5C1043.5,-49.5 1149.5,-49.5 1149.5,-49.5 1155.5,-49.5 1161.5,-55.5 1161.5,-61.5 1161.5,-61.5 1161.5,-98.5 1161.5,-98.5 1161.5,-104.5 1155.5,-110.5 1149.5,-110.5 1149.5,-110.5 1043.5,-110.5 1043.5,-110.5 1037.5,-110.5 1031.5,-104.5 1031.5,-98.5 1031.5,-98.5 1031.5,-61.5 1031.5,-61.5 1031.5,-55.5 1037.5,-49.5 1043.5,-49.5"/>
<text text-anchor="middle" x="1096.5" y="-95.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">Queue::pop</text>
<polyline fill="none" stroke="#1c2123" points="1031.5,-87.5 1161.5,-87.5 "/>
<text text-anchor="start" x="1039.5" y="-72.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">self.queue.pop</text>
<text text-anchor="start" x="1039.5" y="-57.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 从queue中pop消息</text>
</g>
<!-- fill_msg&#45;&gt;pop -->
<g id="edge7" class="edge">
<title>fill_msg&#45;&gt;pop</title>
<path fill="none" stroke="#666666" d="M966.07,-110.38C984.36,-106.09 1003.6,-101.57 1021.49,-97.37"/>
<polygon fill="#666666" stroke="#666666" points="1022.33,-100.77 1031.27,-95.08 1020.74,-93.96 1022.33,-100.77"/>
</g>
<!-- send_snapshot_sock -->
<g id="node10" class="node">
<title>send_snapshot_sock</title>
<path fill="none" stroke="#1c2123" d="M1014,-129.5C1014,-129.5 1179,-129.5 1179,-129.5 1185,-129.5 1191,-135.5 1191,-141.5 1191,-141.5 1191,-178.5 1191,-178.5 1191,-184.5 1185,-190.5 1179,-190.5 1179,-190.5 1014,-190.5 1014,-190.5 1008,-190.5 1002,-184.5 1002,-178.5 1002,-178.5 1002,-141.5 1002,-141.5 1002,-135.5 1008,-129.5 1014,-129.5"/>
<text text-anchor="middle" x="1096.5" y="-175.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send_snapshot_sock</text>
<polyline fill="none" stroke="#1c2123" points="1002,-167.5 1191,-167.5 "/>
<text text-anchor="start" x="1010" y="-152.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用scheduler 由snap handler</text>
<text text-anchor="middle" x="1096.5" y="-137.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 处理包含snapshot 的message</text>
</g>
<!-- fill_msg&#45;&gt;send_snapshot_sock -->
<g id="edge8" class="edge">
<title>fill_msg&#45;&gt;send_snapshot_sock</title>
<path fill="none" stroke="#666666" d="M966.07,-141.77C974.53,-142.96 983.2,-144.18 991.83,-145.4"/>
<polygon fill="#666666" stroke="#666666" points="991.56,-148.9 1001.95,-146.82 992.54,-141.96 991.56,-148.9"/>
</g>
<!-- TikvClient -->
<g id="node11" class="node">
<title>TikvClient</title>
<path fill="none" stroke="#1c2123" d="M416.5,-438C416.5,-438 365.5,-438 365.5,-438 359.5,-438 353.5,-432 353.5,-426 353.5,-426 353.5,-414 353.5,-414 353.5,-408 359.5,-402 365.5,-402 365.5,-402 416.5,-402 416.5,-402 422.5,-402 428.5,-408 428.5,-414 428.5,-414 428.5,-426 428.5,-426 428.5,-432 422.5,-438 416.5,-438"/>
<text text-anchor="middle" x="391" y="-416.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">TikvClient</text>
</g>
<!-- client_batch_raft -->
<g id="node12" class="node">
<title>client_batch_raft</title>
<path fill="none" stroke="#1c2123" d="M325,-157C325,-157 457,-157 457,-157 463,-157 469,-163 469,-169 469,-169 469,-221 469,-221 469,-227 463,-233 457,-233 457,-233 325,-233 325,-233 319,-233 313,-227 313,-221 313,-221 313,-169 313,-169 313,-163 319,-157 325,-157"/>
<text text-anchor="middle" x="391" y="-217.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">batch_raft</text>
<polyline fill="none" stroke="#1c2123" points="313,-210 469,-210 "/>
<text text-anchor="start" x="321" y="-194.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">调用grpc batch_raft接口</text>
<text text-anchor="start" x="321" y="-179.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 将返回的stream, sink</text>
<text text-anchor="start" x="321" y="-164.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 放入RaftCall</text>
</g>
<!-- client_batch_raft&#45;&gt;RaftCall -->
<g id="edge9" class="edge">
<title>client_batch_raft&#45;&gt;RaftCall</title>
<path fill="none" stroke="#666666" d="M469.18,-184.6C480.58,-183.07 492.59,-181.45 504.72,-179.82"/>
<polygon fill="#666666" stroke="#666666" points="505.49,-183.25 514.93,-178.44 504.55,-176.31 505.49,-183.25"/>
</g>
<!-- client_raft -->
<g id="node13" class="node">
<title>client_raft</title>
<path fill="none" stroke="#1c2123" d="M331,-307C331,-307 451,-307 451,-307 457,-307 463,-313 463,-319 463,-319 463,-371 463,-371 463,-377 457,-383 451,-383 451,-383 331,-383 331,-383 325,-383 319,-377 319,-371 319,-371 319,-319 319,-319 319,-313 325,-307 331,-307"/>
<text text-anchor="middle" x="391" y="-367.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft</text>
<polyline fill="none" stroke="#1c2123" points="319,-360 463,-360 "/>
<text text-anchor="start" x="327" y="-344.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">调用grcp raft接口</text>
<text text-anchor="start" x="327" y="-329.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 将返回的stream, sink</text>
<text text-anchor="start" x="327" y="-314.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 放入RaftCall</text>
</g>
<!-- client_raft&#45;&gt;RaftCall -->
<g id="edge10" class="edge">
<title>client_raft&#45;&gt;RaftCall</title>
<path fill="none" stroke="#666666" d="M463.24,-311.64C471.44,-307.03 479.53,-302.12 487,-297 493.5,-292.55 500.02,-287.83 506.51,-282.94"/>
<polygon fill="#666666" stroke="#666666" points="508.9,-285.52 514.69,-276.65 504.63,-279.97 508.9,-285.52"/>
</g>
<!-- spawn -->
<g id="node14" class="node">
<title>spawn</title>
<path fill="none" stroke="#1c2123" d="M406,-288C406,-288 376,-288 376,-288 370,-288 364,-282 364,-276 364,-276 364,-264 364,-264 364,-258 370,-252 376,-252 376,-252 406,-252 406,-252 412,-252 418,-258 418,-264 418,-264 418,-276 418,-276 418,-282 412,-288 406,-288"/>
<text text-anchor="middle" x="391" y="-266.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">spawn</text>
</g>
<!-- spawn&#45;&gt;RaftCall -->
<g id="edge11" class="edge">
<title>spawn&#45;&gt;RaftCall</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M418.29,-263.79C437.64,-258.85 464.4,-251.24 487,-242 493.15,-239.48 499.38,-236.79 505.62,-233.98"/>
<polygon fill="green" stroke="green" points="507.15,-237.12 514.77,-229.77 504.22,-230.77 507.15,-237.12"/>
</g>
<!-- spawn&#45;&gt;poll -->
<g id="edge12" class="edge">
<title>spawn&#45;&gt;poll</title>
<path fill="none" stroke="#666666" d="M418.32,-273.96C438.17,-277.75 465.55,-284.77 487,-297 497.65,-303.07 496.16,-310.27 507,-316 536.29,-331.47 573.57,-338.39 600.7,-341.49"/>
<polygon fill="#666666" stroke="#666666" points="600.61,-345 610.92,-342.54 601.33,-338.04 600.61,-345"/>
</g>
<!-- resolve -->
<g id="node15" class="node">
<title>resolve</title>
<path fill="none" stroke="#1c2123" d="M127.5,-442C127.5,-442 230.5,-442 230.5,-442 236.5,-442 242.5,-448 242.5,-454 242.5,-454 242.5,-476 242.5,-476 242.5,-482 236.5,-488 230.5,-488 230.5,-488 127.5,-488 127.5,-488 121.5,-488 115.5,-482 115.5,-476 115.5,-476 115.5,-454 115.5,-454 115.5,-448 121.5,-442 127.5,-442"/>
<text text-anchor="middle" x="179" y="-472.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">resolve</text>
<polyline fill="none" stroke="#1c2123" points="115.5,-465 242.5,-465 "/>
<text text-anchor="start" x="123.5" y="-449.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">解析store_id的addr</text>
</g>
<!-- resolve&#45;&gt;PdStoreAddrResolver_resolve -->
<g id="edge13" class="edge">
<title>resolve&#45;&gt;PdStoreAddrResolver_resolve</title>
<path fill="none" stroke="#666666" d="M242.72,-478.74C278.66,-486.61 322.54,-496.22 353.01,-502.9"/>
<polygon fill="#666666" stroke="#666666" points="352.28,-506.32 362.79,-505.04 353.78,-499.48 352.28,-506.32"/>
</g>
<!-- connect -->
<g id="node16" class="node">
<title>connect</title>
<path fill="none" stroke="#1c2123" d="M133.5,-361.5C133.5,-361.5 224.5,-361.5 224.5,-361.5 230.5,-361.5 236.5,-367.5 236.5,-373.5 236.5,-373.5 236.5,-410.5 236.5,-410.5 236.5,-416.5 230.5,-422.5 224.5,-422.5 224.5,-422.5 133.5,-422.5 133.5,-422.5 127.5,-422.5 121.5,-416.5 121.5,-410.5 121.5,-410.5 121.5,-373.5 121.5,-373.5 121.5,-367.5 127.5,-361.5 133.5,-361.5"/>
<text text-anchor="middle" x="179" y="-407.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">connect</text>
<polyline fill="none" stroke="#1c2123" points="121.5,-399.5 236.5,-399.5 "/>
<text text-anchor="start" x="129.5" y="-384.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建grpc channel</text>
<text text-anchor="start" x="129.5" y="-369.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 返回TiKVClient</text>
</g>
<!-- connect&#45;&gt;TikvClient -->
<g id="edge14" class="edge">
<title>connect&#45;&gt;TikvClient</title>
<path fill="none" stroke="#666666" d="M236.55,-399.54C269.84,-403.98 311.45,-409.53 342.94,-413.73"/>
<polygon fill="#666666" stroke="#666666" points="342.83,-417.24 353.2,-415.09 343.75,-410.3 342.83,-417.24"/>
</g>
<!-- batch_call -->
<g id="node17" class="node">
<title>batch_call</title>
<path fill="none" stroke="#1c2123" d="M102,-186C102,-186 256,-186 256,-186 262,-186 268,-192 268,-198 268,-198 268,-250 268,-250 268,-256 262,-262 256,-262 256,-262 102,-262 102,-262 96,-262 90,-256 90,-250 90,-250 90,-198 90,-198 90,-192 96,-186 102,-186"/>
<text text-anchor="middle" x="179" y="-246.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">batch_call</text>
<polyline fill="none" stroke="#1c2123" points="90,-239 268,-239 "/>
<text text-anchor="start" x="98" y="-223.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用新接口batch_raft</text>
<text text-anchor="start" x="98" y="-208.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 如果失败的话，fallback到</text>
<text text-anchor="start" x="98" y="-193.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 兼容模式</text>
</g>
<!-- batch_call&#45;&gt;RaftCall -->
<g id="edge19" class="edge">
<title>batch_call&#45;&gt;RaftCall</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M266.02,-185.92C269.61,-182.84 272.96,-179.53 276,-176 294.86,-154.03 272.59,-131.04 296,-114 355.66,-70.56 437.07,-80.17 505.39,-101.78"/>
<polygon fill="green" stroke="green" points="504.34,-105.12 514.94,-104.9 506.52,-98.46 504.34,-105.12"/>
</g>
<!-- batch_call&#45;&gt;client_batch_raft -->
<g id="edge15" class="edge">
<title>batch_call&#45;&gt;client_batch_raft</title>
<path fill="none" stroke="#666666" d="M268.15,-211.83C279.61,-210.24 291.34,-208.62 302.78,-207.04"/>
<polygon fill="#666666" stroke="#666666" points="303.32,-210.5 312.75,-205.67 302.37,-203.57 303.32,-210.5"/>
</g>
<!-- batch_call&#45;&gt;spawn -->
<g id="edge16" class="edge">
<title>batch_call&#45;&gt;spawn</title>
<path fill="none" stroke="#666666" d="M268.15,-243.31C298.26,-249.9 330.27,-256.92 353.93,-262.1"/>
<polygon fill="#666666" stroke="#666666" points="353.33,-265.55 363.85,-264.27 354.83,-258.71 353.33,-265.55"/>
</g>
<!-- call -->
<g id="node18" class="node">
<title>call</title>
<path fill="none" stroke="#1c2123" d="M125.5,-281.5C125.5,-281.5 232.5,-281.5 232.5,-281.5 238.5,-281.5 244.5,-287.5 244.5,-293.5 244.5,-293.5 244.5,-330.5 244.5,-330.5 244.5,-336.5 238.5,-342.5 232.5,-342.5 232.5,-342.5 125.5,-342.5 125.5,-342.5 119.5,-342.5 113.5,-336.5 113.5,-330.5 113.5,-330.5 113.5,-293.5 113.5,-293.5 113.5,-287.5 119.5,-281.5 125.5,-281.5"/>
<text text-anchor="middle" x="179" y="-327.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">call</text>
<polyline fill="none" stroke="#1c2123" points="113.5,-319.5 244.5,-319.5 "/>
<text text-anchor="start" x="121.5" y="-304.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">fallback到兼容模式</text>
<text text-anchor="middle" x="179" y="-289.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 调用grpc raft接口</text>
</g>
<!-- call&#45;&gt;RaftCall -->
<g id="edge20" class="edge">
<title>call&#45;&gt;RaftCall</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M244.57,-295.1C256.57,-289.26 267.87,-281.44 276,-271 311.11,-225.92 252.57,-181.13 296,-144 326.91,-117.58 422.6,-124.64 504.78,-136.89"/>
<polygon fill="green" stroke="green" points="504.31,-140.36 514.72,-138.41 505.37,-133.44 504.31,-140.36"/>
</g>
<!-- call&#45;&gt;client_raft -->
<g id="edge17" class="edge">
<title>call&#45;&gt;client_raft</title>
<path fill="none" stroke="#666666" d="M244.72,-322.17C265.01,-325.36 287.66,-328.92 308.93,-332.26"/>
<polygon fill="#666666" stroke="#666666" points="308.49,-335.73 318.91,-333.83 309.58,-328.82 308.49,-335.73"/>
</g>
<!-- call&#45;&gt;spawn -->
<g id="edge18" class="edge">
<title>call&#45;&gt;spawn</title>
<path fill="none" stroke="#666666" d="M244.72,-299.06C280.62,-291.88 323.92,-283.22 353.86,-277.23"/>
<polygon fill="#666666" stroke="#666666" points="354.74,-280.62 363.86,-275.23 353.37,-273.76 354.74,-280.62"/>
</g>
<!-- start -->
<g id="node19" class="node">
<title>start</title>
<path fill="none" stroke="#1c2123" d="M42,-286C42,-286 12,-286 12,-286 6,-286 0,-280 0,-274 0,-274 0,-262 0,-262 0,-256 6,-250 12,-250 12,-250 42,-250 42,-250 48,-250 54,-256 54,-262 54,-262 54,-274 54,-274 54,-280 48,-286 42,-286"/>
<text text-anchor="middle" x="27" y="-264.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">start</text>
</g>
<!-- start&#45;&gt;resolve -->
<g id="edge21" class="edge">
<title>start&#45;&gt;resolve</title>
<path fill="none" stroke="#666666" d="M28.88,-286.21C31.46,-319.64 41.67,-391.15 82,-432 88.8,-438.89 97.1,-444.34 105.94,-448.65"/>
<polygon fill="#666666" stroke="#666666" points="104.75,-451.95 115.32,-452.75 107.56,-445.54 104.75,-451.95"/>
</g>
<!-- start&#45;&gt;connect -->
<g id="edge22" class="edge">
<title>start&#45;&gt;connect</title>
<path fill="none" stroke="#666666" d="M35.62,-286.02C44.37,-304.76 60.33,-333.86 82,-352 90.89,-359.44 101.35,-365.67 112.05,-370.82"/>
<polygon fill="#666666" stroke="#666666" points="110.92,-374.15 121.47,-375.07 113.8,-367.77 110.92,-374.15"/>
</g>
<!-- start&#45;&gt;batch_call -->
<g id="edge23" class="edge">
<title>start&#45;&gt;batch_call</title>
<path fill="none" stroke="#666666" d="M54.13,-260.34C61.73,-258.11 70.51,-255.53 79.83,-252.8"/>
<polygon fill="#666666" stroke="#666666" points="81.09,-256.07 89.7,-249.9 79.12,-249.36 81.09,-256.07"/>
</g>
<!-- start&#45;&gt;call -->
<g id="edge24" class="edge">
<title>start&#45;&gt;call</title>
<path fill="none" stroke="#666666" d="M54.13,-275.66C68.01,-279.74 85.85,-284.97 103.64,-290.19"/>
<polygon fill="#666666" stroke="#666666" points="102.91,-293.62 113.49,-293.08 104.88,-286.9 102.91,-293.62"/>
</g>
<!-- maybe_backoff -->
<g id="node20" class="node">
<title>maybe_backoff</title>
<path fill="none" stroke="#1c2123" d="M217.5,-167C217.5,-167 140.5,-167 140.5,-167 134.5,-167 128.5,-161 128.5,-155 128.5,-155 128.5,-143 128.5,-143 128.5,-137 134.5,-131 140.5,-131 140.5,-131 217.5,-131 217.5,-131 223.5,-131 229.5,-137 229.5,-143 229.5,-143 229.5,-155 229.5,-155 229.5,-161 223.5,-167 217.5,-167"/>
<text text-anchor="middle" x="179" y="-145.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">maybe_backoff</text>
</g>
<!-- start&#45;&gt;maybe_backoff -->
<g id="edge25" class="edge">
<title>start&#45;&gt;maybe_backoff</title>
<path fill="none" stroke="#666666" d="M33.49,-249.64C40.93,-228 56.31,-192.5 82,-173 92.58,-164.97 105.52,-159.6 118.43,-156.02"/>
<polygon fill="#666666" stroke="#666666" points="119.38,-159.39 128.26,-153.61 117.72,-152.59 119.38,-159.39"/>
</g>
<!-- broadcast_unreachable -->
<g id="node21" class="node">
<title>broadcast_unreachable</title>
<path fill="none" stroke="#1c2123" d="M237,-113C237,-113 121,-113 121,-113 115,-113 109,-107 109,-101 109,-101 109,-89 109,-89 109,-83 115,-77 121,-77 121,-77 237,-77 237,-77 243,-77 249,-83 249,-89 249,-89 249,-101 249,-101 249,-107 243,-113 237,-113"/>
<text text-anchor="middle" x="179" y="-91.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">broadcast_unreachable</text>
</g>
<!-- start&#45;&gt;broadcast_unreachable -->
<g id="edge26" class="edge">
<title>start&#45;&gt;broadcast_unreachable</title>
<path fill="none" stroke="#666666" d="M29.5,-249.86C33.04,-219.05 44.66,-156.46 82,-122 87.13,-117.27 93.02,-113.35 99.31,-110.12"/>
<polygon fill="#666666" stroke="#666666" points="101.1,-113.16 108.77,-105.86 98.22,-106.78 101.1,-113.16"/>
</g>
</g>
</svg>
