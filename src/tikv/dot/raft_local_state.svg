<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: raft_local_state Pages: 1 -->
<svg width="1058pt" height="622pt"
 viewBox="0.00 0.00 1058.00 622.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 618)">
<title>raft_local_state</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-618 1054,-618 1054,4 -4,4"/>
<!-- Ready -->
<g id="node1" class="node">
<title>Ready</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M22.5,-170.5C22.5,-170.5 177.5,-170.5 177.5,-170.5 183.5,-170.5 189.5,-176.5 189.5,-182.5 189.5,-182.5 189.5,-365.5 189.5,-365.5 189.5,-371.5 183.5,-377.5 177.5,-377.5 177.5,-377.5 22.5,-377.5 22.5,-377.5 16.5,-377.5 10.5,-371.5 10.5,-365.5 10.5,-365.5 10.5,-182.5 10.5,-182.5 10.5,-176.5 16.5,-170.5 22.5,-170.5"/>
<text text-anchor="middle" x="100" y="-362.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">Ready</text>
<polyline fill="none" stroke="#8a8898" points="10.5,-354.5 189.5,-354.5 "/>
<text text-anchor="start" x="18.5" y="-339.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">number: u64,</text>
<polyline fill="none" stroke="#8a8898" points="10.5,-331.5 189.5,-331.5 "/>
<text text-anchor="start" x="18.5" y="-316.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">ss: Option&lt;SoftState&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="10.5,-308.5 189.5,-308.5 "/>
<text text-anchor="start" x="18.5" y="-293.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">hs: Option&lt;HardState&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="10.5,-285.5 189.5,-285.5 "/>
<text text-anchor="start" x="18.5" y="-270.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">read_states: Vec&lt;ReadState&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="10.5,-262.5 189.5,-262.5 "/>
<text text-anchor="start" x="18.5" y="-247.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">entries: Vec&lt;Entry&gt;,</text>
<polyline fill="none" stroke="#8a8898" points="10.5,-239.5 189.5,-239.5 "/>
<text text-anchor="start" x="18.5" y="-224.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">snapshot: Snapshot,</text>
<polyline fill="none" stroke="#8a8898" points="10.5,-216.5 189.5,-216.5 "/>
<text text-anchor="start" x="18.5" y="-201.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">light: LightReady,</text>
<polyline fill="none" stroke="#8a8898" points="10.5,-193.5 189.5,-193.5 "/>
<text text-anchor="start" x="18.5" y="-178.3" font-family="Times,serif" font-size="14.00" fill="#5d6179">must_sync: bool,</text>
</g>
<!-- PeerStorage_handle_raft_ready -->
<g id="node2" class="node">
<title>PeerStorage_handle_raft_ready</title>
<path fill="none" stroke="#1c2123" d="M248,-228.5C248,-228.5 400,-228.5 400,-228.5 406,-228.5 412,-234.5 412,-240.5 412,-240.5 412,-307.5 412,-307.5 412,-313.5 406,-319.5 400,-319.5 400,-319.5 248,-319.5 248,-319.5 242,-319.5 236,-313.5 236,-307.5 236,-307.5 236,-240.5 236,-240.5 236,-234.5 242,-228.5 248,-228.5"/>
<text text-anchor="start" x="244" y="-304.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerStorage</text>
<text text-anchor="start" x="244" y="-289.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> handle_raft_ready</text>
<polyline fill="none" stroke="#1c2123" points="236,-281.5 412,-281.5 "/>
<text text-anchor="start" x="244" y="-266.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">创建InvokeContext</text>
<text text-anchor="start" x="244" y="-251.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 设置ctx的hardstate</text>
<text text-anchor="start" x="244" y="-236.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 将log entrie写入write batch</text>
</g>
<!-- Ready&#45;&gt;PeerStorage_handle_raft_ready -->
<g id="edge1" class="edge">
<title>Ready&#45;&gt;PeerStorage_handle_raft_ready</title>
<path fill="none" stroke="#666666" d="M189.7,-274C201.59,-274 213.83,-274 225.85,-274"/>
<polygon fill="#666666" stroke="#666666" points="225.89,-277.5 235.89,-274 225.89,-270.5 225.89,-277.5"/>
</g>
<!-- InvokeContext -->
<g id="node3" class="node">
<title>InvokeContext</title>
<path fill="none" stroke="#1c2123" d="M669,-81C669,-81 920,-81 920,-81 926,-81 932,-87 932,-93 932,-93 932,-291 932,-291 932,-297 926,-303 920,-303 920,-303 669,-303 669,-303 663,-303 657,-297 657,-291 657,-291 657,-93 657,-93 657,-87 663,-81 669,-81"/>
<text text-anchor="middle" x="794.5" y="-287.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">InvokeContext</text>
<polyline fill="none" stroke="#1c2123" points="657,-280 932,-280 "/>
<text text-anchor="start" x="665" y="-264.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub region_id: u64,</text>
<polyline fill="none" stroke="#1c2123" points="657,-257 932,-257 "/>
<text text-anchor="start" x="665" y="-241.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub raft_state: RaftLocalState,</text>
<polyline fill="none" stroke="#1c2123" points="657,-234 932,-234 "/>
<text text-anchor="start" x="665" y="-218.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub apply_state: RaftApplyState,</text>
<polyline fill="none" stroke="#1c2123" points="657,-211 932,-211 "/>
<text text-anchor="start" x="665" y="-195.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">last_term: u64,</text>
<polyline fill="none" stroke="#1c2123" points="657,-188 932,-188 "/>
<text text-anchor="start" x="665" y="-172.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub has_new_entries: bool,</text>
<polyline fill="none" stroke="#1c2123" points="657,-165 932,-165 "/>
<text text-anchor="start" x="665" y="-149.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub snap_region: Option&lt;Region&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="657,-142 932,-142 "/>
<text text-anchor="start" x="665" y="-126.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">pub destroyed_regions: Vec&lt;metapb::Region&gt;,</text>
<polyline fill="none" stroke="#1c2123" points="657,-119 932,-119 "/>
<text text-anchor="start" x="665" y="-103.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_state为PeerStorage</text>
<text text-anchor="start" x="665" y="-88.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> raft state的clone</text>
</g>
<!-- PeerStorage_handle_raft_ready&#45;&gt;InvokeContext -->
<g id="edge3" class="edge">
<title>PeerStorage_handle_raft_ready&#45;&gt;InvokeContext</title>
<path fill="none" stroke="#666666" d="M402.09,-228.39C416.9,-221.42 432.6,-215.17 448,-211 511.72,-193.77 584.39,-187.83 646.59,-186.66"/>
<polygon fill="#666666" stroke="#666666" points="646.93,-190.16 656.88,-186.51 646.83,-183.16 646.93,-190.16"/>
</g>
<!-- InvokeContext_set_hard_state -->
<g id="node4" class="node">
<title>InvokeContext_set_hard_state</title>
<path fill="none" stroke="#1c2123" d="M757.5,-0.5C757.5,-0.5 831.5,-0.5 831.5,-0.5 837.5,-0.5 843.5,-6.5 843.5,-12.5 843.5,-12.5 843.5,-49.5 843.5,-49.5 843.5,-55.5 837.5,-61.5 831.5,-61.5 831.5,-61.5 757.5,-61.5 757.5,-61.5 751.5,-61.5 745.5,-55.5 745.5,-49.5 745.5,-49.5 745.5,-12.5 745.5,-12.5 745.5,-6.5 751.5,-0.5 757.5,-0.5"/>
<text text-anchor="start" x="753.5" y="-46.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">InvokeContext</text>
<polyline fill="none" stroke="#1c2123" points="745.5,-38.5 843.5,-38.5 "/>
<text text-anchor="start" x="753.5" y="-23.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_state</text>
<text text-anchor="start" x="753.5" y="-8.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> set_hard_state</text>
</g>
<!-- PeerStorage_handle_raft_ready&#45;&gt;InvokeContext_set_hard_state -->
<g id="edge4" class="edge">
<title>PeerStorage_handle_raft_ready&#45;&gt;InvokeContext_set_hard_state</title>
<path fill="none" stroke="#666666" d="M383.92,-228.38C403.86,-213.62 426.53,-197.57 448,-184 537.26,-127.58 559.35,-111.18 657,-71 682.09,-60.68 710.78,-51.85 735.37,-45.13"/>
<polygon fill="#666666" stroke="#666666" points="736.52,-48.44 745.28,-42.48 734.71,-41.68 736.52,-48.44"/>
</g>
<!-- InvokeContext_save_snapshot_raft_state_to -->
<g id="node6" class="node">
<title>InvokeContext_save_snapshot_raft_state_to</title>
<path fill="none" stroke="#1c2123" d="M460,-427C460,-427 609,-427 609,-427 615,-427 621,-433 621,-439 621,-439 621,-453 621,-453 621,-459 615,-465 609,-465 609,-465 460,-465 460,-465 454,-465 448,-459 448,-453 448,-453 448,-439 448,-439 448,-433 454,-427 460,-427"/>
<text text-anchor="start" x="456" y="-449.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">InvokeContext</text>
<text text-anchor="start" x="456" y="-434.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> save_snapshot_raft_state_to</text>
</g>
<!-- PeerStorage_handle_raft_ready&#45;&gt;InvokeContext_save_snapshot_raft_state_to -->
<g id="edge5" class="edge">
<title>PeerStorage_handle_raft_ready&#45;&gt;InvokeContext_save_snapshot_raft_state_to</title>
<path fill="none" stroke="#666666" d="M354.47,-319.68C376.78,-350.99 410,-391.35 448,-417 450.73,-418.84 453.58,-420.58 456.53,-422.21"/>
<polygon fill="#666666" stroke="#666666" points="455.09,-425.4 465.59,-426.81 458.25,-419.16 455.09,-425.4"/>
</g>
<!-- InvokeContext_save_raft_state_to -->
<g id="node7" class="node">
<title>InvokeContext_save_raft_state_to</title>
<path fill="none" stroke="#1c2123" d="M472,-346.5C472,-346.5 597,-346.5 597,-346.5 603,-346.5 609,-352.5 609,-358.5 609,-358.5 609,-395.5 609,-395.5 609,-401.5 603,-407.5 597,-407.5 597,-407.5 472,-407.5 472,-407.5 466,-407.5 460,-401.5 460,-395.5 460,-395.5 460,-358.5 460,-358.5 460,-352.5 466,-346.5 472,-346.5"/>
<text text-anchor="start" x="468" y="-392.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">InvokeContext</text>
<text text-anchor="start" x="468" y="-377.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> save_raft_state_to</text>
<polyline fill="none" stroke="#1c2123" points="460,-369.5 609,-369.5 "/>
<text text-anchor="middle" x="534.5" y="-354.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将raft state写入raft_wb</text>
</g>
<!-- PeerStorage_handle_raft_ready&#45;&gt;InvokeContext_save_raft_state_to -->
<g id="edge6" class="edge">
<title>PeerStorage_handle_raft_ready&#45;&gt;InvokeContext_save_raft_state_to</title>
<path fill="none" stroke="#666666" d="M412.25,-318.24C424.24,-324.25 436.41,-330.3 448,-336 452.01,-337.97 456.14,-339.99 460.31,-342.02"/>
<polygon fill="#666666" stroke="#666666" points="458.95,-345.25 469.47,-346.47 462,-338.95 458.95,-345.25"/>
</g>
<!-- PeerStorage_append -->
<g id="node8" class="node">
<title>PeerStorage_append</title>
<path fill="none" stroke="#1c2123" d="M460.5,-221C460.5,-221 608.5,-221 608.5,-221 614.5,-221 620.5,-227 620.5,-233 620.5,-233 620.5,-315 620.5,-315 620.5,-321 614.5,-327 608.5,-327 608.5,-327 460.5,-327 460.5,-327 454.5,-327 448.5,-321 448.5,-315 448.5,-315 448.5,-233 448.5,-233 448.5,-227 454.5,-221 460.5,-221"/>
<text text-anchor="start" x="456.5" y="-311.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerStorage</text>
<text text-anchor="start" x="456.5" y="-296.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">append</text>
<polyline fill="none" stroke="#1c2123" points="448.5,-289 620.5,-289 "/>
<text text-anchor="start" x="456.5" y="-273.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">将Ready中的entries</text>
<text text-anchor="start" x="456.5" y="-258.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 写入raft write batch</text>
<text text-anchor="start" x="456.5" y="-243.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 然后更新InvokeContext的</text>
<text text-anchor="start" x="456.5" y="-228.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> last_index 和last_term</text>
</g>
<!-- PeerStorage_handle_raft_ready&#45;&gt;PeerStorage_append -->
<g id="edge7" class="edge">
<title>PeerStorage_handle_raft_ready&#45;&gt;PeerStorage_append</title>
<path fill="none" stroke="#666666" d="M412.21,-274C420.8,-274 429.54,-274 438.19,-274"/>
<polygon fill="#666666" stroke="#666666" points="438.31,-277.5 448.31,-274 438.31,-270.5 438.31,-277.5"/>
</g>
<!-- PeerStorage_raft_state -->
<g id="node5" class="node">
<title>PeerStorage_raft_state</title>
<path fill="#feed9b" stroke="#f7e495" d="M980,-261C980,-261 1038,-261 1038,-261 1044,-261 1050,-267 1050,-273 1050,-273 1050,-287 1050,-287 1050,-293 1044,-299 1038,-299 1038,-299 980,-299 980,-299 974,-299 968,-293 968,-287 968,-287 968,-273 968,-273 968,-267 974,-261 980,-261"/>
<text text-anchor="start" x="976" y="-283.8" font-family="Times,serif" font-size="14.00" fill="#40575d">PeerStorage</text>
<text text-anchor="start" x="976" y="-268.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> raft_state</text>
</g>
<!-- InvokeContext&#45;&gt;PeerStorage_raft_state -->
<g id="edge2" class="edge">
<title>InvokeContext&#45;&gt;PeerStorage_raft_state</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M932.18,-248.6C941.33,-252.39 950.15,-256.04 958.34,-259.44"/>
<polygon fill="green" stroke="green" points="957.06,-262.69 967.64,-263.29 959.74,-256.23 957.06,-262.69"/>
</g>
<!-- InvokeContext_set_hard_state&#45;&gt;PeerStorage_raft_state -->
<g id="edge15" class="edge">
<title>InvokeContext_set_hard_state&#45;&gt;PeerStorage_raft_state</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M843.82,-34.36C872.68,-38.76 908.23,-48.7 932,-71 983.61,-119.42 1000.28,-205.66 1005.58,-250.73"/>
<polygon fill="green" stroke="green" points="1002.11,-251.16 1006.65,-260.73 1009.07,-250.42 1002.11,-251.16"/>
</g>
<!-- raft_wb -->
<g id="node9" class="node">
<title>raft_wb</title>
<path fill="#a2dbfa" stroke="#8a8898" d="M721,-433C721,-433 868,-433 868,-433 874,-433 880,-439 880,-445 880,-445 880,-497 880,-497 880,-503 874,-509 868,-509 868,-509 721,-509 721,-509 715,-509 709,-503 709,-497 709,-497 709,-445 709,-445 709,-439 715,-433 721,-433"/>
<text text-anchor="middle" x="794.5" y="-493.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">raft_wb</text>
<polyline fill="none" stroke="#8a8898" points="709,-486 880,-486 "/>
<text text-anchor="start" x="717" y="-470.8" font-family="Times,serif" font-size="14.00" fill="#5d6179">raft 的entries和raft state</text>
<text text-anchor="start" x="717" y="-455.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 一起被写入raft log engine</text>
<text text-anchor="start" x="717" y="-440.8" font-family="Times,serif" font-size="14.00" fill="#5d6179"> 的write batch</text>
</g>
<!-- InvokeContext_save_snapshot_raft_state_to&#45;&gt;raft_wb -->
<g id="edge11" class="edge">
<title>InvokeContext_save_snapshot_raft_state_to&#45;&gt;raft_wb</title>
<path fill="none" stroke="#666666" d="M621.05,-454.29C645.91,-456.7 673.22,-459.34 698.61,-461.81"/>
<polygon fill="#666666" stroke="#666666" points="698.33,-465.29 708.62,-462.78 699,-458.33 698.33,-465.29"/>
</g>
<!-- InvokeContext_save_raft_state_to&#45;&gt;raft_wb -->
<g id="edge10" class="edge">
<title>InvokeContext_save_raft_state_to&#45;&gt;raft_wb</title>
<path fill="none" stroke="#666666" d="M609.29,-405.26C625.01,-411.19 641.53,-417.35 657,-423 670.61,-427.97 685.02,-433.14 699.18,-438.16"/>
<polygon fill="#666666" stroke="#666666" points="698.33,-441.57 708.92,-441.61 700.66,-434.97 698.33,-441.57"/>
</g>
<!-- PeerStorage_append&#45;&gt;InvokeContext -->
<g id="edge8" class="edge">
<title>PeerStorage_append&#45;&gt;InvokeContext</title>
<path fill="none" stroke="#666666" d="M620.69,-246.92C629.21,-244.22 638.01,-241.42 646.93,-238.58"/>
<polygon fill="#666666" stroke="#666666" points="648.18,-241.86 656.65,-235.5 646.06,-235.19 648.18,-241.86"/>
</g>
<!-- PeerStorage_append&#45;&gt;raft_wb -->
<g id="edge9" class="edge">
<title>PeerStorage_append&#45;&gt;raft_wb</title>
<path fill="none" stroke="#666666" d="M612.54,-327.28C615.54,-330.42 618.38,-333.67 621,-337 646.6,-369.58 626.86,-394.57 657,-423 668.95,-434.28 683.71,-442.93 699.06,-449.55"/>
<polygon fill="#666666" stroke="#666666" points="698.09,-452.93 708.68,-453.42 700.71,-446.44 698.09,-452.93"/>
</g>
<!-- InvokeContext_set_last_index -->
<g id="node12" class="node">
<title>InvokeContext_set_last_index</title>
<path fill="none" stroke="#1c2123" d="M757.5,-322.5C757.5,-322.5 831.5,-322.5 831.5,-322.5 837.5,-322.5 843.5,-328.5 843.5,-334.5 843.5,-334.5 843.5,-401.5 843.5,-401.5 843.5,-407.5 837.5,-413.5 831.5,-413.5 831.5,-413.5 757.5,-413.5 757.5,-413.5 751.5,-413.5 745.5,-407.5 745.5,-401.5 745.5,-401.5 745.5,-334.5 745.5,-334.5 745.5,-328.5 751.5,-322.5 757.5,-322.5"/>
<text text-anchor="start" x="753.5" y="-398.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">InvokeContext</text>
<text text-anchor="start" x="753.5" y="-383.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> raft_state</text>
<text text-anchor="middle" x="794.5" y="-368.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> set_last_index</text>
<polyline fill="none" stroke="#1c2123" points="745.5,-360.5 843.5,-360.5 "/>
<text text-anchor="start" x="753.5" y="-345.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">更新last index</text>
<text text-anchor="start" x="753.5" y="-330.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 和last term</text>
</g>
<!-- PeerStorage_append&#45;&gt;InvokeContext_set_last_index -->
<g id="edge14" class="edge">
<title>PeerStorage_append&#45;&gt;InvokeContext_set_last_index</title>
<path fill="none" stroke="#666666" d="M620.69,-305.04C658.37,-318.77 701.69,-334.55 735.54,-346.88"/>
<polygon fill="#666666" stroke="#666666" points="734.68,-350.29 745.27,-350.43 737.07,-343.72 734.68,-350.29"/>
</g>
<!-- RaftPoller_handle_raft_ready -->
<g id="node10" class="node">
<title>RaftPoller_handle_raft_ready</title>
<path fill="none" stroke="#1c2123" d="M12,-485.5C12,-485.5 188,-485.5 188,-485.5 194,-485.5 200,-491.5 200,-497.5 200,-497.5 200,-564.5 200,-564.5 200,-570.5 194,-576.5 188,-576.5 188,-576.5 12,-576.5 12,-576.5 6,-576.5 0,-570.5 0,-564.5 0,-564.5 0,-497.5 0,-497.5 0,-491.5 6,-485.5 12,-485.5"/>
<text text-anchor="start" x="8" y="-561.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">RaftPoller</text>
<text text-anchor="start" x="8" y="-546.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> handle_raft_ready</text>
<polyline fill="none" stroke="#1c2123" points="0,-538.5 200,-538.5 "/>
<text text-anchor="start" x="8" y="-523.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">将raft_wb写入raft log engine</text>
<text text-anchor="start" x="8" y="-508.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 写入成功后，回调PeerStorage</text>
<text text-anchor="start" x="8" y="-493.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 的post_ready</text>
</g>
<!-- RaftPoller_handle_raft_ready&#45;&gt;raft_wb -->
<g id="edge13" class="edge">
<title>RaftPoller_handle_raft_ready&#45;&gt;raft_wb</title>
<path fill="none" stroke="#666666" d="M200.09,-517.13C212.17,-515.63 224.36,-514.21 236,-513 398.19,-496.09 587.61,-483.29 698.66,-476.48"/>
<polygon fill="#666666" stroke="#666666" points="699.06,-479.96 708.83,-475.86 698.64,-472.98 699.06,-479.96"/>
</g>
<!-- PeerStorage_post_ready -->
<g id="node11" class="node">
<title>PeerStorage_post_ready</title>
<path fill="none" stroke="#1c2123" d="M248,-522.5C248,-522.5 400,-522.5 400,-522.5 406,-522.5 412,-528.5 412,-534.5 412,-534.5 412,-601.5 412,-601.5 412,-607.5 406,-613.5 400,-613.5 400,-613.5 248,-613.5 248,-613.5 242,-613.5 236,-607.5 236,-601.5 236,-601.5 236,-534.5 236,-534.5 236,-528.5 242,-522.5 248,-522.5"/>
<text text-anchor="start" x="244" y="-598.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PeerStorage</text>
<text text-anchor="start" x="244" y="-583.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> post_ready</text>
<polyline fill="none" stroke="#1c2123" points="236,-575.5 412,-575.5 "/>
<text text-anchor="start" x="244" y="-560.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">使用InvokeContext的</text>
<text text-anchor="start" x="244" y="-545.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> raft state</text>
<text text-anchor="start" x="244" y="-530.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 更新PeerStorage的raft state</text>
</g>
<!-- RaftPoller_handle_raft_ready&#45;&gt;PeerStorage_post_ready -->
<g id="edge12" class="edge">
<title>RaftPoller_handle_raft_ready&#45;&gt;PeerStorage_post_ready</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M200.31,-547.55C208.86,-548.98 217.5,-550.42 226.03,-551.84"/>
<polygon fill="green" stroke="green" points="225.53,-555.3 235.97,-553.5 226.69,-548.4 225.53,-555.3"/>
</g>
<!-- PeerStorage_post_ready&#45;&gt;PeerStorage_raft_state -->
<g id="edge17" class="edge">
<title>PeerStorage_post_ready&#45;&gt;PeerStorage_raft_state</title>
<path fill="none" stroke="#666666" d="M412.2,-588.51C540.8,-613.28 782.21,-638.09 932,-519 996.75,-467.52 1007.25,-360.82 1008.36,-309.21"/>
<polygon fill="#666666" stroke="#666666" points="1011.86,-309.11 1008.47,-299.07 1004.86,-309.04 1011.86,-309.11"/>
</g>
<!-- InvokeContext_set_last_index&#45;&gt;PeerStorage_raft_state -->
<g id="edge16" class="edge">
<title>InvokeContext_set_last_index&#45;&gt;PeerStorage_raft_state</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M843.55,-348.41C869.73,-337.71 902.67,-324.19 932,-312 940.54,-308.45 949.62,-304.65 958.41,-300.96"/>
<polygon fill="green" stroke="green" points="959.94,-304.11 967.8,-297.01 957.22,-297.66 959.94,-304.11"/>
</g>
</g>
</svg>
