<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.0 (20210316.0004)
 -->
<!-- Title: send_raft_message Pages: 1 -->
<svg width="1656pt" height="571pt"
 viewBox="0.00 0.00 1656.00 571.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 567)">
<title>send_raft_message</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-567 1652,-567 1652,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_RaftClient</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M788.5,-8C788.5,-8 1628,-8 1628,-8 1634,-8 1640,-14 1640,-20 1640,-20 1640,-132 1640,-132 1640,-138 1634,-144 1628,-144 1628,-144 788.5,-144 788.5,-144 782.5,-144 776.5,-138 776.5,-132 776.5,-132 776.5,-20 776.5,-20 776.5,-14 782.5,-8 788.5,-8"/>
<text text-anchor="middle" x="1208.25" y="-124" font-family="Times,serif" font-size="20.00">RaftClient</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_ServerTransport</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M596,-152C596,-152 1538,-152 1538,-152 1544,-152 1550,-158 1550,-164 1550,-164 1550,-279 1550,-279 1550,-285 1544,-291 1538,-291 1538,-291 596,-291 596,-291 590,-291 584,-285 584,-279 584,-279 584,-164 584,-164 584,-158 590,-152 596,-152"/>
<text text-anchor="middle" x="1067" y="-271" font-family="Times,serif" font-size="20.00">ServerTransport</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_Peer</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M743,-299C743,-299 1448,-299 1448,-299 1454,-299 1460,-305 1460,-311 1460,-311 1460,-543 1460,-543 1460,-549 1454,-555 1448,-555 1448,-555 743,-555 743,-555 737,-555 731,-549 731,-543 731,-543 731,-311 731,-311 731,-305 737,-299 743,-299"/>
<text text-anchor="middle" x="1095.5" y="-535" font-family="Times,serif" font-size="20.00">Peer</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_raft</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M945,-319C945,-319 1113,-319 1113,-319 1119,-319 1125,-325 1125,-331 1125,-331 1125,-495 1125,-495 1125,-501 1119,-507 1113,-507 1113,-507 945,-507 945,-507 939,-507 933,-501 933,-495 933,-495 933,-331 933,-331 933,-325 939,-319 945,-319"/>
<text text-anchor="middle" x="1029" y="-487" font-family="Times,serif" font-size="20.00">raft</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_PeerFsmDelegate</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M422,-299C422,-299 699,-299 699,-299 705,-299 711,-305 711,-311 711,-311 711,-369 711,-369 711,-375 705,-381 699,-381 699,-381 422,-381 422,-381 416,-381 410,-375 410,-369 410,-369 410,-311 410,-311 410,-305 416,-299 422,-299"/>
<text text-anchor="middle" x="560.5" y="-361" font-family="Times,serif" font-size="20.00">PeerFsmDelegate</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_RaftPoller</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M275,-154C275,-154 516,-154 516,-154 522,-154 528,-160 528,-166 528,-166 528,-278 528,-278 528,-284 522,-290 516,-290 516,-290 275,-290 275,-290 269,-290 263,-284 263,-278 263,-278 263,-166 263,-166 263,-160 269,-154 275,-154"/>
<text text-anchor="middle" x="395.5" y="-270" font-family="Times,serif" font-size="20.00">RaftPoller</text>
</g>
<g id="clust13" class="cluster">
<title>cluster_Poller</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-129C20,-129 231,-129 231,-129 237,-129 243,-135 243,-141 243,-141 243,-249 243,-249 243,-255 237,-261 231,-261 231,-261 20,-261 20,-261 14,-261 8,-255 8,-249 8,-249 8,-141 8,-141 8,-135 14,-129 20,-129"/>
<text text-anchor="middle" x="125.5" y="-241" font-family="Times,serif" font-size="20.00">Poller</text>
</g>
<!-- send -->
<g id="node1" class="node">
<title>send</title>
<path fill="none" stroke="#1c2123" d="M1620,-106C1620,-106 1590,-106 1590,-106 1584,-106 1578,-100 1578,-94 1578,-94 1578,-82 1578,-82 1578,-76 1584,-70 1590,-70 1590,-70 1620,-70 1620,-70 1626,-70 1632,-76 1632,-82 1632,-82 1632,-94 1632,-94 1632,-100 1626,-106 1620,-106"/>
<text text-anchor="middle" x="1605" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send</text>
</g>
<!-- flush -->
<g id="node2" class="node">
<title>flush</title>
<path fill="none" stroke="#1c2123" d="M837,-106C837,-106 807,-106 807,-106 801,-106 795,-100 795,-94 795,-94 795,-82 795,-82 795,-76 801,-70 807,-70 807,-70 837,-70 837,-70 843,-70 849,-76 849,-82 849,-82 849,-94 849,-94 849,-100 843,-106 837,-106"/>
<text text-anchor="middle" x="822" y="-84.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">flush</text>
</g>
<!-- need_flush -->
<g id="node3" class="node">
<title>need_flush</title>
<path fill="none" stroke="#1c2123" d="M847.5,-52C847.5,-52 796.5,-52 796.5,-52 790.5,-52 784.5,-46 784.5,-40 784.5,-40 784.5,-28 784.5,-28 784.5,-22 790.5,-16 796.5,-16 796.5,-16 847.5,-16 847.5,-16 853.5,-16 859.5,-22 859.5,-28 859.5,-28 859.5,-40 859.5,-40 859.5,-46 853.5,-52 847.5,-52"/>
<text text-anchor="middle" x="822" y="-30.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">need_flush</text>
</g>
<!-- ServerTransport_send -->
<g id="node4" class="node">
<title>ServerTransport_send</title>
<path fill="none" stroke="#1c2123" d="M1500,-216C1500,-216 1530,-216 1530,-216 1536,-216 1542,-222 1542,-228 1542,-228 1542,-240 1542,-240 1542,-246 1536,-252 1530,-252 1530,-252 1500,-252 1500,-252 1494,-252 1488,-246 1488,-240 1488,-240 1488,-228 1488,-228 1488,-222 1494,-216 1500,-216"/>
<text text-anchor="middle" x="1515" y="-230.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send</text>
</g>
<!-- ServerTransport_send&#45;&gt;send -->
<g id="edge1" class="edge">
<title>ServerTransport_send&#45;&gt;send</title>
<path fill="none" stroke="#666666" d="M1542.2,-219.4C1545.04,-217.15 1547.73,-214.68 1550,-212 1574.01,-183.71 1588.95,-143.1 1596.87,-116.15"/>
<polygon fill="#666666" stroke="#666666" points="1600.33,-116.78 1599.66,-106.21 1593.59,-114.89 1600.33,-116.78"/>
</g>
<!-- ServerTransport_flush -->
<g id="node5" class="node">
<title>ServerTransport_flush</title>
<path fill="none" stroke="#1c2123" d="M614.5,-216C614.5,-216 644.5,-216 644.5,-216 650.5,-216 656.5,-222 656.5,-228 656.5,-228 656.5,-240 656.5,-240 656.5,-246 650.5,-252 644.5,-252 644.5,-252 614.5,-252 614.5,-252 608.5,-252 602.5,-246 602.5,-240 602.5,-240 602.5,-228 602.5,-228 602.5,-222 608.5,-216 614.5,-216"/>
<text text-anchor="middle" x="629.5" y="-230.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">flush</text>
</g>
<!-- ServerTransport_flush&#45;&gt;flush -->
<g id="edge2" class="edge">
<title>ServerTransport_flush&#45;&gt;flush</title>
<path fill="none" stroke="#666666" d="M656.62,-228.76C673.14,-224.62 694.41,-217.73 711,-207 749.16,-182.32 782.95,-141.41 802.7,-114.58"/>
<polygon fill="#666666" stroke="#666666" points="805.59,-116.55 808.61,-106.4 799.92,-112.46 805.59,-116.55"/>
</g>
<!-- ServerTransport_need_flush -->
<g id="node6" class="node">
<title>ServerTransport_need_flush</title>
<path fill="none" stroke="#1c2123" d="M604,-161C604,-161 655,-161 655,-161 661,-161 667,-167 667,-173 667,-173 667,-185 667,-185 667,-191 661,-197 655,-197 655,-197 604,-197 604,-197 598,-197 592,-191 592,-185 592,-185 592,-173 592,-173 592,-167 598,-161 604,-161"/>
<text text-anchor="middle" x="629.5" y="-175.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">need_flush</text>
</g>
<!-- ServerTransport_need_flush&#45;&gt;need_flush -->
<g id="edge3" class="edge">
<title>ServerTransport_need_flush&#45;&gt;need_flush</title>
<path fill="none" stroke="#666666" d="M641.09,-160.98C657.23,-135.06 690.44,-87.48 731,-61 743.99,-52.52 759.74,-46.62 774.41,-42.54"/>
<polygon fill="#666666" stroke="#666666" points="775.52,-45.87 784.35,-40.01 773.79,-39.09 775.52,-45.87"/>
</g>
<!-- ready -->
<g id="node7" class="node">
<title>ready</title>
<path fill="none" stroke="#1c2123" d="M953,-407.5C953,-407.5 1105,-407.5 1105,-407.5 1111,-407.5 1117,-413.5 1117,-419.5 1117,-419.5 1117,-456.5 1117,-456.5 1117,-462.5 1111,-468.5 1105,-468.5 1105,-468.5 953,-468.5 953,-468.5 947,-468.5 941,-462.5 941,-456.5 941,-456.5 941,-419.5 941,-419.5 941,-413.5 947,-407.5 953,-407.5"/>
<text text-anchor="middle" x="1029" y="-453.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ready</text>
<polyline fill="none" stroke="#1c2123" points="941,-445.5 1117,-445.5 "/>
<text text-anchor="start" x="949" y="-430.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_group.ready()</text>
<text text-anchor="start" x="949" y="-415.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 获取raft要发送的messages</text>
</g>
<!-- Peer_send -->
<g id="node9" class="node">
<title>Peer_send</title>
<path fill="none" stroke="#1c2123" d="M1165,-369.5C1165,-369.5 1261,-369.5 1261,-369.5 1267,-369.5 1273,-375.5 1273,-381.5 1273,-381.5 1273,-418.5 1273,-418.5 1273,-424.5 1267,-430.5 1261,-430.5 1261,-430.5 1165,-430.5 1165,-430.5 1159,-430.5 1153,-424.5 1153,-418.5 1153,-418.5 1153,-381.5 1153,-381.5 1153,-375.5 1159,-369.5 1165,-369.5"/>
<text text-anchor="middle" x="1213" y="-415.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send</text>
<polyline fill="none" stroke="#1c2123" points="1153,-407.5 1273,-407.5 "/>
<text text-anchor="start" x="1161" y="-392.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">遍历messages</text>
<text text-anchor="start" x="1161" y="-377.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 发送每一条消息</text>
</g>
<!-- ready&#45;&gt;Peer_send -->
<g id="edge4" class="edge">
<title>ready&#45;&gt;Peer_send</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1117,-419.83C1125.74,-418.01 1134.52,-416.18 1143.04,-414.4"/>
<polygon fill="green" stroke="green" points="1143.81,-417.81 1152.88,-412.34 1142.38,-410.96 1143.81,-417.81"/>
</g>
<!-- advance_append -->
<g id="node8" class="node">
<title>advance_append</title>
<path fill="none" stroke="#1c2123" d="M953,-327.5C953,-327.5 1105,-327.5 1105,-327.5 1111,-327.5 1117,-333.5 1117,-339.5 1117,-339.5 1117,-376.5 1117,-376.5 1117,-382.5 1111,-388.5 1105,-388.5 1105,-388.5 953,-388.5 953,-388.5 947,-388.5 941,-382.5 941,-376.5 941,-376.5 941,-339.5 941,-339.5 941,-333.5 947,-327.5 953,-327.5"/>
<text text-anchor="middle" x="1029" y="-373.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">advance_append</text>
<polyline fill="none" stroke="#1c2123" points="941,-365.5 1117,-365.5 "/>
<text text-anchor="start" x="949" y="-350.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">raft_group.advance_append()</text>
<text text-anchor="start" x="949" y="-335.3" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 获取light ready</text>
</g>
<!-- advance_append&#45;&gt;Peer_send -->
<g id="edge5" class="edge">
<title>advance_append&#45;&gt;Peer_send</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M1117,-378.08C1125.74,-380.09 1134.52,-382.12 1143.04,-384.09"/>
<polygon fill="green" stroke="green" points="1142.35,-387.52 1152.88,-386.36 1143.93,-380.7 1142.35,-387.52"/>
</g>
<!-- send_raft_message -->
<g id="node10" class="node">
<title>send_raft_message</title>
<path fill="none" stroke="#1c2123" d="M1321,-362C1321,-362 1440,-362 1440,-362 1446,-362 1452,-368 1452,-374 1452,-374 1452,-426 1452,-426 1452,-432 1446,-438 1440,-438 1440,-438 1321,-438 1321,-438 1315,-438 1309,-432 1309,-426 1309,-426 1309,-374 1309,-374 1309,-368 1315,-362 1321,-362"/>
<text text-anchor="middle" x="1380.5" y="-422.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">send_raft_message</text>
<polyline fill="none" stroke="#1c2123" points="1309,-415 1452,-415 "/>
<text text-anchor="start" x="1317" y="-399.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">给messag加上自己的</text>
<text text-anchor="start" x="1317" y="-384.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> region_id, epoch</text>
<text text-anchor="start" x="1317" y="-369.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 设置peer等</text>
</g>
<!-- Peer_send&#45;&gt;send_raft_message -->
<g id="edge6" class="edge">
<title>Peer_send&#45;&gt;send_raft_message</title>
<path fill="none" stroke="#666666" d="M1273.28,-400C1281.55,-400 1290.16,-400 1298.73,-400"/>
<polygon fill="#666666" stroke="#666666" points="1298.77,-403.5 1308.77,-400 1298.77,-396.5 1298.77,-403.5"/>
</g>
<!-- send_raft_message&#45;&gt;ServerTransport_send -->
<g id="edge11" class="edge">
<title>send_raft_message&#45;&gt;ServerTransport_send</title>
<path fill="none" stroke="#666666" d="M1411.9,-361.92C1436.82,-330.69 1471.44,-287.32 1493.28,-259.96"/>
<polygon fill="#666666" stroke="#666666" points="1496.12,-262.02 1499.62,-252.02 1490.65,-257.65 1496.12,-262.02"/>
</g>
<!-- handle_raft_ready_advance -->
<g id="node11" class="node">
<title>handle_raft_ready_advance</title>
<path fill="none" stroke="#1c2123" d="M893,-343C893,-343 751,-343 751,-343 745,-343 739,-337 739,-331 739,-331 739,-319 739,-319 739,-313 745,-307 751,-307 751,-307 893,-307 893,-307 899,-307 905,-313 905,-319 905,-319 905,-331 905,-331 905,-337 899,-343 893,-343"/>
<text text-anchor="middle" x="822" y="-321.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_raft_ready_advance</text>
</g>
<!-- handle_raft_ready_advance&#45;&gt;advance_append -->
<g id="edge7" class="edge">
<title>handle_raft_ready_advance&#45;&gt;advance_append</title>
<path fill="none" stroke="#666666" d="M905.2,-338.23C913.61,-339.59 922.2,-340.97 930.75,-342.35"/>
<polygon fill="#666666" stroke="#666666" points="930.32,-345.82 940.75,-343.95 931.43,-338.91 930.32,-345.82"/>
</g>
<!-- handle_raft_ready_advance&#45;&gt;Peer_send -->
<g id="edge8" class="edge">
<title>handle_raft_ready_advance&#45;&gt;Peer_send</title>
<path fill="none" stroke="#666666" d="M905.02,-340.81C975.63,-354.43 1076.36,-373.85 1142.92,-386.68"/>
<polygon fill="#666666" stroke="#666666" points="1142.41,-390.15 1152.89,-388.6 1143.73,-383.27 1142.41,-390.15"/>
</g>
<!-- handle_raft_ready_append -->
<g id="node12" class="node">
<title>handle_raft_ready_append</title>
<path fill="none" stroke="#1c2123" d="M890.5,-456C890.5,-456 753.5,-456 753.5,-456 747.5,-456 741.5,-450 741.5,-444 741.5,-444 741.5,-432 741.5,-432 741.5,-426 747.5,-420 753.5,-420 753.5,-420 890.5,-420 890.5,-420 896.5,-420 902.5,-426 902.5,-432 902.5,-432 902.5,-444 902.5,-444 902.5,-450 896.5,-456 890.5,-456"/>
<text text-anchor="middle" x="822" y="-434.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_raft_ready_append</text>
</g>
<!-- handle_raft_ready_append&#45;&gt;ready -->
<g id="edge9" class="edge">
<title>handle_raft_ready_append&#45;&gt;ready</title>
<path fill="none" stroke="#666666" d="M902.55,-438C911.73,-438 921.16,-438 930.54,-438"/>
<polygon fill="#666666" stroke="#666666" points="930.67,-441.5 940.67,-438 930.67,-434.5 930.67,-441.5"/>
</g>
<!-- handle_raft_ready_append&#45;&gt;Peer_send -->
<g id="edge10" class="edge">
<title>handle_raft_ready_append&#45;&gt;Peer_send</title>
<path fill="none" stroke="#666666" d="M902.66,-430.22C973.27,-423.32 1075.36,-413.35 1142.67,-406.77"/>
<polygon fill="#666666" stroke="#666666" points="1143.14,-410.24 1152.75,-405.79 1142.46,-403.28 1143.14,-410.24"/>
</g>
<!-- send_extra_message -->
<g id="node13" class="node">
<title>send_extra_message</title>
<path fill="none" stroke="#1c2123" d="M1432.5,-343C1432.5,-343 1328.5,-343 1328.5,-343 1322.5,-343 1316.5,-337 1316.5,-331 1316.5,-331 1316.5,-319 1316.5,-319 1316.5,-313 1322.5,-307 1328.5,-307 1328.5,-307 1432.5,-307 1432.5,-307 1438.5,-307 1444.5,-313 1444.5,-319 1444.5,-319 1444.5,-331 1444.5,-331 1444.5,-337 1438.5,-343 1432.5,-343"/>
<text text-anchor="middle" x="1380.5" y="-321.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">send_extra_message</text>
</g>
<!-- send_extra_message&#45;&gt;ServerTransport_send -->
<g id="edge12" class="edge">
<title>send_extra_message&#45;&gt;ServerTransport_send</title>
<path fill="none" stroke="#666666" d="M1444.8,-311.17C1450.14,-308.85 1455.3,-306.15 1460,-303 1476.02,-292.28 1489.41,-275.27 1498.85,-260.82"/>
<polygon fill="#666666" stroke="#666666" points="1501.88,-262.57 1504.2,-252.23 1495.94,-258.86 1501.88,-262.57"/>
</g>
<!-- post_raft_ready_append -->
<g id="node14" class="node">
<title>post_raft_ready_append</title>
<path fill="none" stroke="#1c2123" d="M691,-343C691,-343 568,-343 568,-343 562,-343 556,-337 556,-331 556,-331 556,-319 556,-319 556,-313 562,-307 568,-307 568,-307 691,-307 691,-307 697,-307 703,-313 703,-319 703,-319 703,-331 703,-331 703,-337 697,-343 691,-343"/>
<text text-anchor="middle" x="629.5" y="-321.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">post_raft_ready_append</text>
</g>
<!-- post_raft_ready_append&#45;&gt;handle_raft_ready_advance -->
<g id="edge13" class="edge">
<title>post_raft_ready_append&#45;&gt;handle_raft_ready_advance</title>
<path fill="none" stroke="#666666" d="M703.06,-325C711.45,-325 720.09,-325 728.7,-325"/>
<polygon fill="#666666" stroke="#666666" points="728.77,-328.5 738.77,-325 728.77,-321.5 728.77,-328.5"/>
</g>
<!-- collect_ready -->
<g id="node15" class="node">
<title>collect_ready</title>
<path fill="none" stroke="#1c2123" d="M495,-343C495,-343 430,-343 430,-343 424,-343 418,-337 418,-331 418,-331 418,-319 418,-319 418,-313 424,-307 430,-307 430,-307 495,-307 495,-307 501,-307 507,-313 507,-319 507,-319 507,-331 507,-331 507,-337 501,-343 495,-343"/>
<text text-anchor="middle" x="462.5" y="-321.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">collect_ready</text>
</g>
<!-- collect_ready&#45;&gt;handle_raft_ready_append -->
<g id="edge14" class="edge">
<title>collect_ready&#45;&gt;handle_raft_ready_append</title>
<path fill="none" stroke="#666666" d="M507.14,-341.17C559.79,-360.37 651.18,-392.72 731,-416 732.45,-416.42 733.91,-416.84 735.38,-417.26"/>
<polygon fill="#666666" stroke="#666666" points="734.68,-420.7 745.25,-419.99 736.55,-413.95 734.68,-420.7"/>
</g>
<!-- end -->
<g id="node16" class="node">
<title>end</title>
<path fill="none" stroke="#1c2123" d="M335,-198C335,-198 305,-198 305,-198 299,-198 293,-192 293,-186 293,-186 293,-174 293,-174 293,-168 299,-162 305,-162 305,-162 335,-162 335,-162 341,-162 347,-168 347,-174 347,-174 347,-186 347,-186 347,-192 341,-198 335,-198"/>
<text text-anchor="middle" x="320" y="-176.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">end</text>
</g>
<!-- handle_raft_ready -->
<g id="node17" class="node">
<title>handle_raft_ready</title>
<path fill="none" stroke="#1c2123" d="M508,-252C508,-252 417,-252 417,-252 411,-252 405,-246 405,-240 405,-240 405,-228 405,-228 405,-222 411,-216 417,-216 417,-216 508,-216 508,-216 514,-216 520,-222 520,-228 520,-228 520,-240 520,-240 520,-246 514,-252 508,-252"/>
<text text-anchor="middle" x="462.5" y="-230.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_raft_ready</text>
</g>
<!-- end&#45;&gt;handle_raft_ready -->
<g id="edge15" class="edge">
<title>end&#45;&gt;handle_raft_ready</title>
<path fill="none" stroke="#666666" d="M347.1,-190.03C363.4,-196.3 385.04,-204.61 405.11,-212.33"/>
<polygon fill="#666666" stroke="#666666" points="403.91,-215.62 414.5,-215.94 406.42,-209.08 403.91,-215.62"/>
</g>
<!-- handle_raft_ready&#45;&gt;ServerTransport_flush -->
<g id="edge16" class="edge">
<title>handle_raft_ready&#45;&gt;ServerTransport_flush</title>
<path fill="none" stroke="#666666" d="M520.28,-234C544.05,-234 570.98,-234 592.03,-234"/>
<polygon fill="#666666" stroke="#666666" points="592.15,-237.5 602.15,-234 592.15,-230.5 592.15,-237.5"/>
</g>
<!-- handle_raft_ready&#45;&gt;ServerTransport_need_flush -->
<g id="edge17" class="edge">
<title>handle_raft_ready&#45;&gt;ServerTransport_need_flush</title>
<path fill="none" stroke="#666666" d="M517.53,-215.99C538.45,-209.02 562.15,-201.12 582.26,-194.41"/>
<polygon fill="#666666" stroke="#666666" points="583.44,-197.71 591.82,-191.23 581.23,-191.07 583.44,-197.71"/>
</g>
<!-- handle_raft_ready&#45;&gt;post_raft_ready_append -->
<g id="edge18" class="edge">
<title>handle_raft_ready&#45;&gt;post_raft_ready_append</title>
<path fill="none" stroke="#666666" d="M488.22,-252.18C506.41,-265.08 532.04,-282.29 556,-295 561.09,-297.7 566.47,-300.32 571.92,-302.83"/>
<polygon fill="#666666" stroke="#666666" points="570.54,-306.04 581.1,-306.92 573.39,-299.65 570.54,-306.04"/>
</g>
<!-- pause -->
<g id="node18" class="node">
<title>pause</title>
<path fill="none" stroke="#1c2123" d="M477.5,-198C477.5,-198 447.5,-198 447.5,-198 441.5,-198 435.5,-192 435.5,-186 435.5,-186 435.5,-174 435.5,-174 435.5,-168 441.5,-162 447.5,-162 447.5,-162 477.5,-162 477.5,-162 483.5,-162 489.5,-168 489.5,-174 489.5,-174 489.5,-186 489.5,-186 489.5,-192 483.5,-198 477.5,-198"/>
<text text-anchor="middle" x="462.5" y="-176.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pause</text>
</g>
<!-- pause&#45;&gt;ServerTransport_flush -->
<g id="edge19" class="edge">
<title>pause&#45;&gt;ServerTransport_flush</title>
<path fill="none" stroke="#666666" d="M489.64,-188.56C517.52,-197.68 561.85,-212.19 592.9,-222.35"/>
<polygon fill="#666666" stroke="#666666" points="591.88,-225.7 602.48,-225.48 594.06,-219.05 591.88,-225.7"/>
</g>
<!-- pause&#45;&gt;ServerTransport_need_flush -->
<g id="edge20" class="edge">
<title>pause&#45;&gt;ServerTransport_need_flush</title>
<path fill="none" stroke="#666666" d="M489.64,-179.84C514.27,-179.69 551.74,-179.47 581.55,-179.28"/>
<polygon fill="#666666" stroke="#666666" points="581.76,-182.78 591.74,-179.22 581.72,-175.78 581.76,-182.78"/>
</g>
<!-- handle_normal -->
<g id="node19" class="node">
<title>handle_normal</title>
<path fill="none" stroke="#1c2123" d="M357,-252C357,-252 283,-252 283,-252 277,-252 271,-246 271,-240 271,-240 271,-228 271,-228 271,-222 277,-216 283,-216 283,-216 357,-216 357,-216 363,-216 369,-222 369,-228 369,-228 369,-240 369,-240 369,-246 363,-252 357,-252"/>
<text text-anchor="middle" x="320" y="-230.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handle_normal</text>
</g>
<!-- handle_normal&#45;&gt;collect_ready -->
<g id="edge21" class="edge">
<title>handle_normal&#45;&gt;collect_ready</title>
<path fill="none" stroke="#666666" d="M344.74,-252.1C361.29,-264.43 384.06,-280.84 405,-294 409.27,-296.68 413.79,-299.39 418.34,-302.01"/>
<polygon fill="#666666" stroke="#666666" points="416.64,-305.07 427.06,-306.95 420.09,-298.98 416.64,-305.07"/>
</g>
<!-- poller_poll -->
<g id="node20" class="node">
<title>poller_poll</title>
<path fill="none" stroke="#1c2123" d="M28,-138C28,-138 223,-138 223,-138 229,-138 235,-144 235,-150 235,-150 235,-210 235,-210 235,-216 229,-222 223,-222 223,-222 28,-222 28,-222 22,-222 16,-216 16,-210 16,-210 16,-150 16,-150 16,-144 22,-138 28,-138"/>
<text text-anchor="middle" x="125.5" y="-206.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">poll</text>
<polyline fill="none" stroke="#1c2123" points="16,-199 235,-199 "/>
<text text-anchor="start" x="24" y="-183.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">BatchSystem Poller主循环fetch fsm</text>
<polyline fill="none" stroke="#1c2123" points="16,-176 235,-176 "/>
<text text-anchor="start" x="24" y="-160.8" font-family="Times,serif" font-size="14.00" fill="#2f3638">然后在调用RaftPoller</text>
<text text-anchor="start" x="24" y="-145.8" font-family="Times,serif" font-size="14.00" fill="#2f3638"> 处理有消息的的fsm</text>
</g>
<!-- poller_poll&#45;&gt;end -->
<g id="edge22" class="edge">
<title>poller_poll&#45;&gt;end</title>
<path fill="none" stroke="#666666" d="M235.13,-180C252.25,-180 268.85,-180 282.69,-180"/>
<polygon fill="#666666" stroke="#666666" points="282.71,-183.5 292.71,-180 282.71,-176.5 282.71,-183.5"/>
</g>
<!-- poller_poll&#45;&gt;pause -->
<g id="edge23" class="edge">
<title>poller_poll&#45;&gt;pause</title>
<path fill="none" stroke="#666666" d="M235.03,-156.2C276.96,-150.07 325.28,-146.75 369,-153 388.1,-155.73 408.77,-161.48 425.72,-166.98"/>
<polygon fill="#666666" stroke="#666666" points="424.63,-170.31 435.23,-170.16 426.85,-163.67 424.63,-170.31"/>
</g>
<!-- poller_poll&#45;&gt;handle_normal -->
<g id="edge24" class="edge">
<title>poller_poll&#45;&gt;handle_normal</title>
<path fill="none" stroke="#666666" d="M235.13,-210.47C243.98,-212.96 252.69,-215.4 260.95,-217.72"/>
<polygon fill="#666666" stroke="#666666" points="260.21,-221.14 270.79,-220.47 262.1,-214.4 260.21,-221.14"/>
</g>
</g>
</svg>
