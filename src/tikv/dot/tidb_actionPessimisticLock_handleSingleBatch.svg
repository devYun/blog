<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.1 (20210417.1919)
 -->
<!-- Title: actionPessimisticLock_handleSingleBatch Pages: 1 -->
<svg width="676pt" height="772pt"
 viewBox="0.00 0.00 676.00 772.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 768)">
<title>actionPessimisticLock_handleSingleBatch</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-768 672,-768 672,4 -4,4"/>
<g id="clust2" class="cluster">
<title>cluster_ForLoop</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M174,-368C174,-368 648,-368 648,-368 654,-368 660,-374 660,-380 660,-380 660,-654 660,-654 660,-660 654,-666 648,-666 648,-666 174,-666 174,-666 168,-666 162,-660 162,-654 162,-654 162,-380 162,-380 162,-374 168,-368 174,-368"/>
<text text-anchor="middle" x="411" y="-646" font-family="Times,serif" font-size="20.00">ForLoop</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_actionPessimisticLock</title>
<path fill="none" stroke="slategrey" stroke-dasharray="5,2" d="M20,-100C20,-100 268.5,-100 268.5,-100 274.5,-100 280.5,-106 280.5,-112 280.5,-112 280.5,-172 280.5,-172 280.5,-178 274.5,-184 268.5,-184 268.5,-184 20,-184 20,-184 14,-184 8,-178 8,-172 8,-172 8,-112 8,-112 8,-106 14,-100 20,-100"/>
<text text-anchor="middle" x="144.25" y="-164" font-family="Times,serif" font-size="20.00">actionPessimisticLock</text>
</g>
<!-- handleSingleBatch -->
<g id="node1" class="node">
<title>handleSingleBatch</title>
<path fill="none" stroke="#1c2123" d="M112.5,-439C112.5,-439 17.5,-439 17.5,-439 11.5,-439 5.5,-433 5.5,-427 5.5,-427 5.5,-415 5.5,-415 5.5,-409 11.5,-403 17.5,-403 17.5,-403 112.5,-403 112.5,-403 118.5,-403 124.5,-409 124.5,-415 124.5,-415 124.5,-427 124.5,-427 124.5,-433 118.5,-439 112.5,-439"/>
<text text-anchor="middle" x="65" y="-417.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">handleSingleBatch</text>
</g>
<!-- HasPresumeKeyNotExists -->
<g id="node2" class="node">
<title>HasPresumeKeyNotExists</title>
<path fill="none" stroke="#1c2123" d="M314,-764C314,-764 177,-764 177,-764 171,-764 165,-758 165,-752 165,-752 165,-740 165,-740 165,-734 171,-728 177,-728 177,-728 314,-728 314,-728 320,-728 326,-734 326,-740 326,-740 326,-752 326,-752 326,-758 320,-764 314,-764"/>
<text text-anchor="middle" x="245.5" y="-742.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">HasPresumeKeyNotExists</text>
</g>
<!-- handleSingleBatch&#45;&gt;HasPresumeKeyNotExists -->
<g id="edge1" class="edge">
<title>handleSingleBatch&#45;&gt;HasPresumeKeyNotExists</title>
<path fill="none" stroke="#666666" d="M66.42,-439.3C68.59,-490.81 81.86,-638.49 162,-719 162.93,-719.93 163.89,-720.83 164.88,-721.7"/>
<polygon fill="#666666" stroke="#666666" points="162.87,-724.57 172.97,-727.77 167.07,-718.97 162.87,-724.57"/>
</g>
<!-- PessimisticLockRequest -->
<g id="node3" class="node">
<title>PessimisticLockRequest</title>
<path fill="none" stroke="#1c2123" d="M308,-710C308,-710 183,-710 183,-710 177,-710 171,-704 171,-698 171,-698 171,-686 171,-686 171,-680 177,-674 183,-674 183,-674 308,-674 308,-674 314,-674 320,-680 320,-686 320,-686 320,-698 320,-698 320,-704 314,-710 308,-710"/>
<text text-anchor="middle" x="245.5" y="-688.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">PessimisticLockRequest</text>
</g>
<!-- handleSingleBatch&#45;&gt;PessimisticLockRequest -->
<g id="edge2" class="edge">
<title>handleSingleBatch&#45;&gt;PessimisticLockRequest</title>
<path fill="none" stroke="#666666" d="M67.5,-439.15C72.28,-485.04 91.33,-606.54 162,-670 162.26,-670.23 162.52,-670.46 162.78,-670.69"/>
<polygon fill="#666666" stroke="#666666" points="160.8,-673.57 170.94,-676.64 164.92,-667.92 160.8,-673.57"/>
</g>
<!-- SendReq -->
<g id="node4" class="node">
<title>SendReq</title>
<path fill="none" stroke="#1c2123" d="M266,-628C266,-628 225,-628 225,-628 219,-628 213,-622 213,-616 213,-616 213,-604 213,-604 213,-598 219,-592 225,-592 225,-592 266,-592 266,-592 272,-592 278,-598 278,-604 278,-604 278,-616 278,-616 278,-622 272,-628 266,-628"/>
<text text-anchor="middle" x="245.5" y="-606.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">SendReq</text>
</g>
<!-- handleSingleBatch&#45;&gt;SendReq -->
<g id="edge3" class="edge">
<title>handleSingleBatch&#45;&gt;SendReq</title>
<path fill="none" stroke="#666666" d="M71.91,-439.21C83.67,-472.61 113.16,-543.83 162,-583 173.73,-592.41 188.85,-598.59 202.93,-602.62"/>
<polygon fill="#666666" stroke="#666666" points="202.39,-606.09 212.94,-605.19 204.13,-599.31 202.39,-606.09"/>
</g>
<!-- regionErr -->
<g id="node5" class="node">
<title>regionErr</title>
<path fill="none" stroke="#1c2123" d="M267.5,-412C267.5,-412 223.5,-412 223.5,-412 217.5,-412 211.5,-406 211.5,-400 211.5,-400 211.5,-388 211.5,-388 211.5,-382 217.5,-376 223.5,-376 223.5,-376 267.5,-376 267.5,-376 273.5,-376 279.5,-382 279.5,-388 279.5,-388 279.5,-400 279.5,-400 279.5,-406 273.5,-412 267.5,-412"/>
<text text-anchor="middle" x="245.5" y="-390.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">regionErr</text>
</g>
<!-- handleSingleBatch&#45;&gt;regionErr -->
<g id="edge4" class="edge">
<title>handleSingleBatch&#45;&gt;regionErr</title>
<path fill="none" stroke="#666666" d="M124.94,-412.08C149.86,-408.31 178.36,-404 201.28,-400.54"/>
<polygon fill="#666666" stroke="#666666" points="202.03,-403.96 211.39,-399.01 200.98,-397.04 202.03,-403.96"/>
</g>
<!-- pessimisticLockMutations -->
<g id="node6" class="node">
<title>pessimisticLockMutations</title>
<path fill="none" stroke="#1c2123" d="M511,-412C511,-412 374,-412 374,-412 368,-412 362,-406 362,-400 362,-400 362,-388 362,-388 362,-382 368,-376 374,-376 374,-376 511,-376 511,-376 517,-376 523,-382 523,-388 523,-388 523,-400 523,-400 523,-406 517,-412 511,-412"/>
<text text-anchor="middle" x="442.5" y="-390.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">pessimisticLockMutations</text>
</g>
<!-- handleSingleBatch&#45;&gt;pessimisticLockMutations -->
<g id="edge5" class="edge">
<title>handleSingleBatch&#45;&gt;pessimisticLockMutations</title>
<path fill="none" stroke="#666666" d="M90.14,-402.77C108.69,-389.97 135.55,-373.93 162,-367 231.29,-348.85 313.11,-360.43 370.26,-373.59"/>
<polygon fill="#666666" stroke="#666666" points="369.74,-377.06 380.28,-375.97 371.36,-370.25 369.74,-377.06"/>
</g>
<!-- extractKeyExistsErr -->
<g id="node7" class="node">
<title>extractKeyExistsErr</title>
<path fill="none" stroke="#1c2123" d="M296.5,-520C296.5,-520 194.5,-520 194.5,-520 188.5,-520 182.5,-514 182.5,-508 182.5,-508 182.5,-496 182.5,-496 182.5,-490 188.5,-484 194.5,-484 194.5,-484 296.5,-484 296.5,-484 302.5,-484 308.5,-490 308.5,-496 308.5,-496 308.5,-508 308.5,-508 308.5,-514 302.5,-520 296.5,-520"/>
<text text-anchor="middle" x="245.5" y="-498.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">extractKeyExistsErr</text>
</g>
<!-- handleSingleBatch&#45;&gt;extractKeyExistsErr -->
<g id="edge6" class="edge">
<title>handleSingleBatch&#45;&gt;extractKeyExistsErr</title>
<path fill="none" stroke="#666666" d="M94.65,-439.07C113.34,-450.37 138.54,-464.68 162,-475 166.15,-476.82 170.46,-478.59 174.84,-480.29"/>
<polygon fill="#666666" stroke="#666666" points="173.9,-483.68 184.49,-483.9 176.35,-477.12 173.9,-483.68"/>
</g>
<!-- ErrDeadlock -->
<g id="node8" class="node">
<title>ErrDeadlock</title>
<path fill="none" stroke="#1c2123" d="M276.5,-466C276.5,-466 214.5,-466 214.5,-466 208.5,-466 202.5,-460 202.5,-454 202.5,-454 202.5,-442 202.5,-442 202.5,-436 208.5,-430 214.5,-430 214.5,-430 276.5,-430 276.5,-430 282.5,-430 288.5,-436 288.5,-442 288.5,-442 288.5,-454 288.5,-454 288.5,-460 282.5,-466 276.5,-466"/>
<text text-anchor="middle" x="245.5" y="-444.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ErrDeadlock</text>
</g>
<!-- handleSingleBatch&#45;&gt;ErrDeadlock -->
<g id="edge7" class="edge">
<title>handleSingleBatch&#45;&gt;ErrDeadlock</title>
<path fill="none" stroke="#666666" d="M124.94,-429.92C146.67,-433.2 171.12,-436.9 192.22,-440.09"/>
<polygon fill="#666666" stroke="#666666" points="191.87,-443.58 202.29,-441.61 192.92,-436.66 191.87,-443.58"/>
</g>
<!-- extractLockFromKeyErr -->
<g id="node9" class="node">
<title>extractLockFromKeyErr</title>
<path fill="none" stroke="#1c2123" d="M309,-574C309,-574 182,-574 182,-574 176,-574 170,-568 170,-562 170,-562 170,-550 170,-550 170,-544 176,-538 182,-538 182,-538 309,-538 309,-538 315,-538 321,-544 321,-550 321,-550 321,-562 321,-562 321,-568 315,-574 309,-574"/>
<text text-anchor="middle" x="245.5" y="-552.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">extractLockFromKeyErr</text>
</g>
<!-- handleSingleBatch&#45;&gt;extractLockFromKeyErr -->
<g id="edge8" class="edge">
<title>handleSingleBatch&#45;&gt;extractLockFromKeyErr</title>
<path fill="none" stroke="#666666" d="M77.72,-439.37C93.9,-463.3 125.28,-504.93 162,-529 164.28,-530.5 166.66,-531.92 169.1,-533.27"/>
<polygon fill="#666666" stroke="#666666" points="167.67,-536.47 178.18,-537.83 170.82,-530.21 167.67,-536.47"/>
</g>
<!-- ResolveLocks -->
<g id="node10" class="node">
<title>ResolveLocks</title>
<path fill="none" stroke="#1c2123" d="M640,-467C640,-467 571,-467 571,-467 565,-467 559,-461 559,-455 559,-455 559,-443 559,-443 559,-437 565,-431 571,-431 571,-431 640,-431 640,-431 646,-431 652,-437 652,-443 652,-443 652,-455 652,-455 652,-461 646,-467 640,-467"/>
<text text-anchor="middle" x="605.5" y="-445.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">ResolveLocks</text>
</g>
<!-- handleSingleBatch&#45;&gt;ResolveLocks -->
<g id="edge9" class="edge">
<title>handleSingleBatch&#45;&gt;ResolveLocks</title>
<path fill="none" stroke="#666666" d="M84.26,-402.72C102.26,-386.1 131.44,-362.73 162,-353 315,-304.3 377.03,-300.11 523,-367 549.39,-379.09 571.97,-403.69 586.62,-422.8"/>
<polygon fill="#666666" stroke="#666666" points="583.83,-424.91 592.59,-430.87 589.46,-420.75 583.83,-424.91"/>
</g>
<!-- LockWaitTime -->
<g id="node11" class="node">
<title>LockWaitTime</title>
<path fill="none" stroke="#1c2123" d="M283.5,-282C283.5,-282 207.5,-282 207.5,-282 201.5,-282 195.5,-276 195.5,-270 195.5,-270 195.5,-258 195.5,-258 195.5,-252 201.5,-246 207.5,-246 207.5,-246 283.5,-246 283.5,-246 289.5,-246 295.5,-252 295.5,-258 295.5,-258 295.5,-270 295.5,-270 295.5,-276 289.5,-282 283.5,-282"/>
<text text-anchor="middle" x="245.5" y="-260.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">LockWaitTime</text>
</g>
<!-- handleSingleBatch&#45;&gt;LockWaitTime -->
<g id="edge10" class="edge">
<title>handleSingleBatch&#45;&gt;LockWaitTime</title>
<path fill="none" stroke="#666666" d="M75.68,-402.75C90.78,-375.89 122.36,-325.69 162,-296 169.15,-290.65 177.3,-286.07 185.64,-282.2"/>
<polygon fill="#666666" stroke="#666666" points="187.29,-285.3 195.08,-278.13 184.51,-278.88 187.29,-285.3"/>
</g>
<!-- lockWaitStartTime -->
<g id="node12" class="node">
<title>lockWaitStartTime</title>
<path fill="none" stroke="#1c2123" d="M294,-228C294,-228 197,-228 197,-228 191,-228 185,-222 185,-216 185,-216 185,-204 185,-204 185,-198 191,-192 197,-192 197,-192 294,-192 294,-192 300,-192 306,-198 306,-204 306,-204 306,-216 306,-216 306,-222 300,-228 294,-228"/>
<text text-anchor="middle" x="245.5" y="-206.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">lockWaitStartTime</text>
</g>
<!-- handleSingleBatch&#45;&gt;lockWaitStartTime -->
<g id="edge11" class="edge">
<title>handleSingleBatch&#45;&gt;lockWaitStartTime</title>
<path fill="none" stroke="#666666" d="M70.47,-402.94C80.47,-366.26 108.13,-282.66 162,-237 166.17,-233.47 170.81,-230.39 175.71,-227.72"/>
<polygon fill="#666666" stroke="#666666" points="177.29,-230.84 184.75,-223.33 174.23,-224.55 177.29,-230.84"/>
</g>
<!-- Killed -->
<g id="node13" class="node">
<title>Killed</title>
<path fill="#feed9b" stroke="#f7e495" d="M230.5,-109C230.5,-109 260.5,-109 260.5,-109 266.5,-109 272.5,-115 272.5,-121 272.5,-121 272.5,-133 272.5,-133 272.5,-139 266.5,-145 260.5,-145 260.5,-145 230.5,-145 230.5,-145 224.5,-145 218.5,-139 218.5,-133 218.5,-133 218.5,-121 218.5,-121 218.5,-115 224.5,-109 230.5,-109"/>
<text text-anchor="middle" x="245.5" y="-123.3" font-family="Times,serif" font-size="14.00" fill="#40575d">Killed</text>
</g>
<!-- handleSingleBatch&#45;&gt;Killed -->
<g id="edge12" class="edge">
<title>handleSingleBatch&#45;&gt;Killed</title>
<path fill="none" stroke="#666666" d="M69.54,-402.73C78.52,-360.2 105.62,-252.87 162,-183 174.84,-167.09 193.4,-153.94 209.66,-144.39"/>
<polygon fill="#666666" stroke="#666666" points="211.41,-147.41 218.41,-139.46 207.98,-141.32 211.41,-147.41"/>
</g>
<!-- regionErr&#45;&gt;pessimisticLockMutations -->
<g id="edge13" class="edge">
<title>regionErr&#45;&gt;pessimisticLockMutations</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M279.58,-394C299.53,-394 326,-394 351.74,-394"/>
<polygon fill="green" stroke="green" points="351.94,-397.5 361.94,-394 351.94,-390.5 351.94,-397.5"/>
</g>
<!-- locks -->
<g id="node14" class="node">
<title>locks</title>
<path fill="#feed9b" stroke="#f7e495" d="M427.5,-482C427.5,-482 457.5,-482 457.5,-482 463.5,-482 469.5,-488 469.5,-494 469.5,-494 469.5,-516 469.5,-516 469.5,-522 463.5,-528 457.5,-528 457.5,-528 427.5,-528 427.5,-528 421.5,-528 415.5,-522 415.5,-516 415.5,-516 415.5,-494 415.5,-494 415.5,-488 421.5,-482 427.5,-482"/>
<text text-anchor="middle" x="442.5" y="-512.8" font-family="Times,serif" font-size="14.00" fill="#40575d">locks</text>
<polyline fill="none" stroke="#f7e495" points="415.5,-505 469.5,-505 "/>
<text text-anchor="middle" x="442.5" y="-489.8" font-family="Times,serif" font-size="14.00" fill="#40575d"> </text>
</g>
<!-- extractLockFromKeyErr&#45;&gt;locks -->
<g id="edge14" class="edge">
<title>extractLockFromKeyErr&#45;&gt;locks</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M315.52,-537.95C345.95,-529.99 380.44,-520.97 405.63,-514.38"/>
<polygon fill="green" stroke="green" points="406.68,-517.72 415.47,-511.81 404.91,-510.95 406.68,-517.72"/>
</g>
<!-- locks&#45;&gt;ResolveLocks -->
<g id="edge15" class="edge">
<title>locks&#45;&gt;ResolveLocks</title>
<path fill="none" stroke="green" stroke-dasharray="5,2" d="M469.73,-495.88C491.15,-488.43 522.18,-477.63 549.07,-468.28"/>
<polygon fill="green" stroke="green" points="550.46,-471.5 558.76,-464.91 548.16,-464.89 550.46,-471.5"/>
</g>
<!-- WaitStartTime -->
<g id="node15" class="node">
<title>WaitStartTime</title>
<path fill="#feed9b" stroke="#f7e495" d="M28,-109C28,-109 102,-109 102,-109 108,-109 114,-115 114,-121 114,-121 114,-133 114,-133 114,-139 108,-145 102,-145 102,-145 28,-145 28,-145 22,-145 16,-139 16,-133 16,-133 16,-121 16,-121 16,-115 22,-109 28,-109"/>
<text text-anchor="middle" x="65" y="-123.3" font-family="Times,serif" font-size="14.00" fill="#40575d">WaitStartTime</text>
</g>
<!-- clientConn_dispatch -->
<g id="node16" class="node">
<title>clientConn_dispatch</title>
<path fill="none" stroke="#1c2123" d="M117,-90C117,-90 13,-90 13,-90 7,-90 1,-84 1,-78 1,-78 1,-66 1,-66 1,-60 7,-54 13,-54 13,-54 117,-54 117,-54 123,-54 129,-60 129,-66 129,-66 129,-78 129,-78 129,-84 123,-90 117,-90"/>
<text text-anchor="middle" x="65" y="-68.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">clientConn_dispatch</text>
</g>
<!-- clientConn_dispatch&#45;&gt;Killed -->
<g id="edge16" class="edge">
<title>clientConn_dispatch&#45;&gt;Killed</title>
<path fill="none" stroke="#666666" d="M124.45,-90.01C152.21,-98.56 184.49,-108.51 208.59,-115.94"/>
<polygon fill="#666666" stroke="#666666" points="207.79,-119.35 218.38,-118.95 209.85,-112.66 207.79,-119.35"/>
</g>
<!-- killConn -->
<g id="node17" class="node">
<title>killConn</title>
<path fill="none" stroke="#1c2123" d="M85,-36C85,-36 45,-36 45,-36 39,-36 33,-30 33,-24 33,-24 33,-12 33,-12 33,-6 39,0 45,0 45,0 85,0 85,0 91,0 97,-6 97,-12 97,-12 97,-24 97,-24 97,-30 91,-36 85,-36"/>
<text text-anchor="middle" x="65" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#2f3638">killConn</text>
</g>
<!-- killConn&#45;&gt;Killed -->
<g id="edge17" class="edge">
<title>killConn&#45;&gt;Killed</title>
<path fill="none" stroke="#666666" d="M97.07,-29.77C107.45,-34.11 118.93,-39.35 129,-45 159.24,-61.96 191.2,-85.11 213.82,-102.49"/>
<polygon fill="#666666" stroke="#666666" points="211.96,-105.48 222.01,-108.84 216.25,-99.95 211.96,-105.48"/>
</g>
</g>
</svg>
