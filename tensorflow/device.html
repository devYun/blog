<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Device：计算单元抽象(CPU/GPU) - blog</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../about.html"><strong aria-hidden="true">1.</strong> About</a></li><li class="chapter-item expanded "><a href="../papers/index.html"><strong aria-hidden="true">2.</strong> Paper notes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../papers/raft.html"><strong aria-hidden="true">2.1.</strong> raft paper</a></li><li class="chapter-item expanded "><a href="../papers/gfs.html"><strong aria-hidden="true">2.2.</strong> gfs</a></li><li class="chapter-item expanded "><a href="../papers/bw-tree.html"><strong aria-hidden="true">2.3.</strong> Bw-tree(draft)</a></li></ol></li><li class="chapter-item expanded "><a href="../leveldb/index.html"><strong aria-hidden="true">3.</strong> LevelDB</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../leveldb/draft.html"><strong aria-hidden="true">3.1.</strong> draft</a></li><li class="chapter-item expanded "><a href="../leveldb/code-struct.html"><strong aria-hidden="true">3.2.</strong> 代码模块间关系</a></li><li class="chapter-item expanded "><a href="../leveldb/write.html"><strong aria-hidden="true">3.3.</strong> Write 流程</a></li><li class="chapter-item expanded "><a href="../leveldb/read.html"><strong aria-hidden="true">3.4.</strong> Read 流程</a></li><li class="chapter-item expanded "><a href="../leveldb/table-format.html"><strong aria-hidden="true">3.5.</strong> SSTable 文件格式和读写</a></li><li class="chapter-item expanded "><a href="../leveldb/versionset.html"><strong aria-hidden="true">3.6.</strong> versionset和Manifest</a></li><li class="chapter-item expanded "><a href="../leveldb/table-compact.html"><strong aria-hidden="true">3.7.</strong> Do Compact</a></li><li class="chapter-item expanded "><a href="../leveldb/iterator.html"><strong aria-hidden="true">3.8.</strong> Iterator迭代器</a></li><li class="chapter-item expanded "><a href="../leveldb/bloom-filter.html"><strong aria-hidden="true">3.9.</strong> Bloom filter</a></li></ol></li><li class="chapter-item expanded "><a href="../rocksdb/index.html"><strong aria-hidden="true">4.</strong> RocksDB</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rocksdb/draft.html"><strong aria-hidden="true">4.1.</strong> draft</a></li><li class="chapter-item expanded "><a href="../rocksdb/column-family.html"><strong aria-hidden="true">4.2.</strong> 主要struct引用关系</a></li><li class="chapter-item expanded "><a href="../rocksdb/wal.html"><strong aria-hidden="true">4.3.</strong> Write Ahead Log</a></li><li class="chapter-item expanded "><a href="../rocksdb/write.html"><strong aria-hidden="true">4.4.</strong> write 并发控制</a></li><li class="chapter-item expanded "><a href="../rocksdb/flush-and-compact.html"><strong aria-hidden="true">4.5.</strong> 后台flush和compact线程</a></li><li class="chapter-item expanded "><a href="../rocksdb/leveled-compaction-picker.html"><strong aria-hidden="true">4.6.</strong> Leveled Compaction Picker</a></li><li class="chapter-item expanded "><a href="../rocksdb/read.html"><strong aria-hidden="true">4.7.</strong> read 流程</a></li><li class="chapter-item expanded "><a href="../rocksdb/blob.html"><strong aria-hidden="true">4.8.</strong> Blob</a></li><li class="chapter-item expanded "><a href="../rocksdb/transaction.html"><strong aria-hidden="true">4.9.</strong> 事务</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rocksdb/optimistic-transaction.html"><strong aria-hidden="true">4.9.1.</strong> Optimistic Transaction</a></li><li class="chapter-item expanded "><a href="../rocksdb/transaction-lock-mgr.html"><strong aria-hidden="true">4.9.2.</strong> Transaction lock mgr</a></li><li class="chapter-item expanded "><a href="../rocksdb/two-phase-commit.html"><strong aria-hidden="true">4.9.3.</strong> two phase commit</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../tidb/index.html"><strong aria-hidden="true">5.</strong> TiDB</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tidb/note.html"><strong aria-hidden="true">5.1.</strong> tidb学习资料整理</a></li><li class="chapter-item expanded "><a href="../tidb/main.html"><strong aria-hidden="true">5.2.</strong> Server Main Loop</a></li><li class="chapter-item expanded "><a href="../tidb/insert.html"><strong aria-hidden="true">5.3.</strong> Insert 语句</a></li><li class="chapter-item expanded "><a href="../tidb/select.html"><strong aria-hidden="true">5.4.</strong> Select 语句</a></li><li class="chapter-item expanded "><a href="../tidb/types.html"><strong aria-hidden="true">5.5.</strong> 数据类型</a></li><li class="chapter-item expanded "><a href="../tidb/expression.html"><strong aria-hidden="true">5.6.</strong> expression</a></li><li class="chapter-item expanded "><a href="../tidb/ddl.html"><strong aria-hidden="true">5.7.</strong> Online DDL</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tidb/ddl-schema-in-tikv.html"><strong aria-hidden="true">5.7.1.</strong> Schema 存储</a></li><li class="chapter-item expanded "><a href="../tidb/ddl-schema-load.html"><strong aria-hidden="true">5.7.2.</strong> Schema Cache和加载</a></li><li class="chapter-item expanded "><a href="../tidb/ddl-schema-modification.html"><strong aria-hidden="true">5.7.3.</strong> Schema Modification</a></li><li class="chapter-item expanded "><a href="../tidb/ddl-online-schema-change.html"><strong aria-hidden="true">5.7.4.</strong> Online Schema Change</a></li></ol></li><li class="chapter-item expanded "><a href="../tidb/stat.html"><strong aria-hidden="true">5.8.</strong> 统计信息</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tidb/basic-concepts.html"><strong aria-hidden="true">5.8.1.</strong> 基本概念</a></li><li class="chapter-item expanded "><a href="../tidb/stat-tables.html"><strong aria-hidden="true">5.8.2.</strong> stats tables</a></li><li class="chapter-item expanded "><a href="../tidb/stat-analyze.html"><strong aria-hidden="true">5.8.3.</strong> Analyze</a></li><li class="chapter-item expanded "><a href="../tidb/stat-feedback.html"><strong aria-hidden="true">5.8.4.</strong> Query Feedback</a></li><li class="chapter-item expanded "><a href="../tidb/use-stat.html"><strong aria-hidden="true">5.8.5.</strong> 统计信息使用场景</a></li></ol></li><li class="chapter-item expanded "><a href="../tidb/logical-optimize.html"><strong aria-hidden="true">5.9.</strong> Logical Optimize</a></li><li class="chapter-item expanded "><a href="../tidb/physical-optimize.html"><strong aria-hidden="true">5.10.</strong> Physical Optimize</a></li><li class="chapter-item expanded "><a href="../tidb/datasource.html"><strong aria-hidden="true">5.11.</strong> DataSource</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tidb/datasource-build.html"><strong aria-hidden="true">5.11.1.</strong> buildDataSource</a></li><li class="chapter-item expanded "><a href="../tidb/range.html"><strong aria-hidden="true">5.11.2.</strong> 索引范围计算</a></li><li class="chapter-item expanded "><a href="../tidb/tablecodec.html"><strong aria-hidden="true">5.11.3.</strong> table/index存储编码</a></li><li class="chapter-item expanded "><a href="../tidb/datasource-paritionProcessor.html"><strong aria-hidden="true">5.11.4.</strong> paritionProcessor</a></li><li class="chapter-item expanded "><a href="../tidb/datasource-predict-push-down.html"><strong aria-hidden="true">5.11.5.</strong> PredicatePushDown</a></li><li class="chapter-item expanded "><a href="../tidb/datasource-physical-optimize.html"><strong aria-hidden="true">5.11.6.</strong> Physical Optimize</a></li><li class="chapter-item expanded "><a href="../tidb/datasource-executors.html"><strong aria-hidden="true">5.11.7.</strong> Executors</a></li></ol></li><li class="chapter-item expanded "><a href="../tidb/distsql.html"><strong aria-hidden="true">5.12.</strong> DistSQL</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tidb/cop-region-cache.html"><strong aria-hidden="true">5.12.1.</strong> ReginCache</a></li><li class="chapter-item expanded "><a href="../tidb/tikv-grpc-client.html"><strong aria-hidden="true">5.12.2.</strong> TiKV GRPC Client</a></li><li class="chapter-item expanded "><a href="../tidb/cop-task.html"><strong aria-hidden="true">5.12.3.</strong> CopTask</a></li><li class="chapter-item expanded "><a href="../tidb/cop-iterator-worker.html"><strong aria-hidden="true">5.12.4.</strong> CopIteratorWorker</a></li><li class="chapter-item expanded "><a href="../tidb/coprocessor.html"><strong aria-hidden="true">5.12.5.</strong> Coprocessor</a></li></ol></li><li class="chapter-item expanded "><a href="../tidb/join.html"><strong aria-hidden="true">5.13.</strong> Join</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tidb/join-alg.html"><strong aria-hidden="true">5.13.1.</strong> Join算法</a></li><li class="chapter-item expanded "><a href="../tidb/join-logical-optimize.html"><strong aria-hidden="true">5.13.2.</strong> Logical Optimize</a></li><li class="chapter-item expanded "><a href="../tidb/join-physical-optimize.html"><strong aria-hidden="true">5.13.3.</strong> Physical Optimize</a></li><li class="chapter-item expanded "><a href="../tidb/hash-join.html"><strong aria-hidden="true">5.13.4.</strong> Executor: Hash Join</a></li><li class="chapter-item expanded "><a href="../tidb/merge-join.html"><strong aria-hidden="true">5.13.5.</strong> Executor: Merge Join</a></li><li class="chapter-item expanded "><a href="../tidb/index-lookup-join.html"><strong aria-hidden="true">5.13.6.</strong> Executor: Index Lookup Join</a></li></ol></li><li class="chapter-item expanded "><a href="../tidb/agg.html"><strong aria-hidden="true">5.14.</strong> Agg</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tidb/agg-func.html"><strong aria-hidden="true">5.14.1.</strong> AggFunc</a></li><li class="chapter-item expanded "><a href="../tidb/hash-agg.html"><strong aria-hidden="true">5.14.2.</strong> Executor: HashAgg</a></li><li class="chapter-item expanded "><a href="../tidb/stream-agg.html"><strong aria-hidden="true">5.14.3.</strong> Executor: StreamAgg</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../pd/index.html"><strong aria-hidden="true">6.</strong> PD</a></li><li class="chapter-item expanded "><a href="../tikv/index.html"><strong aria-hidden="true">7.</strong> TiKV</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tikv/raft2.html"><strong aria-hidden="true">7.1.</strong> raft-rs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tikv/raft_rawnode.html"><strong aria-hidden="true">7.1.1.</strong> RawNode</a></li><li class="chapter-item expanded "><a href="../tikv/raft_storage.html"><strong aria-hidden="true">7.1.2.</strong> Storage</a></li><li class="chapter-item expanded "><a href="../tikv/progress_tracker.html"><strong aria-hidden="true">7.1.3.</strong> ProgressTracker</a></li><li class="chapter-item expanded "><a href="../tikv/raft_hearbeat.html"><strong aria-hidden="true">7.1.4.</strong> Hearbeat</a></li><li class="chapter-item expanded "><a href="../tikv/raft_election.html"><strong aria-hidden="true">7.1.5.</strong> Election</a></li><li class="chapter-item expanded "><a href="../tikv/raft_log_entry.html"><strong aria-hidden="true">7.1.6.</strong> LogEntry</a></li><li class="chapter-item expanded "><a href="../tikv/raft_snapshot.html"><strong aria-hidden="true">7.1.7.</strong> Snapshot</a></li><li class="chapter-item expanded "><a href="../tikv/raft_conf_change.html"><strong aria-hidden="true">7.1.8.</strong> ConfChange</a></li><li class="chapter-item expanded "><a href="../tikv/raft_read_index.html"><strong aria-hidden="true">7.1.9.</strong> ReadIndex</a></li></ol></li><li class="chapter-item expanded "><a href="../tikv/raft-kv.html"><strong aria-hidden="true">7.2.</strong> RaftKV</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tikv/batch-system2.html"><strong aria-hidden="true">7.2.1.</strong> BatchSystem</a></li><li class="chapter-item expanded "><a href="../tikv/raft_message.html"><strong aria-hidden="true">7.2.2.</strong> RaftMessage</a></li><li class="chapter-item expanded "><a href="../tikv/raft_client.html"><strong aria-hidden="true">7.2.3.</strong> Raft Client</a></li><li class="chapter-item expanded "><a href="../tikv/region2.html"><strong aria-hidden="true">7.2.4.</strong> Region</a></li><li class="chapter-item expanded "><a href="../tikv/peer_storage2.html"><strong aria-hidden="true">7.2.5.</strong> PeerStorage</a></li><li class="chapter-item expanded "><a href="../tikv/thread_local_engine.html"><strong aria-hidden="true">7.2.6.</strong> Thread Local Engine</a></li><li class="chapter-item expanded "><a href="../tikv/leader_lease.html"><strong aria-hidden="true">7.2.7.</strong> Leader Lease</a></li><li class="chapter-item expanded "><a href="../tikv/read_index.html"><strong aria-hidden="true">7.2.8.</strong> Read Index</a></li><li class="chapter-item expanded "><a href="../tikv/async_snapshot2.html"><strong aria-hidden="true">7.2.9.</strong> Async Snapshot</a></li><li class="chapter-item expanded "><a href="../tikv/async_write2.html"><strong aria-hidden="true">7.2.10.</strong> Async Write</a></li><li class="chapter-item expanded "><a href="../tikv/region_epoch.html"><strong aria-hidden="true">7.2.11.</strong> Region Epoch</a></li><li class="chapter-item expanded "><a href="../tikv/conf_change2.html"><strong aria-hidden="true">7.2.12.</strong> Conf Change</a></li><li class="chapter-item expanded "><a href="../tikv/split_region2.html"><strong aria-hidden="true">7.2.13.</strong> Split Region</a></li><li class="chapter-item expanded "><a href="../tikv/merge_region2.html"><strong aria-hidden="true">7.2.14.</strong> Merge Region</a></li></ol></li><li class="chapter-item expanded "><a href="../tikv/storage2.html"><strong aria-hidden="true">7.3.</strong> Storage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tikv/percolator.html"><strong aria-hidden="true">7.3.1.</strong> Percolator</a></li><li class="chapter-item expanded "><a href="../tikv/percolator_in_tikv.html"><strong aria-hidden="true">7.3.2.</strong> Percolator In TiKV</a></li><li class="chapter-item expanded "><a href="../tikv/tikv_2pc.html"><strong aria-hidden="true">7.3.3.</strong> 2PC</a></li><li class="chapter-item expanded "><a href="../tikv/async_commit.html"><strong aria-hidden="true">7.3.4.</strong> AsyncCommit</a></li><li class="chapter-item expanded "><a href="../tikv/tikv_1pc.html"><strong aria-hidden="true">7.3.5.</strong> OnePC</a></li><li class="chapter-item expanded "><a href="../tikv/pessimistic_lock.html"><strong aria-hidden="true">7.3.6.</strong> 悲观事务</a></li><li class="chapter-item expanded "><a href="../tikv/txn_recovery.html"><strong aria-hidden="true">7.3.7.</strong> Resolve Lock</a></li><li class="chapter-item expanded "><a href="../tikv/scheduler2.html"><strong aria-hidden="true">7.3.8.</strong> Scheduler</a></li><li class="chapter-item expanded "><a href="../tikv/wait_lock.html"><strong aria-hidden="true">7.3.9.</strong> Wait Lock</a></li><li class="chapter-item expanded "><a href="../tikv/dead_lock.html"><strong aria-hidden="true">7.3.10.</strong> 死锁检测</a></li><li class="chapter-item expanded "><a href="../tikv/group_commit.html"><strong aria-hidden="true">7.3.11.</strong> TiDB分组提交</a></li><li class="chapter-item expanded "><a href="../tikv/storage_scanner.html"><strong aria-hidden="true">7.3.12.</strong> Scanner</a></li></ol></li><li class="chapter-item expanded "><a href="../tikv/coprocessor.html"><strong aria-hidden="true">7.4.</strong> Coprocessor</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tikv/rpn_expression.html"><strong aria-hidden="true">7.4.1.</strong> RpnExpression</a></li><li class="chapter-item expanded "><a href="../tikv/aggr_function.html"><strong aria-hidden="true">7.4.2.</strong> AggrFunction</a></li><li class="chapter-item expanded "><a href="../tikv/batch_executor.html"><strong aria-hidden="true">7.4.3.</strong> BatchExecutor</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tikv/ranges_scanner.html"><strong aria-hidden="true">7.4.3.1.</strong> RangesScanner</a></li><li class="chapter-item expanded "><a href="../tikv/scan_executor.html"><strong aria-hidden="true">7.4.3.2.</strong> ScanExecutor</a></li><li class="chapter-item expanded "><a href="../tikv/batch_executor_selection.html"><strong aria-hidden="true">7.4.3.3.</strong> Selection</a></li><li class="chapter-item expanded "><a href="../tikv/batch_executor_agg.html"><strong aria-hidden="true">7.4.3.4.</strong> AggExecutor</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../tikv/performance.html"><strong aria-hidden="true">7.5.</strong> Performance(draft)</a></li><li class="chapter-item expanded "><a href="../tikv/yatp.html"><strong aria-hidden="true">7.6.</strong> yatp</a></li><li class="chapter-item expanded "><a href="../tikv/draft/index.html"><strong aria-hidden="true">7.7.</strong> draft</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tikv/PeerFsm.html"><strong aria-hidden="true">7.7.1.</strong> PeerFsm</a></li><li class="chapter-item expanded "><a href="../tikv/mvcc_reader.html"><strong aria-hidden="true">7.7.2.</strong> MvccReader</a></li><li class="chapter-item expanded "><a href="../tikv/batch-system.html"><strong aria-hidden="true">7.7.3.</strong> BatchSystem</a></li><li class="chapter-item expanded "><a href="../tikv/poller.html"><strong aria-hidden="true">7.7.4.</strong> Poller</a></li><li class="chapter-item expanded "><a href="../tikv/region.html"><strong aria-hidden="true">7.7.5.</strong> Region</a></li><li class="chapter-item expanded "><a href="../tikv/peer_storage.html"><strong aria-hidden="true">7.7.6.</strong> PeerStorage</a></li><li class="chapter-item expanded "><a href="../tikv/raft_log_engine.html"><strong aria-hidden="true">7.7.7.</strong> RaftLogEngine</a></li><li class="chapter-item expanded "><a href="../tikv/async_snapshot.html"><strong aria-hidden="true">7.7.8.</strong> async snapshot</a></li><li class="chapter-item expanded "><a href="../tikv/async_write.html"><strong aria-hidden="true">7.7.9.</strong> async write</a></li><li class="chapter-item expanded "><a href="../tikv/conf-change.html"><strong aria-hidden="true">7.7.10.</strong> Conf Change</a></li><li class="chapter-item expanded "><a href="../tikv/split-region.html"><strong aria-hidden="true">7.7.11.</strong> Split Region</a></li><li class="chapter-item expanded "><a href="../tikv/merge-region.html"><strong aria-hidden="true">7.7.12.</strong> Merge Region</a></li><li class="chapter-item expanded "><a href="../tikv/txn_types.html"><strong aria-hidden="true">7.7.13.</strong> Txn Types</a></li><li class="chapter-item expanded "><a href="../tikv/MvccTxn.html"><strong aria-hidden="true">7.7.14.</strong> MvccTxn</a></li><li class="chapter-item expanded "><a href="../tikv/scheduler.html"><strong aria-hidden="true">7.7.15.</strong> Scheduler</a></li><li class="chapter-item expanded "><a href="../tikv/command.html"><strong aria-hidden="true">7.7.16.</strong> Command</a></li><li class="chapter-item expanded "><a href="../tikv/tidb_txn.html"><strong aria-hidden="true">7.7.17.</strong> TiDB-TiKV 事务</a></li><li class="chapter-item expanded "><a href="../tikv/storage.html"><strong aria-hidden="true">7.7.18.</strong> Storage</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../crossbeam/index.html"><strong aria-hidden="true">8.</strong> crossbeam</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../crossbeam/skiplist.html"><strong aria-hidden="true">8.1.</strong> SkipList(draft)</a></li></ol></li><li class="chapter-item expanded "><a href="../rust/index.html"><strong aria-hidden="true">9.</strong> draft Rust</a></li><li class="chapter-item expanded "><a href="../golang/index.html"><strong aria-hidden="true">10.</strong> Go</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../golang/pgm.html"><strong aria-hidden="true">10.1.</strong> Runtime PGM调度模型</a></li><li class="chapter-item expanded "><a href="../golang/goroutine-stack.html"><strong aria-hidden="true">10.2.</strong> Goroutine Stack</a></li><li class="chapter-item expanded "><a href="../golang/memory.html"><strong aria-hidden="true">10.3.</strong> Memory分配</a></li><li class="chapter-item expanded "><a href="../golang/GC.html"><strong aria-hidden="true">10.4.</strong> GC</a></li><li class="chapter-item expanded "><a href="../golang/context.html"><strong aria-hidden="true">10.5.</strong> Context</a></li><li class="chapter-item expanded "><a href="../golang/defer-panic-recover.html"><strong aria-hidden="true">10.6.</strong> defer-panic-recover</a></li></ol></li><li class="chapter-item expanded "><a href="../clickhouse/index.html"><strong aria-hidden="true">11.</strong> ClickHouse</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../clickhouse/server-main.html"><strong aria-hidden="true">11.1.</strong> Server main</a></li><li class="chapter-item expanded "><a href="../clickhouse/block.html"><strong aria-hidden="true">11.2.</strong> block</a></li><li class="chapter-item expanded "><a href="../clickhouse/blockio.html"><strong aria-hidden="true">11.3.</strong> blockio</a></li><li class="chapter-item expanded "><a href="../clickhouse/storage.html"><strong aria-hidden="true">11.4.</strong> Storage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../clickhouse/merge-tree-data.html"><strong aria-hidden="true">11.4.1.</strong> MergeTreeData</a></li><li class="chapter-item expanded "><a href="../clickhouse/storage-merge-tree.html"><strong aria-hidden="true">11.4.2.</strong> StorageMergeTree</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../tokio/index.html"><strong aria-hidden="true">12.</strong> tokio</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tokio/executor.html"><strong aria-hidden="true">12.1.</strong> Executor</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tokio/park.html"><strong aria-hidden="true">12.1.1.</strong> Park</a></li><li class="chapter-item expanded "><a href="../tokio/thread-pool.html"><strong aria-hidden="true">12.1.2.</strong> thread pool</a></li></ol></li><li class="chapter-item expanded "><a href="../tokio/driver.html"><strong aria-hidden="true">12.2.</strong> driver</a></li><li class="chapter-item expanded "><a href="../tokio/io.html"><strong aria-hidden="true">12.3.</strong> io</a></li><li class="chapter-item expanded "><a href="../tokio/codec.html"><strong aria-hidden="true">12.4.</strong> codec</a></li><li class="chapter-item expanded "><a href="../tokio/channel.html"><strong aria-hidden="true">12.5.</strong> channel</a></li><li class="chapter-item expanded "><a href="../tokio/waker.html"><strong aria-hidden="true">12.6.</strong> waker</a></li></ol></li><li class="chapter-item expanded "><a href="../kafka/index.html"><strong aria-hidden="true">13.</strong> Kafka</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../kafka/client-producer.html"><strong aria-hidden="true">13.1.</strong> client: producer</a></li><li class="chapter-item expanded "><a href="../kafka/group-coordinator.html"><strong aria-hidden="true">13.2.</strong> group coordinator</a></li><li class="chapter-item expanded "><a href="../kafka/kafka-produce-fetch.html"><strong aria-hidden="true">13.3.</strong> produce and fetch</a></li><li class="chapter-item expanded "><a href="../kafka/log.html"><strong aria-hidden="true">13.4.</strong> log</a></li><li class="chapter-item expanded "><a href="../kafka/partition.html"><strong aria-hidden="true">13.5.</strong> Partition</a></li><li class="chapter-item expanded "><a href="../kafka/controller-main.html"><strong aria-hidden="true">13.6.</strong> Controller</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../kafka/controller-channel-manager.html"><strong aria-hidden="true">13.6.1.</strong> 通信管理 channelManager</a></li><li class="chapter-item expanded "><a href="../kafka/controller-elect.html"><strong aria-hidden="true">13.6.2.</strong> 选举</a></li><li class="chapter-item expanded "><a href="../kafka/controller-zk.html"><strong aria-hidden="true">13.6.3.</strong> zk监听处理</a></li></ol></li><li class="chapter-item expanded "><a href="../kafka/replica-assignment.html"><strong aria-hidden="true">13.7.</strong> 副本迁移</a></li><li class="chapter-item expanded "><a href="../kafka/paritition-replica-statemachine.html"><strong aria-hidden="true">13.8.</strong> Partition/Replica状态机</a></li><li class="chapter-item expanded "><a href="../kafka/txn_coordinator.html"><strong aria-hidden="true">13.9.</strong> 事务</a></li><li class="chapter-item expanded "><a href="../kafka/stream.html"><strong aria-hidden="true">13.10.</strong> Stream</a></li></ol></li><li class="chapter-item expanded "><a href="../python/index.html"><strong aria-hidden="true">14.</strong> python</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../python/records/records.html"><strong aria-hidden="true">14.1.</strong> records</a></li></ol></li><li class="chapter-item expanded "><a href="../godot/index.html"><strong aria-hidden="true">15.</strong> Godot</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../godot/learning-note.html"><strong aria-hidden="true">15.1.</strong> godot 学习笔记</a></li><li class="chapter-item expanded "><a href="../godot/gdquest.html"><strong aria-hidden="true">15.2.</strong> gdquest tutorial</a></li></ol></li><li class="chapter-item expanded "><a href="../bevy/index.html"><strong aria-hidden="true">16.</strong> Bevy</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../bevy/first-impression-draft.html"><strong aria-hidden="true">16.1.</strong> bevy draft</a></li></ol></li><li class="chapter-item expanded "><a href="../blender/index.html"><strong aria-hidden="true">17.</strong> Blender</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../blender/manual-notes.html"><strong aria-hidden="true">17.1.</strong> blender manual notes</a></li></ol></li><li class="chapter-item expanded "><a href="../tensorflow/index.html"><strong aria-hidden="true">18.</strong> tensorflow inside</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tensorflow/executor.html"><strong aria-hidden="true">18.1.</strong> Executor: 执行Computation Sub Graph</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tensorflow/executor-subgraph-preprocess.html"><strong aria-hidden="true">18.1.1.</strong> SubGraph预处理：Node/NodeItem/TaggedNode</a></li><li class="chapter-item expanded "><a href="../tensorflow/flow-control-op.html"><strong aria-hidden="true">18.1.2.</strong> Flow control op: switch/merge/enter/exit/nextIteration</a></li><li class="chapter-item expanded "><a href="../tensorflow/executor-frame.html"><strong aria-hidden="true">18.1.3.</strong> Frame: ControlFlowInfo/FrameInfo/FrameState/IterationState</a></li></ol></li><li class="chapter-item expanded "><a href="../tensorflow/direct-session.html"><strong aria-hidden="true">18.2.</strong> DirectSession: 单机执行computation graph</a></li><li class="chapter-item expanded "><a href="../tensorflow/rendezvous.html"><strong aria-hidden="true">18.3.</strong> RendezVous：跨设备，跨主机通信</a></li><li class="chapter-item expanded "><a href="../tensorflow/device.html" class="active"><strong aria-hidden="true">18.4.</strong> Device：计算单元抽象(CPU/GPU)</a></li></ol></li><li class="chapter-item expanded "><a href="../tensorflow/optimize.html"><strong aria-hidden="true">19.</strong> tensorflow模型对接工程优化</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tensorflow/export-keras-model-as-tf-frozen-graph.html"><strong aria-hidden="true">19.1.</strong> 将keras模型导出为tf frozen graph</a></li><li class="chapter-item expanded "><a href="../tensorflow/replace-placeholder-with-iterator.html"><strong aria-hidden="true">19.2.</strong> 使用dataset iterator 优化keras model预测的吞吐量</a></li><li class="chapter-item expanded "><a href="../tensorflow/stat-cpu-gpu-load.html"><strong aria-hidden="true">19.3.</strong> 统计cpu/gpu 负载率脚本</a></li></ol></li><li class="chapter-item expanded "><a href="../pthread/index.html"><strong aria-hidden="true">20.</strong> pthread</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../pthread/pthread-primer.html"><strong aria-hidden="true">20.1.</strong> Pthread Primer笔记</a></li><li class="chapter-item expanded "><a href="../pthread/glibc-pthread-implement-thread-life-cycle.html"><strong aria-hidden="true">20.2.</strong> Pthread线程生命周期</a></li><li class="chapter-item expanded "><a href="../pthread/glibc-pthread-implement-sync.html"><strong aria-hidden="true">20.3.</strong> Pthread线程同步</a></li></ol></li><li class="chapter-item expanded "><a href="../react/index.html"><strong aria-hidden="true">21.</strong> react</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../react/from-jsx-to-dom.html"><strong aria-hidden="true">21.1.</strong> 从jsx到html dom的流程分析</a></li></ol></li><li class="chapter-item expanded "><a href="../java/index.html"><strong aria-hidden="true">22.</strong> hotspot</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../java/hotspot-debug-under-osx.html"><strong aria-hidden="true">22.1.</strong> osx下编译调试hotspot</a></li><li class="chapter-item expanded "><a href="../java/hotspot-thread-created-when-init.html"><strong aria-hidden="true">22.2.</strong> jvm的初始化时创建的线程</a></li><li class="chapter-item expanded "><a href="../java/hotspot-class-file-load-and-run.html"><strong aria-hidden="true">22.3.</strong> class文件的加载和执行</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">blog</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2><a class="header" href="#tensorflow-device" id="tensorflow-device">Tensorflow Device</a></h2>
<h3><a class="header" href="#摘要" id="摘要">摘要</a></h3>
<p>Device包含了自己的memory的计算单元，它是对GPU， TPU， CPU等计算device统一抽象，主要的接口有以下几个：</p>
<ol>
<li>GetAllocator: 这个返回一个allocator，负责在device上分配memory</li>
<li>Compute，ComputeAsync: 负责执行OpKernel中的运算。</li>
<li>ResourceMgr: 负责管理分配在Device上的Variable</li>
<li>tensorflow device thread pool: 调度执行device compute的线程池。</li>
</ol>
<p>其中1，2最重要，分别负责allocate memory和执行opkernel的compute。</p>
<h3><a class="header" href="#device" id="device">Device</a></h3>
<h4><a class="header" href="#device的继承关系" id="device的继承关系">Device的继承关系</a></h4>
<p><img src="./images/device_inherit.jpeg" alt="Device继承关系" /></p>
<h4><a class="header" href="#device-thread-pool" id="device-thread-pool">Device thread pool</a></h4>
<p>Gpu对应的线程池创建有三种模式:global, gpu_private, gpu_shared，由环境变量TF_GPU_THREAD_MODE控制, 默认是global的。</p>
<ol>
<li>global: GPU uses threads shared with CPU in the main compute, thread-pool. This is currently the default.</li>
<li>gpu_private: GPU uses threads dedicated to this device.</li>
<li>gpu_shared: All GPUs share a dedicated thread pool.</li>
</ol>
<p>在DirectSession::Ruinternal调用executor的时候，会把device_thread_pool 传给Executor</p>
<pre><code class="language-cpp">//  DirectSession::RunInternal

    thread::ThreadPool* device_thread_pool =
        item.device-&gt;tensorflow_device_thread_pool();
    if (!device_thread_pool) {
      args.runner = default_runner;
    } else {
      args.runner = [this, device_thread_pool](Executor::Args::Closure c) {
        SchedClosure(device_thread_pool, std::move(c));
      };
    }
    item.executor-&gt;RunAsync(args, barrier-&gt;Get());
  }
</code></pre>
<p>在分布式tensorflow中，GraphMgr::StartParallelExecutors, 通过类似的方法吧device_thread_pool 传给executor。</p>
<pre><code class="language-cpp">//GraphMgr::StartParallelExecutors
    thread::ThreadPool* device_thread_pool =
        item.device-&gt;tensorflow_device_thread_pool();
    if (!device_thread_pool) {
      args.runner = default_runner;
    } else {
      args.runner = [this, device_thread_pool](Executor::Args::Closure c) {
        SchedClosure(device_thread_pool, std::move(c));
      };
    }
    item.executor-&gt;RunAsync(args, barrier-&gt;Get());
  }
</code></pre>
<p>在Executor::schedulReady中，会使用这个runner去执行node的process。</p>
<pre><code class="language-cpp">// Executor::ScheduleReady
//Case 1

//other code and 
// Schedule to run all the ready ops in thread pool.
runner_([=]() { Process(tagged_node, scheduled_usec); });

//other code and if...
// Dispatch to another thread since there is plenty of work to
// do for this thread.
runner_(std::bind(&amp;ExecutorState::Process, this, *curr_expensive_node, scheduled_usec));

//other code under some if ...
 // There are inline nodes to run already. We dispatch this expensive
 // node to other thread.
runner_(std::bind(&amp;ExecutorState::Process, this, *curr_expensive_node, scheduled_usec));
</code></pre>
<h3><a class="header" href="#device-context" id="device-context">Device Context</a></h3>
<p>GpuDeviceContext有点复杂，有不少的代码逻辑是用来处理一个GPU 启动了多个streams的，graph中的每个node会分配一个stream_id。</p>
<h4><a class="header" href="#device-context-map" id="device-context-map">device context map</a></h4>
<p>每个node对应OpKernel的device_context会使用这个stream_i来CopyCpuTensorToDevice， CopyDeviceTensorToCpu, 在Compute的时候，opkernel的计算也会这个stream_id对应的stream上执行。</p>
<p><img src="./images/device_context.jpeg" alt="device context" /></p>
<p>不过现在好玩的是现在BaseGPuDevice的构造函数中max_stream传的值为1，使用多个stream的特性没开，大家用的是同一个stream，在stackflow上搜到了一个为啥这么做的回答：</p>
<blockquote>
<p>Yeah, you are looking at code that is a bit stale; we've tried experimenting with multiple compute streams and have found that, so far, it hasn't helped that much in important use cases. We technically support multiple streams, but we never turn it on.</p>
<p>At some point in the future, we want to start playing around with using multiple compute streams again though, so it's nice to have the code there.</p>
<p>Devices can use as many DeviceContexts as they want; on GPU we only use a few and we use FillContextMap to do the mapping, but it really depends on the hardware how they should be used</p>
</blockquote>
<p>目前这个特性是实验性的，在重要的use cases中没起到重要的作用，所以这个特性没开, 后续可能会开，所以这部分代码保留了。</p>
<p>除此之外，还在stream_id的基础上做了一个EigenDevice，估计是给Eigen计算提供的吧。无论怎样，DeviceContext给每个Opkernel包了stream_id，然后在执行的时候，会找到这个stream_id对应的cuda_stream。</p>
<h4><a class="header" href="#eigengpudevice" id="eigengpudevice">Eigen::GpuDevice</a></h4>
<p>给Eigen::GpuDevice封装了一个EigenCudaStreamDevice, 用来给Eigen::GpuDevice allocate和deallocate memroy, 具体的怎么用的估计要去挖Eigen的代码了, 还有scratch buffer的作用也不是很明白。</p>
<pre><code class="language-cpp">class EigenCudaStreamDevice : public ::Eigen::StreamInterface 
  // allocate
  void* allocate(size_t num_bytes) const override{
    //使用device的allocate进行内存分配
  }

  //deallocate
  void deallocate(void* buffer) const override {
   //异步的AsyncFreeData，最终调用的是Device的allocate去free内存
  }
</code></pre>
<h4><a class="header" href="#compute" id="compute">Compute</a></h4>
<p>Gpu的Compute部分主要有BaseGpuDevice::ComputeHelper来处理，主要是如果gpu使用了多个stream特性的话，需要等待input的stream都完成之后，再执行op对应的stream。</p>
<pre><code class="language-cpp">void BaseGPUDevice::ComputeHelper(OpKernel* op_kernel,
  //如果是多个stream,需要等待所有input的stream执行完毕。
  if (num_streams &gt; 1) {
    // If this op's device context is different from the other contexts,
    // we must wait on the stream.
    for (int i = 0; i &lt; context-&gt;num_inputs(); ++i) {
      const GPUDeviceContext* idc =
          static_cast&lt;GPUDeviceContext*&gt;(context-&gt;input_device_context(i));
      //other code: 主要是log
      if (idc-&gt;stream() != stream) stream-&gt;ThenWaitFor(idc-&gt;stream());
    }
  gpu::cuda::ScopedActivateExecutorContext scoped_activation{stream-&gt;parent()};
  op_kernel-&gt;Compute(context);
  //other code: 主要是cuda执行状态检查
</code></pre>
<h3><a class="header" href="#device-factory" id="device-factory">Device Factory</a></h3>
<p>DeviceFactory的继承关系如下：</p>
<p><img src="./images/device_factory.jpeg" alt="image" /></p>
<p>DeviceFactory包含了一些静态函数： AddDevices, NewDevices, Register, GetFactory, 和一个virutal CreateDevices。
NewDevices用于自动化测试，对外主要接口是AddDevices, Register负责device factory的注册, 这两者的调用关系如下：</p>
<p><img src="./images/device_factory_add_devices.jpeg" alt="image" /></p>
<p>DeviceFactory也采用了static registor的方法，自动注册了DeviceFactory,</p>
<pre><code class="language-cpp">//device_type, DeviceFactoryClass, Prority
REGISTER_LOCAL_DEVICE_FACTORY(&quot;CPU&quot;, ThreadPoolDeviceFactory, 60);
REGISTER_LOCAL_DEVICE_FACTORY(&quot;CPU&quot;, GPUCompatibleCPUDeviceFactory, 70);
REGISTER_LOCAL_DEVICE_FACTORY(&quot;GPU&quot;, GPUDeviceFactory, 210);
</code></pre>
<p>这个宏展开后是声明了一个Registrar的 static var, 在它的构造函数中会去调用DeviceFactory的Register注册Factory，
而Register函数最后会把Factory 加入到static device_factories中。</p>
<pre><code class="language-cpp">template &lt;class Factory&gt;
class Registrar {
 public:
  explicit Registrar(const string&amp; device_type, int priority = 50) {
    DeviceFactory::Register(device_type, new Factory(), priority);
  }
}
</code></pre>
<p>在创建一个DirectSesion, 或者GrpServer::Init(每个worker都会起一个GrpcServer)的时候，会调用AddDevices获取worker上的devices.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../tensorflow/rendezvous.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../tensorflow/optimize.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../tensorflow/rendezvous.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../tensorflow/optimize.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
